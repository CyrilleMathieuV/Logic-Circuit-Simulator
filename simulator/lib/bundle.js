"use strict";(()=>{var og=Object.create;var as=Object.defineProperty,ig=Object.defineProperties,sg=Object.getOwnPropertyDescriptor,ag=Object.getOwnPropertyDescriptors,ug=Object.getOwnPropertyNames,xd=Object.getOwnPropertySymbols,lg=Object.getPrototypeOf,_d=Object.prototype.hasOwnProperty,cg=Object.prototype.propertyIsEnumerable;var Cn=Math.pow,wd=(o,n,e)=>n in o?as(o,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[n]=e,L=(o,n)=>{for(var e in n||={})_d.call(n,e)&&wd(o,e,n[e]);if(xd)for(var e of xd(n))cg.call(n,e)&&wd(o,e,n[e]);return o},j=(o,n)=>ig(o,ag(n)),c=(o,n)=>as(o,"name",{value:n,configurable:!0});var pg=(o,n)=>()=>(o&&(n=o(o=0)),n);var rt=(o,n)=>()=>(n||o((n={exports:{}}).exports,n),n.exports),dg=(o,n)=>{for(var e in n)as(o,e,{get:n[e],enumerable:!0})},Sd=(o,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of ug(n))!_d.call(o,i)&&i!==e&&as(o,i,{get:()=>n[i],enumerable:!(r=sg(n,i))||r.enumerable});return o};var ge=(o,n,e)=>(e=o!=null?og(lg(o)):{},Sd(n||!o||!o.__esModule?as(e,"default",{value:o,enumerable:!0}):e,o)),Ad=o=>Sd(as({},"__esModule",{value:!0}),o);var di=(o,n,e)=>new Promise((r,i)=>{var s=l=>{try{u(e.next(l))}catch(p){i(p)}},a=l=>{try{u(e.throw(l))}catch(p){i(p)}},u=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,a);u((e=e.apply(o,n)).next())});var sa=rt((yc,xc)=>{(function(o,n){typeof define=="function"&&define.amd?define([],n):typeof yc<"u"?n():(n(),o.FileSaver={})})(yc,function(){"use strict";function o(u,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}c(o,"b");function n(u,l,p){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){a(d.response,l,p)},d.onerror=function(){console.error("could not download file")},d.send()}c(n,"c");function e(u){var l=new XMLHttpRequest;l.open("HEAD",u,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}c(e,"d");function r(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(l)}}c(r,"e");var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,l,p){var d=i.URL||i.webkitURL,h=document.createElement("a");l=l||u.name||"download",h.download=l,h.rel="noopener",typeof u=="string"?(h.href=u,h.origin===location.origin?r(h):e(h.href)?n(u,l,p):r(h,h.target="_blank")):(h.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){r(h)},0))}:"msSaveOrOpenBlob"in navigator?function(u,l,p){if(l=l||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(o(u,p),l);else if(e(u))n(u,l,p);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){r(d)})}}:function(u,l,p,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof u=="string")return n(u,l,p);var h=u.type==="application/octet-stream",m=/constructor/i.test(i.HTMLElement)||i.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||h&&m||s)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var v=C.result;v=f?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=v:location=v,d=null},C.readAsDataURL(u)}else{var D=i.URL||i.webkitURL,b=D.createObjectURL(u);d?d.location=b:location.href=b,d=null,setTimeout(function(){D.revokeObjectURL(b)},4e4)}});i.saveAs=a.saveAs=a,typeof xc<"u"&&(xc.exports=a)})});var wo=rt((wc,_c)=>{(function(o,n){typeof wc=="object"&&typeof _c<"u"?_c.exports=n():typeof define=="function"&&define.amd?define(n):o.JSON5=n()})(wc,function(){"use strict";function o(R,N){return N={exports:{}},R(N,N.exports),N.exports}c(o,"createCommonjsModule");var n=o(function(R){var N=R.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=N)}),e=o(function(R){var N=R.exports={version:"2.6.5"};typeof __e=="number"&&(__e=N)}),r=e.version,i=c(function(R){return typeof R=="object"?R!==null:typeof R=="function"},"_isObject"),s=c(function(R){if(!i(R))throw TypeError(R+" is not an object!");return R},"_anObject"),a=c(function(R){try{return!!R()}catch{return!0}},"_fails"),u=!a(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),l=n.document,p=i(l)&&i(l.createElement),d=c(function(R){return p?l.createElement(R):{}},"_domCreate"),h=!u&&!a(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7}),m=c(function(R,N){if(!i(R))return R;var pe,ue;if(N&&typeof(pe=R.toString)=="function"&&!i(ue=pe.call(R))||typeof(pe=R.valueOf)=="function"&&!i(ue=pe.call(R))||!N&&typeof(pe=R.toString)=="function"&&!i(ue=pe.call(R)))return ue;throw TypeError("Can't convert object to primitive value")},"_toPrimitive"),f=Object.defineProperty,C=u?Object.defineProperty:c(function(N,pe,ue){if(s(N),pe=m(pe,!0),s(ue),h)try{return f(N,pe,ue)}catch{}if("get"in ue||"set"in ue)throw TypeError("Accessors not supported!");return"value"in ue&&(N[pe]=ue.value),N},"defineProperty"),D={f:C},b=c(function(R,N){return{enumerable:!(R&1),configurable:!(R&2),writable:!(R&4),value:N}},"_propertyDesc"),v=u?function(R,N,pe){return D.f(R,N,b(1,pe))}:function(R,N,pe){return R[N]=pe,R},_={}.hasOwnProperty,M=c(function(R,N){return _.call(R,N)},"_has"),A=0,E=Math.random(),B=c(function(R){return"Symbol(".concat(R===void 0?"":R,")_",(++A+E).toString(36))},"_uid"),I=!1,k=o(function(R){var N="__core-js_shared__",pe=n[N]||(n[N]={});(R.exports=function(ue,be){return pe[ue]||(pe[ue]=be!==void 0?be:{})})("versions",[]).push({version:e.version,mode:I?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),S=k("native-function-to-string",Function.toString),H=o(function(R){var N=B("src"),pe="toString",ue=(""+S).split(pe);e.inspectSource=function(be){return S.call(be)},(R.exports=function(be,Le,Ue,gn){var Bt=typeof Ue=="function";Bt&&(M(Ue,"name")||v(Ue,"name",Le)),be[Le]!==Ue&&(Bt&&(M(Ue,N)||v(Ue,N,be[Le]?""+be[Le]:ue.join(String(Le)))),be===n?be[Le]=Ue:gn?be[Le]?be[Le]=Ue:v(be,Le,Ue):(delete be[Le],v(be,Le,Ue)))})(Function.prototype,pe,c(function(){return typeof this=="function"&&this[N]||S.call(this)},"toString"))}),F=c(function(R){if(typeof R!="function")throw TypeError(R+" is not a function!");return R},"_aFunction"),q=c(function(R,N,pe){if(F(R),N===void 0)return R;switch(pe){case 1:return function(ue){return R.call(N,ue)};case 2:return function(ue,be){return R.call(N,ue,be)};case 3:return function(ue,be,Le){return R.call(N,ue,be,Le)}}return function(){return R.apply(N,arguments)}},"_ctx"),te="prototype",se=c(function(R,N,pe){var ue=R&se.F,be=R&se.G,Le=R&se.S,Ue=R&se.P,gn=R&se.B,Bt=be?n:Le?n[N]||(n[N]={}):(n[N]||{})[te],li=be?e:e[N]||(e[N]={}),is=li[te]||(li[te]={}),mr,Pr,Dn,ss;be&&(pe=N);for(mr in pe)Pr=!ue&&Bt&&Bt[mr]!==void 0,Dn=(Pr?Bt:pe)[mr],ss=gn&&Pr?q(Dn,n):Ue&&typeof Dn=="function"?q(Function.call,Dn):Dn,Bt&&H(Bt,mr,Dn,R&se.U),li[mr]!=Dn&&v(li,mr,ss),Ue&&is[mr]!=Dn&&(is[mr]=Dn)},"$export");n.core=e,se.F=1,se.G=2,se.S=4,se.P=8,se.B=16,se.W=32,se.U=64,se.R=128;var le=se,X=Math.ceil,J=Math.floor,Te=c(function(R){return isNaN(R=+R)?0:(R>0?J:X)(R)},"_toInteger"),Ce=c(function(R){if(R==null)throw TypeError("Can't call method on  "+R);return R},"_defined"),_e=c(function(R){return function(N,pe){var ue=String(Ce(N)),be=Te(pe),Le=ue.length,Ue,gn;return be<0||be>=Le?R?"":void 0:(Ue=ue.charCodeAt(be),Ue<55296||Ue>56319||be+1===Le||(gn=ue.charCodeAt(be+1))<56320||gn>57343?R?ue.charAt(be):Ue:R?ue.slice(be,be+2):(Ue-55296<<10)+(gn-56320)+65536)}},"_stringAt"),it=_e(!1);le(le.P,"String",{codePointAt:c(function(N){return it(this,N)},"codePointAt")});var hn=e.String.codePointAt,jt=Math.max,Yt=Math.min,Ct=c(function(R,N){return R=Te(R),R<0?jt(R+N,0):Yt(R,N)},"_toAbsoluteIndex"),$e=String.fromCharCode,Ke=String.fromCodePoint;le(le.S+le.F*(!!Ke&&Ke.length!=1),"String",{fromCodePoint:c(function(N){for(var pe=arguments,ue=[],be=arguments.length,Le=0,Ue;be>Le;){if(Ue=+pe[Le++],Ct(Ue,1114111)!==Ue)throw RangeError(Ue+" is not a valid code point");ue.push(Ue<65536?$e(Ue):$e(((Ue-=65536)>>10)+55296,Ue%1024+56320))}return ue.join("")},"fromCodePoint")});var ze=e.String.fromCodePoint,Wt=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,si=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Br=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,yo={Space_Separator:Wt,ID_Start:si,ID_Continue:Br},tt={isSpaceSeparator:c(function(N){return typeof N=="string"&&yo.Space_Separator.test(N)},"isSpaceSeparator"),isIdStartChar:c(function(N){return typeof N=="string"&&(N>="a"&&N<="z"||N>="A"&&N<="Z"||N==="$"||N==="_"||yo.ID_Start.test(N))},"isIdStartChar"),isIdContinueChar:c(function(N){return typeof N=="string"&&(N>="a"&&N<="z"||N>="A"&&N<="Z"||N>="0"&&N<="9"||N==="$"||N==="_"||N==="\u200C"||N==="\u200D"||yo.ID_Continue.test(N))},"isIdContinueChar"),isDigit:c(function(N){return typeof N=="string"&&/[0-9]/.test(N)},"isDigit"),isHexDigit:c(function(N){return typeof N=="string"&&/[0-9A-Fa-f]/.test(N)},"isHexDigit")},os,Ot,Gt,hr,Nn,fn,Ze,Kn,Ln,Xr=c(function(N,pe){os=String(N),Ot="start",Gt=[],hr=0,Nn=1,fn=0,Ze=void 0,Kn=void 0,Ln=void 0;do Ze=En(),X2[Ot]();while(Ze.type!=="eof");return typeof pe=="function"?jr({"":Ln},"",pe):Ln},"parse");function jr(R,N,pe){var ue=R[N];if(ue!=null&&typeof ue=="object")if(Array.isArray(ue))for(var be=0;be<ue.length;be++){var Le=String(be),Ue=jr(ue,Le,pe);Ue===void 0?delete ue[Le]:Object.defineProperty(ue,Le,{value:Ue,writable:!0,enumerable:!0,configurable:!0})}else for(var gn in ue){var Bt=jr(ue,gn,pe);Bt===void 0?delete ue[gn]:Object.defineProperty(ue,gn,{value:Bt,writable:!0,enumerable:!0,configurable:!0})}return pe.call(R,N,ue)}c(jr,"internalize");var Se,ve,fr,mn,Ne;function En(){for(Se="default",ve="",fr=!1,mn=1;;){Ne=Vn();var R=Dc[Se]();if(R)return R}}c(En,"lex");function Vn(){if(os[hr])return String.fromCodePoint(os.codePointAt(hr))}c(Vn,"peek");function V(){var R=Vn();return R===`
`?(Nn++,fn=0):R?fn+=R.length:fn++,R&&(hr+=R.length),R}c(V,"read");var Dc={default:c(function(){switch(Ne){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":V();return;case"/":V(),Se="comment";return;case void 0:return V(),Be("eof")}if(tt.isSpaceSeparator(Ne)){V();return}return Dc[Ot]()},"default$1"),comment:c(function(){switch(Ne){case"*":V(),Se="multiLineComment";return;case"/":V(),Se="singleLineComment";return}throw ct(V())},"comment"),multiLineComment:c(function(){switch(Ne){case"*":V(),Se="multiLineCommentAsterisk";return;case void 0:throw ct(V())}V()},"multiLineComment"),multiLineCommentAsterisk:c(function(){switch(Ne){case"*":V();return;case"/":V(),Se="default";return;case void 0:throw ct(V())}V(),Se="multiLineComment"},"multiLineCommentAsterisk"),singleLineComment:c(function(){switch(Ne){case`
`:case"\r":case"\u2028":case"\u2029":V(),Se="default";return;case void 0:return V(),Be("eof")}V()},"singleLineComment"),value:c(function(){switch(Ne){case"{":case"[":return Be("punctuator",V());case"n":return V(),vt("ull"),Be("null",null);case"t":return V(),vt("rue"),Be("boolean",!0);case"f":return V(),vt("alse"),Be("boolean",!1);case"-":case"+":V()==="-"&&(mn=-1),Se="sign";return;case".":ve=V(),Se="decimalPointLeading";return;case"0":ve=V(),Se="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ve=V(),Se="decimalInteger";return;case"I":return V(),vt("nfinity"),Be("numeric",1/0);case"N":return V(),vt("aN"),Be("numeric",NaN);case'"':case"'":fr=V()==='"',ve="",Se="string";return}throw ct(V())},"value"),identifierNameStartEscape:c(function(){if(Ne!=="u")throw ct(V());V();var N=ai();switch(N){case"$":case"_":break;default:if(!tt.isIdStartChar(N))throw bd();break}ve+=N,Se="identifierName"},"identifierNameStartEscape"),identifierName:c(function(){switch(Ne){case"$":case"_":case"\u200C":case"\u200D":ve+=V();return;case"\\":V(),Se="identifierNameEscape";return}if(tt.isIdContinueChar(Ne)){ve+=V();return}return Be("identifier",ve)},"identifierName"),identifierNameEscape:c(function(){if(Ne!=="u")throw ct(V());V();var N=ai();switch(N){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!tt.isIdContinueChar(N))throw bd();break}ve+=N,Se="identifierName"},"identifierNameEscape"),sign:c(function(){switch(Ne){case".":ve=V(),Se="decimalPointLeading";return;case"0":ve=V(),Se="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ve=V(),Se="decimalInteger";return;case"I":return V(),vt("nfinity"),Be("numeric",mn*(1/0));case"N":return V(),vt("aN"),Be("numeric",NaN)}throw ct(V())},"sign$1"),zero:c(function(){switch(Ne){case".":ve+=V(),Se="decimalPoint";return;case"e":case"E":ve+=V(),Se="decimalExponent";return;case"x":case"X":ve+=V(),Se="hexadecimal";return}return Be("numeric",mn*0)},"zero"),decimalInteger:c(function(){switch(Ne){case".":ve+=V(),Se="decimalPoint";return;case"e":case"E":ve+=V(),Se="decimalExponent";return}if(tt.isDigit(Ne)){ve+=V();return}return Be("numeric",mn*Number(ve))},"decimalInteger"),decimalPointLeading:c(function(){if(tt.isDigit(Ne)){ve+=V(),Se="decimalFraction";return}throw ct(V())},"decimalPointLeading"),decimalPoint:c(function(){switch(Ne){case"e":case"E":ve+=V(),Se="decimalExponent";return}if(tt.isDigit(Ne)){ve+=V(),Se="decimalFraction";return}return Be("numeric",mn*Number(ve))},"decimalPoint"),decimalFraction:c(function(){switch(Ne){case"e":case"E":ve+=V(),Se="decimalExponent";return}if(tt.isDigit(Ne)){ve+=V();return}return Be("numeric",mn*Number(ve))},"decimalFraction"),decimalExponent:c(function(){switch(Ne){case"+":case"-":ve+=V(),Se="decimalExponentSign";return}if(tt.isDigit(Ne)){ve+=V(),Se="decimalExponentInteger";return}throw ct(V())},"decimalExponent"),decimalExponentSign:c(function(){if(tt.isDigit(Ne)){ve+=V(),Se="decimalExponentInteger";return}throw ct(V())},"decimalExponentSign"),decimalExponentInteger:c(function(){if(tt.isDigit(Ne)){ve+=V();return}return Be("numeric",mn*Number(ve))},"decimalExponentInteger"),hexadecimal:c(function(){if(tt.isHexDigit(Ne)){ve+=V(),Se="hexadecimalInteger";return}throw ct(V())},"hexadecimal"),hexadecimalInteger:c(function(){if(tt.isHexDigit(Ne)){ve+=V();return}return Be("numeric",mn*Number(ve))},"hexadecimalInteger"),string:c(function(){switch(Ne){case"\\":V(),ve+=At();return;case'"':if(fr)return V(),Be("string",ve);ve+=V();return;case"'":if(!fr)return V(),Be("string",ve);ve+=V();return;case`
`:case"\r":throw ct(V());case"\u2028":case"\u2029":j2(Ne);break;case void 0:throw ct(V())}ve+=V()},"string"),start:c(function(){switch(Ne){case"{":case"[":return Be("punctuator",V())}Se="value"},"start"),beforePropertyName:c(function(){switch(Ne){case"$":case"_":ve=V(),Se="identifierName";return;case"\\":V(),Se="identifierNameStartEscape";return;case"}":return Be("punctuator",V());case'"':case"'":fr=V()==='"',Se="string";return}if(tt.isIdStartChar(Ne)){ve+=V(),Se="identifierName";return}throw ct(V())},"beforePropertyName"),afterPropertyName:c(function(){if(Ne===":")return Be("punctuator",V());throw ct(V())},"afterPropertyName"),beforePropertyValue:c(function(){Se="value"},"beforePropertyValue"),afterPropertyValue:c(function(){switch(Ne){case",":case"}":return Be("punctuator",V())}throw ct(V())},"afterPropertyValue"),beforeArrayValue:c(function(){if(Ne==="]")return Be("punctuator",V());Se="value"},"beforeArrayValue"),afterArrayValue:c(function(){switch(Ne){case",":case"]":return Be("punctuator",V())}throw ct(V())},"afterArrayValue"),end:c(function(){throw ct(V())},"end")};function Be(R,N){return{type:R,value:N,line:Nn,column:fn}}c(Be,"newToken");function vt(R){for(var N=0,pe=R;N<pe.length;N+=1){var ue=pe[N],be=Vn();if(be!==ue)throw ct(V());V()}}c(vt,"literal");function At(){var R=Vn();switch(R){case"b":return V(),"\b";case"f":return V(),"\f";case"n":return V(),`
`;case"r":return V(),"\r";case"t":return V(),"	";case"v":return V(),"\v";case"0":if(V(),tt.isDigit(Vn()))throw ct(V());return"\0";case"x":return V(),Hn();case"u":return V(),ai();case`
`:case"\u2028":case"\u2029":return V(),"";case"\r":return V(),Vn()===`
`&&V(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw ct(V());case void 0:throw ct(V())}return V()}c(At,"escape");function Hn(){var R="",N=Vn();if(!tt.isHexDigit(N)||(R+=V(),N=Vn(),!tt.isHexDigit(N)))throw ct(V());return R+=V(),String.fromCodePoint(parseInt(R,16))}c(Hn,"hexEscape");function ai(){for(var R="",N=4;N-- >0;){var pe=Vn();if(!tt.isHexDigit(pe))throw ct(V());R+=V()}return String.fromCodePoint(parseInt(R,16))}c(ai,"unicodeEscape");var X2={start:c(function(){if(Ze.type==="eof")throw ui();Cc()},"start"),beforePropertyName:c(function(){switch(Ze.type){case"identifier":case"string":Kn=Ze.value,Ot="afterPropertyName";return;case"punctuator":du();return;case"eof":throw ui()}},"beforePropertyName"),afterPropertyName:c(function(){if(Ze.type==="eof")throw ui();Ot="beforePropertyValue"},"afterPropertyName"),beforePropertyValue:c(function(){if(Ze.type==="eof")throw ui();Cc()},"beforePropertyValue"),beforeArrayValue:c(function(){if(Ze.type==="eof")throw ui();if(Ze.type==="punctuator"&&Ze.value==="]"){du();return}Cc()},"beforeArrayValue"),afterPropertyValue:c(function(){if(Ze.type==="eof")throw ui();switch(Ze.value){case",":Ot="beforePropertyName";return;case"}":du()}},"afterPropertyValue"),afterArrayValue:c(function(){if(Ze.type==="eof")throw ui();switch(Ze.value){case",":Ot="beforeArrayValue";return;case"]":du()}},"afterArrayValue"),end:c(function(){},"end")};function Cc(){var R;switch(Ze.type){case"punctuator":switch(Ze.value){case"{":R={};break;case"[":R=[];break}break;case"null":case"boolean":case"numeric":case"string":R=Ze.value;break}if(Ln===void 0)Ln=R;else{var N=Gt[Gt.length-1];Array.isArray(N)?N.push(R):Object.defineProperty(N,Kn,{value:R,writable:!0,enumerable:!0,configurable:!0})}if(R!==null&&typeof R=="object")Gt.push(R),Array.isArray(R)?Ot="beforeArrayValue":Ot="beforePropertyName";else{var pe=Gt[Gt.length-1];pe==null?Ot="end":Array.isArray(pe)?Ot="afterArrayValue":Ot="afterPropertyValue"}}c(Cc,"push");function du(){Gt.pop();var R=Gt[Gt.length-1];R==null?Ot="end":Array.isArray(R)?Ot="afterArrayValue":Ot="afterPropertyValue"}c(du,"pop");function ct(R){return hu(R===void 0?"JSON5: invalid end of input at "+Nn+":"+fn:"JSON5: invalid character '"+yd(R)+"' at "+Nn+":"+fn)}c(ct,"invalidChar");function ui(){return hu("JSON5: invalid end of input at "+Nn+":"+fn)}c(ui,"invalidEOF");function bd(){return fn-=5,hu("JSON5: invalid identifier character at "+Nn+":"+fn)}c(bd,"invalidIdentifier");function j2(R){console.warn("JSON5: '"+yd(R)+"' in strings is not valid ECMAScript; consider escaping")}c(j2,"separatorChar");function yd(R){var N={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(N[R])return N[R];if(R<" "){var pe=R.charCodeAt(0).toString(16);return"\\x"+("00"+pe).substring(pe.length)}return R}c(yd,"formatChar");function hu(R){var N=new SyntaxError(R);return N.lineNumber=Nn,N.columnNumber=fn,N}c(hu,"syntaxError");var Y2=c(function(N,pe,ue){var be=[],Le="",Ue,gn,Bt="",li;if(pe!=null&&typeof pe=="object"&&!Array.isArray(pe)&&(ue=pe.space,li=pe.quote,pe=pe.replacer),typeof pe=="function")gn=pe;else if(Array.isArray(pe)){Ue=[];for(var is=0,mr=pe;is<mr.length;is+=1){var Pr=mr[is],Dn=void 0;typeof Pr=="string"?Dn=Pr:(typeof Pr=="number"||Pr instanceof String||Pr instanceof Number)&&(Dn=String(Pr)),Dn!==void 0&&Ue.indexOf(Dn)<0&&Ue.push(Dn)}}return ue instanceof Number?ue=Number(ue):ue instanceof String&&(ue=String(ue)),typeof ue=="number"?ue>0&&(ue=Math.min(10,Math.floor(ue)),Bt="          ".substr(0,ue)):typeof ue=="string"&&(Bt=ue.substr(0,10)),ss("",{"":N});function ss(nt,nn){var Me=nn[nt];switch(Me!=null&&(typeof Me.toJSON5=="function"?Me=Me.toJSON5(nt):typeof Me.toJSON=="function"&&(Me=Me.toJSON(nt))),gn&&(Me=gn.call(nn,nt,Me)),Me instanceof Number?Me=Number(Me):Me instanceof String?Me=String(Me):Me instanceof Boolean&&(Me=Me.valueOf()),Me){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof Me=="string")return fu(Me,!1);if(typeof Me=="number")return String(Me);if(typeof Me=="object")return Array.isArray(Me)?ng(Me):eg(Me)}c(ss,"serializeProperty");function fu(nt){for(var nn={"'":.1,'"':.2},Me={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},Kt="",gr=0;gr<nt.length;gr++){var rn=nt[gr];switch(rn){case"'":case'"':nn[rn]++,Kt+=rn;continue;case"\0":if(tt.isDigit(nt[gr+1])){Kt+="\\x00";continue}}if(Me[rn]){Kt+=Me[rn];continue}if(rn<" "){var ci=rn.charCodeAt(0).toString(16);Kt+="\\x"+("00"+ci).substring(ci.length);continue}Kt+=rn}var Yr=li||Object.keys(nn).reduce(function(xo,pi){return nn[xo]<nn[pi]?xo:pi});return Kt=Kt.replace(new RegExp(Yr,"g"),Me[Yr]),Yr+Kt+Yr}c(fu,"quoteString");function eg(nt){if(be.indexOf(nt)>=0)throw TypeError("Converting circular structure to JSON5");be.push(nt);var nn=Le;Le=Le+Bt;for(var Me=Ue||Object.keys(nt),Kt=[],gr=0,rn=Me;gr<rn.length;gr+=1){var ci=rn[gr],Yr=ss(ci,nt);if(Yr!==void 0){var xo=tg(ci)+":";Bt!==""&&(xo+=" "),xo+=Yr,Kt.push(xo)}}var pi;if(Kt.length===0)pi="{}";else{var mu;if(Bt==="")mu=Kt.join(","),pi="{"+mu+"}";else{var rg=`,
`+Le;mu=Kt.join(rg),pi=`{
`+Le+mu+`,
`+nn+"}"}}return be.pop(),Le=nn,pi}c(eg,"serializeObject");function tg(nt){if(nt.length===0)return fu(nt,!0);var nn=String.fromCodePoint(nt.codePointAt(0));if(!tt.isIdStartChar(nn))return fu(nt,!0);for(var Me=nn.length;Me<nt.length;Me++)if(!tt.isIdContinueChar(String.fromCodePoint(nt.codePointAt(Me))))return fu(nt,!0);return nt}c(tg,"serializeKey");function ng(nt){if(be.indexOf(nt)>=0)throw TypeError("Converting circular structure to JSON5");be.push(nt);var nn=Le;Le=Le+Bt;for(var Me=[],Kt=0;Kt<nt.length;Kt++){var gr=ss(String(Kt),nt);Me.push(gr!==void 0?gr:"null")}var rn;if(Me.length===0)rn="[]";else if(Bt===""){var ci=Me.join(",");rn="["+ci+"]"}else{var Yr=`,
`+Le,xo=Me.join(Yr);rn=`[
`+Le+xo+`,
`+nn+"]"}return be.pop(),Le=nn,rn}c(ng,"serializeArray")},"stringify"),K2={parse:Xr,stringify:Y2},Z2=K2,J2=Z2;return J2})});var Ud=rt((py,gu)=>{var Sc=function(){var o=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(a,u){if(!r[a]){r[a]={};for(var l=0;l<a.length;l++)r[a][a.charAt(l)]=l}return r[a][u]}c(i,"getBaseValue");var s={compressToBase64:function(a){if(a==null)return"";var u=s._compress(a,6,function(l){return n.charAt(l)});switch(u.length%4){default:case 0:return u;case 1:return u+"===";case 2:return u+"==";case 3:return u+"="}},decompressFromBase64:function(a){return a==null?"":a==""?null:s._decompress(a.length,32,function(u){return i(n,a.charAt(u))})},compressToUTF16:function(a){return a==null?"":s._compress(a,15,function(u){return o(u+32)})+" "},decompressFromUTF16:function(a){return a==null?"":a==""?null:s._decompress(a.length,16384,function(u){return a.charCodeAt(u)-32})},compressToUint8Array:function(a){for(var u=s.compress(a),l=new Uint8Array(u.length*2),p=0,d=u.length;p<d;p++){var h=u.charCodeAt(p);l[p*2]=h>>>8,l[p*2+1]=h%256}return l},decompressFromUint8Array:function(a){if(a==null)return s.decompress(a);for(var u=new Array(a.length/2),l=0,p=u.length;l<p;l++)u[l]=a[l*2]*256+a[l*2+1];var d=[];return u.forEach(function(h){d.push(o(h))}),s.decompress(d.join(""))},compressToEncodedURIComponent:function(a){return a==null?"":s._compress(a,6,function(u){return e.charAt(u)})},decompressFromEncodedURIComponent:function(a){return a==null?"":a==""?null:(a=a.replace(/ /g,"+"),s._decompress(a.length,32,function(u){return i(e,a.charAt(u))}))},compress:function(a){return s._compress(a,16,function(u){return o(u)})},_compress:function(a,u,l){if(a==null)return"";var p,d,h={},m={},f="",C="",D="",b=2,v=3,_=2,M=[],A=0,E=0,B;for(B=0;B<a.length;B+=1)if(f=a.charAt(B),Object.prototype.hasOwnProperty.call(h,f)||(h[f]=v++,m[f]=!0),C=D+f,Object.prototype.hasOwnProperty.call(h,C))D=C;else{if(Object.prototype.hasOwnProperty.call(m,D)){if(D.charCodeAt(0)<256){for(p=0;p<_;p++)A=A<<1,E==u-1?(E=0,M.push(l(A)),A=0):E++;for(d=D.charCodeAt(0),p=0;p<8;p++)A=A<<1|d&1,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=d>>1}else{for(d=1,p=0;p<_;p++)A=A<<1|d,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=0;for(d=D.charCodeAt(0),p=0;p<16;p++)A=A<<1|d&1,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=d>>1}b--,b==0&&(b=Math.pow(2,_),_++),delete m[D]}else for(d=h[D],p=0;p<_;p++)A=A<<1|d&1,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=d>>1;b--,b==0&&(b=Math.pow(2,_),_++),h[C]=v++,D=String(f)}if(D!==""){if(Object.prototype.hasOwnProperty.call(m,D)){if(D.charCodeAt(0)<256){for(p=0;p<_;p++)A=A<<1,E==u-1?(E=0,M.push(l(A)),A=0):E++;for(d=D.charCodeAt(0),p=0;p<8;p++)A=A<<1|d&1,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=d>>1}else{for(d=1,p=0;p<_;p++)A=A<<1|d,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=0;for(d=D.charCodeAt(0),p=0;p<16;p++)A=A<<1|d&1,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=d>>1}b--,b==0&&(b=Math.pow(2,_),_++),delete m[D]}else for(d=h[D],p=0;p<_;p++)A=A<<1|d&1,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=d>>1;b--,b==0&&(b=Math.pow(2,_),_++)}for(d=2,p=0;p<_;p++)A=A<<1|d&1,E==u-1?(E=0,M.push(l(A)),A=0):E++,d=d>>1;for(;;)if(A=A<<1,E==u-1){M.push(l(A));break}else E++;return M.join("")},decompress:function(a){return a==null?"":a==""?null:s._decompress(a.length,32768,function(u){return a.charCodeAt(u)})},_decompress:function(a,u,l){var p=[],d,h=4,m=4,f=3,C="",D=[],b,v,_,M,A,E,B,I={val:l(0),position:u,index:1};for(b=0;b<3;b+=1)p[b]=b;for(_=0,A=Math.pow(2,2),E=1;E!=A;)M=I.val&I.position,I.position>>=1,I.position==0&&(I.position=u,I.val=l(I.index++)),_|=(M>0?1:0)*E,E<<=1;switch(d=_){case 0:for(_=0,A=Math.pow(2,8),E=1;E!=A;)M=I.val&I.position,I.position>>=1,I.position==0&&(I.position=u,I.val=l(I.index++)),_|=(M>0?1:0)*E,E<<=1;B=o(_);break;case 1:for(_=0,A=Math.pow(2,16),E=1;E!=A;)M=I.val&I.position,I.position>>=1,I.position==0&&(I.position=u,I.val=l(I.index++)),_|=(M>0?1:0)*E,E<<=1;B=o(_);break;case 2:return""}for(p[3]=B,v=B,D.push(B);;){if(I.index>a)return"";for(_=0,A=Math.pow(2,f),E=1;E!=A;)M=I.val&I.position,I.position>>=1,I.position==0&&(I.position=u,I.val=l(I.index++)),_|=(M>0?1:0)*E,E<<=1;switch(B=_){case 0:for(_=0,A=Math.pow(2,8),E=1;E!=A;)M=I.val&I.position,I.position>>=1,I.position==0&&(I.position=u,I.val=l(I.index++)),_|=(M>0?1:0)*E,E<<=1;p[m++]=o(_),B=m-1,h--;break;case 1:for(_=0,A=Math.pow(2,16),E=1;E!=A;)M=I.val&I.position,I.position>>=1,I.position==0&&(I.position=u,I.val=l(I.index++)),_|=(M>0?1:0)*E,E<<=1;p[m++]=o(_),B=m-1,h--;break;case 2:return D.join("")}if(h==0&&(h=Math.pow(2,f),f++),p[B])C=p[B];else if(B===m)C=v+v.charAt(0);else return null;D.push(C),p[m++]=v+C.charAt(0),h--,v=C,h==0&&(h=Math.pow(2,f),f++)}}};return s}();typeof define=="function"&&define.amd?define(function(){return Sc}):typeof gu<"u"&&gu!=null?gu.exports=Sc:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return Sc})});var Gd=rt(Ac=>{var Wd;(function(o){typeof DO_NOT_EXPORT_CRC>"u"?typeof Ac=="object"?o(Ac):typeof define=="function"&&define.amd?define(function(){var n={};return o(n),n}):o(Wd={}):o(Wd={})})(function(o){o.version="1.2.0";function n(){for(var u=0,l=new Array(256),p=0;p!=256;++p)u=p,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,l[p]=u;return typeof Int32Array<"u"?new Int32Array(l):l}c(n,"signed_crc_table");var e=n();function r(u,l){for(var p=l^-1,d=u.length-1,h=0;h<d;)p=p>>>8^e[(p^u.charCodeAt(h++))&255],p=p>>>8^e[(p^u.charCodeAt(h++))&255];return h===d&&(p=p>>>8^e[(p^u.charCodeAt(h))&255]),p^-1}c(r,"crc32_bstr");function i(u,l){if(u.length>1e4)return s(u,l);for(var p=l^-1,d=u.length-3,h=0;h<d;)p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255];for(;h<d+3;)p=p>>>8^e[(p^u[h++])&255];return p^-1}c(i,"crc32_buf");function s(u,l){for(var p=l^-1,d=u.length-7,h=0;h<d;)p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255],p=p>>>8^e[(p^u[h++])&255];for(;h<d+7;)p=p>>>8^e[(p^u[h++])&255];return p^-1}c(s,"crc32_buf_8");function a(u,l){for(var p=l^-1,d=0,h=u.length,m,f;d<h;)m=u.charCodeAt(d++),m<128?p=p>>>8^e[(p^m)&255]:m<2048?(p=p>>>8^e[(p^(192|m>>6&31))&255],p=p>>>8^e[(p^(128|m&63))&255]):m>=55296&&m<57344?(m=(m&1023)+64,f=u.charCodeAt(d++)&1023,p=p>>>8^e[(p^(240|m>>8&7))&255],p=p>>>8^e[(p^(128|m>>2&63))&255],p=p>>>8^e[(p^(128|f>>6&15|(m&3)<<4))&255],p=p>>>8^e[(p^(128|f&63))&255]):(p=p>>>8^e[(p^(224|m>>12&15))&255],p=p>>>8^e[(p^(128|m>>6&63))&255],p=p>>>8^e[(p^(128|m&63))&255]);return p^-1}c(a,"crc32_str"),o.table=e,o.bstr=r,o.buf=i,o.str=a})});var e0=rt((my,Jd)=>{var Qd=Gd(),zt=new Uint8Array(4),$d=new Int32Array(zt.buffer),Xd=new Uint32Array(zt.buffer),vg={UNDEFINED:0,METERS:1,INCHES:2};function bg(o,n,e){var r=[],i=o.length;if(i===0)return r;var s=n<0?Math.max(0,n+i):n||0;for(e!==void 0&&(i=e<0?e+i:e);i-- >s;)r[i-s]=o[i];return r}c(bg,"sliced");function jd(o,n,e="tEXt"){if(o=String(o),n=String(n),n.length&&(!/^[\x00-\xFF]+$/.test(o)||!/^[\x00-\xFF]+$/.test(n)))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(o.length>=80)throw new Error('Keyword "'+o+'" is longer than the 79-character limit imposed by the PNG specification');let r=o.length+n.length+1,i=new Uint8Array(r),s=0,a;for(let u=0;u<o.length;u++){if(!(a=o.charCodeAt(u)))throw new Error("0x00 character is not permitted in tEXt keywords");i[s++]=a}i[s++]=0;for(let u=0;u<n.length;u++){if(!(a=n.charCodeAt(u)))throw new Error("0x00 character is not permitted in tEXt content");i[s++]=a}return{name:e,data:i}}c(jd,"textEncode");function Yd(o){o.data&&o.name&&(o=o.data);let n=!0,e="",r="";for(let i=0;i<o.length;i++){let s=o[i];if(n)s?r+=String.fromCharCode(s):n=!1;else if(s)e+=String.fromCharCode(s);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:r,text:e}}c(Yd,"textDecode");function Ec(o){if(o[0]!==137)throw new Error("Invalid .png file header");if(o[1]!==80)throw new Error("Invalid .png file header");if(o[2]!==78)throw new Error("Invalid .png file header");if(o[3]!==71)throw new Error("Invalid .png file header");if(o[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(o[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(o[6]!==26)throw new Error("Invalid .png file header");if(o[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");let n=!1,e=[],r=8;for(;r<o.length;){zt[3]=o[r++],zt[2]=o[r++],zt[1]=o[r++],zt[0]=o[r++];let i=Xd[0]+4,s=new Uint8Array(i);s[0]=o[r++],s[1]=o[r++],s[2]=o[r++],s[3]=o[r++];let a=String.fromCharCode(s[0])+String.fromCharCode(s[1])+String.fromCharCode(s[2])+String.fromCharCode(s[3]);if(!e.length&&a!=="IHDR")throw new Error("IHDR header missing");if(a==="IEND"){n=!0,e.push({name:a,data:new Uint8Array(0)});break}for(let d=4;d<i;d++)s[d]=o[r++];zt[3]=o[r++],zt[2]=o[r++],zt[1]=o[r++],zt[0]=o[r++];let u=$d[0];if(Qd.buf(s)!==u)throw new Error("CRC values for "+a+" header do not match, PNG file is likely corrupted");let p=new Uint8Array(s.buffer.slice(4));e.push({name:a,data:p})}if(!n)throw new Error(".png file ended prematurely: no IEND header was found");return e}c(Ec,"extractChunks");function Kd(o){let n=8,e=n,r;for(r=0;r<o.length;r++)n+=o[r].data.length,n+=12;let i=new Uint8Array(n);for(i[0]=137,i[1]=80,i[2]=78,i[3]=71,i[4]=13,i[5]=10,i[6]=26,i[7]=10,r=0;r<o.length;r++){let s=o[r],a=s.name,u=s.data,l=u.length,p=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)];Xd[0]=l,i[e++]=zt[3],i[e++]=zt[2],i[e++]=zt[1],i[e++]=zt[0],i[e++]=p[0],i[e++]=p[1],i[e++]=p[2],i[e++]=p[3];for(let h=0;h<l;)i[e++]=u[h++];let d=p.concat(bg(u));$d[0]=Qd.buf(d),i[e++]=zt[3],i[e++]=zt[2],i[e++]=zt[1],i[e++]=zt[0]}return i}c(Kd,"encodeChunks");function zd(o,n){let e,r,i,s;return e=o[n++],r=o[n++],i=o[n++],s=o[n],0|e<<24|r<<16|i<<8|s}c(zd,"readUint32");function qd(o,n,e){o[e]=(n&4278190080)>>24,o[e+1]=(n&16711680)>>16,o[e+2]=(n&65280)>>8,o[e+3]=n&255}c(qd,"writeUInt32");function yg(o){let n={};return Ec(o).forEach(r=>{switch(r.name){case"tEXt":n.tEXt||(n.tEXt={});let i=Yd(r.data);n.tEXt[i.keyword]=i.text;break;case"pHYs":n.pHYs={x:zd(r.data,0),y:zd(r.data,4),unit:r.data[8]};break;case"gAMA":case"cHRM":case"sRGB":case"IHDR":case"iCCP":default:n[r.name]=!0}}),n}c(yg,"readMetadata");function xg(o,n){let e=Ec(o);return Zd(e,n),new Buffer.from(Kd(e))}c(xg,"writeMetadata");function Zd(o,n){if(n.clear)for(let r=o.length-1;r--;)switch(o[r].name){case"IHDR":case"IDAT":case"IEND":break;default:o.splice(r,1)}if(n.tEXt)for(var e in n.tEXt)o.splice(-1,0,jd(e,n.tEXt[e]));if(n.pHYs){let r=new Uint8Array(9);qd(r,n.pHYs.x,0),qd(r,n.pHYs.y,4),r[8]=n.pHYs.units;let i=o.find(s=>s.name==="pHYs");i?i.data=r:o.splice(1,0,{name:"pHYs",data:r})}}c(Zd,"insertMetadata");Jd.exports={RESOLUTION_UNITS:vg,insertMetadata:Zd,readMetadata:yg,writeMetadata:xg,textEncode:jd,textDecode:Yd,extractChunks:Ec,encodeChunks:Kd}});var _o=rt(ce=>{"use strict";var wg=ce&&ce.__spreadArray||function(o,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,s;r<i;r++)(s||!(r in n))&&(s||(s=Array.prototype.slice.call(n,0,r)),s[r]=n[r]);return o.concat(s||Array.prototype.slice.call(n))};Object.defineProperty(ce,"__esModule",{value:!0});ce.dual=ce.getEndomorphismMonoid=ce.not=ce.SK=ce.hole=ce.pipe=ce.untupled=ce.tupled=ce.absurd=ce.decrement=ce.increment=ce.tuple=ce.flow=ce.flip=ce.constVoid=ce.constUndefined=ce.constNull=ce.constFalse=ce.constTrue=ce.constant=ce.unsafeCoerce=ce.identity=ce.apply=ce.getRing=ce.getSemiring=ce.getMonoid=ce.getSemigroup=ce.getBooleanAlgebra=void 0;var _g=c(function(o){return function(){return{meet:function(n,e){return function(r){return o.meet(n(r),e(r))}},join:function(n,e){return function(r){return o.join(n(r),e(r))}},zero:function(){return o.zero},one:function(){return o.one},implies:function(n,e){return function(r){return o.implies(n(r),e(r))}},not:function(n){return function(e){return o.not(n(e))}}}}},"getBooleanAlgebra");ce.getBooleanAlgebra=_g;var Sg=c(function(o){return function(){return{concat:function(n,e){return function(r){return o.concat(n(r),e(r))}}}}},"getSemigroup");ce.getSemigroup=Sg;var Ag=c(function(o){var n=(0,ce.getSemigroup)(o);return function(){return{concat:n().concat,empty:function(){return o.empty}}}},"getMonoid");ce.getMonoid=Ag;var Eg=c(function(o){return{add:function(n,e){return function(r){return o.add(n(r),e(r))}},zero:function(){return o.zero},mul:function(n,e){return function(r){return o.mul(n(r),e(r))}},one:function(){return o.one}}},"getSemiring");ce.getSemiring=Eg;var Tg=c(function(o){var n=(0,ce.getSemiring)(o);return{add:n.add,mul:n.mul,one:n.one,zero:n.zero,sub:function(e,r){return function(i){return o.sub(e(i),r(i))}}}},"getRing");ce.getRing=Tg;var Rg=c(function(o){return function(n){return n(o)}},"apply");ce.apply=Rg;function Tc(o){return o}c(Tc,"identity");ce.identity=Tc;ce.unsafeCoerce=Tc;function aa(o){return function(){return o}}c(aa,"constant");ce.constant=aa;ce.constTrue=aa(!0);ce.constFalse=aa(!1);ce.constNull=aa(null);ce.constUndefined=aa(void 0);ce.constVoid=ce.constUndefined;function Mg(o){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.length>1?o(n[1],n[0]):function(r){return o(r)(n[0])}}}c(Mg,"flip");ce.flip=Mg;function t0(o,n,e,r,i,s,a,u,l){switch(arguments.length){case 1:return o;case 2:return function(){return n(o.apply(this,arguments))};case 3:return function(){return e(n(o.apply(this,arguments)))};case 4:return function(){return r(e(n(o.apply(this,arguments))))};case 5:return function(){return i(r(e(n(o.apply(this,arguments)))))};case 6:return function(){return s(i(r(e(n(o.apply(this,arguments))))))};case 7:return function(){return a(s(i(r(e(n(o.apply(this,arguments)))))))};case 8:return function(){return u(a(s(i(r(e(n(o.apply(this,arguments))))))))};case 9:return function(){return l(u(a(s(i(r(e(n(o.apply(this,arguments)))))))))}}}c(t0,"flow");ce.flow=t0;function Ig(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return o}c(Ig,"tuple");ce.tuple=Ig;function Og(o){return o+1}c(Og,"increment");ce.increment=Og;function Bg(o){return o-1}c(Bg,"decrement");ce.decrement=Bg;function n0(o){throw new Error("Called `absurd` function which should be uncallable")}c(n0,"absurd");ce.absurd=n0;function Pg(o){return function(n){return o.apply(void 0,n)}}c(Pg,"tupled");ce.tupled=Pg;function kg(o){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return o(n)}}c(kg,"untupled");ce.untupled=kg;function Fg(o,n,e,r,i,s,a,u,l){switch(arguments.length){case 1:return o;case 2:return n(o);case 3:return e(n(o));case 4:return r(e(n(o)));case 5:return i(r(e(n(o))));case 6:return s(i(r(e(n(o)))));case 7:return a(s(i(r(e(n(o))))));case 8:return u(a(s(i(r(e(n(o)))))));case 9:return l(u(a(s(i(r(e(n(o))))))));default:{for(var p=arguments[0],d=1;d<arguments.length;d++)p=arguments[d](p);return p}}}c(Fg,"pipe");ce.pipe=Fg;ce.hole=n0;var Ng=c(function(o,n){return n},"SK");ce.SK=Ng;function Lg(o){return function(n){return!o(n)}}c(Lg,"not");ce.not=Lg;var Vg=c(function(){return{concat:function(o,n){return t0(o,n)},empty:Tc}},"getEndomorphismMonoid");ce.getEndomorphismMonoid=Vg;var Hg=c(function(o,n){var e=typeof o=="number"?function(r){return r.length>=o}:o;return function(){var r=Array.from(arguments);return e(arguments)?n.apply(this,r):function(i){return n.apply(void 0,wg([i],r,!1))}}},"dual");ce.dual=Hg});var ua=rt(he=>{"use strict";var Ug=he&&he.__spreadArray||function(o,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,s;r<i;r++)(s||!(r in n))&&(s||(s=Array.prototype.slice.call(n,0,r)),s[r]=n[r]);return o.concat(s||Array.prototype.slice.call(n))};Object.defineProperty(he,"__esModule",{value:!0});he.flatMapReader=he.flatMapTask=he.flatMapIO=he.flatMapEither=he.flatMapOption=he.flatMapNullable=he.liftOption=he.liftNullable=he.fromReadonlyNonEmptyArray=he.has=he.emptyRecord=he.emptyReadonlyArray=he.tail=he.head=he.isNonEmpty=he.singleton=he.right=he.left=he.isRight=he.isLeft=he.some=he.none=he.isSome=he.isNone=void 0;var ls=_o(),Wg=c(function(o){return o._tag==="None"},"isNone");he.isNone=Wg;var Gg=c(function(o){return o._tag==="Some"},"isSome");he.isSome=Gg;he.none={_tag:"None"};var zg=c(function(o){return{_tag:"Some",value:o}},"some");he.some=zg;var qg=c(function(o){return o._tag==="Left"},"isLeft");he.isLeft=qg;var Qg=c(function(o){return o._tag==="Right"},"isRight");he.isRight=Qg;var $g=c(function(o){return{_tag:"Left",left:o}},"left");he.left=$g;var Xg=c(function(o){return{_tag:"Right",right:o}},"right");he.right=Xg;var jg=c(function(o){return[o]},"singleton");he.singleton=jg;var Yg=c(function(o){return o.length>0},"isNonEmpty");he.isNonEmpty=Yg;var Kg=c(function(o){return o[0]},"head");he.head=Kg;var Zg=c(function(o){return o.slice(1)},"tail");he.tail=Zg;he.emptyReadonlyArray=[];he.emptyRecord={};he.has=Object.prototype.hasOwnProperty;var Jg=c(function(o){return Ug([o[0]],o.slice(1),!0)},"fromReadonlyNonEmptyArray");he.fromReadonlyNonEmptyArray=Jg;var e3=c(function(o){return function(n,e){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=n.apply(void 0,r);return o.fromEither(s==null?(0,he.left)(e.apply(void 0,r)):(0,he.right)(s))}}},"liftNullable");he.liftNullable=e3;var t3=c(function(o){return function(n,e){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=n.apply(void 0,r);return o.fromEither((0,he.isNone)(s)?(0,he.left)(e.apply(void 0,r)):(0,he.right)(s.value))}}},"liftOption");he.liftOption=t3;var n3=c(function(o,n){return(0,ls.dual)(3,function(e,r,i){return n.flatMap(e,(0,he.liftNullable)(o)(r,i))})},"flatMapNullable");he.flatMapNullable=n3;var r3=c(function(o,n){return(0,ls.dual)(3,function(e,r,i){return n.flatMap(e,(0,he.liftOption)(o)(r,i))})},"flatMapOption");he.flatMapOption=r3;var o3=c(function(o,n){return(0,ls.dual)(2,function(e,r){return n.flatMap(e,function(i){return o.fromEither(r(i))})})},"flatMapEither");he.flatMapEither=o3;var i3=c(function(o,n){return(0,ls.dual)(2,function(e,r){return n.flatMap(e,function(i){return o.fromIO(r(i))})})},"flatMapIO");he.flatMapIO=i3;var s3=c(function(o,n){return(0,ls.dual)(2,function(e,r){return n.flatMap(e,function(i){return o.fromTask(r(i))})})},"flatMapTask");he.flatMapTask=s3;var a3=c(function(o,n){return(0,ls.dual)(2,function(e,r){return n.flatMap(e,function(i){return o.fromReader(r(i))})})},"flatMapReader");he.flatMapReader=a3});var Ic=rt(bt=>{"use strict";var u3=bt&&bt.__createBinding||(Object.create?function(o,n,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(o,r,i)}:function(o,n,e,r){r===void 0&&(r=e),o[r]=n[e]}),l3=bt&&bt.__setModuleDefault||(Object.create?function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}:function(o,n){o.default=n}),c3=bt&&bt.__importStar||function(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var e in o)e!=="default"&&Object.prototype.hasOwnProperty.call(o,e)&&u3(n,o,e);return l3(n,o),n};Object.defineProperty(bt,"__esModule",{value:!0});bt.sequenceS=bt.sequenceT=bt.getApplySemigroup=bt.apS=bt.apSecond=bt.apFirst=bt.ap=void 0;var p3=_o(),d3=c3(ua());function h3(o,n){return function(e){return function(r){return o.ap(o.map(r,function(i){return function(s){return n.ap(i,s)}}),e)}}}c(h3,"ap");bt.ap=h3;function f3(o){return function(n){return function(e){return o.ap(o.map(e,function(r){return function(){return r}}),n)}}}c(f3,"apFirst");bt.apFirst=f3;function m3(o){return function(n){return function(e){return o.ap(o.map(e,function(){return function(r){return r}}),n)}}}c(m3,"apSecond");bt.apSecond=m3;function g3(o){return function(n,e){return function(r){return o.ap(o.map(r,function(i){return function(s){var a;return Object.assign({},i,(a={},a[n]=s,a))}}),e)}}}c(g3,"apS");bt.apS=g3;function D3(o){return function(n){return{concat:function(e,r){return o.ap(o.map(e,function(i){return function(s){return n.concat(i,s)}}),r)}}}}c(D3,"getApplySemigroup");bt.getApplySemigroup=D3;function Mc(o,n,e){return function(r){for(var i=Array(e.length+1),s=0;s<e.length;s++)i[s]=e[s];return i[e.length]=r,n===0?o.apply(null,i):Mc(o,n-1,i)}}c(Mc,"curried");var Rc={1:function(o){return[o]},2:function(o){return function(n){return[o,n]}},3:function(o){return function(n){return function(e){return[o,n,e]}}},4:function(o){return function(n){return function(e){return function(r){return[o,n,e,r]}}}},5:function(o){return function(n){return function(e){return function(r){return function(i){return[o,n,e,r,i]}}}}}};function C3(o){return d3.has.call(Rc,o)||(Rc[o]=Mc(p3.tuple,o-1,[])),Rc[o]}c(C3,"getTupleConstructor");function v3(o){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var r=n.length,i=C3(r),s=o.map(n[0],i),a=1;a<r;a++)s=o.ap(s,n[a]);return s}}c(v3,"sequenceT");bt.sequenceT=v3;function b3(o){var n=o.length;switch(n){case 1:return function(e){var r;return r={},r[o[0]]=e,r};case 2:return function(e){return function(r){var i;return i={},i[o[0]]=e,i[o[1]]=r,i}};case 3:return function(e){return function(r){return function(i){var s;return s={},s[o[0]]=e,s[o[1]]=r,s[o[2]]=i,s}}};case 4:return function(e){return function(r){return function(i){return function(s){var a;return a={},a[o[0]]=e,a[o[1]]=r,a[o[2]]=i,a[o[3]]=s,a}}}};case 5:return function(e){return function(r){return function(i){return function(s){return function(a){var u;return u={},u[o[0]]=e,u[o[1]]=r,u[o[2]]=i,u[o[3]]=s,u[o[4]]=a,u}}}}};default:return Mc(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i={},s=0;s<n;s++)i[o[s]]=e[s];return i},n-1,[])}}c(b3,"getRecordConstructor");function y3(o){return function(n){for(var e=Object.keys(n),r=e.length,i=b3(e),s=o.map(n[e[0]],i),a=1;a<r;a++)s=o.ap(s,n[e[a]]);return s}}c(y3,"sequenceS");bt.sequenceS=y3});var Du=rt(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.asUnit=on.as=on.getFunctorComposition=on.let=on.bindTo=on.flap=on.map=void 0;var x3=_o();function r0(o,n){return function(e){return function(r){return o.map(r,function(i){return n.map(i,e)})}}}c(r0,"map");on.map=r0;function w3(o){return function(n){return function(e){return o.map(e,function(r){return r(n)})}}}c(w3,"flap");on.flap=w3;function _3(o){return function(n){return function(e){return o.map(e,function(r){var i;return i={},i[n]=r,i})}}}c(_3,"bindTo");on.bindTo=_3;function S3(o){return function(n,e){return function(r){return o.map(r,function(i){var s;return Object.assign({},i,(s={},s[n]=e(i),s))})}}}c(S3,"let_");on.let=S3;function A3(o,n){var e=r0(o,n);return{map:function(r,i){return(0,x3.pipe)(r,e(i))}}}c(A3,"getFunctorComposition");on.getFunctorComposition=A3;function o0(o){return function(n,e){return o.map(n,function(){return e})}}c(o0,"as");on.as=o0;function E3(o){var n=o0(o);return function(e){return n(e,void 0)}}c(E3,"asUnit");on.asUnit=E3});var s0=rt(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.getApplicativeComposition=cs.getApplicativeMonoid=void 0;var i0=Ic(),T3=_o(),R3=Du();function M3(o){var n=(0,i0.getApplySemigroup)(o);return function(e){return{concat:n(e).concat,empty:o.of(e.empty)}}}c(M3,"getApplicativeMonoid");cs.getApplicativeMonoid=M3;function I3(o,n){var e=(0,R3.getFunctorComposition)(o,n).map,r=(0,i0.ap)(o,n);return{map:e,of:function(i){return o.of(n.of(i))},ap:function(i,s){return(0,T3.pipe)(i,r(s))}}}c(I3,"getApplicativeComposition");cs.getApplicativeComposition=I3});var Oc=rt(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.bind=So.tap=So.chainFirst=void 0;function O3(o){var n=a0(o);return function(e){return function(r){return n(r,e)}}}c(O3,"chainFirst");So.chainFirst=O3;function a0(o){return function(n,e){return o.chain(n,function(r){return o.map(e(r),function(){return r})})}}c(a0,"tap");So.tap=a0;function B3(o){return function(n,e){return function(r){return o.chain(r,function(i){return o.map(e(i),function(s){var a;return Object.assign({},i,(a={},a[n]=s,a))})})}}}c(B3,"bind");So.bind=B3});var u0=rt(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.tailRec=void 0;var P3=c(function(o,n){for(var e=n(o);e._tag==="Left";)e=n(e.left);return e.right},"tailRec");Cu.tailRec=P3});var h0=rt(st=>{"use strict";var k3=st&&st.__createBinding||(Object.create?function(o,n,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(o,r,i)}:function(o,n,e,r){r===void 0&&(r=e),o[r]=n[e]}),F3=st&&st.__setModuleDefault||(Object.create?function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}:function(o,n){o.default=n}),N3=st&&st.__importStar||function(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var e in o)e!=="default"&&Object.prototype.hasOwnProperty.call(o,e)&&k3(n,o,e);return F3(n,o),n};Object.defineProperty(st,"__esModule",{value:!0});st.tapEither=st.filterOrElse=st.chainFirstEitherK=st.chainEitherK=st.fromEitherK=st.chainOptionK=st.fromOptionK=st.fromPredicate=st.fromOption=void 0;var L3=Oc(),l0=_o(),fi=N3(ua());function c0(o){return function(n){return function(e){return o.fromEither(fi.isNone(e)?fi.left(n()):fi.right(e.value))}}}c(c0,"fromOption");st.fromOption=c0;function V3(o){return function(n,e){return function(r){return o.fromEither(n(r)?fi.right(r):fi.left(e(r)))}}}c(V3,"fromPredicate");st.fromPredicate=V3;function p0(o){var n=c0(o);return function(e){var r=n(e);return function(i){return(0,l0.flow)(i,r)}}}c(p0,"fromOptionK");st.fromOptionK=p0;function H3(o,n){var e=p0(o);return function(r){var i=e(r);return function(s){return function(a){return n.chain(a,i(s))}}}}c(H3,"chainOptionK");st.chainOptionK=H3;function Bc(o){return function(n){return(0,l0.flow)(n,o.fromEither)}}c(Bc,"fromEitherK");st.fromEitherK=Bc;function U3(o,n){var e=Bc(o);return function(r){return function(i){return n.chain(i,e(r))}}}c(U3,"chainEitherK");st.chainEitherK=U3;function W3(o,n){var e=d0(o,n);return function(r){return function(i){return e(i,r)}}}c(W3,"chainFirstEitherK");st.chainFirstEitherK=W3;function G3(o,n){return function(e,r){return function(i){return n.chain(i,function(s){return o.fromEither(e(s)?fi.right(s):fi.left(r(s)))})}}}c(G3,"filterOrElse");st.filterOrElse=G3;function d0(o,n){var e=Bc(o),r=(0,L3.tap)(n);return function(i,s){return r(i,e(s))}}c(d0,"tapEither");st.tapEither=d0});var f0=rt(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.right=Ve.left=Ve.flap=Ve.Functor=Ve.Bifunctor=Ve.URI=Ve.bimap=Ve.mapLeft=Ve.map=Ve.separated=void 0;var Pc=_o(),z3=Du(),q3=c(function(o,n){return{left:o,right:n}},"separated");Ve.separated=q3;var Q3=c(function(o,n){return(0,Pc.pipe)(o,(0,Ve.map)(n))},"_map"),$3=c(function(o,n){return(0,Pc.pipe)(o,(0,Ve.mapLeft)(n))},"_mapLeft"),X3=c(function(o,n,e){return(0,Pc.pipe)(o,(0,Ve.bimap)(n,e))},"_bimap"),j3=c(function(o){return function(n){return(0,Ve.separated)((0,Ve.left)(n),o((0,Ve.right)(n)))}},"map");Ve.map=j3;var Y3=c(function(o){return function(n){return(0,Ve.separated)(o((0,Ve.left)(n)),(0,Ve.right)(n))}},"mapLeft");Ve.mapLeft=Y3;var K3=c(function(o,n){return function(e){return(0,Ve.separated)(o((0,Ve.left)(e)),n((0,Ve.right)(e)))}},"bimap");Ve.bimap=K3;Ve.URI="Separated";Ve.Bifunctor={URI:Ve.URI,mapLeft:$3,bimap:X3};Ve.Functor={URI:Ve.URI,map:Q3};Ve.flap=(0,z3.flap)(Ve.Functor);var Z3=c(function(o){return o.left},"left");Ve.left=Z3;var J3=c(function(o){return o.right},"right");Ve.right=J3});var g0=rt(Tn=>{"use strict";var eD=Tn&&Tn.__createBinding||(Object.create?function(o,n,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(o,r,i)}:function(o,n,e,r){r===void 0&&(r=e),o[r]=n[e]}),tD=Tn&&Tn.__setModuleDefault||(Object.create?function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}:function(o,n){o.default=n}),nD=Tn&&Tn.__importStar||function(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var e in o)e!=="default"&&Object.prototype.hasOwnProperty.call(o,e)&&eD(n,o,e);return tD(n,o),n};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.filterE=Tn.witherDefault=Tn.wiltDefault=void 0;var m0=nD(ua());function rD(o,n){return function(e){var r=o.traverse(e);return function(i,s){return e.map(r(i,s),n.separate)}}}c(rD,"wiltDefault");Tn.wiltDefault=rD;function oD(o,n){return function(e){var r=o.traverse(e);return function(i,s){return e.map(r(i,s),n.compact)}}}c(oD,"witherDefault");Tn.witherDefault=oD;function iD(o){return function(n){var e=o.wither(n);return function(r){return function(i){return e(i,function(s){return n.map(r(s),function(a){return a?m0.some(s):m0.none})})}}}}c(iD,"filterE");Tn.filterE=iD});var yu=rt(g=>{"use strict";var sD=g&&g.__createBinding||(Object.create?function(o,n,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(o,r,i)}:function(o,n,e,r){r===void 0&&(r=e),o[r]=n[e]}),aD=g&&g.__setModuleDefault||(Object.create?function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}:function(o,n){o.default=n}),C0=g&&g.__importStar||function(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var e in o)e!=="default"&&Object.prototype.hasOwnProperty.call(o,e)&&sD(n,o,e);return aD(n,o),n};Object.defineProperty(g,"__esModule",{value:!0});g.match=g.foldW=g.matchW=g.isRight=g.isLeft=g.fromOption=g.fromPredicate=g.FromEither=g.MonadThrow=g.throwError=g.ChainRec=g.Extend=g.extend=g.Alt=g.alt=g.altW=g.Bifunctor=g.mapLeft=g.bimap=g.Traversable=g.sequence=g.traverse=g.Foldable=g.reduceRight=g.foldMap=g.reduce=g.Monad=g.Chain=g.Applicative=g.Apply=g.ap=g.apW=g.Pointed=g.of=g.asUnit=g.as=g.Functor=g.map=g.getAltValidation=g.getApplicativeValidation=g.getWitherable=g.getFilterable=g.getCompactable=g.getSemigroup=g.getEq=g.getShow=g.URI=g.flatMap=g.right=g.left=void 0;g.chainFirstW=g.chainFirst=g.chain=g.chainW=g.sequenceArray=g.traverseArray=g.traverseArrayWithIndex=g.traverseReadonlyArrayWithIndex=g.traverseReadonlyNonEmptyArrayWithIndex=g.ApT=g.apSW=g.apS=g.bindW=g.bind=g.let=g.bindTo=g.Do=g.exists=g.elem=g.toError=g.toUnion=g.chainNullableK=g.fromNullableK=g.tryCatchK=g.tryCatch=g.fromNullable=g.orElse=g.orElseW=g.swap=g.filterOrElseW=g.filterOrElse=g.flatMapOption=g.flatMapNullable=g.liftOption=g.liftNullable=g.chainOptionKW=g.chainOptionK=g.fromOptionK=g.duplicate=g.flatten=g.flattenW=g.tap=g.apSecondW=g.apSecond=g.apFirstW=g.apFirst=g.flap=g.getOrElse=g.getOrElseW=g.fold=void 0;g.getValidation=g.getValidationMonoid=g.getValidationSemigroup=g.getApplyMonoid=g.getApplySemigroup=g.either=g.stringifyJSON=g.parseJSON=void 0;var v0=s0(),la=Ic(),b0=C0(Oc()),uD=u0(),ca=h0(),Et=_o(),pa=Du(),Zn=C0(ua()),Kr=f0(),D0=g0();g.left=Zn.left;g.right=Zn.right;g.flatMap=(0,Et.dual)(2,function(o,n){return(0,g.isLeft)(o)?o:n(o.right)});var sn=c(function(o,n){return(0,Et.pipe)(o,(0,g.map)(n))},"_map"),mi=c(function(o,n){return(0,Et.pipe)(o,(0,g.ap)(n))},"_ap"),da=c(function(o,n,e){return(0,Et.pipe)(o,(0,g.reduce)(n,e))},"_reduce"),ha=c(function(o){return function(n,e){var r=(0,g.foldMap)(o);return(0,Et.pipe)(n,r(e))}},"_foldMap"),fa=c(function(o,n,e){return(0,Et.pipe)(o,(0,g.reduceRight)(n,e))},"_reduceRight"),vu=c(function(o){var n=(0,g.traverse)(o);return function(e,r){return(0,Et.pipe)(e,n(r))}},"_traverse"),kc=c(function(o,n,e){return(0,Et.pipe)(o,(0,g.bimap)(n,e))},"_bimap"),Fc=c(function(o,n){return(0,Et.pipe)(o,(0,g.mapLeft)(n))},"_mapLeft"),y0=c(function(o,n){return(0,Et.pipe)(o,(0,g.alt)(n))},"_alt"),Nc=c(function(o,n){return(0,Et.pipe)(o,(0,g.extend)(n))},"_extend"),Lc=c(function(o,n){return(0,uD.tailRec)(n(o),function(e){return(0,g.isLeft)(e)?(0,g.right)((0,g.left)(e.left)):(0,g.isLeft)(e.right)?(0,g.left)(n(e.right.left)):(0,g.right)((0,g.right)(e.right.right))})},"_chainRec");g.URI="Either";var lD=c(function(o,n){return{show:function(e){return(0,g.isLeft)(e)?"left(".concat(o.show(e.left),")"):"right(".concat(n.show(e.right),")")}}},"getShow");g.getShow=lD;var cD=c(function(o,n){return{equals:function(e,r){return e===r||((0,g.isLeft)(e)?(0,g.isLeft)(r)&&o.equals(e.left,r.left):(0,g.isRight)(r)&&n.equals(e.right,r.right))}}},"getEq");g.getEq=cD;var pD=c(function(o){return{concat:function(n,e){return(0,g.isLeft)(e)?n:(0,g.isLeft)(n)?e:(0,g.right)(o.concat(n.right,e.right))}}},"getSemigroup");g.getSemigroup=pD;var dD=c(function(o){var n=(0,g.left)(o.empty);return{URI:g.URI,_E:void 0,compact:function(e){return(0,g.isLeft)(e)?e:e.right._tag==="None"?n:(0,g.right)(e.right.value)},separate:function(e){return(0,g.isLeft)(e)?(0,Kr.separated)(e,e):(0,g.isLeft)(e.right)?(0,Kr.separated)((0,g.right)(e.right.left),n):(0,Kr.separated)(n,(0,g.right)(e.right.right))}}},"getCompactable");g.getCompactable=dD;var hD=c(function(o){var n=(0,g.left)(o.empty),e=(0,g.getCompactable)(o),r=e.compact,i=e.separate,s=c(function(u,l){return(0,g.isLeft)(u)||l(u.right)?u:n},"filter"),a=c(function(u,l){return(0,g.isLeft)(u)?(0,Kr.separated)(u,u):l(u.right)?(0,Kr.separated)(n,(0,g.right)(u.right)):(0,Kr.separated)((0,g.right)(u.right),n)},"partition");return{URI:g.URI,_E:void 0,map:sn,compact:r,separate:i,filter:s,filterMap:function(u,l){if((0,g.isLeft)(u))return u;var p=l(u.right);return p._tag==="None"?n:(0,g.right)(p.value)},partition:a,partitionMap:function(u,l){if((0,g.isLeft)(u))return(0,Kr.separated)(u,u);var p=l(u.right);return(0,g.isLeft)(p)?(0,Kr.separated)((0,g.right)(p.left),n):(0,Kr.separated)(n,(0,g.right)(p.right))}}},"getFilterable");g.getFilterable=hD;var fD=c(function(o){var n=(0,g.getFilterable)(o),e=(0,g.getCompactable)(o);return{URI:g.URI,_E:void 0,map:sn,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:vu,sequence:g.sequence,reduce:da,foldMap:ha,reduceRight:fa,wither:(0,D0.witherDefault)(g.Traversable,e),wilt:(0,D0.wiltDefault)(g.Traversable,e)}},"getWitherable");g.getWitherable=fD;var mD=c(function(o){return{URI:g.URI,_E:void 0,map:sn,ap:function(n,e){return(0,g.isLeft)(n)?(0,g.isLeft)(e)?(0,g.left)(o.concat(n.left,e.left)):n:(0,g.isLeft)(e)?e:(0,g.right)(n.right(e.right))},of:g.of}},"getApplicativeValidation");g.getApplicativeValidation=mD;var gD=c(function(o){return{URI:g.URI,_E:void 0,map:sn,alt:function(n,e){if((0,g.isRight)(n))return n;var r=e();return(0,g.isLeft)(r)?(0,g.left)(o.concat(n.left,r.left)):r}}},"getAltValidation");g.getAltValidation=gD;var DD=c(function(o){return function(n){return(0,g.isLeft)(n)?n:(0,g.right)(o(n.right))}},"map");g.map=DD;g.Functor={URI:g.URI,map:sn};g.as=(0,Et.dual)(2,(0,pa.as)(g.Functor));g.asUnit=(0,pa.asUnit)(g.Functor);g.of=g.right;g.Pointed={URI:g.URI,of:g.of};var CD=c(function(o){return function(n){return(0,g.isLeft)(n)?n:(0,g.isLeft)(o)?o:(0,g.right)(n.right(o.right))}},"apW");g.apW=CD;g.ap=g.apW;g.Apply={URI:g.URI,map:sn,ap:mi};g.Applicative={URI:g.URI,map:sn,ap:mi,of:g.of};g.Chain={URI:g.URI,map:sn,ap:mi,chain:g.flatMap};g.Monad={URI:g.URI,map:sn,ap:mi,of:g.of,chain:g.flatMap};var vD=c(function(o,n){return function(e){return(0,g.isLeft)(e)?o:n(o,e.right)}},"reduce");g.reduce=vD;var bD=c(function(o){return function(n){return function(e){return(0,g.isLeft)(e)?o.empty:n(e.right)}}},"foldMap");g.foldMap=bD;var yD=c(function(o,n){return function(e){return(0,g.isLeft)(e)?o:n(e.right,o)}},"reduceRight");g.reduceRight=yD;g.Foldable={URI:g.URI,reduce:da,foldMap:ha,reduceRight:fa};var xD=c(function(o){return function(n){return function(e){return(0,g.isLeft)(e)?o.of((0,g.left)(e.left)):o.map(n(e.right),g.right)}}},"traverse");g.traverse=xD;var wD=c(function(o){return function(n){return(0,g.isLeft)(n)?o.of((0,g.left)(n.left)):o.map(n.right,g.right)}},"sequence");g.sequence=wD;g.Traversable={URI:g.URI,map:sn,reduce:da,foldMap:ha,reduceRight:fa,traverse:vu,sequence:g.sequence};var _D=c(function(o,n){return function(e){return(0,g.isLeft)(e)?(0,g.left)(o(e.left)):(0,g.right)(n(e.right))}},"bimap");g.bimap=_D;var SD=c(function(o){return function(n){return(0,g.isLeft)(n)?(0,g.left)(o(n.left)):n}},"mapLeft");g.mapLeft=SD;g.Bifunctor={URI:g.URI,bimap:kc,mapLeft:Fc};var AD=c(function(o){return function(n){return(0,g.isLeft)(n)?o():n}},"altW");g.altW=AD;g.alt=g.altW;g.Alt={URI:g.URI,map:sn,alt:y0};var ED=c(function(o){return function(n){return(0,g.isLeft)(n)?n:(0,g.right)(o(n))}},"extend");g.extend=ED;g.Extend={URI:g.URI,map:sn,extend:Nc};g.ChainRec={URI:g.URI,map:sn,ap:mi,chain:g.flatMap,chainRec:Lc};g.throwError=g.left;g.MonadThrow={URI:g.URI,map:sn,ap:mi,of:g.of,chain:g.flatMap,throwError:g.throwError};g.FromEither={URI:g.URI,fromEither:Et.identity};g.fromPredicate=(0,ca.fromPredicate)(g.FromEither);g.fromOption=(0,ca.fromOption)(g.FromEither);g.isLeft=Zn.isLeft;g.isRight=Zn.isRight;var TD=c(function(o,n){return function(e){return(0,g.isLeft)(e)?o(e.left):n(e.right)}},"matchW");g.matchW=TD;g.foldW=g.matchW;g.match=g.matchW;g.fold=g.match;var RD=c(function(o){return function(n){return(0,g.isLeft)(n)?o(n.left):n.right}},"getOrElseW");g.getOrElseW=RD;g.getOrElse=g.getOrElseW;g.flap=(0,pa.flap)(g.Functor);g.apFirst=(0,la.apFirst)(g.Apply);g.apFirstW=g.apFirst;g.apSecond=(0,la.apSecond)(g.Apply);g.apSecondW=g.apSecond;g.tap=(0,Et.dual)(2,b0.tap(g.Chain));g.flattenW=(0,g.flatMap)(Et.identity);g.flatten=g.flattenW;g.duplicate=(0,g.extend)(Et.identity);g.fromOptionK=(0,ca.fromOptionK)(g.FromEither);g.chainOptionK=(0,ca.chainOptionK)(g.FromEither,g.Chain);g.chainOptionKW=g.chainOptionK;var bu={fromEither:g.FromEither.fromEither};g.liftNullable=Zn.liftNullable(bu);g.liftOption=Zn.liftOption(bu);var x0={flatMap:g.flatMap};g.flatMapNullable=Zn.flatMapNullable(bu,x0);g.flatMapOption=Zn.flatMapOption(bu,x0);g.filterOrElse=(0,ca.filterOrElse)(g.FromEither,g.Chain);g.filterOrElseW=g.filterOrElse;var MD=c(function(o){return(0,g.isLeft)(o)?(0,g.right)(o.left):(0,g.left)(o.right)},"swap");g.swap=MD;var ID=c(function(o){return function(n){return(0,g.isLeft)(n)?o(n.left):n}},"orElseW");g.orElseW=ID;g.orElse=g.orElseW;var OD=c(function(o){return function(n){return n==null?(0,g.left)(o):(0,g.right)(n)}},"fromNullable");g.fromNullable=OD;var BD=c(function(o,n){try{return(0,g.right)(o())}catch(e){return(0,g.left)(n(e))}},"tryCatch");g.tryCatch=BD;var PD=c(function(o,n){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0,g.tryCatch)(function(){return o.apply(void 0,e)},n)}},"tryCatchK");g.tryCatchK=PD;var kD=c(function(o){var n=(0,g.fromNullable)(o);return function(e){return(0,Et.flow)(e,n)}},"fromNullableK");g.fromNullableK=kD;var FD=c(function(o){var n=(0,g.fromNullableK)(o);return function(e){return(0,g.flatMap)(n(e))}},"chainNullableK");g.chainNullableK=FD;g.toUnion=(0,g.foldW)(Et.identity,Et.identity);function ND(o){return o instanceof Error?o:new Error(String(o))}c(ND,"toError");g.toError=ND;function w0(o){return function(n,e){if(e===void 0){var r=w0(o);return function(i){return r(n,i)}}return(0,g.isLeft)(e)?!1:o.equals(n,e.right)}}c(w0,"elem");g.elem=w0;var LD=c(function(o){return function(n){return(0,g.isLeft)(n)?!1:o(n.right)}},"exists");g.exists=LD;g.Do=(0,g.of)(Zn.emptyRecord);g.bindTo=(0,pa.bindTo)(g.Functor);var VD=(0,pa.let)(g.Functor);g.let=VD;g.bind=b0.bind(g.Chain);g.bindW=g.bind;g.apS=(0,la.apS)(g.Apply);g.apSW=g.apS;g.ApT=(0,g.of)(Zn.emptyReadonlyArray);var HD=c(function(o){return function(n){var e=o(0,Zn.head(n));if((0,g.isLeft)(e))return e;for(var r=[e.right],i=1;i<n.length;i++){var s=o(i,n[i]);if((0,g.isLeft)(s))return s;r.push(s.right)}return(0,g.right)(r)}},"traverseReadonlyNonEmptyArrayWithIndex");g.traverseReadonlyNonEmptyArrayWithIndex=HD;var UD=c(function(o){var n=(0,g.traverseReadonlyNonEmptyArrayWithIndex)(o);return function(e){return Zn.isNonEmpty(e)?n(e):g.ApT}},"traverseReadonlyArrayWithIndex");g.traverseReadonlyArrayWithIndex=UD;g.traverseArrayWithIndex=g.traverseReadonlyArrayWithIndex;var WD=c(function(o){return(0,g.traverseReadonlyArrayWithIndex)(function(n,e){return o(e)})},"traverseArray");g.traverseArray=WD;g.sequenceArray=(0,g.traverseArray)(Et.identity);g.chainW=g.flatMap;g.chain=g.flatMap;g.chainFirst=g.tap;g.chainFirstW=g.tap;function GD(o,n){return(0,g.tryCatch)(function(){return JSON.parse(o)},n)}c(GD,"parseJSON");g.parseJSON=GD;var zD=c(function(o,n){return(0,g.tryCatch)(function(){var e=JSON.stringify(o);if(typeof e!="string")throw new Error("Converting unsupported structure to JSON");return e},n)},"stringifyJSON");g.stringifyJSON=zD;g.either={URI:g.URI,map:sn,of:g.of,ap:mi,chain:g.flatMap,reduce:da,foldMap:ha,reduceRight:fa,traverse:vu,sequence:g.sequence,bimap:kc,mapLeft:Fc,alt:y0,extend:Nc,chainRec:Lc,throwError:g.throwError};g.getApplySemigroup=(0,la.getApplySemigroup)(g.Apply);g.getApplyMonoid=(0,v0.getApplicativeMonoid)(g.Applicative);var qD=c(function(o,n){return(0,la.getApplySemigroup)((0,g.getApplicativeValidation)(o))(n)},"getValidationSemigroup");g.getValidationSemigroup=qD;var QD=c(function(o,n){return(0,v0.getApplicativeMonoid)((0,g.getApplicativeValidation)(o))(n)},"getValidationMonoid");g.getValidationMonoid=QD;function $D(o){var n=(0,g.getApplicativeValidation)(o).ap,e=(0,g.getAltValidation)(o).alt;return{URI:g.URI,_E:void 0,map:sn,of:g.of,chain:g.flatMap,bimap:kc,mapLeft:Fc,reduce:da,foldMap:ha,reduceRight:fa,extend:Nc,traverse:vu,sequence:g.sequence,chainRec:Lc,throwError:g.throwError,ap:n,alt:e}}c($D,"getValidation");g.getValidation=$D});var He=rt(y=>{"use strict";var Xe=y&&y.__extends||function(){var o=c(function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},o(n,e)},"extendStatics");return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(n,e);function r(){this.constructor=n}c(r,"__"),n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ps=y&&y.__assign||function(){return ps=Object.assign||function(o){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])}return o},ps.apply(this,arguments)},XD=y&&y.__spreadArray||function(o,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,s;r<i;r++)(s||!(r in n))&&(s||(s=Array.prototype.slice.call(n,0,r)),s[r]=n[r]);return o.concat(s||Array.prototype.slice.call(n))};Object.defineProperty(y,"__esModule",{value:!0});y.partial=y.PartialType=y.type=y.InterfaceType=y.array=y.ArrayType=y.recursion=y.RecursiveType=y.Int=y.brand=y.RefinementType=y.keyof=y.KeyofType=y.literal=y.LiteralType=y.void=y.undefined=y.null=y.UnknownRecord=y.AnyDictionaryType=y.UnknownArray=y.AnyArrayType=y.boolean=y.BooleanType=y.bigint=y.BigIntType=y.number=y.NumberType=y.string=y.StringType=y.unknown=y.UnknownType=y.voidType=y.VoidType=y.UndefinedType=y.nullType=y.NullType=y.getIndex=y.getTags=y.emptyTags=y.mergeAll=y.getDomainKeys=y.appendContext=y.getContextEntry=y.getFunctionName=y.identity=y.Type=y.success=y.failure=y.failures=void 0;y.alias=y.clean=y.StrictType=y.dictionary=y.object=y.ObjectType=y.Dictionary=y.getDefaultContext=y.getValidationError=y.interface=y.Array=y.taggedUnion=y.TaggedUnionType=y.Integer=y.refinement=y.any=y.AnyType=y.never=y.NeverType=y.Function=y.FunctionType=y.exact=y.ExactType=y.strict=y.readonlyArray=y.ReadonlyArrayType=y.readonly=y.ReadonlyType=y.tuple=y.TupleType=y.intersection=y.IntersectionType=y.union=y.UnionType=y.record=y.DictionaryType=void 0;var Tt=yu();y.failures=Tt.left;var jD=c(function(o,n,e){return(0,y.failures)([{value:o,context:n,message:e}])},"failure");y.failure=jD;y.success=Tt.right;var je=function(){function o(n,e,r,i){this.name=n,this.is=e,this.validate=r,this.encode=i,this.decode=this.decode.bind(this)}return c(o,"Type"),o.prototype.pipe=function(n,e){var r=this;return e===void 0&&(e="pipe(".concat(this.name,", ").concat(n.name,")")),new o(e,n.is,function(i,s){var a=r.validate(i,s);return(0,Tt.isLeft)(a)?a:n.validate(a.right,s)},this.encode===y.identity&&n.encode===y.identity?y.identity:function(i){return r.encode(n.encode(i))})},o.prototype.asDecoder=function(){return this},o.prototype.asEncoder=function(){return this},o.prototype.decode=function(n){return this.validate(n,[{key:"",type:this,actual:n}])},o}();y.Type=je;var YD=c(function(o){return o},"identity");y.identity=YD;function E0(o){return o.displayName||o.name||"<function".concat(o.length,">")}c(E0,"getFunctionName");y.getFunctionName=E0;function KD(o,n){return{key:o,type:n}}c(KD,"getContextEntry");y.getContextEntry=KD;function kr(o,n,e,r){for(var i=o.length,s=Array(i+1),a=0;a<i;a++)s[a]=o[a];return s[i]={key:n,type:e,actual:r},s}c(kr,"appendContext");y.appendContext=kr;function Di(o,n){for(var e=n.length,r=0;r<e;r++)o.push(n[r])}c(Di,"pushAll");var gi=Object.prototype.hasOwnProperty;function Hc(o){return Object.keys(o).map(function(n){return"".concat(n,": ").concat(o[n].name)}).join(", ")}c(Hc,"getNameFromProps");function ma(o){for(var n=0;n<o.length;n++)if(o[n].encode!==y.identity)return!1;return!0}c(ma,"useIdentity");function T0(o){return"{ ".concat(Hc(o)," }")}c(T0,"getInterfaceTypeName");function R0(o){return"Partial<".concat(o,">")}c(R0,"getPartialTypeName");function ZD(o,n,e,r){r===void 0&&(r="{ [K in ".concat(n.name,"]: ").concat(e.name," }"));for(var i=o.length,s={},a=0;a<i;a++)s[o[a]]=e;var u=(0,y.strict)(s,r);return new Qc(r,function(l){return u.is(l)},u.validate,u.encode,n,e)}c(ZD,"enumerableRecord");function Gc(o){var n;if(O0(o)){var e=o.value;if(y.string.is(e))return n={},n[e]=null,n}else{if(oC(o))return o.keys;if(P0(o)){var r=o.types.map(function(i){return Gc(i)});return r.some(xu.is)?void 0:Object.assign.apply(Object,XD([{}],r,!1))}}}c(Gc,"getDomainKeys");y.getDomainKeys=Gc;function _0(o,n){for(var e=Object.keys(o),r=e.length,i=!1,s={},a=0;a<r;a++){var u=e[a];n.is(u)?s[u]=o[u]:i=!0}return i?s:o}c(_0,"stripNonDomainKeys");function JD(o,n,e){return e===void 0&&(e="{ [K in ".concat(o.name,"]: ").concat(n.name," }")),new Qc(e,function(r){return y.UnknownRecord.is(r)?Object.keys(r).every(function(i){return!o.is(i)||n.is(r[i])}):A0(n)&&Array.isArray(r)},function(r,i){if(y.UnknownRecord.is(r)){for(var s={},a=[],u=Object.keys(r),l=u.length,p=!1,d=0;d<l;d++){var h=u[d],m=r[h],f=o.validate(h,kr(i,h,o,h));if((0,Tt.isLeft)(f))p=!0;else{var C=f.right;p=p||C!==h,h=C;var D=n.validate(m,kr(i,h,n,m));if((0,Tt.isLeft)(D))Di(a,D.left);else{var b=D.right;p=p||b!==m,s[h]=b}}}return a.length>0?(0,y.failures)(a):(0,y.success)(p?s:r)}return A0(n)&&Array.isArray(r)?(0,y.success)(r):(0,y.failure)(r,i)},o.encode===y.identity&&n.encode===y.identity?function(r){return _0(r,o)}:function(r){for(var i={},s=Object.keys(_0(r,o)),a=s.length,u=0;u<a;u++){var l=s[u];i[String(o.encode(l))]=n.encode(r[l])}return i},o,n)}c(JD,"nonEnumerableRecord");function M0(o){return"("+o.map(function(n){return n.name}).join(" | ")+")"}c(M0,"getUnionName");function Uc(o,n){for(var e=!0,r=!0,i=!y.UnknownRecord.is(o),s=0,a=n;s<a.length;s++){var u=a[s];u!==o&&(e=!1),y.UnknownRecord.is(u)&&(r=!1)}if(e)return o;if(r)return n[n.length-1];for(var l={},p=0,d=n;p<d.length;p++){var u=d[p];for(var h in u)(!gi.call(l,h)||i||u[h]!==o[h])&&(l[h]=u[h])}return l}c(Uc,"mergeAll");y.mergeAll=Uc;function Wc(o){switch(o._tag){case"RefinementType":case"ReadonlyType":return Wc(o.type);case"InterfaceType":case"StrictType":case"PartialType":return o.props;case"IntersectionType":return o.types.reduce(function(n,e){return Object.assign(n,Wc(e))},{})}}c(Wc,"getProps");function S0(o,n){for(var e=Object.getOwnPropertyNames(o),r=!1,i={},s=0;s<e.length;s++){var a=e[s];gi.call(n,a)?i[a]=o[a]:r=!0}return r?i:o}c(S0,"stripKeys");function eC(o){return B0(o)?"{| ".concat(Hc(o.props)," |}"):iC(o)?R0("{| ".concat(Hc(o.props)," |}")):"Exact<".concat(o.name,">")}c(eC,"getExactTypeName");function tC(o){return o.length>0}c(tC,"isNonEmpty");y.emptyTags={};function I0(o,n){for(var e=[],r=0,i=o;r<i.length;r++){var s=i[r];n.indexOf(s)!==-1&&e.push(s)}return e}c(I0,"intersect");function nC(o,n){if(o===y.emptyTags)return n;if(n===y.emptyTags)return o;var e=Object.assign({},o);for(var r in n)if(gi.call(o,r)){var i=I0(o[r],n[r]);if(tC(i))e[r]=i;else{e=y.emptyTags;break}}else e[r]=n[r];return e}c(nC,"mergeTags");function rC(o,n){if(o===y.emptyTags||n===y.emptyTags)return y.emptyTags;var e=y.emptyTags;for(var r in o)if(gi.call(n,r)){var i=I0(o[r],n[r]);i.length===0&&(e===y.emptyTags&&(e={}),e[r]=o[r].concat(n[r]))}return e}c(rC,"intersectTags");function A0(o){return o._tag==="AnyType"}c(A0,"isAnyC");function O0(o){return o._tag==="LiteralType"}c(O0,"isLiteralC");function oC(o){return o._tag==="KeyofType"}c(oC,"isKeyofC");function B0(o){return o._tag==="InterfaceType"}c(B0,"isTypeC");function iC(o){return o._tag==="PartialType"}c(iC,"isPartialC");function sC(o){return o._tag==="StrictType"}c(sC,"isStrictC");function aC(o){return o._tag==="ExactType"}c(aC,"isExactC");function uC(o){return o._tag==="RefinementType"}c(uC,"isRefinementC");function lC(o){return o._tag==="IntersectionType"}c(lC,"isIntersectionC");function P0(o){return o._tag==="UnionType"}c(P0,"isUnionC");function cC(o){return o._tag==="RecursiveType"}c(cC,"isRecursiveC");var Vc=[];function Ao(o){if(Vc.indexOf(o)!==-1)return y.emptyTags;if(B0(o)||sC(o)){var n=y.emptyTags;for(var e in o.props){var r=o.props[e];O0(r)&&(n===y.emptyTags&&(n={}),n[e]=[r.value])}return n}else{if(aC(o)||uC(o))return Ao(o.type);if(lC(o))return o.types.reduce(function(s,a){return nC(s,Ao(a))},y.emptyTags);if(P0(o))return o.types.slice(1).reduce(function(s,a){return rC(s,Ao(a))},Ao(o.types[0]));if(cC(o)){Vc.push(o);var i=Ao(o.type);return Vc.pop(),i}}return y.emptyTags}c(Ao,"getTags");y.getTags=Ao;function k0(o){var n=Ao(o[0]),e=Object.keys(n),r=o.length,i=c(function(p){for(var d=n[p].slice(),h=[n[p]],m=1;m<r;m++){var f=o[m],C=Ao(f),D=C[p];if(D===void 0)return"continue-keys";if(D.some(function(b){return d.indexOf(b)!==-1}))return"continue-keys";d.push.apply(d,D),h.push(D)}return{value:[p,h]}},"_loop_1");e:for(var s=0,a=e;s<a.length;s++){var u=a[s],l=i(u);if(typeof l=="object")return l.value;switch(l){case"continue-keys":continue e}}}c(k0,"getIndex");y.getIndex=k0;var F0=function(o){Xe(n,o);function n(){var e=o.call(this,"null",function(r){return r===null},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="NullType",e}return c(n,"NullType"),n}(je);y.NullType=F0;y.nullType=new F0;y.null=y.nullType;var N0=function(o){Xe(n,o);function n(){var e=o.call(this,"undefined",function(r){return r===void 0},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="UndefinedType",e}return c(n,"UndefinedType"),n}(je);y.UndefinedType=N0;var xu=new N0;y.undefined=xu;var L0=function(o){Xe(n,o);function n(){var e=o.call(this,"void",xu.is,xu.validate,y.identity)||this;return e._tag="VoidType",e}return c(n,"VoidType"),n}(je);y.VoidType=L0;y.voidType=new L0;y.void=y.voidType;var V0=function(o){Xe(n,o);function n(){var e=o.call(this,"unknown",function(r){return!0},y.success,y.identity)||this;return e._tag="UnknownType",e}return c(n,"UnknownType"),n}(je);y.UnknownType=V0;y.unknown=new V0;var H0=function(o){Xe(n,o);function n(){var e=o.call(this,"string",function(r){return typeof r=="string"},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="StringType",e}return c(n,"StringType"),n}(je);y.StringType=H0;y.string=new H0;var U0=function(o){Xe(n,o);function n(){var e=o.call(this,"number",function(r){return typeof r=="number"},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="NumberType",e}return c(n,"NumberType"),n}(je);y.NumberType=U0;y.number=new U0;var W0=function(o){Xe(n,o);function n(){var e=o.call(this,"bigint",function(r){return typeof r=="bigint"},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="BigIntType",e}return c(n,"BigIntType"),n}(je);y.BigIntType=W0;y.bigint=new W0;var G0=function(o){Xe(n,o);function n(){var e=o.call(this,"boolean",function(r){return typeof r=="boolean"},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="BooleanType",e}return c(n,"BooleanType"),n}(je);y.BooleanType=G0;y.boolean=new G0;var z0=function(o){Xe(n,o);function n(){var e=o.call(this,"UnknownArray",Array.isArray,function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="AnyArrayType",e}return c(n,"AnyArrayType"),n}(je);y.AnyArrayType=z0;y.UnknownArray=new z0;y.Array=y.UnknownArray;var q0=function(o){Xe(n,o);function n(){var e=o.call(this,"UnknownRecord",function(r){return r!==null&&typeof r=="object"&&!Array.isArray(r)},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="AnyDictionaryType",e}return c(n,"AnyDictionaryType"),n}(je);y.AnyDictionaryType=q0;y.UnknownRecord=new q0;var Q0=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.value=a,u._tag="LiteralType",u}return c(n,"LiteralType"),n}(je);y.LiteralType=Q0;function pC(o,n){n===void 0&&(n=JSON.stringify(o));var e=c(function(r){return r===o},"is");return new Q0(n,e,function(r,i){return e(r)?(0,y.success)(o):(0,y.failure)(r,i)},y.identity,o)}c(pC,"literal");y.literal=pC;var $0=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.keys=a,u._tag="KeyofType",u}return c(n,"KeyofType"),n}(je);y.KeyofType=$0;function dC(o,n){n===void 0&&(n=Object.keys(o).map(function(r){return JSON.stringify(r)}).join(" | "));var e=c(function(r){return y.string.is(r)&&gi.call(o,r)},"is");return new $0(n,e,function(r,i){return e(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity,o)}c(dC,"keyof");y.keyof=dC;var X0=function(o){Xe(n,o);function n(e,r,i,s,a,u){var l=o.call(this,e,r,i,s)||this;return l.type=a,l.predicate=u,l._tag="RefinementType",l}return c(n,"RefinementType"),n}(je);y.RefinementType=X0;function j0(o,n,e){return Xc(o,n,e)}c(j0,"brand");y.brand=j0;y.Int=j0(y.number,function(o){return Number.isInteger(o)},"Int");var zc=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.runDefinition=a,u._tag="RecursiveType",u}return c(n,"RecursiveType"),n}(je);y.RecursiveType=zc;Object.defineProperty(zc.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});function hC(o,n){var e,r=c(function(){return e||(e=n(i),e.name=o),e},"runDefinition"),i=new zc(o,function(s){return r().is(s)},function(s,a){return r().validate(s,a)},function(s){return r().encode(s)},r);return i}c(hC,"recursion");y.recursion=hC;var Y0=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.type=a,u._tag="ArrayType",u}return c(n,"ArrayType"),n}(je);y.ArrayType=Y0;function K0(o,n){return n===void 0&&(n="Array<".concat(o.name,">")),new Y0(n,function(e){return y.UnknownArray.is(e)&&e.every(o.is)},function(e,r){var i=y.UnknownArray.validate(e,r);if((0,Tt.isLeft)(i))return i;for(var s=i.right,a=s.length,u=s,l=[],p=0;p<a;p++){var d=s[p],h=o.validate(d,kr(r,String(p),o,d));if((0,Tt.isLeft)(h))Di(l,h.left);else{var m=h.right;m!==d&&(u===s&&(u=s.slice()),u[p]=m)}}return l.length>0?(0,y.failures)(l):(0,y.success)(u)},o.encode===y.identity?y.identity:function(e){return e.map(o.encode)},o)}c(K0,"array");y.array=K0;var Z0=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.props=a,u._tag="InterfaceType",u}return c(n,"InterfaceType"),n}(je);y.InterfaceType=Z0;function qc(o,n){n===void 0&&(n=T0(o));var e=Object.keys(o),r=e.map(function(s){return o[s]}),i=e.length;return new Z0(n,function(s){if(y.UnknownRecord.is(s)){for(var a=0;a<i;a++){var u=e[a],l=s[u];if(l===void 0&&!gi.call(s,u)||!r[a].is(l))return!1}return!0}return!1},function(s,a){var u=y.UnknownRecord.validate(s,a);if((0,Tt.isLeft)(u))return u;for(var l=u.right,p=l,d=[],h=0;h<i;h++){var m=e[h],f=p[m],C=r[h],D=C.validate(f,kr(a,m,C,f));if((0,Tt.isLeft)(D))Di(d,D.left);else{var b=D.right;(b!==f||b===void 0&&!gi.call(p,m))&&(p===l&&(p=ps({},l)),p[m]=b)}}return d.length>0?(0,y.failures)(d):(0,y.success)(p)},ma(r)?y.identity:function(s){for(var a=ps({},s),u=0;u<i;u++){var l=e[u],p=r[u].encode;p!==y.identity&&(a[l]=p(s[l]))}return a},o)}c(qc,"type");y.type=qc;y.interface=qc;var J0=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.props=a,u._tag="PartialType",u}return c(n,"PartialType"),n}(je);y.PartialType=J0;function fC(o,n){n===void 0&&(n=R0(T0(o)));var e=Object.keys(o),r=e.map(function(s){return o[s]}),i=e.length;return new J0(n,function(s){if(y.UnknownRecord.is(s)){for(var a=0;a<i;a++){var u=e[a],l=s[u];if(l!==void 0&&!o[u].is(l))return!1}return!0}return!1},function(s,a){var u=y.UnknownRecord.validate(s,a);if((0,Tt.isLeft)(u))return u;for(var l=u.right,p=l,d=[],h=0;h<i;h++){var m=e[h],f=p[m],C=o[m],D=C.validate(f,kr(a,m,C,f));if((0,Tt.isLeft)(D))f!==void 0&&Di(d,D.left);else{var b=D.right;b!==f&&(p===l&&(p=ps({},l)),p[m]=b)}}return d.length>0?(0,y.failures)(d):(0,y.success)(p)},ma(r)?y.identity:function(s){for(var a=ps({},s),u=0;u<i;u++){var l=e[u],p=s[l];p!==void 0&&(a[l]=r[u].encode(p))}return a},o)}c(fC,"partial");y.partial=fC;var Qc=function(o){Xe(n,o);function n(e,r,i,s,a,u){var l=o.call(this,e,r,i,s)||this;return l.domain=a,l.codomain=u,l._tag="DictionaryType",l}return c(n,"DictionaryType"),n}(je);y.DictionaryType=Qc;function eh(o,n,e){var r=Gc(o);return r?ZD(Object.keys(r),o,n,e):JD(o,n,e)}c(eh,"record");y.record=eh;var $c=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.types=a,u._tag="UnionType",u}return c(n,"UnionType"),n}(je);y.UnionType=$c;function th(o,n){n===void 0&&(n=M0(o));var e=k0(o);if(e!==void 0&&o.length>0){var r=e[0],i=e[1],s=i.length,a=c(function(u){for(var l=0;l<s;l++)if(i[l].indexOf(u)!==-1)return l},"find_1");return new wu(n,function(u){if(y.UnknownRecord.is(u)){var l=a(u[r]);return l!==void 0?o[l].is(u):!1}return!1},function(u,l){var p=y.UnknownRecord.validate(u,l);if((0,Tt.isLeft)(p))return p;var d=p.right,h=a(d[r]);if(h===void 0)return(0,y.failure)(u,l);var m=o[h];return m.validate(d,kr(l,String(h),m,d))},ma(o)?y.identity:function(u){var l=a(u[r]);if(l===void 0)throw new Error("no codec found to encode value in union codec ".concat(n));return o[l].encode(u)},o,r)}else return new $c(n,function(u){return o.some(function(l){return l.is(u)})},function(u,l){for(var p=[],d=0;d<o.length;d++){var h=o[d],m=h.validate(u,kr(l,String(d),h,u));if((0,Tt.isLeft)(m))Di(p,m.left);else return(0,y.success)(m.right)}return(0,y.failures)(p)},ma(o)?y.identity:function(u){for(var l=0,p=o;l<p.length;l++){var d=p[l];if(d.is(u))return d.encode(u)}throw new Error("no codec found to encode value in union type ".concat(n))},o)}c(th,"union");y.union=th;var nh=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.types=a,u._tag="IntersectionType",u}return c(n,"IntersectionType"),n}(je);y.IntersectionType=nh;function mC(o,n){n===void 0&&(n="(".concat(o.map(function(r){return r.name}).join(" & "),")"));var e=o.length;return new nh(n,function(r){return o.every(function(i){return i.is(r)})},o.length===0?y.success:function(r,i){for(var s=[],a=[],u=0;u<e;u++){var l=o[u],p=l.validate(r,kr(i,String(u),l,r));(0,Tt.isLeft)(p)?Di(a,p.left):s.push(p.right)}return a.length>0?(0,y.failures)(a):(0,y.success)(Uc(r,s))},o.length===0?y.identity:function(r){return Uc(r,o.map(function(i){return i.encode(r)}))},o)}c(mC,"intersection");y.intersection=mC;var rh=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.types=a,u._tag="TupleType",u}return c(n,"TupleType"),n}(je);y.TupleType=rh;function gC(o,n){n===void 0&&(n="[".concat(o.map(function(r){return r.name}).join(", "),"]"));var e=o.length;return new rh(n,function(r){return y.UnknownArray.is(r)&&r.length===e&&o.every(function(i,s){return i.is(r[s])})},function(r,i){var s=y.UnknownArray.validate(r,i);if((0,Tt.isLeft)(s))return s;for(var a=s.right,u=a.length>e?a.slice(0,e):a,l=[],p=0;p<e;p++){var d=a[p],h=o[p],m=h.validate(d,kr(i,String(p),h,d));if((0,Tt.isLeft)(m))Di(l,m.left);else{var f=m.right;f!==d&&(u===a&&(u=a.slice()),u[p]=f)}}return l.length>0?(0,y.failures)(l):(0,y.success)(u)},ma(o)?y.identity:function(r){return o.map(function(i,s){return i.encode(r[s])})},o)}c(gC,"tuple");y.tuple=gC;var oh=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.type=a,u._tag="ReadonlyType",u}return c(n,"ReadonlyType"),n}(je);y.ReadonlyType=oh;function DC(o,n){return n===void 0&&(n="Readonly<".concat(o.name,">")),new oh(n,o.is,o.validate,o.encode,o)}c(DC,"readonly");y.readonly=DC;var ih=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.type=a,u._tag="ReadonlyArrayType",u}return c(n,"ReadonlyArrayType"),n}(je);y.ReadonlyArrayType=ih;function CC(o,n){n===void 0&&(n="ReadonlyArray<".concat(o.name,">"));var e=K0(o);return new ih(n,e.is,e.validate,e.encode,o)}c(CC,"readonlyArray");y.readonlyArray=CC;var vC=c(function(o,n){return ah(qc(o),n)},"strict");y.strict=vC;var sh=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.type=a,u._tag="ExactType",u}return c(n,"ExactType"),n}(je);y.ExactType=sh;function ah(o,n){n===void 0&&(n=eC(o));var e=Wc(o);return new sh(n,o.is,function(r,i){var s=y.UnknownRecord.validate(r,i);if((0,Tt.isLeft)(s))return s;var a=o.validate(r,i);return(0,Tt.isLeft)(a)?a:(0,Tt.right)(S0(a.right,e))},function(r){return o.encode(S0(r,e))},o)}c(ah,"exact");y.exact=ah;var uh=function(o){Xe(n,o);function n(){var e=o.call(this,"Function",function(r){return typeof r=="function"},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="FunctionType",e}return c(n,"FunctionType"),n}(je);y.FunctionType=uh;y.Function=new uh;var lh=function(o){Xe(n,o);function n(){var e=o.call(this,"never",function(r){return!1},function(r,i){return(0,y.failure)(r,i)},function(){throw new Error("cannot encode never")})||this;return e._tag="NeverType",e}return c(n,"NeverType"),n}(je);y.NeverType=lh;y.never=new lh;var ch=function(o){Xe(n,o);function n(){var e=o.call(this,"any",function(r){return!0},y.success,y.identity)||this;return e._tag="AnyType",e}return c(n,"AnyType"),n}(je);y.AnyType=ch;y.any=new ch;function Xc(o,n,e){return e===void 0&&(e="(".concat(o.name," | ").concat(E0(n),")")),new X0(e,function(r){return o.is(r)&&n(r)},function(r,i){var s=o.validate(r,i);if((0,Tt.isLeft)(s))return s;var a=s.right;return n(a)?(0,y.success)(a):(0,y.failure)(a,i)},o.encode,o,n)}c(Xc,"refinement");y.refinement=Xc;y.Integer=Xc(y.number,Number.isInteger,"Integer");var wu=function(o){Xe(n,o);function n(e,r,i,s,a,u){var l=o.call(this,e,r,i,s,a)||this;return l.tag=u,l}return c(n,"TaggedUnionType"),n}($c);y.TaggedUnionType=wu;var bC=c(function(o,n,e){e===void 0&&(e=M0(n));var r=th(n,e);return r instanceof wu?r:(console.warn("[io-ts] Cannot build a tagged union for ".concat(e,", returning a de-optimized union")),new wu(e,r.is,r.validate,r.encode,n,o))},"taggedUnion");y.taggedUnion=bC;var yC=c(function(o,n){return{value:o,context:n}},"getValidationError");y.getValidationError=yC;var xC=c(function(o){return[{key:"",type:o}]},"getDefaultContext");y.getDefaultContext=xC;y.Dictionary=y.UnknownRecord;var ph=function(o){Xe(n,o);function n(){var e=o.call(this,"object",function(r){return r!==null&&typeof r=="object"},function(r,i){return e.is(r)?(0,y.success)(r):(0,y.failure)(r,i)},y.identity)||this;return e._tag="ObjectType",e}return c(n,"ObjectType"),n}(je);y.ObjectType=ph;y.object=new ph;y.dictionary=eh;var wC=function(o){Xe(n,o);function n(e,r,i,s,a){var u=o.call(this,e,r,i,s)||this;return u.props=a,u._tag="StrictType",u}return c(n,"StrictType"),n}(je);y.StrictType=wC;function _C(o){return o}c(_C,"clean");y.clean=_C;function SC(o){return function(){return o}}c(SC,"alias");y.alias=SC});var dh=rt((Uy,_u)=>{_u.exports.Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/;_u.exports.ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/;_u.exports.ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/});var fh=rt((Wy,hh)=>{var jc=dh();hh.exports={isSpaceSeparator(o){return typeof o=="string"&&jc.Space_Separator.test(o)},isIdStartChar(o){return typeof o=="string"&&(o>="a"&&o<="z"||o>="A"&&o<="Z"||o==="$"||o==="_"||jc.ID_Start.test(o))},isIdContinueChar(o){return typeof o=="string"&&(o>="a"&&o<="z"||o>="A"&&o<="Z"||o>="0"&&o<="9"||o==="$"||o==="_"||o==="\u200C"||o==="\u200D"||jc.ID_Continue.test(o))},isDigit(o){return typeof o=="string"&&/[0-9]/.test(o)},isHexDigit(o){return typeof o=="string"&&/[0-9A-Fa-f]/.test(o)}}});var Dh=rt(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.PathReporter=Eo.success=Eo.failure=void 0;var AC=yu(),EC=He();function TC(o){return typeof o=="function"?(0,EC.getFunctionName)(o):typeof o=="number"&&!isFinite(o)?isNaN(o)?"NaN":o>0?"Infinity":"-Infinity":JSON.stringify(o)}c(TC,"stringify");function RC(o){return o.map(function(n){var e=n.key,r=n.type;return"".concat(e,": ").concat(r.name)}).join("/")}c(RC,"getContextPath");function MC(o){return o.message!==void 0?o.message:"Invalid value ".concat(TC(o.value)," supplied to ").concat(RC(o.context))}c(MC,"getMessage");function mh(o){return o.map(MC)}c(mh,"failure");Eo.failure=mh;function gh(){return["No errors!"]}c(gh,"success");Eo.success=gh;Eo.PathReporter={report:(0,AC.fold)(mh,gh)}});var Up=rt(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.Subscription=void 0;var _4=function(){function o(n){var e=this;this._cancel=n.cancel,this.name=n.sub.name;var r=n.sub.cancel;n.sub.cancel=function(){e._cancel=null,r()}}return c(o,"Subscription"),Object.defineProperty(o.prototype,"live",{get:function(){return!!this._cancel},enumerable:!1,configurable:!0}),o.prototype.cancel=function(){return this._cancel?(this._cancel(),this._cancel=null,!0):!1},o}();vl.Subscription=_4});var zp={};dg(zp,{__addDisposableResource:()=>Km,__assign:()=>bl,__asyncDelegator:()=>Gm,__asyncGenerator:()=>Wm,__asyncValues:()=>zm,__await:()=>Ps,__awaiter:()=>Fm,__classPrivateFieldGet:()=>Xm,__classPrivateFieldIn:()=>Ym,__classPrivateFieldSet:()=>jm,__createBinding:()=>xl,__decorate:()=>Bm,__disposeResources:()=>Zm,__esDecorate:()=>S4,__exportStar:()=>Lm,__extends:()=>Im,__generator:()=>Nm,__importDefault:()=>$m,__importStar:()=>Qm,__makeTemplateObject:()=>qm,__metadata:()=>km,__param:()=>Pm,__propKey:()=>E4,__read:()=>Gp,__rest:()=>Om,__runInitializers:()=>A4,__setFunctionName:()=>T4,__spread:()=>Vm,__spreadArray:()=>Um,__spreadArrays:()=>Hm,__values:()=>yl,default:()=>I4});function Im(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Wp(o,n);function e(){this.constructor=o}c(e,"__"),o.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function Om(o,n){var e={};for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&n.indexOf(r)<0&&(e[r]=o[r]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(o);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(o,r[i])&&(e[r[i]]=o[r[i]]);return e}function Bm(o,n,e,r){var i=arguments.length,s=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,n,e,r);else for(var u=o.length-1;u>=0;u--)(a=o[u])&&(s=(i<3?a(s):i>3?a(n,e,s):a(n,e))||s);return i>3&&s&&Object.defineProperty(n,e,s),s}function Pm(o,n){return function(e,r){n(e,r,o)}}function S4(o,n,e,r,i,s){function a(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}c(a,"accept");for(var u=r.kind,l=u==="getter"?"get":u==="setter"?"set":"value",p=!n&&o?r.static?o:o.prototype:null,d=n||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),h,m=!1,f=e.length-1;f>=0;f--){var C={};for(var D in r)C[D]=D==="access"?{}:r[D];for(var D in r.access)C.access[D]=r.access[D];C.addInitializer=function(v){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(v||null))};var b=(0,e[f])(u==="accessor"?{get:d.get,set:d.set}:d[l],C);if(u==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=a(b.get))&&(d.get=h),(h=a(b.set))&&(d.set=h),(h=a(b.init))&&i.unshift(h)}else(h=a(b))&&(u==="field"?i.unshift(h):d[l]=h)}p&&Object.defineProperty(p,r.name,d),m=!0}function A4(o,n,e){for(var r=arguments.length>2,i=0;i<n.length;i++)e=r?n[i].call(o,e):n[i].call(o);return r?e:void 0}function E4(o){return typeof o=="symbol"?o:"".concat(o)}function T4(o,n,e){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:e?"".concat(e," ",n):n})}function km(o,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,n)}function Fm(o,n,e,r){function i(s){return s instanceof e?s:new e(function(a){a(s)})}return c(i,"adopt"),new(e||(e=Promise))(function(s,a){function u(d){try{p(r.next(d))}catch(h){a(h)}}c(u,"fulfilled");function l(d){try{p(r.throw(d))}catch(h){a(h)}}c(l,"rejected");function p(d){d.done?s(d.value):i(d.value).then(u,l)}c(p,"step"),p((r=r.apply(o,n||[])).next())})}function Nm(o,n){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(p){return function(d){return l([p,d])}}function l(p){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,p[0]&&(e=0)),e;)try{if(r=1,i&&(s=p[0]&2?i.return:p[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,p[1])).done)return s;switch(i=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,i=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){e.label=p[1];break}if(p[0]===6&&e.label<s[1]){e.label=s[1],s=p;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(p);break}s[2]&&e.ops.pop(),e.trys.pop();continue}p=n.call(o,e)}catch(d){p=[6,d],i=0}finally{r=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Lm(o,n){for(var e in o)e!=="default"&&!Object.prototype.hasOwnProperty.call(n,e)&&xl(n,o,e)}function yl(o){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&o[n],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gp(o,n){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),i,s=[],a;try{for(;(n===void 0||n-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return s}function Vm(){for(var o=[],n=0;n<arguments.length;n++)o=o.concat(Gp(arguments[n]));return o}function Hm(){for(var o=0,n=0,e=arguments.length;n<e;n++)o+=arguments[n].length;for(var r=Array(o),i=0,n=0;n<e;n++)for(var s=arguments[n],a=0,u=s.length;a<u;a++,i++)r[i]=s[a];return r}function Um(o,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,s;r<i;r++)(s||!(r in n))&&(s||(s=Array.prototype.slice.call(n,0,r)),s[r]=n[r]);return o.concat(s||Array.prototype.slice.call(n))}function Ps(o){return this instanceof Ps?(this.v=o,this):new Ps(o)}function Wm(o,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(o,n||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(m){r[m]&&(i[m]=function(f){return new Promise(function(C,D){s.push([m,f,C,D])>1||u(m,f)})})}function u(m,f){try{l(r[m](f))}catch(C){h(s[0][3],C)}}function l(m){m.value instanceof Ps?Promise.resolve(m.value.v).then(p,d):h(s[0][2],m)}function p(m){u("next",m)}function d(m){u("throw",m)}function h(m,f){m(f),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Gm(o){var n,e;return n={},r("next"),r("throw",function(i){throw i}),r("return"),n[Symbol.iterator]=function(){return this},n;function r(i,s){n[i]=o[i]?function(a){return(e=!e)?{value:Ps(o[i](a)),done:!1}:s?s(a):a}:s}}function zm(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],e;return n?n.call(o):(o=typeof yl=="function"?yl(o):o[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=o[s]&&function(a){return new Promise(function(u,l){a=o[s](a),i(u,l,a.done,a.value)})}}function i(s,a,u,l){Promise.resolve(l).then(function(p){s({value:p,done:u})},a)}}function qm(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o}function Qm(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var e in o)e!=="default"&&Object.prototype.hasOwnProperty.call(o,e)&&xl(n,o,e);return R4(n,o),n}function $m(o){return o&&o.__esModule?o:{default:o}}function Xm(o,n,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?o!==n||!r:!n.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(o):r?r.value:n.get(o)}function jm(o,n,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?o!==n||!i:!n.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(o,e):i?i.value=e:n.set(o,e),e}function Ym(o,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?n===o:o.has(n)}function Km(o,n,e){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var r;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=n[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=n[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");o.stack.push({value:n,dispose:r,async:e})}else e&&o.stack.push({async:!0});return n}function Zm(o){function n(r){o.error=o.hasError?new M4(r,o.error,"An error was suppressed during disposal."):r,o.hasError=!0}c(n,"fail");function e(){for(;o.stack.length;){var r=o.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(e,function(s){return n(s),e()})}catch(s){n(s)}}if(o.hasError)throw o.error}return c(e,"next"),e()}var Wp,bl,xl,R4,M4,I4,qp=pg(()=>{Wp=c(function(o,n){return Wp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},Wp(o,n)},"extendStatics");c(Im,"__extends");bl=c(function(){return bl=Object.assign||c(function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},"__assign"),bl.apply(this,arguments)},"__assign");c(Om,"__rest");c(Bm,"__decorate");c(Pm,"__param");c(S4,"__esDecorate");c(A4,"__runInitializers");c(E4,"__propKey");c(T4,"__setFunctionName");c(km,"__metadata");c(Fm,"__awaiter");c(Nm,"__generator");xl=Object.create?function(o,n,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(n,e);(!i||("get"in i?!n.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return n[e]}}),Object.defineProperty(o,r,i)}:function(o,n,e,r){r===void 0&&(r=e),o[r]=n[e]};c(Lm,"__exportStar");c(yl,"__values");c(Gp,"__read");c(Vm,"__spread");c(Hm,"__spreadArrays");c(Um,"__spreadArray");c(Ps,"__await");c(Wm,"__asyncGenerator");c(Gm,"__asyncDelegator");c(zm,"__asyncValues");c(qm,"__makeTemplateObject");R4=Object.create?function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}:function(o,n){o.default=n};c(Qm,"__importStar");c($m,"__importDefault");c(Xm,"__classPrivateFieldGet");c(jm,"__classPrivateFieldSet");c(Ym,"__classPrivateFieldIn");c(Km,"__addDisposableResource");M4=typeof SuppressedError=="function"?SuppressedError:function(o,n,e){var r=new Error(e);return r.name="SuppressedError",r.error=o,r.suppressed=n,r};c(Zm,"__disposeResources");I4={__extends:Im,__assign:bl,__rest:Om,__decorate:Bm,__param:Pm,__metadata:km,__awaiter:Fm,__generator:Nm,__createBinding:xl,__exportStar:Lm,__values:yl,__read:Gp,__spread:Vm,__spreadArrays:Hm,__spreadArray:Um,__await:Ps,__asyncGenerator:Wm,__asyncDelegator:Gm,__asyncValues:zm,__makeTemplateObject:qm,__importStar:Qm,__importDefault:$m,__classPrivateFieldGet:Xm,__classPrivateFieldSet:jm,__classPrivateFieldIn:Ym,__addDisposableResource:Km,__disposeResources:Zm}});var Jm=rt(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.Private=void 0;var O4=function(){function o(){this.propMap=new WeakMap}return c(o,"Private"),o.prototype.get=function(n){return this.propMap.get(n)},o.prototype.set=function(n,e){this.propMap.set(n,e)},o}();wl.Private=O4});var e2=rt(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.Private=void 0;var B4=Jm();Object.defineProperty(_l,"Private",{enumerable:!0,get:function(){return B4.Private}})});var Qp=rt(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.EventConsumer=void 0;var P4=e2(),ki=new P4.Private,k4=function(){function o(n){ki.set(this,n)}return c(o,"EventConsumer"),Object.defineProperty(o.prototype,"count",{get:function(){return ki.get(this).count},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"maxSubs",{get:function(){return ki.get(this).maxSubs},enumerable:!1,configurable:!0}),o.prototype.subscribe=function(n,e){return ki.get(this).subscribe(n,e)},o.prototype.once=function(n,e){return ki.get(this).once(n,e)},o.prototype.toPromise=function(n){return ki.get(this).toPromise(n)},o.prototype.getStat=function(n){return ki.get(this).getStat(n)},o}();Sl.EventConsumer=k4});var $p=rt(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.SubEvent=Fi.EmitSchedule=void 0;var F4=(qp(),Ad(zp)),N4=Up(),L4=Qp(),Al;(function(o){o.sync="sync",o.async="async",o.next="next"})(Al=Fi.EmitSchedule||(Fi.EmitSchedule={}));var V4=function(){function o(n){if(this._subs=[],typeof(n??{})!="object")throw new TypeError(Qo.errInvalidOptions);this.options=n??{}}return c(o,"SubEvent"),o.prototype.toConsumer=function(){return new L4.EventConsumer(this)},o.prototype.subscribe=function(n,e){if(typeof(e??{})!="object")throw new TypeError(Qo.errInvalidOptions);n=e&&"thisArg"in e?n.bind(e.thisArg):n;var r=c(function(){e&&typeof e.onCancel=="function"&&e.onCancel()},"cancel"),i=e&&e.name,s={event:this,cb:n,name:i,cancel:r};if(typeof this.options.onSubscribe=="function"){var a={event:s.event,name:s.name,data:s.data};this.options.onSubscribe(a),s.data=a.data}return this._subs.push(s),new N4.Subscription({cancel:this._createCancel(s),sub:s})},o.prototype.once=function(n,e){var r=this.subscribe(function(i){return r.cancel(),n.call(e&&e.thisArg,i)},e);return r},o.prototype.emit=function(n,e){var r=this,i;if(typeof(e??{})!="object")throw new TypeError(Qo.errInvalidOptions);var s=(i=e&&e.schedule)!==null&&i!==void 0?i:Al.sync,a=e&&typeof e.onFinished=="function"&&e.onFinished,u=e&&typeof e.onError=="function"&&e.onError,l=s===Al.sync?Qo.callNow:Qo.callNext,p=s===Al.async?Qo.callNext:Qo.callNow;return l(function(){var d=r._getRecipients();d.forEach(function(h,m){return p(function(){if(u)try{var f=h.cb&&h.cb(n);f&&typeof f.catch=="function"&&f.catch(function(C){return u(C,h.name)})}catch(C){u(C,h.name)}else h.cb&&h.cb(n);a&&m===d.length-1&&a(d.length)})})}),this},Object.defineProperty(o.prototype,"count",{get:function(){return this._subs.length},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"maxSubs",{get:function(){var n;return(n=this.options.maxSubs)!==null&&n!==void 0?n:0},enumerable:!1,configurable:!0}),o.prototype.getStat=function(n){var e,r={named:{},unnamed:0};this._subs.forEach(function(a){a.name?a.name in r.named?r.named[a.name]++:r.named[a.name]=1:r.unnamed++});var i=(e=n&&n.minUse)!==null&&e!==void 0?e:0;if(i>1)for(var s in r.named)r.named[s]<i&&delete r.named[s];return r},o.prototype.cancelAll=function(){var n=typeof this.options.onCancel=="function"&&this.options.onCancel,e=n?F4.__spreadArray([],this._subs):[],r=this._subs.length;return this._subs.forEach(function(i){i.cancel(),i.cb=void 0}),this._subs.length=0,n&&e.forEach(function(i){n({event:i.event,name:i.name,data:i.data})}),r},o.prototype.toPromise=function(n){var e=this;if(typeof(n??{})!="object")throw new TypeError(Qo.errInvalidOptions);var r=n||{},i=r.name,s=r.timeout,a=s===void 0?-1:s,u,l=!1;return new Promise(function(p,d){var h=c(function(){l||(u&&clearTimeout(u),d(new Error(i?'Event "'+i+'" cancelled.':"Event cancelled.")))},"onCancel"),m=e.subscribe(function(f){u&&clearTimeout(u),l=!0,m.cancel(),p(f)},{name:i,onCancel:h});Number.isInteger(a)&&a>=0&&(u=setTimeout(function(){l=!0,m.cancel(),d(new Error(i?'Event "'+i+'" timed out.':"Event timed out."))},a))})},o.prototype._getRecipients=function(){var n=this.maxSubs>0?this.maxSubs:this._subs.length;return this._subs.slice(0,n)},o.prototype._createCancel=function(n){var e=this;return function(){e._cancelSub(n)}},o.prototype._cancelSub=function(n){if(this._subs.splice(this._subs.indexOf(n),1),n.cancel(),n.cb=void 0,typeof this.options.onCancel=="function"){var e={event:n.event,name:n.name,data:n.data};this.options.onCancel(e)}},o}();Fi.SubEvent=V4;var Qo=function(){function o(){}return c(o,"Stat"),o.errInvalidOptions='Invalid "options" parameter.',o.callNext=typeof process>"u"?setTimeout:process.nextTick,o.callNow=function(n){return n()},o}()});var n2=rt(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.SubEventCount=void 0;var H4=(qp(),Ad(zp)),t2=$p(),U4=function(o){H4.__extends(n,o);function n(e){var r=o.call(this,e)||this;r.onCount=new t2.SubEvent;var i=e&&e.emitOptions;return r._notify=function(s){return r.onCount.emit(s,i)},r}return c(n,"SubEventCount"),n.prototype.cancelAll=function(){var e=this.count;return e&&(o.prototype.cancelAll.call(this),this._notify({newCount:0,prevCount:e})),e},n.prototype._createCancel=function(e){var r=this,i=this._subs;return this._notify({newCount:i.length,prevCount:i.length-1}),function(){r._cancelSub(e),r._notify({newCount:i.length,prevCount:i.length+1})}},n}(t2.SubEvent);El.SubEventCount=U4});var o2=rt(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.EventConsumer=or.SubEventCount=or.EmitSchedule=or.SubEvent=or.Subscription=void 0;var W4=Up();Object.defineProperty(or,"Subscription",{enumerable:!0,get:function(){return W4.Subscription}});var r2=$p();Object.defineProperty(or,"SubEvent",{enumerable:!0,get:function(){return r2.SubEvent}});Object.defineProperty(or,"EmitSchedule",{enumerable:!0,get:function(){return r2.EmitSchedule}});var G4=n2();Object.defineProperty(or,"SubEventCount",{enumerable:!0,get:function(){return G4.SubEventCount}});var z4=Qp();Object.defineProperty(or,"EventConsumer",{enumerable:!0,get:function(){return z4.EventConsumer}})});var Ed=`<div id="logicEditorRoot" style="width: 100%; height: 100%; display: flex; align-items: stretch;">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"><\/script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"><\/script>

    <!-- Has to appear *after* the other bootstrap styles -->
    <style id="inlineStyle"></style>

    <div id="leftToolbar" style="flex:none; min-width: 50px; max-width: 60px;overflow-y: scroll;display: none;">
    </div>

    <div id="centerCol" style="flex: auto; display: flex; flex-direction: column; justify-content: stretch;">

        <div id="canvas-sim" style="flex: auto; position: relative; display: flex; align-items: stretch; min-width: 0; max-width: 100%; overflow: hidden;">

            <canvas id="mainCanvas" tabindex="0" style="flex:auto"></canvas>

            <div style="padding: 5px;
            position: absolute; top: 10px; right: 10px;display:flex; flex-direction: column; align-items: flex-end;">
                <div class="sim-toolbar-right" style="margin-bottom: 15px; display: none;" id="modeChangeMenu">
                </div>

                <div class="sim-toolbar-right" style="display: none;" id="rightToolbarContainer">
                    <div class="btn-group-vertical">
                        <button type="button" class="btn btn-sm btn-outline-light sim-toolbar-button-right" tool="reset" id="rightResetButton">
                            <i class="svgicon" data-icon="reset"></i>
                            <span style="margin-left: -20px">&nbsp;</span>
                        </button>
                    </div>
                </div>

                <div class="sim-toolbar-right" style="display: none; flex-direction:column; align-items: stretch; font-size: 75%; padding: 5px" data-prev-display="flex" id="optionsZone">
                    <div style="height: 20px; display: flex">
                        <b style="flex:auto; margin-right:5px" id="settingsTitle"></b>
                        <i class="svgicon" data-icon="close" style="cursor: pointer; margin-left: 5px; color: rgb(112, 112, 112)" id="closeOptions"></i>
                    </div>
                </div>

                <div class="assembler" id="assemblerEditor">
                </div>

            </div>
        </div>

    </div>



    <dialog id="embedDialog" style="display: none; border: 1px solid grey; border-radius: 10px; box-shadow: 0px 0px 16px 5px rgba(0,0,0,0.2); padding: 5px 10px; width: 100%; max-width: 600px;">
        <div style="display: flex; flex-direction: column; font-size: 80%">
            <div style="flex:none; font-weight: bold; text-align: center; width: 100%;padding: 10px 0; border-bottom: 1px solid lightgrey; margin-bottom: 10px; font-size: 120%" id="shareDialogTitle"></div>
            <div style="flex: auto; display: flex; flex-direction: row;">
                <div style="flex:auto; flex-direction: column;">
                    <div>
                        <span style="font-weight: bolder" id="shareDialogUrl"></span><br>
                        <textarea id="embedUrl" readonly rows="2" style="width:100%; resize: none"></textarea>
                    </div>
                    <div style="margin-top: 10px; flex:auto">
                        <span style="font-weight: bolder" id="shareDialogIframe"></span><br>
                        <textarea id="embedIframe" readonly rows="4" style="width:100%; font-family: monospace;"></textarea>
                    </div>
                    <div style="margin-top: 10px; flex:auto">
                        <span style="font-weight: bolder" id="shareDialogWebComp"></span><br>
                        <textarea id="embedWebcomp" readonly rows="4" style="width:100%; font-family: monospace;"></textarea>
                    </div>
                    <div style="margin-top: 10px; flex:auto">
                        <span style="font-weight: bolder;" id="shareDialogMarkdown"></span><br>
                        <textarea id="embedMarkdown" readonly rows="7" style="width:100%; font-family: monospace"></textarea>
                    </div>
                </div>
                <!-- <div style="flex:none; margin-top: 10px">
                    <img id="embedUrlQRCode" style="margin-left: 10px">
                </div> -->
            </div>
            <div style="flex: none; margin-top: 15px; text-align: center;">
                <form method="dialog">
                    <button value="close" id="shareDialogClose"></button>
                </form>
            </div>
        </div>
    </dialog>

    <input id="fileChooser" type="file" style="display:none"></input>

    <div id="tooltip" role="tooltip" style="display:none">
        <div id="tooltipContents"></div>
        <div id="arrow" data-popper-arrow></div>
    </div>

    <ul class="menu" id="mainContextMenu"></ul>

</div>`;var Td=`* {
  box-sizing: border-box;
}

canvas:focus {
  outline: none;
}

#logicEditorRoot {
  font-family: 'Roboto', sans-serif;
  background-color: #EEEEEE;
}

#logicEditorRoot.dark {
  background-color: #373737;
}

/* TODO would that go in some global CSS?
logic-editor:not(:defined) {
  opacity: 0;
  width: 100%;
  height: 20px;
}
*/

/* btn btn-sm  */


.navGroupTools {
  padding-left: 2px;
  padding-right: 2px;
  border-right-style: dotted;
  border-color: grey;
}

.nav-item {
  display: inline-flex;
}

#leftToolbar {
  display: flex;
  flex-direction: column;
  color: black;
}

.leftToolbarHeader {
  font-size: 80%;
  font-weight: bold;
  padding: 1px;
  /* word-break: break-all; */
  text-align: center;
  background-color: lightgray;
}

.leftToolbarMore {
  text-align: center;
  font-style: italic;
  font-size: 75%;
  padding: 3px 0;
  cursor: pointer;
  opacity: 0.6;
  color: rgb(33, 33, 33);
}

.dark .leftToolbarHeader {
  background-color: rgb(56, 56, 56);
}

.dark #leftToolbar {
  background-color: #5e5e5e;
  color: rgb(181, 181, 181);
}

.dark .leftToolbarMore {
  color: rgb(204, 204, 204);
}

.dark #leftToolbar .list-group-item {
  background-color: #5e5e5e;
}

.sim-toolbar-right {
  background: rgba(136, 136, 136, 0.5);
  box-shadow: 0px 0px 10px 1px rgb(201, 201, 201);
  border-radius: 5px;
}

.sim-component-button {
  padding: 8px 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.sim-component-button-extra {
  background-color: #ededed;
}

.sim-toolbar-button-right {
  text-align: left;
  cursor: pointer;
  height: 30px;
}

.sim-toolbar-button-right>i {
  width: 16px;
}

.sim-mode-link {
  opacity: 0.0;
  margin: -8px 0 -8px 5px;
  border: 1px solid rgba(0, 0, 0, 0);
  border-radius: 3px;
  padding: 5px;
}

.sim-toolbar-button-right.active .sim-mode-link {
  opacity: 1.0;
}

.sim-toolbar-button-right.active .sim-mode-link:hover {
  border-color: grey;
}

#leftToolbar .barLabel {
  font-size: 52%;
  font-weight: bold;
  text-align: center;
  word-break: break-all;
}

.truth-table {
  color: white;
  font-weight: normal;
  font-size: 90%;
  text-align: center;
  border: 1px solid grey;
  margin: 5px 0;
}

.truth-table th {
  padding: 3px 8px;
  margin: 0 0 2px 0;
  border-bottom: 1px solid grey;
}

.truth-table tr.current {
  background: grey;
  color: rgb(255, 192, 8);
}

.truth-table th:last-child,
.truth-table td:last-child {
  border-left: 1px solid grey;
}

/* Tooltips by Popper */

#tooltip {
  background: #333;
  color: white;
  padding: 6px;
  font-size: 13px;
  line-height: 1.2em;
  border-radius: 4px;
  display: none;
  opacity: 0.95;
}

#tooltip div+div {
  margin-top: 5px;
}

#tooltip[data-show] {
  display: block;
}

#arrow,
#arrow::before {
  position: absolute;
  width: 8px;
  height: 8px;
  background: inherit;
}

#arrow {
  visibility: hidden;
}

#arrow::before {
  visibility: visible;
  content: '';
  transform: rotate(45deg);
}

#tooltip[data-popper-placement^='top']>#arrow {
  bottom: -4px;
}

#tooltip[data-popper-placement^='bottom']>#arrow {
  top: -4px;
}

#tooltip[data-popper-placement^='left']>#arrow {
  right: -4px;
}

#tooltip[data-popper-placement^='right']>#arrow {
  left: -4px;
}

/* Menus */

.menu {
  position: absolute;
  min-width: 200px;
  padding: 2px;
  margin: 0;
  border: 1px solid #bbb;
  background: #EAEAEA;
  background: -webkit-linear-gradient(to bottom, #F2F2F2 0%, #EAEAEA 100px, #EAEAEA 100%);
  background: linear-gradient(to bottom, #F2F2F2 0%, #EAEAEA 100px, #EAEAEA 100%);
  z-index: 100;
  border-radius: 3px;
  box-shadow: 1px 1px 4px rgba(0, 0, 0, .2);
  opacity: 0;
  -webkit-transform: translate(0, 15px) scale(.95);
  transform: translate(0, 15px) scale(.95);
  transition: transform 0.1s ease-out, opacity 0.1s ease-out;
  pointer-events: none;
}

.menu-item {
  display: block;
  position: relative;
  margin: 0;
  padding: 0;
  white-space: nowrap;
}

.menu-btn {
  background: none;
  line-height: normal;
  overflow: visible;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  display: block;
  width: 100%;
  color: #444;
  font-family: 'Roboto', sans-serif;
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  border: 1px solid transparent;
  white-space: nowrap;
  padding: 6px 8px;
  border-radius: 3px;
}

.menu-btn::-moz-focus-inner,
.menu-btn::-moz-focus-inner {
  border: 0;
  padding: 0;
}

.menu-text {
  margin-left: 10px;
  margin-right: 22px;
}

.menu-item-static {
  display: block;
  padding: 0 5px;
  color: rgb(150, 150, 150);
  font-size: 70%;
  font-style: italic;
  width: 100%;
  white-space: normal;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  cursor: default;
}

.menu-btn .fa {
  position: absolute;
  left: 8px;
  top: 50%;
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
}

.menu-shortcut {
  position: absolute;
  right: 8px;
  font-size: 85%;
}

.menu-item:hover>.menu-btn {
  color: #fff;
  outline: none;
  background-color: #2865E1;
  background: -webkit-linear-gradient(to bottom, #2A6BED, #2865E1);
  background: linear-gradient(to bottom, #2A6BED, #2865E1);
  border: 1px solid #2865E1;
}

.menu-item:hover>.menu-btn.danger {
  color: #fff;
  background-color: #C1210E;
  background: -webkit-linear-gradient(to bottom, #DE2610, #C1210E);
  background: linear-gradient(to bottom, #DE2610, #C1210E);
  border: 1px solid #C1210E;
}

.menu-item.disabled {
  opacity: .5;
  pointer-events: none;
}

.menu-item.disabled .menu-btn {
  cursor: default;
}

.menu-separator {
  display: block;
  margin: 3px 5px;
  height: 1px;
  border-bottom: 1px solid #D0CFD0;
  background-color: #aaa;
}

.menu-item.submenu::after {
  content: "";
  position: absolute;
  right: 6px;
  top: 50%;
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
  border: 5px solid transparent;
  border-left-color: #808080;
}

.menu-item.submenu:hover::after {
  border-left-color: #fff;
}

.menu .menu {
  top: 4px;
  left: 99%;
}

.show-menu,
.menu-item:hover>.menu {
  opacity: 1;
  -webkit-transform: translate(0, 0) scale(1);
  transform: translate(0, 0) scale(1);
  pointer-events: auto;
}

.menu-item:hover>.menu {
  -webkit-transition-delay: 100ms;
  transition-delay: 300ms;
}

i.svgicon {
  display: inline-block;
  width: 16px;
}

i.svgicon svg {
  width: 100%;
}

i.svgicon path {
  fill: currentColor;
}



i.svgimg svg {
  width: 100%;
  font-family: Arial, Helvetica, sans-serif;
  font-style: normal;
}

i.svgimg {
  color: black;
}

.dark i.svgimg {
  color: rgb(230, 230, 230);
}

.dark .barLabel {
  color: rgb(220, 220, 220);
}

svg text {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  pointer-events: none;
}


/* Top bar */

.topBar {
  background-color: rgb(239, 239, 239);
  border-left: 1px solid lightgray;
}

.dark .topBar {
  background-color: rgb(94, 94, 94);
  border-left-color: #525252;
}

.topBar * {
  font: 10pt 'Roboto', sans-serif;
}

.dark .topBar * {
  color: rgb(220, 220, 220);
}

.topBar button {
  border: none;
  background: none;
  box-shadow: none;
  border-radius: 5px;
  display: inline-flex;
  align-items: center;
  gap: 3px;
}

.dark .topBar button:disabled * {
  color: #808080;
}

.topBar button:not(:disabled, .active):hover {
  background: #d5d5d5;
}

.topBar button:not(:disabled, .active):active {
  background: #b2b2b2;
  transform: translate(1px, 1px);
}

.topBar button.active {
  background: #ffffff;
  font-weight: bolder;
  cursor: unset;
}


.dark .topBar button:not(:disabled, .active):hover {
  background: #404040;
}

.dark .topBar button:not(:disabled, .active):active {
  background: #313131;
}

.dark .topBar button.active {
  background: #1E1E1E;
}

.topBar .sep {
  border-left: 1px solid #d5d5d5;
  margin: 0 4px;
}

.topBar .sep.fat {
  border-left-width: 5px;
}

.dark .topBar .sep {
  border-left-color: #525252;
}

.topBar .barLabel {
  display: inline-flex;
  align-items: center;
  white-space: pre;
  margin: 0 5px;
  cursor: default;
}

.topBar.compact .btnLabel {
  display: none;
}

.topBar a.barLabel {
  color: inherit;
  cursor: pointer;
}

.topBar .barTab {
  flex: none;
  display: inline-flex;
  margin: 0 0 -3px;
  padding: 3px;
}

.topBar .barTab.active {
  background-color: white;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  border: 1px solid rgb(200, 200, 200);
  border-bottom: none;
}

.dark .topBar .barTab.active {
  background-color: rgb(30, 30, 30);
  border-color: #555555;
}


.msgZone {
  position: absolute;
  top: -40px;
  width: 100%;
  display: flex;
  visibility: hidden;
  justify-content: center;
  align-items: center;
  transition: all 0.15s ease-in-out
}

.msgZone.visible {
  top: 10px;
  visibility: visible;
}

.msgZone .msgBar {
  padding: 5px 10px;
  border-radius: 20px;
  text-align: center;
  max-width: 80%;
  box-shadow: 0px 0px 5px 0px rgba(128, 128, 128, 0.5);
  font-size: 10pt;
  background-color: rgb(190, 190, 190, 0.2);
}

.dark .msgZone .msgBar {
  color: rgb(220, 220, 220);
}

/* CPUAssemblerEditor */
.assembler {
  position: relative;
  background-color: rgb(239, 239, 239);
  /*border-left: 1px solid lightgray;*/
  flex: none;
  display: flex;
  align-items: stretch;
  margin: -3px 0 -3px -5px;
  padding: 3px 5px;
  width: 680px;
  height: 820px;
  /*grid-template-columns: repeat(4, 1fr);*/
  gap: 10px;
}


.dark .assembler {
  background-color: rgb(94, 94, 94);
  border-left-color: #525252;
}

.assembler #button{

}

.assembler * {
  font-family: monospace;
  font-size : 12px;
}

.headerprogram {
  background-color: rgb(239, 239, 239);
  /*border-left: 1px solid lightgray;*/
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
  grid-gap: 5px;
  place-items: center;
}


.program {
  overflow-y: visible;
  overflow-x: hidden;
}

ol li::marker{
  color:#000000;
}

.line  {
  border: 5px solid #ffffff;
  background-color: #dddddd;
  /*border-radius: .5em;*/
  padding: 5px;
  cursor: move;
}

.hint {
  border: 5px dotted #ffc49a;
  background: #feffb4;
}

.active {
  border: 5px solid #ffa5a5;
  background: #ffe7e7;
}

.over {
  border: 5px dotted #666333;
  background-color: #d39e00;
}

.lineDiv {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
  grid-gap: 5px;
  place-items: center;
}

.assembler #button {
}

.label {
  width: 75px
  /*number: 5*/
}

.opcode {
  width: 55px
}

.operand {
  width: 80px
}

.comment {
  width: 250px
}

.labeldiv {
  max-width: 20%;
}

.opcodediv {
  max-width: 10%;
}

.operanddiv {
  max-width: 20%;
}

.commentdiv {
  max-width: 40%;
}

sourceCode{
  color: #ffffff;
  background-color: #117a8b;
}`;var Rd=`dialog {
  position: absolute;
  left: 0; right: 0;
  width: -moz-fit-content;
  width: -webkit-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: -webkit-fit-content;
  height: fit-content;
  margin: auto;
  border: solid;
  padding: 1em;
  background: white;
  color: black;
  display: block;
}

dialog:not([open]) {
  display: none;
}

dialog + .backdrop {
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  background: rgba(0,0,0,0.1);
}

._dialog_overlay {
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
}

dialog.fixed {
  position: fixed;
  top: 50%;
  transform: translate(0, -50%);
}`;var us=window.CustomEvent;(!us||typeof us=="object")&&(us=c(function(n,e){e=e||{};var r=document.createEvent("CustomEvent");return r.initCustomEvent(n,!!e.bubbles,!!e.cancelable,e.detail||null),r},"CustomEvent"),us.prototype=window.Event.prototype);function kd(o,n){var e="on"+n.type.toLowerCase();return typeof o[e]=="function"&&o[e](n),o.dispatchEvent(n)}c(kd,"safeDispatchEvent");function gg(o){for(;o&&o!==document.body;){var n=window.getComputedStyle(o),e=c(function(r,i){return!(n[r]===void 0||n[r]===i)},"invalid");if(n.opacity<1||e("zIndex","auto")||e("transform","none")||e("mixBlendMode","normal")||e("filter","none")||e("perspective","none")||n.isolation==="isolate"||n.position==="fixed"||n.webkitOverflowScrolling==="touch")return!0;o=o.parentElement}return!1}c(gg,"createsStackingContext");function ia(o){for(;o;){if(o.localName==="dialog")return o;o.parentElement?o=o.parentElement:o.parentNode?o=o.parentNode.host:o=null}return null}c(ia,"findNearestDialog");function Fd(o){for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;o&&o.blur&&o!==document.body&&o.blur()}c(Fd,"safeBlur");function Dg(o,n){for(var e=0;e<o.length;++e)if(o[e]===n)return!0;return!1}c(Dg,"inNodeList");function vc(o){return!o||!o.hasAttribute("method")?!1:o.getAttribute("method").toLowerCase()==="dialog"}c(vc,"isFormMethodDialog");function Nd(o){var n=["button","input","keygen","select","textarea"],e=n.map(function(a){return a+":not([disabled])"});e.push('[tabindex]:not([disabled]):not([tabindex=""])');var r=o.querySelector(e.join(", "));if(!r&&"attachShadow"in Element.prototype)for(var i=o.querySelectorAll("*"),s=0;s<i.length&&!(i[s].tagName&&i[s].shadowRoot&&(r=Nd(i[s].shadowRoot),r));s++);return r}c(Nd,"findFocusableElementWithin");function Md(o){return o.isConnected||document.body.contains(o)}c(Md,"isConnected");function Ld(o){if(o.submitter)return o.submitter;var n=o.target;if(!(n instanceof HTMLFormElement))return null;var e=qe.formSubmitter;if(!e){var r=o.target,i="getRootNode"in r&&r.getRootNode()||document;e=i.activeElement}return!e||e.form!==n?null:e}c(Ld,"findFormSubmitter");function Cg(o){if(!o.defaultPrevented){var n=o.target,e=qe.imagemapUseValue,r=Ld(o);e===null&&r&&(e=r.value);var i=ia(n);if(i){var s=r&&r.getAttribute("formmethod")||n.getAttribute("method");s==="dialog"&&(o.preventDefault(),e!=null?i.close(e):i.close())}}}c(Cg,"maybeHandleSubmit");function Vd(o){if(this.dialog_=o,this.replacedStyleTop_=!1,this.openAsModal_=!1,o.hasAttribute("role")||o.setAttribute("role","dialog"),o.show=this.show.bind(this),o.showModal=this.showModal.bind(this),o.close=this.close.bind(this),o.addEventListener("submit",Cg,!1),"returnValue"in o||(o.returnValue=""),"MutationObserver"in window){var n=new MutationObserver(this.maybeHideModal.bind(this));n.observe(o,{attributes:!0,attributeFilter:["open"]})}else{var e=!1,r=function(){e?this.downgradeModal():this.maybeHideModal(),e=!1}.bind(this),i,s=c(function(a){if(a.target===o){var u="DOMNodeRemoved";e|=a.type.substr(0,u.length)===u,window.clearTimeout(i),i=window.setTimeout(r,0)}},"delayModel");["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(a){o.addEventListener(a,s)})}Object.defineProperty(o,"open",{set:this.setOpen.bind(this),get:o.hasAttribute.bind(o,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("mouseup",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("mousedown",this.backdropMouseEvent_.bind(this)),this.backdrop_.addEventListener("click",this.backdropMouseEvent_.bind(this))}c(Vd,"dialogPolyfillInfo");Vd.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&Md(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),qe.dm.removeDialog(this))},setOpen:function(o){o?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropMouseEvent_:function(o){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var n=document.createElement("div");this.dialog_.insertBefore(n,this.dialog_.firstChild),n.tabIndex=-1,n.focus(),this.dialog_.removeChild(n)}var e=document.createEvent("MouseEvents");e.initMouseEvent(o.type,o.bubbles,o.cancelable,window,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget),this.dialog_.dispatchEvent(e),o.stopPropagation()},focus_:function(){var o=this.dialog_.querySelector("[autofocus]:not([disabled])");!o&&this.dialog_.tabIndex>=0&&(o=this.dialog_),o||(o=Nd(this.dialog_)),Fd(document.activeElement),o&&o.focus()},updateZIndex:function(o,n){if(o<n)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=o,this.backdrop_.style.zIndex=n},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!Md(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!qe.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");gg(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,qe.needsCentering(this.dialog_)?(qe.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(o){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),o!==void 0&&(this.dialog_.returnValue=o);var n=new us("close",{bubbles:!1,cancelable:!1});kd(this.dialog_,n)}};var qe={};qe.reposition=function(o){var n=document.body.scrollTop||document.documentElement.scrollTop,e=n+(window.innerHeight-o.offsetHeight)/2;o.style.top=Math.max(n,e)+"px"};qe.isInlinePositionSetByStylesheet=function(o){for(var n=0;n<document.styleSheets.length;++n){var e=document.styleSheets[n],r=null;try{r=e.cssRules}catch{}if(r)for(var i=0;i<r.length;++i){var s=r[i],a=null;try{a=document.querySelectorAll(s.selectorText)}catch{}if(!(!a||!Dg(a,o))){var u=s.style.getPropertyValue("top"),l=s.style.getPropertyValue("bottom");if(u&&u!=="auto"||l&&l!=="auto")return!0}}}return!1};qe.needsCentering=function(o){var n=window.getComputedStyle(o);return n.position!=="absolute"||o.style.top!=="auto"&&o.style.top!==""||o.style.bottom!=="auto"&&o.style.bottom!==""?!1:!qe.isInlinePositionSetByStylesheet(o)};qe.forceRegisterDialog=function(o){if((window.HTMLDialogElement||o.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",o),o.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new Vd(o)};qe.registerDialog=function(o){o.showModal||qe.forceRegisterDialog(o)};qe.DialogManager=function(){this.pendingDialogStack=[];var o=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(n){this.forwardTab_=void 0,n.stopPropagation(),o([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=1e5+150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(n){var e=[];n.forEach(function(r){for(var i=0,s;s=r.removedNodes[i];++i){if(s instanceof Element)s.localName==="dialog"&&e.push(s);else continue;e=e.concat(s.querySelectorAll("dialog"))}}),e.length&&o(e)}))};qe.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})};qe.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()};qe.DialogManager.prototype.updateStacking=function(){for(var o=this.zIndexHigh_,n=0,e;e=this.pendingDialogStack[n];++n)e.updateZIndex(--o,--o),n===0&&(this.overlay.style.zIndex=--o);var r=this.pendingDialogStack[0];if(r){var i=r.dialog.parentNode||document.body;i.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};qe.DialogManager.prototype.containedByTopDialog_=function(o){for(;o=ia(o);){for(var n=0,e;e=this.pendingDialogStack[n];++n)if(e.dialog===o)return n===0;o=o.parentElement}return!1};qe.DialogManager.prototype.handleFocus_=function(o){var n=o.composedPath?o.composedPath()[0]:o.target;if(!this.containedByTopDialog_(n)&&document.activeElement!==document.documentElement&&(o.preventDefault(),o.stopPropagation(),Fd(n),this.forwardTab_!==void 0)){var e=this.pendingDialogStack[0],r=e.dialog,i=r.compareDocumentPosition(n);return i&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():n!==document.documentElement&&document.documentElement.focus()),!1}};qe.DialogManager.prototype.handleKey_=function(o){if(this.forwardTab_=void 0,o.keyCode===27){o.preventDefault(),o.stopPropagation();var n=new us("cancel",{bubbles:!1,cancelable:!0}),e=this.pendingDialogStack[0];e&&kd(e.dialog,n)&&e.dialog.close()}else o.keyCode===9&&(this.forwardTab_=!o.shiftKey)};qe.DialogManager.prototype.checkDOM_=function(o){var n=this.pendingDialogStack.slice();n.forEach(function(e){o.indexOf(e.dialog)!==-1?e.downgradeModal():e.maybeHideModal()})};qe.DialogManager.prototype.pushDialog=function(o){var n=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=n?!1:(this.pendingDialogStack.unshift(o)===1&&this.blockDocument(),this.updateStacking(),!0)};qe.DialogManager.prototype.removeDialog=function(o){var n=this.pendingDialogStack.indexOf(o);n!==-1&&(this.pendingDialogStack.splice(n,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())};qe.dm=new qe.DialogManager;qe.formSubmitter=null;qe.imagemapUseValue=null;window.HTMLDialogElement===void 0&&(bc=document.createElement("form"),bc.setAttribute("method","dialog"),bc.method!=="dialog"&&(hi=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method"),hi&&(Id=hi.get,hi.get=function(){return vc(this)?"dialog":Id.call(this)},Od=hi.set,hi.set=function(o){return typeof o=="string"&&o.toLowerCase()==="dialog"?this.setAttribute("method",o):Od.call(this,o)},Object.defineProperty(HTMLFormElement.prototype,"method",hi))),document.addEventListener("click",function(o){if(qe.formSubmitter=null,qe.imagemapUseValue=null,!o.defaultPrevented){var n=o.target;if("composedPath"in o){var e=o.composedPath();n=e.shift()||n}if(!(!n||!vc(n.form))){var r=n.type==="submit"&&["button","input"].indexOf(n.localName)>-1;if(!r){if(!(n.localName==="input"&&n.type==="image"))return;qe.imagemapUseValue=o.offsetX+","+o.offsetY}var i=ia(n);i&&(qe.formSubmitter=n)}}},!1),document.addEventListener("submit",function(o){var n=o.target,e=ia(n);if(!e){var r=Ld(o),i=r&&r.getAttribute("formmethod")||n.getAttribute("method");i==="dialog"&&o.preventDefault()}}),Bd=HTMLFormElement.prototype.submit,Pd=c(function(){if(!vc(this))return Bd.call(this);var o=ia(this);o&&o.close()},"replacementFormSubmit"),HTMLFormElement.prototype.submit=Pd);var bc,hi,Id,Od,Bd,Pd,Hd=qe;var $2=ge(sa()),vd=ge(wo()),pu=ge(Ud()),ii=ge(e0());var y2=ge(He()),nd=ge(wo());var Fp=ge(sa()),cl=ge(wo()),As=ge(fh());var Ch=ge(yu()),ft=ge(He()),vh=ge(Dh()),Yc=ge(wo());var Su=typeof window!="undefined";function ga(o){return Object.keys(o)}c(ga,"keysOf");var Pt=class{constructor(n){this.props=n;this._values=ga(n);for(let e=0;e<this._values.length;e++)this[e]=this._values[e]}static withProps(){return function(n){return new Pt(n)}}get type(){throw new Error}get values(){return this._values}get length(){return this._values.length}get definitions(){let n=[];for(let e of this._values)n.push([e,this.props[e]]);return n}includes(n){return this.values.includes(n)}indexOf(n){return this.values.indexOf(n)}*[Symbol.iterator](){for(let n of this._values)yield n}};c(Pt,"RichStringEnum");function x(...o){return o}c(x,"tuple");function Kc(o,n){let e=L({},o);for(let[r,i]of Object.entries(n))i!==void 0&&(e[r]=i);return e}c(Kc,"mergeWhereDefined");function bh(){return o=>o}c(bh,"brand");function IC(o,n){return L(L({},n),o)}c(IC,"defineADTStatics");function Ae(o){return typeof o=="string"}c(Ae,"isString");function me(o){return Array.isArray(o)}c(me,"isArray");function Un(o){return typeof o=="number"}c(Un,"isNumber");function Ci(o){return typeof o=="boolean"}c(Ci,"isBoolean");function Wn(o){return typeof o=="object"&&o!==null}c(Wn,"isRecord");function U(o,n){return Array(n).fill(o)}c(U,"ArrayFillWith");function kt(o,n){let e=Array(n);for(let r=0;r<n;r++)e[r]=o(r);return e}c(kt,"ArrayFillUsing");function vi(o,n,e){let r=n-o.length;if(r>0)for(let i=0;i<r;i++)o.push(e);else r<0&&o.splice(n,-r);return o}c(vi,"ArrayClampOrPad");function Gn(o,n){return U(o,n)}c(Gn,"FixedArrayFillWith");function yh(o,n){return o.map(n)}c(yh,"FixedArrayMap");function Au(o,n){if(o.length!==n)throw new Error(`FixedArrayAssert: expected length ${n}, got ${o.length}`);return o}c(Au,"FixedArrayAssert");function Da(o){let n=Yc.default.parse(o);if(Wn(n))return n;throw new Error("JSONParseObject: not an object")}c(Da,"JSONParseObject");function Zc(o){return o!=null&&(o==="1"||o.toLowerCase()==="true")}c(Zc,"isTruthyString");function Eu(o){return o!=null&&(o==="0"||o.toLowerCase()==="false")}c(Eu,"isFalsyString");function Jc(o,n){let r=window.location.search.substring(1).split("&");for(let i of r){let s=i.split("=");if(s[0]===o)return s[1]}return n}c(Jc,"getURLParameter");function xh(){try{return window.self!==window.top}catch(o){return!0}}c(xh,"isEmbeddedInIframe");function wh(o,n){new IntersectionObserver((e,r)=>{e.forEach(i=>{if(i.intersectionRatio>0){n(),r.disconnect();return}})}).observe(o)}c(wh,"onVisible");function Tu(o,n){n?o.removeAttribute("disabled"):o.setAttribute("disabled","disabled")}c(Tu,"setEnabled");function Ge(o,n){if(n){let e=o.getAttribute("data-prev-display");e===null?o.style.display==="none"&&o.style.removeProperty("display"):(o.removeAttribute("data-prev-display"),o.style.display=e)}else{let e=o.style.display;e.length!==0&&e!=="none"&&o.setAttribute("data-prev-display",e),o.style.display="none"}}c(Ge,"setVisible");function _h(o){Ge(o,o.style.display==="none")}c(_h,"toggleVisible");function Ru(o,n){Ge(o,n!=="hide"),n==="inactive"?o.style.visibility="hidden":o.style.removeProperty("visibility")}c(Ru,"setDisplay");function ds(o,n){n?o.classList.add("active"):o.classList.remove("active")}c(ds,"setActive");function Sh(o){if(typeof o.showModal=="function"){o.style.display="initial",o.showModal();let n=c(()=>{o.style.display="none",o.removeEventListener("close",n)},"listener");return o.addEventListener("close",n),!0}return!1}c(Sh,"showModal");var OC={NoChange:{_tag:"NoChange",isChange:!1},SimpleChange:{_tag:"SimpleChange",isChange:!0},RepeatableChange:o=>({_tag:"RepeatableChange",isChange:!0,repeat:o})},ae=IC(OC,{fromBoolean:o=>o?ae.SimpleChange:ae.NoChange,merge:(o,n)=>o._tag==="NoChange"?n:o._tag==="RepeatableChange"?o:n._tag==="RepeatableChange"?n:o}),Z={rising:"rising",falling:"falling"};function Ah(o,n){return Array(n+1).join(o)}c(Ah,"repeatString");function Eh(o,...n){if(n.length){let e=typeof n[0],r=e==="string"||e==="number"?Array.prototype.slice.call(n):n[0];for(let i in r)o=o.replace(new RegExp("\\{"+i+"\\}","gi"),r[i])}return o}c(Eh,"formatString");function Th(o,n){let e=Object.keys(o),r=Object.keys(n);if(e.length!==r.length)return!1;for(let i of e)if(!Dr(o[i],n[i]))return!1;return!0}c(Th,"deepObjectEquals");function Dr(o,n){if(me(o)&&me(n)){if(o.length!==n.length)return!1;for(let e=0;e<o.length;e++)if(o[e]!==n[e])return!1;return!0}else return o===n}c(Dr,"deepEquals");var P=c(o=>ft.union([o,ft.undefined],o.name+" | undefined"),"typeOrUndefined"),Rh=c(o=>ft.union([o,ft.null],o.name+" | null"),"typeOrNull");function Zr(o,n,e){let r=n.decode(o);if((0,Ch.isLeft)(r)){console.warn(`ERROR while parsing ${e} from %o -> %s: `,o,vh.PathReporter.report(r).join("; "));return}return r.right}c(Zr,"validateJson");var Qe="Z";function ye(o){return o===Qe}c(ye,"isHighImpedance");var O="?";function G(o){return o===O}c(G,"isUnknown");var qy=new ft.Type("Unknown",G,(o,n)=>G(o)?ft.success(o):ft.failure(o,n),ft.identity),xe={invert(o){return G(o)||ye(o)?o:!o},filterHighZ(o){return ye(o)?O:o}},To=new ft.Type("0|1|?|Z",o=>G(o)||ye(o)||o===1||o===0,(o,n)=>G(o)?ft.success(o):ye(o)?ft.success(o):o===1?ft.success(1):o===0?ft.success(0):ft.failure(o,n),ft.identity);function pt(o){switch(o){case!0:return 1;case!1:return 0;case O:return O;case Qe:return Qe;case void 0:return}}c(pt,"toLogicValueRepr");function Fr(o){switch(o){case 1:return!0;case 0:return!1;case O:return O;case Qe:return Qe;case void 0:return}}c(Fr,"toLogicValue");function ep(o){switch(o){case"1":return!0;case"0":return!1;case O:return O;case Qe:return Qe;default:return O}}c(ep,"toLogicValueFromChar");function Mu(o){for(let n of o)if(n!==!0&&n!==!1)return!1;return!0}c(Mu,"allBooleans");function hs(o){for(let n of o)if(n!=="0")return!1;return!0}c(hs,"isAllZeros");function Jr(o){return o.map(pt).reverse().join("")}c(Jr,"binaryStringRepr");function Iu(o,n){let e=Jr(o);return parseInt(e,2).toString(16).toUpperCase().padStart(n,"0")}c(Iu,"hexStringRepr");function fs(o,n){let i=o.length===n?o:parseInt(o,16).toString(2).padStart(n,"0"),s=Array(n);for(let a=0;a<n;a++)s[a]=ep(i[n-a-1]);return s}c(fs,"wordFromBinaryOrHexRepr");function tp(o){function n(){return navigator.userAgent.match(/ipad|iphone/i)}c(n,"isOS");let e=document.createElement("textarea");if(e.readOnly=!0,e.contentEditable="true",e.value=o,document.body.appendChild(e),n()){let i=document.createRange();i.selectNodeContents(e);let s=window.getSelection();s!==null&&(s.removeAllRanges(),s.addRange(i),e.setSelectionRange(0,999999))}else e.select();let r=document.execCommand("copy");return document.body.removeChild(e),r}c(tp,"copyToClipboard");function Mh(){let o=document.createElement("textarea");o.readOnly=!1,o.contentEditable="true",document.body.appendChild(o),o.focus();let e=document.execCommand("paste")?o.value:void 0;return document.body.removeChild(o),e}c(Mh,"pasteFromClipboard");function Ro(o){let n=o.composedPath(),e,r;return n.length!==0&&(e=n[0])instanceof HTMLElement&&((r=e.tagName)==="INPUT"||r==="SELECT")}c(Ro,"targetIsFieldOrOtherInput");function Ih(o){let n=getComputedStyle(o),e=n.position==="absolute",r=/(auto|scroll)/;if(n.position==="fixed")return document;let i;for(i=o;i=i.parentElement;)if(n=getComputedStyle(i),!(e&&n.position==="static")&&r.test(n.overflow+n.overflowY+n.overflowX))return i;return document}c(Ih,"getScrollParent");var Qy=(o=>n=>new Promise(e=>{let r=document.createElement("script"),i=`_jsonp_${o++}`;n.match(/\?/)?n+=`&callback=${i}`:n+=`?callback=${i}`,r.src=n,window[i]=s=>{r.remove(),delete window[i],e(Yc.default.stringify(s))},document.body.appendChild(r)}))(0);var ms=6;function np(o){var s;let r=Number((s=o.v)!=null?s:0),i=r;if(i>ms)throw new Error(`Data format v${i} is newer than what this editor can load (v \u2264 ${ms}`);for(;r<ms;){let a=BC[++r];a(o);let u=o.defs;if(me(u))for(let l of u){let p=l.circuit;Wn(p)&&a(p)}o.v=r}r!==i&&console.log(`Migrated data format from v${i} to v${r}, consider upgrading the source`)}c(np,"migrateData");var BC={6:o=>{let n={in:"in",out:"out",gates:"gate",ic:"ic",labels:"label",layout:"layout"},e={in:"in","in.clock":"clock","in.random":"rand",out:"out","out.display":"display","out.7seg":"7seg","out.16seg":"16seg","out.ascii":"ascii","out.bar":"bar","out.shift-buffer":"shift-display","ic.switched-inverter":"cnot-array","ic.gate-array":"{gatetype}-array","ic.tristate-array":"tristate-array",label:"label","label.rect":"rect","layout.pass":"pass","ic.halfadder":"halfadder","ic.adder":"adder","ic.comparator":"comp","ic.adder-array":"adder-array","ic.alu":"alu","ic.mux":"mux","ic.demux":"demux","ic.latch-sr":"latch-sr","ic.flipflop-jk":"ff-jk","ic.flipflop-t":"ff-t","ic.flipflop-d":"ff-d","ic.register":"reg","ic.shift-register":"shift-reg","ic.counter":"counter","ic.ram":"ram","ic.rom":"rom","ic.decoder":"dec","ic.decoder-7seg":"dec-7seg","ic.decoder-16seg":"dec-16seg","ic.decoder-bcd4":"dec-bcd4"};function r(s,a){if(s==="gate"){if(!Ae(a.type))return console.warn("Gate with no type found, assuming AND",a),"and";let u=a.type.toLowerCase();return u==="tri"?"tristate":u}else{let u=Ae(a.type)?`${s}.${a.type}`:s;if(u==="ic.gate-array"){let l;return Ae(a.subtype)?l=a.subtype.toLowerCase():(console.warn("Gate array with no subtype found, assuming AND",a),l="and"),delete a.subtype,`${l}-array`}else return u in e?e[u]:u.startsWith("ic.custom-")?u.substring(3):(console.error(`Unknown component type: ${u}`),u)}}c(r,"newTypeFor");let i=[];for(let[s,a]of Object.entries(n)){let u=o[s];if(me(u)){for(let l of u)if(Wn(l)){let p=r(a,l);l.type=p,a==="gate"&&Ae(l.poseAs)&&(l.poseAs=l.poseAs.toLowerCase()),i.push(l)}}delete o[s]}o.components=i},5:o=>{var l,p,d,h,m,f,C,D,b,v,_,M,A,E;let n,e,r=o.in;if(me(r))for(let B of r)Ae(n=B.type)&&(n==="nibble"?(delete B.type,B.bits=4):n==="byte"&&(delete B.type,B.bits=8));let i=o.out;if(me(i))for(let B of i)Ae(n=B.type)&&(n==="nibble"?(delete B.type,B.bits=4):n==="byte"?(delete B.type,B.bits=8):n==="nibble-display"?(B.type="display",B.bits=4):n==="byte-display"?(B.type="display",B.bits=8):n==="shiftbuffer"&&(B.type="shift-buffer"));let s=o.gates;if(me(s)){for(let B of s)if(Ae(n=B.type)){let I=n[n.length-1],k=parseInt(I);isNaN(k)||(B.bits=k,B.type=n.slice(0,-1))}}let a=o.components;if(me(a)){let B=new RegExp("^ram-(?<lines>\\d+)x(?<bits>\\d+)$"),I=new RegExp("^mux-(?<from>\\d+)to(?<to>\\d+)$"),k=new RegExp("^demux-(?<from>\\d+)to(?<to>\\d+)$");for(let S of a)if(Ae(n=S.type))if(n==="register"){let H;if(me(H=S.state)){let F=Jr(H.map(Fr));hs(F)||(S.content=F),delete S.state}}else n==="quad-gate"?S.type="gate-array":n==="quad-tristate"?S.type="tristate-array":(e=B.exec(n))!==null?(S.type="ram",S.bits=parseInt((p=(l=e.groups)==null?void 0:l.bits)!=null?p:"4"),S.lines=parseInt((h=(d=e.groups)==null?void 0:d.lines)!=null?h:"16")):(e=I.exec(n))!==null?(S.type="mux",S.from=parseInt((f=(m=e.groups)==null?void 0:m.from)!=null?f:"8"),S.to=parseInt((D=(C=e.groups)==null?void 0:C.to)!=null?D:"4")):(e=k.exec(n))!==null&&(S.type="demux",S.from=parseInt((v=(b=e.groups)==null?void 0:b.from)!=null?v:"4"),S.to=parseInt((M=(_=e.groups)==null?void 0:_.to)!=null?M:"8"));o.ic=a,delete o.components}let u=o.layout;if(me(u)){let B=new RegExp("^pass-(?<bits>\\d+)$");for(let I of u)Ae(n=I.type)&&(e=B.exec(n))!==null&&(I.type="pass",I.bits=parseInt((E=(A=e.groups)==null?void 0:A.bits)!=null?E:"1"))}},4:o=>{let n=Oh(o),e=o.out;if(me(e))for(let i of e)i.type==="nibble"&&(i.type="nibble-display");let r=o.components;if(me(r)){for(let i of r)if(i.type==="alu"&&me(i.out)){i.out.push(n++);let s=i.out[4];i.out[4]=i.out[6],i.out[6]=s}}},3:o=>{let n=Oh(o),e=o.components;if(me(e))for(let r of e)r.type==="alu"&&me(r.in)&&r.in.push(n++)},2:o=>{let n=o.wires;if(me(n)){for(let e of n)if(me(e)&&e.length===3){let r=e[2];"waypoints"in r&&(r.via=r.waypoints,delete r.waypoints)}}},1:o=>{if("displays"in o){let e=o.displays;if(delete o.displays,"out"in o||(o.out=[]),me(e)&&me(o.out))for(let r of e)o.out.push(r)}if("clocks"in o){let e=o.clocks;if(delete o.clocks,"in"in o||(o.in=[]),me(e)&&me(o.in))for(let r of e)r.type="clock",o.in.push(r)}let n=o.components;if(me(n))for(let e of n){let r;if(Ae(r=e.type)&&r.startsWith("flipflop")){let i=e.in,s=i.splice(-3);e.in=[...s,...i]}}}};function Oh(o){let n=-1;function e(i){for(let s of["id","in","out"])r(i[s])}c(e,"inspectComponentDef");function r(i){if(i!==void 0)if(typeof i=="number")!isNaN(i)&&isFinite(i)&&(n=Math.max(n,i));else if(typeof i=="string")for(let s of i.split("-"))r(parseInt(s));else if(me(i))for(let s of i)r(s);else typeof i=="object"&&i!==null&&r(i.id)}c(r,"inspectValue");for(let i of Object.keys(o)){let s=o[i];if(s!==void 0&&me(s))for(let a of s)e(a)}return n+1}c(Oh,"findFirstFreeId");var{abs:Ca,cos:eo,sin:gs,acos:PC,atan2:va,sqrt:Mo,pow:Jn}=Math;function ba(o){return o<0?-Jn(-o,1/3):Jn(o,1/3)}c(ba,"crt");var Bh=Math.PI,Ou=2*Bh,Io=Bh/2,kC=1e-6,rp=Number.MAX_SAFE_INTEGER||9007199254740991,op=Number.MIN_SAFE_INTEGER||-9007199254740991,FC={x:0,y:0,z:0},$={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(o,n){let e=n(o),r=e.x*e.x+e.y*e.y;return typeof e.z<"u"&&(r+=e.z*e.z),Mo(r)},compute:function(o,n,e){if(o===0)return n[0].t=0,n[0];let r=n.length-1;if(o===1)return n[r].t=1,n[r];let i=1-o,s=n;if(r===0)return n[0].t=o,n[0];if(r===1){let u={x:i*s[0].x+o*s[1].x,y:i*s[0].y+o*s[1].y,t:o};return e&&(u.z=i*s[0].z+o*s[1].z),u}if(r<4){let u=i*i,l=o*o,p,d,h,m=0;r===2?(s=[s[0],s[1],s[2],FC],p=u,d=i*o*2,h=l):r===3&&(p=u*i,d=u*o*3,h=i*l*3,m=o*l);let f={x:p*s[0].x+d*s[1].x+h*s[2].x+m*s[3].x,y:p*s[0].y+d*s[1].y+h*s[2].y+m*s[3].y,t:o};return e&&(f.z=p*s[0].z+d*s[1].z+h*s[2].z+m*s[3].z),f}let a=JSON.parse(JSON.stringify(n));for(;a.length>1;){for(let u=0;u<a.length-1;u++)a[u]={x:a[u].x+(a[u+1].x-a[u].x)*o,y:a[u].y+(a[u+1].y-a[u].y)*o},typeof a[u].z<"u"&&(a[u].z=a[u].z+(a[u+1].z-a[u].z)*o);a.splice(a.length-1,1)}return a[0].t=o,a[0]},computeWithRatios:function(o,n,e,r){let i=1-o,s=e,a=n,u=s[0],l=s[1],p=s[2],d=s[3],h;if(u*=i,l*=o,a.length===2)return h=u+l,{x:(u*a[0].x+l*a[1].x)/h,y:(u*a[0].y+l*a[1].y)/h,z:r?(u*a[0].z+l*a[1].z)/h:!1,t:o};if(u*=i,l*=2*i,p*=o*o,a.length===3)return h=u+l+p,{x:(u*a[0].x+l*a[1].x+p*a[2].x)/h,y:(u*a[0].y+l*a[1].y+p*a[2].y)/h,z:r?(u*a[0].z+l*a[1].z+p*a[2].z)/h:!1,t:o};if(u*=i,l*=1.5*i,p*=3*i,d*=o*o*o,a.length===4)return h=u+l+p+d,{x:(u*a[0].x+l*a[1].x+p*a[2].x+d*a[3].x)/h,y:(u*a[0].y+l*a[1].y+p*a[2].y+d*a[3].y)/h,z:r?(u*a[0].z+l*a[1].z+p*a[2].z+d*a[3].z)/h:!1,t:o}},derive:function(o,n){let e=[];for(let r=o,i=r.length,s=i-1;i>1;i--,s--){let a=[];for(let u=0,l;u<s;u++)l={x:s*(r[u+1].x-r[u].x),y:s*(r[u+1].y-r[u].y)},n&&(l.z=s*(r[u+1].z-r[u].z)),a.push(l);e.push(a),r=a}return e},between:function(o,n,e){return n<=o&&o<=e||$.approximately(o,n)||$.approximately(o,e)},approximately:function(o,n,e){return Ca(o-n)<=(e||kC)},length:function(o){let e=$.Tvalues.length,r=0;for(let i=0,s;i<e;i++)s=.5*$.Tvalues[i]+.5,r+=$.Cvalues[i]*$.arcfn(s,o);return .5*r},map:function(o,n,e,r,i){let s=e-n,a=i-r,u=o-n,l=u/s;return r+a*l},lerp:function(o,n,e){let r={x:n.x+o*(e.x-n.x),y:n.y+o*(e.y-n.y)};return n.z!==void 0&&e.z!==void 0&&(r.z=n.z+o*(e.z-n.z)),r},pointToString:function(o){let n=o.x+"/"+o.y;return typeof o.z<"u"&&(n+="/"+o.z),n},pointsToString:function(o){return"["+o.map($.pointToString).join(", ")+"]"},copy:function(o){return JSON.parse(JSON.stringify(o))},angle:function(o,n,e){let r=n.x-o.x,i=n.y-o.y,s=e.x-o.x,a=e.y-o.y,u=r*a-i*s,l=r*s+i*a;return va(u,l)},round:function(o,n){let e=""+o,r=e.indexOf(".");return parseFloat(e.substring(0,r+1+n))},dist:function(o,n){let e=o.x-n.x,r=o.y-n.y;return Mo(e*e+r*r)},closest:function(o,n){let e=Jn(2,63),r,i;return o.forEach(function(s,a){i=$.dist(n,s),i<e&&(e=i,r=a)}),{mdist:e,mpos:r}},abcratio:function(o,n){if(n!==2&&n!==3)return!1;if(typeof o>"u")o=.5;else if(o===0||o===1)return o;let e=Jn(o,n)+Jn(1-o,n),r=e-1;return Ca(r/e)},projectionratio:function(o,n){if(n!==2&&n!==3)return!1;if(typeof o>"u")o=.5;else if(o===0||o===1)return o;let e=Jn(1-o,n),r=Jn(o,n)+e;return e/r},lli8:function(o,n,e,r,i,s,a,u){let l=(o*r-n*e)*(i-a)-(o-e)*(i*u-s*a),p=(o*r-n*e)*(s-u)-(n-r)*(i*u-s*a),d=(o-e)*(s-u)-(n-r)*(i-a);return d==0?!1:{x:l/d,y:p/d}},lli4:function(o,n,e,r){let i=o.x,s=o.y,a=n.x,u=n.y,l=e.x,p=e.y,d=r.x,h=r.y;return $.lli8(i,s,a,u,l,p,d,h)},lli:function(o,n){return $.lli4(o,o.c,n,n.c)},makeline:function(o,n){return new Ye(o.x,o.y,(o.x+n.x)/2,(o.y+n.y)/2,n.x,n.y)},findbbox:function(o){let n=rp,e=rp,r=op,i=op;return o.forEach(function(s){let a=s.bbox();n>a.x.min&&(n=a.x.min),e>a.y.min&&(e=a.y.min),r<a.x.max&&(r=a.x.max),i<a.y.max&&(i=a.y.max)}),{x:{min:n,mid:(n+r)/2,max:r,size:r-n},y:{min:e,mid:(e+i)/2,max:i,size:i-e}}},shapeintersections:function(o,n,e,r,i){if(!$.bboxoverlap(n,r))return[];let s=[],a=[o.startcap,o.forward,o.back,o.endcap],u=[e.startcap,e.forward,e.back,e.endcap];return a.forEach(function(l){l.virtual||u.forEach(function(p){if(p.virtual)return;let d=l.intersects(p,i);d.length>0&&(d.c1=l,d.c2=p,d.s1=o,d.s2=e,s.push(d))})}),s},makeshape:function(o,n,e){let r=n.points.length,i=o.points.length,s=$.makeline(n.points[r-1],o.points[0]),a=$.makeline(o.points[i-1],n.points[0]),u={startcap:s,forward:o,back:n,endcap:a,bbox:$.findbbox([s,o,n,a])};return u.intersections=function(l){return $.shapeintersections(u,u.bbox,l,l.bbox,e)},u},getminmax:function(o,n,e){if(!e)return{min:0,max:0};let r=rp,i=op,s,a;e.indexOf(0)===-1&&(e=[0].concat(e)),e.indexOf(1)===-1&&e.push(1);for(let u=0,l=e.length;u<l;u++)s=e[u],a=o.get(s),a[n]<r&&(r=a[n]),a[n]>i&&(i=a[n]);return{min:r,mid:(r+i)/2,max:i,size:i-r}},align:function(o,n){let e=n.p1.x,r=n.p1.y,i=-va(n.p2.y-r,n.p2.x-e),s=c(function(a){return{x:(a.x-e)*eo(i)-(a.y-r)*gs(i),y:(a.x-e)*gs(i)+(a.y-r)*eo(i)}},"d");return o.map(s)},roots:function(o,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};let e=o.length-1,r=$.align(o,n),i=c(function(I){return 0<=I&&I<=1},"reduce");if(e===2){let I=r[0].y,k=r[1].y,S=r[2].y,H=I-2*k+S;if(H!==0){let F=-Mo(k*k-I*S),q=-I+k,te=-(F+q)/H,se=-(-F+q)/H;return[te,se].filter(i)}else if(k!==S&&H===0)return[(2*k-S)/(2*k-2*S)].filter(i);return[]}let s=r[0].y,a=r[1].y,u=r[2].y,l=r[3].y,p=-s+3*a-3*u+l,d=3*s-6*a+3*u,h=-3*s+3*a,m=s;if($.approximately(p,0)){if($.approximately(d,0))return $.approximately(h,0)?[]:[-m/h].filter(i);let I=Mo(h*h-4*d*m),k=2*d;return[(I-h)/k,(-h-I)/k].filter(i)}d/=p,h/=p,m/=p;let f=(3*h-d*d)/3,C=f/3,D=(2*d*d*d-9*d*h+27*m)/27,b=D/2,v=b*b+C*C*C,_,M,A,E,B;if(v<0){let I=-f/3,k=I*I*I,S=Mo(k),H=-D/(2*S),F=H<-1?-1:H>1?1:H,q=PC(F),te=ba(S),se=2*te;return A=se*eo(q/3)-d/3,E=se*eo((q+Ou)/3)-d/3,B=se*eo((q+2*Ou)/3)-d/3,[A,E,B].filter(i)}else{if(v===0)return _=b<0?ba(-b):-ba(b),A=2*_-d/3,E=-_-d/3,[A,E].filter(i);{let I=Mo(v);return _=ba(-b+I),M=ba(b+I),[_-M-d/3].filter(i)}}},droots:function(o){if(o.length===3){let n=o[0],e=o[1],r=o[2],i=n-2*e+r;if(i!==0){let s=-Mo(e*e-n*r),a=-n+e,u=-(s+a)/i,l=-(-s+a)/i;return[u,l]}else if(e!==r&&i===0)return[(2*e-r)/(2*(e-r))];return[]}if(o.length===2){let n=o[0],e=o[1];return n!==e?[n/(n-e)]:[]}return[]},curvature:function(o,n,e,r,i){let s,a,u,l,p=0,d=0,h=$.compute(o,n),m=$.compute(o,e),f=h.x*h.x+h.y*h.y;if(r?(s=Mo(Jn(h.y*m.z-m.y*h.z,2)+Jn(h.z*m.x-m.z*h.x,2)+Jn(h.x*m.y-m.x*h.y,2)),a=Jn(f+h.z*h.z,3/2)):(s=h.x*m.y-h.y*m.x,a=Jn(f,3/2)),s===0||a===0)return{k:0,r:0};if(p=s/a,d=a/s,!i){let C=$.curvature(o-.001,n,e,r,!0).k,D=$.curvature(o+.001,n,e,r,!0).k;l=(D-p+(p-C))/2,u=(Ca(D-p)+Ca(p-C))/2}return{k:p,r:d,dk:l,adk:u}},inflections:function(o){if(o.length<4)return[];let n=$.align(o,{p1:o[0],p2:o.slice(-1)[0]}),e=n[2].x*n[1].y,r=n[3].x*n[1].y,i=n[1].x*n[2].y,s=n[3].x*n[2].y,a=18*(-3*e+2*r+3*i-s),u=18*(3*e-r-3*i),l=18*(i-e);if($.approximately(a,0)){if(!$.approximately(u,0)){let m=-l/u;if(0<=m&&m<=1)return[m]}return[]}let p=2*a;if($.approximately(p,0))return[];let d=u*u-4*a*l;if(d<0)return[];let h=Math.sqrt(d);return[(h-u)/p,-(u+h)/p].filter(function(m){return 0<=m&&m<=1})},bboxoverlap:function(o,n){let e=["x","y"],r=e.length;for(let i=0,s,a,u,l;i<r;i++)if(s=e[i],a=o[s].mid,u=n[s].mid,l=(o[s].size+n[s].size)/2,Ca(a-u)>=l)return!1;return!0},expandbox:function(o,n){n.x.min<o.x.min&&(o.x.min=n.x.min),n.y.min<o.y.min&&(o.y.min=n.y.min),n.z&&n.z.min<o.z.min&&(o.z.min=n.z.min),n.x.max>o.x.max&&(o.x.max=n.x.max),n.y.max>o.y.max&&(o.y.max=n.y.max),n.z&&n.z.max>o.z.max&&(o.z.max=n.z.max),o.x.mid=(o.x.min+o.x.max)/2,o.y.mid=(o.y.min+o.y.max)/2,o.z&&(o.z.mid=(o.z.min+o.z.max)/2),o.x.size=o.x.max-o.x.min,o.y.size=o.y.max-o.y.min,o.z&&(o.z.size=o.z.max-o.z.min)},pairiteration:function(o,n,e){let r=o.bbox(),i=n.bbox(),s=1e5,a=e||.5;if(r.x.size+r.y.size<a&&i.x.size+i.y.size<a)return[(s*(o._t1+o._t2)/2|0)/s+"/"+(s*(n._t1+n._t2)/2|0)/s];let u=o.split(.5),l=n.split(.5),p=[{left:u.left,right:l.left},{left:u.left,right:l.right},{left:u.right,right:l.right},{left:u.right,right:l.left}];p=p.filter(function(h){return $.bboxoverlap(h.left.bbox(),h.right.bbox())});let d=[];return p.length===0||(p.forEach(function(h){d=d.concat($.pairiteration(h.left,h.right,a))}),d=d.filter(function(h,m){return d.indexOf(h)===m})),d},getccenter:function(o,n,e){let r=n.x-o.x,i=n.y-o.y,s=e.x-n.x,a=e.y-n.y,u=r*eo(Io)-i*gs(Io),l=r*gs(Io)+i*eo(Io),p=s*eo(Io)-a*gs(Io),d=s*gs(Io)+a*eo(Io),h=(o.x+n.x)/2,m=(o.y+n.y)/2,f=(n.x+e.x)/2,C=(n.y+e.y)/2,D=h+u,b=m+l,v=f+p,_=C+d,M=$.lli8(h,m,D,b,f,C,v,_),A=$.dist(M,o),E=va(o.y-M.y,o.x-M.x),B=va(n.y-M.y,n.x-M.x),I=va(e.y-M.y,e.x-M.x),k;return E<I?((E>B||B>I)&&(E+=Ou),E>I&&(k=I,I=E,E=k)):I<B&&B<E?(k=I,I=E,E=k):I+=Ou,M.s=E,M.e=I,M.r=A,M},numberSort:function(o,n){return o-n}};var to=class{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return $.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,e){return n+e})}curve(n){return this.curves[n]}bbox(){let n=this.curves;for(var e=n[0].bbox(),r=1;r<n.length;r++)$.expandbox(e,n[r].bbox());return e}offset(n){let e=[];return this.curves.forEach(function(r){e.push(...r.offset(n))}),new to(e)}};c(to,"PolyBezier");var{abs:ya,min:Ph,max:kh,cos:NC,sin:LC,acos:VC,sqrt:xa}=Math,HC=Math.PI;var Ye=class{constructor(n){let e=n&&n.forEach?n:Array.from(arguments).slice(),r=!1;if(typeof e[0]=="object"){r=e.length;let f=[];e.forEach(function(C){["x","y","z"].forEach(function(D){typeof C[D]<"u"&&f.push(C[D])})}),e=f}let i=!1,s=e.length;if(r){if(r>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let a=this._3d=!i&&(s===9||s===12)||n&&n[0]&&typeof n[0].z<"u",u=this.points=[];for(let f=0,C=a?3:2;f<s;f+=C){var l={x:e[f],y:e[f+1]};a&&(l.z=e[f+2]),u.push(l)}let p=this.order=u.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;let h=$.align(u,{p1:u[0],p2:u[p]}),m=$.dist(u[0],u[p]);this._linear=h.reduce((f,C)=>f+ya(C.y),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,e,r,i){if(typeof i>"u"&&(i=.5),i===0)return new Ye(e,e,r);if(i===1)return new Ye(n,e,e);let s=Ye.getABC(2,n,e,r,i);return new Ye(n,s.A,r)}static cubicFromPoints(n,e,r,i,s){typeof i>"u"&&(i=.5);let a=Ye.getABC(3,n,e,r,i);typeof s>"u"&&(s=$.dist(e,a.C));let u=s*(1-i)/i,l=$.dist(n,r),p=(r.x-n.x)/l,d=(r.y-n.y)/l,h=s*p,m=s*d,f=u*p,C=u*d,D={x:e.x-h,y:e.y-m},b={x:e.x+f,y:e.y+C},v=a.A,_={x:v.x+(D.x-v.x)/(1-i),y:v.y+(D.y-v.y)/(1-i)},M={x:v.x+(b.x-v.x)/i,y:v.y+(b.y-v.y)/i},A={x:n.x+(_.x-n.x)/i,y:n.y+(_.y-n.y)/i},E={x:r.x+(M.x-r.x)/(1-i),y:r.y+(M.y-r.y)/(1-i)};return new Ye(n,A,E,r)}static getUtils(){return $}getUtils(){return Ye.getUtils()}static get PolyBezier(){return to}valueOf(){return this.toString()}toString(){return $.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let n=this.points,e=n[0].x,r=n[0].y,i=["M",e,r,this.order===2?"Q":"C"];for(let s=1,a=n.length;s<a;s++)i.push(n[s].x),i.push(n[s].y);return i.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){let n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,e){return""+e+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=$.derive(this.points,this._3d),this.computedirection()}computedirection(){let n=this.points,e=$.angle(n[0],n[this.order],n[1]);this.clockwise=e>0}length(){return $.length(this.derivative.bind(this))}static getABC(n=2,e,r,i,s=.5){let a=$.projectionratio(s,n),u=1-a,l={x:a*e.x+u*i.x,y:a*e.y+u*i.y},p=$.abcratio(s,n);return{A:{x:r.x+(r.x-l.x)/p,y:r.y+(r.y-l.y)/p},B:r,C:l,S:e,E:i}}getABC(n,e){e=e||this.get(n);let r=this.points[0],i=this.points[this.order];return Ye.getABC(this.order,r,e,i,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let e=0,r,i;e<n;e++)i=e/(n-1),r=this.compute(i),r.t=i,this._lut.push(r);return this._lut}on(n,e){e=e||5;let r=this.getLUT(),i=[];for(let s=0,a,u=0;s<r.length;s++)a=r[s],$.dist(a,n)<e&&(i.push(a),u+=s/r.length);return i.length?t/=i.length:!1}project(n){let e=this.getLUT(),r=e.length-1,i=$.closest(e,n),s=i.mpos,a=(s-1)/r,u=(s+1)/r,l=.1/r,p=i.mdist,d=a,h=d,m;p+=1;for(let f;d<u+l;d+=l)m=this.compute(d),f=$.dist(n,m),f<p&&(p=f,h=d);return h=h<0?0:h>1?1:h,m=this.compute(h),m.t=h,m.d=p,m}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?$.computeWithRatios(n,this.points,this.ratios,this._3d):$.compute(n,this.points,this._3d,this.ratios)}raise(){let n=this.points,e=[n[0]],r=n.length;for(let i=1,s,a;i<r;i++)s=n[i],a=n[i-1],e[i]={x:(r-i)/r*s.x+i/r*a.x,y:(r-i)/r*s.y+i/r*a.y};return e[r]=n[r-1],new Ye(e)}derivative(n){return $.compute(n,this.dpoints[0],this._3d)}dderivative(n){return $.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new Ye($.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return $.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return $.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){let e=this.derivative(n),r=xa(e.x*e.x+e.y*e.y);return{t:n,x:-e.y/r,y:e.x/r}}__normal3(n){let e=this.derivative(n),r=this.derivative(n+.01),i=xa(e.x*e.x+e.y*e.y+e.z*e.z),s=xa(r.x*r.x+r.y*r.y+r.z*r.z);e.x/=i,e.y/=i,e.z/=i,r.x/=s,r.y/=s,r.z/=s;let a={x:r.y*e.z-r.z*e.y,y:r.z*e.x-r.x*e.z,z:r.x*e.y-r.y*e.x},u=xa(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=u,a.y/=u,a.z/=u;let l=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:n,x:l[0]*e.x+l[1]*e.y+l[2]*e.z,y:l[3]*e.x+l[4]*e.y+l[5]*e.z,z:l[6]*e.x+l[7]*e.y+l[8]*e.z}}hull(n){let e=this.points,r=[],i=[],s=0;for(i[s++]=e[0],i[s++]=e[1],i[s++]=e[2],this.order===3&&(i[s++]=e[3]);e.length>1;){r=[];for(let a=0,u,l=e.length-1;a<l;a++)u=$.lerp(n,e[a],e[a+1]),i[s++]=u,r.push(u);e=r}return i}split(n,e){if(n===0&&e)return this.split(e).left;if(e===1)return this.split(n).right;let r=this.hull(n),i={left:this.order===2?new Ye([r[0],r[3],r[5]]):new Ye([r[0],r[4],r[7],r[9]]),right:this.order===2?new Ye([r[5],r[4],r[2]]):new Ye([r[9],r[8],r[6],r[3]]),span:r};return i.left._t1=$.map(0,0,1,this._t1,this._t2),i.left._t2=$.map(n,0,1,this._t1,this._t2),i.right._t1=$.map(n,0,1,this._t1,this._t2),i.right._t2=$.map(1,0,1,this._t1,this._t2),e?(e=$.map(e,n,1,0,1),i.right.split(e).left):i}extrema(){let n={},e=[];return this.dims.forEach(function(r){let i=c(function(a){return a[r]},"mfn"),s=this.dpoints[0].map(i);n[r]=$.droots(s),this.order===3&&(s=this.dpoints[1].map(i),n[r]=n[r].concat($.droots(s))),n[r]=n[r].filter(function(a){return a>=0&&a<=1}),e=e.concat(n[r].sort($.numberSort))}.bind(this)),n.values=e.sort($.numberSort).filter(function(r,i){return e.indexOf(r)===i}),n}bbox(){let n=this.extrema(),e={};return this.dims.forEach(function(r){e[r]=$.getminmax(this,r,n[r])}.bind(this)),e}overlaps(n){let e=this.bbox(),r=n.bbox();return $.bboxoverlap(e,r)}offset(n,e){if(typeof e<"u"){let r=this.get(n),i=this.normal(n),s={c:r,n:i,x:r.x+i.x*e,y:r.y+i.y*e};return this._3d&&(s.z=r.z+i.z*e),s}if(this._linear){let r=this.normal(0),i=this.points.map(function(s){let a={x:s.x+n*r.x,y:s.y+n*r.y};return s.z&&r.z&&(a.z=s.z+n*r.z),a});return[new Ye(i)]}return this.reduce().map(function(r){return r._linear?r.offset(n)[0]:r.scale(n)})}simple(){if(this.order===3){let i=$.angle(this.points[0],this.points[3],this.points[1]),s=$.angle(this.points[0],this.points[3],this.points[2]);if(i>0&&s<0||i<0&&s>0)return!1}let n=this.normal(0),e=this.normal(1),r=n.x*e.x+n.y*e.y;return this._3d&&(r+=n.z*e.z),ya(VC(r))<HC/3}reduce(){let n,e=0,r=0,i=.01,s,a=[],u=[],l=this.extrema().values;for(l.indexOf(0)===-1&&(l=[0].concat(l)),l.indexOf(1)===-1&&l.push(1),e=l[0],n=1;n<l.length;n++)r=l[n],s=this.split(e,r),s._t1=e,s._t2=r,a.push(s),e=r;return a.forEach(function(p){for(e=0,r=0;r<=1;)for(r=e+i;r<=1+i;r+=i)if(s=p.split(e,r),!s.simple()){if(r-=i,ya(e-r)<i)return[];s=p.split(e,r),s._t1=$.map(e,0,1,p._t1,p._t2),s._t2=$.map(r,0,1,p._t1,p._t2),u.push(s),e=r;break}e<1&&(s=p.split(e,1),s._t1=$.map(e,0,1,p._t1,p._t2),s._t2=p._t2,u.push(s))}),u}translate(n,e,r){r=typeof r=="number"?r:e;let i=this.order,s=this.points.map((a,u)=>(1-u/i)*e+u/i*r);return new Ye(this.points.map((a,u)=>({x:a.x+n.x*s[u],y:a.y+n.y*s[u]})))}scale(n){let e=this.order,r=!1;if(typeof n=="function"&&(r=n),r&&e===2)return this.raise().scale(r);let i=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):n,r?r(1):n);let a=r?r(0):n,u=r?r(1):n,l=[this.offset(0,10),this.offset(1,10)],p=[],d=$.lli4(l[0],l[0].c,l[1],l[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){let m=p[h*e]=$.copy(s[h*e]);m.x+=(h?u:a)*l[h].n.x,m.y+=(h?u:a)*l[h].n.y}),r?([0,1].forEach(function(h){if(!(e===2&&h)){var m=s[h+1],f={x:m.x-d.x,y:m.y-d.y},C=r?r((h+1)/e):n;r&&!i&&(C=-C);var D=xa(f.x*f.x+f.y*f.y);f.x/=D,f.y/=D,p[h+1]={x:m.x+C*f.x,y:m.y+C*f.y}}}),new Ye(p)):([0,1].forEach(h=>{if(e===2&&h)return;let m=p[h*e],f=this.derivative(h),C={x:m.x+f.x,y:m.y+f.y};p[h+1]=$.lli4(m,C,d,s[h+1])}),new Ye(p))}outline(n,e,r,i){if(e=e===void 0?n:e,this._linear){let E=this.normal(0),B=this.points[0],I=this.points[this.points.length-1],k,S,H;r===void 0&&(r=n,i=e),k={x:B.x+E.x*n,y:B.y+E.y*n},H={x:I.x+E.x*r,y:I.y+E.y*r},S={x:(k.x+H.x)/2,y:(k.y+H.y)/2};let F=[k,S,H];k={x:B.x-E.x*e,y:B.y-E.y*e},H={x:I.x-E.x*i,y:I.y-E.y*i},S={x:(k.x+H.x)/2,y:(k.y+H.y)/2};let q=[H,S,k],te=$.makeline(q[2],F[0]),se=$.makeline(F[2],q[0]),le=[te,new Ye(F),se,new Ye(q)];return new to(le)}let s=this.reduce(),a=s.length,u=[],l=[],p,d=0,h=this.length(),m=typeof r<"u"&&typeof i<"u";function f(E,B,I,k,S){return function(H){let F=k/I,q=(k+S)/I,te=B-E;return $.map(H,0,1,E+F*te,E+q*te)}}c(f,"linearDistanceFunction"),s.forEach(function(E){let B=E.length();m?(u.push(E.scale(f(n,r,h,d,B))),l.push(E.scale(f(-e,-i,h,d,B)))):(u.push(E.scale(n)),l.push(E.scale(-e))),d+=B}),l=l.map(function(E){return p=E.points,p[3]?E.points=[p[3],p[2],p[1],p[0]]:E.points=[p[2],p[1],p[0]],E}).reverse();let C=u[0].points[0],D=u[a-1].points[u[a-1].points.length-1],b=l[a-1].points[l[a-1].points.length-1],v=l[0].points[0],_=$.makeline(b,C),M=$.makeline(D,v),A=[_].concat(u).concat([M]).concat(l);return new to(A)}outlineshapes(n,e,r){e=e||n;let i=this.outline(n,e).curves,s=[];for(let a=1,u=i.length;a<u/2;a++){let l=$.makeshape(i[a],i[u-a],r);l.startcap.virtual=a>1,l.endcap.virtual=a<u/2-1,s.push(l)}return s}intersects(n,e){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof Ye&&(n=n.reduce()),this.curveintersects(this.reduce(),n,e)):this.selfintersects(e)}lineIntersects(n){let e=Ph(n.p1.x,n.p2.x),r=Ph(n.p1.y,n.p2.y),i=kh(n.p1.x,n.p2.x),s=kh(n.p1.y,n.p2.y);return $.roots(this.points,n).filter(a=>{var u=this.get(a);return $.between(u.x,e,i)&&$.between(u.y,r,s)})}selfintersects(n){let e=this.reduce(),r=e.length-2,i=[];for(let s=0,a,u,l;s<r;s++)u=e.slice(s,s+1),l=e.slice(s+2),a=this.curveintersects(u,l,n),i.push(...a);return i}curveintersects(n,e,r){let i=[];n.forEach(function(a){e.forEach(function(u){a.overlaps(u)&&i.push({left:a,right:u})})});let s=[];return i.forEach(function(a){let u=$.pairiteration(a.left,a.right,r);u.length>0&&(s=s.concat(u))}),s}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,e,r,i){let s=(i-r)/4,a=this.get(r+s),u=this.get(i-s),l=$.dist(n,e),p=$.dist(n,a),d=$.dist(n,u);return ya(p-l)+ya(d-l)}_iterate(n,e){let r=0,i=1,s;do{s=0,i=1;let a=this.get(r),u,l,p,d,h=!1,m=!1,f,C=i,D=1,b=0;do if(m=h,d=p,C=(r+i)/2,b++,u=this.get(C),l=this.get(i),p=$.getccenter(a,u,l),p.interval={start:r,end:i},h=this._error(p,a,r,i)<=n,f=m&&!h,f||(D=i),h){if(i>=1){if(p.interval.end=D=1,d=p,i>1){let _={x:p.x+p.r*NC(p.e),y:p.y+p.r*LC(p.e)};p.e+=$.angle({x:p.x,y:p.y},_,this.get(1))}break}i=i+(i-r)/2}else i=C;while(!f&&s++<100);if(s>=100)break;d=d||p,e.push(d),r=D}while(i<1);return e}};c(Ye,"Bezier");var We=ge(He());var Pe=ge(He()),vp=ge(wo());var Fh='<svg viewBox="0 0 20 20"><path d="M10 14.167Q10.354 14.167 10.615 13.906Q10.875 13.646 10.875 13.292V10.875H13.312Q13.667 10.875 13.917 10.625Q14.167 10.375 14.167 10Q14.167 9.646 13.906 9.385Q13.646 9.125 13.292 9.125H10.875V6.688Q10.875 6.333 10.625 6.083Q10.375 5.833 10 5.833Q9.646 5.833 9.385 6.094Q9.125 6.354 9.125 6.708V9.125H6.688Q6.333 9.125 6.083 9.375Q5.833 9.625 5.833 10Q5.833 10.354 6.094 10.615Q6.354 10.875 6.708 10.875H9.125V13.312Q9.125 13.667 9.375 13.917Q9.625 14.167 10 14.167ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>';var Nh='<svg viewBox="0 -960 960 960"><path d="m444-474-32-32q-11-11-25.5-11T361-506q-11 11-11 25.5t11 25.5l94.138 94.138Q466-350 480.182-350T505-361l94-94q11-11 11-25.5T599-506q-11-11-25.5-11T548-506l-32 32v-114.286q0-15.178-10.289-25.446Q495.421-624 480.211-624 465-624 454.5-613.732 444-603.464 444-588.286V-474Zm36.276 378Q401-96 331-126q-70-30-122.5-82.5T126-330.958q-30-69.959-30-149.5Q96-560 126-629.5t82.5-122Q261-804 330.958-834q69.959-30 149.5-30Q560-864 629.5-834t122 82.5Q804-699 834-629.276q30 69.725 30 149Q864-401 834-331q-30 70-82.5 122.5T629.276-126q-69.725 30-149 30Z"/></svg>';var Lh='<svg viewBox="0 -960 960 960"><path d="M444-486v114.286q0 15.178 10.289 25.446Q464.579-336 479.789-336 495-336 505.5-346.268q10.5-10.268 10.5-25.446V-486l32 32q11 11 25.5 11t25.5-11q11-11 11-25.5T599-505l-94.138-94.138Q494-610 479.818-610T455-599l-94 94q-11 11-10.5 25t11.5 25q11 11 25.5 11t25.5-11l31-31Zm36.276 390Q401-96 331-126q-70-30-122.5-82.5T126-330.958q-30-69.959-30-149.5Q96-560 126-629.5t82.5-122Q261-804 330.958-834q69.959-30 149.5-30Q560-864 629.5-834t122 82.5Q804-699 834-629.276q30 69.725 30 149Q864-401 834-331q-30 70-82.5 122.5T629.276-126q-69.725 30-149 30ZM480-168q130 0 221-91t91-221q0-130-91-221t-221-91q-130 0-221 91t-91 221q0 130 91 221t221 91Zm0-312Z"/></svg>';var Vh='<svg viewBox="0 -960 960 960"><path d="M444-330v-402.025q0-15.289 10.289-25.632Q464.579-768 479.789-768 495-768 505.5-757.657q10.5 10.343 10.5 25.632V-330l176.212-176.212Q703-517 717.5-517t25.978 11Q754-495 754-480.5t-10.822 25.309L505.092-217.404q-5.411 5.404-11.724 7.904-6.313 2.5-13.528 2.5-7.214 0-13.527-2.5Q460-212 455-217L217-455q-11-11-10.5-25.5t11.022-25.5q11.478-11 26.145-11 14.666 0 25.333 11l175 176Z"/></svg>';var Hh='<svg viewBox="0 -960 960 960"><path d="M444-630 267.788-453.788Q257-443 242.5-443t-25.978-11Q206-465 206-479.5t10.822-25.309l238.086-237.787q5.411-5.404 11.724-7.904 6.313-2.5 13.528-2.5 7.214 0 13.527 2.5Q500-748 505-743l238 238q11 11 11 25t-10.522 25Q732-444 717.333-444q-14.666 0-25.333-11L516-630v402.025q0 15.289-10.289 25.632Q495.421-192 480.211-192 465-192 454.5-202.343 444-212.686 444-227.975V-630Z"/></svg>';var Uh='<svg viewBox="0 0 20 20"><path d="M3.417 20q-.729 0-1.24-.51-.51-.511-.51-1.24t.51-1.24q.511-.51 1.24-.51h13.166q.729 0 1.24.51.51.511.51 1.24t-.51 1.24q-.511.51-1.24.51Zm1.125-5.021q-.354 0-.615-.26-.26-.261-.26-.615v-2.042q0-.166.062-.322.063-.157.188-.282l7.021-7.02 3.27 3.27-7.02 7.021q-.126.125-.282.188-.156.062-.323.062Zm10.729-8.333L12 3.375l1.458-1.458q.25-.25.646-.25t.646.25L16.833 4q.229.229.177.594-.052.364-.281.594Z"/></svg>';var Wh='<svg viewBox="0 0 20 20"><path d="M7.979 14.646Q7.812 14.646 7.656 14.583Q7.5 14.521 7.354 14.375L3.833 10.854Q3.583 10.604 3.594 10.219Q3.604 9.833 3.854 9.583Q4.104 9.333 4.479 9.333Q4.854 9.333 5.104 9.583L8.021 12.5L14.917 5.604Q15.167 5.354 15.531 5.354Q15.896 5.354 16.146 5.604Q16.396 5.854 16.396 6.219Q16.396 6.583 16.146 6.833L8.604 14.375Q8.458 14.521 8.302 14.583Q8.146 14.646 7.979 14.646Z"/></svg>';var Gh='<svg viewBox="0 0 20 20"><path d="M10 11.229 5.979 15.25q-.25.25-.604.24-.354-.011-.604-.261t-.25-.614q0-.365.25-.615l4-4L4.75 5.979q-.25-.25-.24-.614.011-.365.261-.615t.614-.25q.365 0 .615.25l4 4.021 4.021-4.021q.25-.25.614-.25.365 0 .615.25t.25.615q0 .364-.25.614L11.229 10l4.021 4.021q.25.25.25.604t-.25.604q-.25.25-.615.25-.364 0-.614-.25Z"/></svg>';var zh='<svg viewBox="0 96 960 960"><path d="M744 912q-41 0-72-24t-42-60H396q-55 0-93.5-38.5T264 696q0-55 38.5-93.5T396 564h120q34.65 0 59.325-24.748Q600 514.504 600 479.752 600 445 575.325 420.5T516 396H330q-11 36-42 60t-72 24q-50 0-85-35t-35-85q0-50 35-85t85-35q41 0 72 24t42 60h186q65 0 110.5 45.5T672 480q0 65-45.5 110.5T516 636H396q-24.75 0-42.375 17.677T336 696.177Q336 721 353.625 738.5T396 756h234q11-36 42-60t72-24q50 0 85 35t35 85q0 50-35 85t-85 35ZM216 408q20.4 0 34.2-13.8Q264 380.4 264 360q0-20.4-13.8-34.2Q236.4 312 216 312q-20.4 0-34.2 13.8Q168 339.6 168 360q0 20.4 13.8 34.2Q195.6 408 216 408Z" transform="rotate(180 480 590)"/></svg>';var qh='<svg viewBox="0 0 20 20"><path d="M10 8.396q-.354 0-.615-.261-.26-.26-.26-.614V5.125l-.792.792q-.271.271-.635.26-.365-.01-.636-.281-.27-.271-.27-.646t.27-.646l2.313-2.312q.146-.146.302-.209.156-.062.323-.062t.323.062q.156.063.302.209l2.333 2.333q.271.271.261.635-.011.365-.281.636-.271.271-.646.271t-.646-.271l-.771-.771v2.396q0 .354-.26.614-.261.261-.615.261Zm0 9.583q-.167 0-.323-.062-.156-.063-.302-.209l-2.333-2.333q-.271-.271-.261-.635.011-.365.281-.636.271-.271.646-.271t.646.271l.771.771v-2.396q0-.354.26-.614.261-.261.615-.261t.615.261q.26.26.26.614v2.396l.792-.792q.271-.271.635-.26.365.01.636.281.27.271.27.646t-.27.646l-2.313 2.312q-.146.146-.302.209-.156.062-.323.062Zm4.104-5.041q-.271-.271-.271-.646t.271-.646l.771-.771h-2.396q-.354 0-.614-.26-.261-.261-.261-.615t.261-.615q.26-.26.614-.26h2.396l-.792-.792q-.271-.271-.26-.635.01-.365.281-.636.271-.27.646-.27t.646.27l2.312 2.313q.146.146.209.302.062.156.062.323t-.062.323q-.063.156-.209.302l-2.333 2.333q-.271.271-.635.261-.365-.011-.636-.281Zm-9.5 0-2.312-2.313q-.146-.146-.209-.302-.062-.156-.062-.323t.062-.323q.063-.156.209-.302l2.333-2.333q.271-.271.635-.261.365.011.636.281.271.271.271.646t-.271.646l-.771.771h2.396q.354 0 .614.26.261.261.261.615t-.261.615q-.26.26-.614.26H5.125l.792.792q.271.271.26.635-.01.365-.281.636-.271.27-.646.27t-.646-.27Z"/></svg>';var Qh='<svg viewBox="0 0 20 20"><path d="M10.625 12.771 12.771 10.625Q13.042 10.354 13.042 10Q13.042 9.646 12.771 9.375L10.604 7.208Q10.354 6.958 10 6.958Q9.646 6.958 9.396 7.208Q9.125 7.479 9.125 7.833Q9.125 8.188 9.396 8.438L10.062 9.125H7.479Q7.125 9.125 6.875 9.385Q6.625 9.646 6.625 10Q6.625 10.354 6.885 10.615Q7.146 10.875 7.5 10.875H10.062L9.375 11.562Q9.125 11.812 9.125 12.167Q9.125 12.521 9.396 12.771Q9.646 13.042 10 13.042Q10.354 13.042 10.625 12.771ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>';var $h='<svg viewBox="0 0 20 20"><path d="M10 12.917q-.167 0-.323-.063-.156-.062-.302-.208L6.333 9.604q-.271-.271-.271-.625t.271-.625q.271-.271.625-.271t.625.271l1.542 1.542V4.208q0-.354.26-.614.261-.261.615-.261t.615.261q.26.26.26.614v5.688l1.542-1.542q.271-.271.625-.271t.625.271q.271.271.271.625t-.271.625l-3.042 3.042q-.146.146-.302.208-.156.063-.323.063Zm-4.917 3.75q-.729 0-1.239-.511-.511-.51-.511-1.239v-1.542q0-.354.261-.615.26-.26.614-.26t.615.26q.26.261.26.615v1.542h9.834v-1.542q0-.354.26-.615.261-.26.615-.26t.614.26q.261.261.261.615v1.542q0 .729-.511 1.239-.51.511-1.239.511Z"/></svg>';var Xh='<svg viewBox="0 0 20 20"><path d="m16.188 7.542-3.73-3.73 1.021-1.02q.521-.521 1.24-.521t1.239.521l1.25 1.25q.5.5.5 1.239 0 .74-.5 1.24ZM3.375 17.5q-.354 0-.615-.26-.26-.261-.26-.615v-2.5q0-.167.062-.323.063-.156.188-.281l8.479-8.479 3.729 3.729-8.479 8.479q-.125.125-.281.188-.156.062-.323.062Z"/></svg>';var jh='<svg viewBox="0 0 20 20"><path d="M10.021 13.375Q11.604 13.375 12.708 12.25Q13.812 11.125 13.812 9.542Q13.812 7.958 12.708 6.854Q11.604 5.75 10.021 5.75Q8.438 5.75 7.312 6.854Q6.188 7.958 6.188 9.542Q6.188 11.146 7.302 12.26Q8.417 13.375 10.021 13.375ZM10.021 11.812Q9.083 11.812 8.417 11.146Q7.75 10.479 7.75 9.542Q7.75 8.604 8.417 7.958Q9.083 7.312 10.021 7.312Q10.958 7.312 11.604 7.958Q12.25 8.604 12.25 9.542Q12.25 10.479 11.604 11.146Q10.958 11.812 10.021 11.812ZM10 15.833Q7.083 15.833 4.688 14.292Q2.292 12.75 1.083 10.146Q1.042 10.042 1.01 9.885Q0.979 9.729 0.979 9.562Q0.979 9.396 1.01 9.24Q1.042 9.083 1.083 8.979Q2.292 6.375 4.698 4.844Q7.104 3.312 10 3.312Q12.896 3.312 15.302 4.844Q17.708 6.375 18.917 8.979Q18.958 9.083 18.99 9.24Q19.021 9.396 19.021 9.562Q19.021 9.729 18.99 9.885Q18.958 10.042 18.917 10.146Q17.708 12.75 15.312 14.292Q12.917 15.833 10 15.833Z"/></svg>';var Yh='<svg viewBox="0 0 20 20"><path d="M7.083 16.667q-.541 0-.916-.375t-.375-.917V5.917H2.958q-.541 0-.916-.375t-.375-.917q0-.542.375-.917t.916-.375h8.25q.542 0 .917.375t.375.917q0 .542-.375.917t-.917.375H8.375v9.458q0 .542-.375.917t-.917.375Zm7.5 0q-.541 0-.916-.375t-.375-.917v-5.292h-1.167q-.542 0-.917-.375t-.375-.916q0-.542.375-.917t.917-.375h4.917q.541 0 .916.375t.375.917q0 .541-.375.916t-.916.375h-1.167v5.292q0 .542-.375.917t-.917.375Z"/></svg>';var Kh='<svg viewBox="0 0 20 20"><path d="M10 17.5Q9.292 17.5 8.792 17Q8.292 16.5 8.292 15.792Q8.292 15.083 8.792 14.583Q9.292 14.083 10 14.083Q10.708 14.083 11.208 14.583Q11.708 15.083 11.708 15.792Q11.708 16.5 11.208 17Q10.708 17.5 10 17.5ZM10 12.5Q9.292 12.5 8.792 12Q8.292 11.5 8.292 10.792V4.208Q8.292 3.5 8.792 3Q9.292 2.5 10 2.5Q10.708 2.5 11.208 3Q11.708 3.5 11.708 4.208V10.792Q11.708 11.5 11.208 12Q10.708 12.5 10 12.5Z"/></svg>';var Zh='<svg viewBox="0 -960 960 960"><path d="M444-486v354q0 15 10.5 25.5T480-96q15 0 25.5-10.5T516-132v-354l80 80q11 11 25.5 10.5T647-407q11-11 11-25.5T647-458L505-599q-11-11-25-11t-25 11L313-457q-11 11-10.5 25t11.5 25q11 11 25.5 11t25.5-11l79-79Zm36-306q-130 0-221 91t-91 221q0 35 7.5 68.5T198-346q7 14 4.5 29.5T189-290q-11 11-26.5 6T139-304q-21-41-32-85.5T96-480q0-80 30-149.5t82.5-122Q261-804 331-834t149-30q80 0 149.5 30t122 82.5Q804-699 834-629.5T864-480q0 47-11.5 91.5T819-302q-8 14-22 18.5t-25-6.5q-11-11-14-27t4-30q14-32 22-65t8-68q0-130-91-221t-221-91Z"/></svg>';var Jh=`<svg viewBox="0 0 20 20"><path d="M3,7.6c0.3,0.3,0.6,0.5,0.9,0.6c0.4,0.2,0.7,0.2,1.1,0.2s0.8-0.1,1.1-0.2c0.4-0.2,0.7-0.4,0.9-0.6C7.4,7.3,7.6,7,7.8,6.7
		c0,0,0-0.1,0-0.1h9.8v-2H7.8c0,0,0-0.1,0-0.1C7.6,4,7.4,3.7,7.1,3.5C6.9,3.2,6.6,3,6.2,2.8c-0.7-0.3-1.6-0.3-2.3,0
		C3.6,3,3.3,3.2,3,3.5C2.8,3.7,2.5,4,2.4,4.4C2.2,4.7,2.2,5.1,2.2,5.5c0,0.4,0.1,0.8,0.2,1.1C2.5,7,2.8,7.3,3,7.6z M3.5,4.9
		c0.1-0.2,0.2-0.4,0.4-0.5C4,4.2,4.2,4,4.4,3.9c0.2-0.1,0.4-0.1,0.7-0.1s0.5,0,0.7,0.1C6,4,6.1,4.2,6.3,4.3c0.2,0.2,0.3,0.3,0.4,0.5
		c0.1,0.2,0.1,0.4,0.1,0.7c0,0.2,0,0.5-0.1,0.7C6.6,6.4,6.5,6.6,6.3,6.7C6.1,6.9,6,7,5.7,7.1c-0.4,0.2-0.9,0.2-1.3,0
		C4.2,7,4,6.9,3.9,6.7C3.7,6.6,3.6,6.4,3.5,6.2C3.4,6,3.4,5.8,3.4,5.5C3.4,5.3,3.4,5.1,3.5,4.9z"/><path d="M17.6,13.5H7.8c0,0,0-0.1,0-0.1c-0.2-0.4-0.4-0.7-0.6-0.9s-0.6-0.5-0.9-0.6c-0.7-0.3-1.6-0.3-2.3,0
		c-0.3,0.2-0.7,0.4-0.9,0.6c-0.3,0.3-0.5,0.6-0.6,0.9c-0.2,0.4-0.2,0.7-0.2,1.1c0,0.4,0.1,0.8,0.2,1.1C2.5,16,2.8,16.3,3,16.5
		c0.3,0.3,0.6,0.5,0.9,0.6c0.4,0.2,0.7,0.2,1.1,0.2s0.8-0.1,1.1-0.2c0.3-0.2,0.7-0.4,0.9-0.6c0.3-0.3,0.5-0.6,0.6-0.9
		c0,0,0-0.1,0-0.1h9.8V13.5z M6.7,15.1c-0.1,0.2-0.2,0.4-0.4,0.5C6.1,15.8,6,16,5.7,16c-0.4,0.2-0.9,0.2-1.3,0
		C4.2,16,4,15.8,3.9,15.7c-0.2-0.2-0.3-0.3-0.4-0.5c-0.1-0.2-0.1-0.4-0.1-0.7c0-0.2,0-0.5,0.1-0.7c0.1-0.2,0.2-0.4,0.4-0.5
		C4,13.1,4.2,13,4.4,12.9c0.2-0.1,0.4-0.1,0.7-0.1s0.5,0,0.7,0.1C6,13,6.1,13.1,6.3,13.2c0.2,0.2,0.3,0.3,0.4,0.5
		c0.1,0.2,0.1,0.4,0.1,0.7C6.8,14.7,6.8,14.9,6.7,15.1z"/></svg>`;var e1='<svg viewBox="0 0 20 20"><path d="M5.833 14.167q-1.729 0-2.948-1.219Q1.667 11.729 1.667 10q0-1.729 1.218-2.948 1.219-1.219 2.948-1.219H8.25q.354 0 .615.261.26.26.26.614t-.26.615q-.261.26-.615.26H5.833q-1.041 0-1.729.688-.687.687-.687 1.729t.687 1.729q.688.688 1.729.688H8.25q.354 0 .615.26.26.261.26.615t-.26.614q-.261.261-.615.261Zm1.709-3.292q-.354 0-.615-.26-.26-.261-.26-.615t.26-.615q.261-.26.615-.26h4.916q.354 0 .615.26.26.261.26.615t-.26.615q-.261.26-.615.26Zm4.208 3.292q-.354 0-.615-.261-.26-.26-.26-.614t.26-.615q.261-.26.615-.26h2.417q1.041 0 1.729-.688.687-.687.687-1.729t-.687-1.729q-.688-.688-1.729-.688H11.75q-.354 0-.615-.26-.26-.261-.26-.615t.26-.614q.261-.261.615-.261h2.417q1.729 0 2.948 1.219Q18.333 8.271 18.333 10q0 1.729-1.218 2.948-1.219 1.219-2.948 1.219Z"/></svg>';var t1=`<svg viewBox="0 0 20 20"><path d="M2.1,8.2H0.6V6.8h0.1c0.5,0,0.9-0.1,1.1-0.4c0.3-0.3,0.5-0.7,0.5-1.3h1.1v10.4H2.1V8.2z"/><path d="M5.3,8.6c0-0.7,0.1-1.3,0.3-1.8c0.1-0.5,0.4-0.9,0.7-1.2c0.3-0.3,0.7-0.5,1.2-0.5c0.4,0,0.8,0.1,1.1,0.3
		C8.8,5.6,9,5.9,9.2,6.3c0.2,0.4,0.3,0.9,0.4,1.6c0.1,0.6,0.1,1.4,0.1,2.3c0,0.7,0,1.4,0,2.1c0,0.7-0.1,1.3-0.3,1.8
		c-0.1,0.5-0.4,0.9-0.7,1.2c-0.3,0.3-0.7,0.4-1.2,0.4c-0.4,0-0.8-0.1-1.1-0.2c-0.3-0.2-0.5-0.4-0.7-0.8c-0.2-0.4-0.3-0.9-0.4-1.6
		c-0.1-0.6-0.1-1.4-0.1-2.3C5.2,10,5.2,9.3,5.3,8.6z M6.7,12.7c0,0.4,0.1,0.7,0.1,1C6.9,14,6.9,14.1,7,14.2c0.1,0.1,0.2,0.1,0.4,0.1
		c0.2,0,0.3-0.1,0.4-0.2C7.9,14.1,8,13.9,8,13.6c0.1-0.3,0.1-0.6,0.1-1.1c0-0.4,0-1,0-1.7V9.7c0-0.7,0-1.2,0-1.6
		c0-0.4-0.1-0.7-0.1-1C8,6.9,7.9,6.8,7.8,6.7C7.7,6.6,7.6,6.5,7.4,6.5C7.3,6.5,7.1,6.6,7,6.7C6.9,6.8,6.9,7,6.8,7.3
		C6.7,7.5,6.7,7.9,6.7,8.3c0,0.4,0,1,0,1.7v1.1C6.6,11.8,6.7,12.3,6.7,12.7z"/><path d="M11.6,8.2h-1.4V6.8h0.1c0.5,0,0.9-0.1,1.1-0.4c0.3-0.3,0.5-0.7,0.5-1.3h1.1v10.4h-1.4V8.2z"/><path d="M14.8,8.6c0-0.7,0.1-1.3,0.3-1.8s0.4-0.9,0.7-1.2c0.3-0.3,0.7-0.5,1.2-0.5c0.4,0,0.8,0.1,1.1,0.3c0.3,0.2,0.5,0.5,0.7,0.9
		c0.2,0.4,0.3,0.9,0.4,1.6c0.1,0.6,0.1,1.4,0.1,2.3c0,0.7,0,1.4,0,2.1c0,0.7-0.1,1.3-0.3,1.8c-0.1,0.5-0.4,0.9-0.7,1.2
		c-0.3,0.3-0.7,0.4-1.2,0.4c-0.4,0-0.8-0.1-1.1-0.2c-0.3-0.2-0.5-0.4-0.7-0.8c-0.2-0.4-0.3-0.9-0.4-1.6c-0.1-0.6-0.1-1.4-0.1-2.3
		C14.8,10,14.8,9.3,14.8,8.6z M16.3,12.7c0,0.4,0.1,0.7,0.1,1c0.1,0.2,0.1,0.4,0.2,0.5c0.1,0.1,0.2,0.1,0.4,0.1
		c0.2,0,0.3-0.1,0.4-0.2c0.1-0.1,0.2-0.3,0.2-0.6c0.1-0.3,0.1-0.6,0.1-1.1c0-0.4,0-1,0-1.7V9.7c0-0.7,0-1.2,0-1.6
		c0-0.4-0.1-0.7-0.1-1c-0.1-0.2-0.1-0.4-0.2-0.5c-0.1-0.1-0.2-0.1-0.4-0.1c-0.2,0-0.3,0.1-0.4,0.2c-0.1,0.1-0.2,0.3-0.2,0.6
		c-0.1,0.3-0.1,0.6-0.1,1.1c0,0.4,0,1,0,1.7v1.1C16.2,11.8,16.2,12.3,16.3,12.7z"/></svg>`;var n1=`<svg viewBox="0 0 20 20"><path d="M6.4,6h11.8c0.2,0,0.4-0.1,0.5-0.3C18.9,5.5,19,5.3,19,5.1s-0.1-0.4-0.3-0.6c-0.2-0.2-0.4-0.3-0.5-0.3H6.4
		C6.2,4.2,6,4.3,5.9,4.5C5.7,4.7,5.6,4.8,5.6,5.1s0.1,0.5,0.3,0.6C6,5.9,6.1,6,6.4,6z"/><path d="M18.2,7.7H6.4C6.2,7.7,6,7.8,5.9,8C5.7,8.2,5.6,8.3,5.6,8.6c0,0.3,0.1,0.5,0.3,0.6C6,9.4,6.1,9.5,6.4,9.5h11.8
		c0.2,0,0.4-0.1,0.5-0.3S19,8.8,19,8.6c0-0.2-0.1-0.4-0.3-0.6S18.4,7.7,18.2,7.7z"/><path d="M18.2,11.2H6.4c-0.2,0-0.4,0.1-0.5,0.3c-0.2,0.2-0.3,0.3-0.3,0.6c0,0.3,0.1,0.5,0.3,0.6C6,12.9,6.1,13,6.4,13h11.8
		c0.2,0,0.4-0.1,0.5-0.3s0.3-0.4,0.3-0.6c0-0.2-0.1-0.4-0.3-0.6S18.4,11.2,18.2,11.2z"/><path d="M18.2,14.7H6.4c-0.2,0-0.4,0.1-0.5,0.3c-0.2,0.2-0.3,0.3-0.3,0.6s0.1,0.5,0.3,0.6c0.1,0.2,0.3,0.3,0.5,0.3h11.8
		c0.2,0,0.4-0.1,0.5-0.3c0.2-0.2,0.3-0.4,0.3-0.6s-0.1-0.4-0.3-0.6C18.6,14.8,18.4,14.7,18.2,14.7z"/><path d="M0.3,7.2L5.3,5L0.2,2.7C1.6,4.4,1.6,5.7,0.3,7.2z"/></svg>`;var r1='<svg viewBox="0 0 20 20"><polygon points="5.1,14.7 5.1,1 15,11.1 10.5,11.1 13.3,17.6 11,18.6 8.1,11.8 " fill="currentColor"/></svg>';var o1='<svg viewBox="0 0 20 20"><path d="M10 8.396q-.354 0-.615-.261-.26-.26-.26-.614V5.125l-.792.792q-.271.271-.635.26-.365-.01-.636-.281-.27-.271-.27-.646t.27-.646l2.313-2.312q.146-.146.302-.209.156-.062.323-.062t.323.062q.156.063.302.209l2.333 2.333q.271.271.261.635-.011.365-.281.636-.271.271-.646.271t-.646-.271l-.771-.771v2.396q0 .354-.26.614-.261.261-.615.261Zm0 9.583q-.167 0-.323-.062-.156-.063-.302-.209l-2.333-2.333q-.271-.271-.261-.635.011-.365.281-.636.271-.271.646-.271t.646.271l.771.771v-2.396q0-.354.26-.614.261-.261.615-.261t.615.261q.26.26.26.614v2.396l.792-.792q.271-.271.635-.26.365.01.636.281.27.271.27.646t-.27.646l-2.313 2.312q-.146.146-.302.209-.156.062-.323.062Zm4.104-5.041q-.271-.271-.271-.646t.271-.646l.771-.771h-2.396q-.354 0-.614-.26-.261-.261-.261-.615t.261-.615q.26-.26.614-.26h2.396l-.792-.792q-.271-.271-.26-.635.01-.365.281-.636.271-.27.646-.27t.646.27l2.312 2.313q.146.146.209.302.062.156.062.323t-.062.323q-.063.156-.209.302l-2.333 2.333q-.271.271-.635.261-.365-.011-.636-.281Zm-9.5 0-2.312-2.313q-.146-.146-.209-.302-.062-.156-.062-.323t.062-.323q.063-.156.209-.302l2.333-2.333q.271-.271.635-.261.365.011.636.281.271.271.271.646t-.271.646l-.771.771h2.396q.354 0 .614.26.261.261.261.615t-.261.615q-.26.26-.614.26H5.125l.792.792q.271.271.26.635-.01.365-.281.636-.271.27-.646.27t-.646-.27Z"/></svg>';var i1='<svg viewBox="0 0 20 20"><path d="M3.2,1.8v16.5H17V1.8H3.2z M15.2,16.4H5V3.6h10.2V16.4z"/><polygon fill="currentColor" points="9.3,13 10.9,13 10.9,10.7 13.1,10.7 13.1,9.2 10.9,9.2 10.9,6.9 9.3,6.9 9.3,9.2 7.1,9.2 7.1,10.7 9.3,10.7"/></svg>';var s1='<svg viewBox="0 0 20 20"/>';var a1='<svg viewBox="0 0 20 20"><path d="m17.667 18.083-1.792-1.791v.916q0 .354-.26.615-.261.26-.615.26t-.615-.26q-.26-.261-.26-.615v-3.041q0-.355.26-.615.261-.26.615-.26h3.042q.354 0 .614.26.261.26.261.615 0 .354-.261.614-.26.261-.614.261h-.938l1.813 1.812q.25.25.25.604t-.25.625q-.25.271-.615.271-.364 0-.635-.271ZM11.708 7.5h3.209l-4.084-4.083v3.208q0 .354.261.615.26.26.614.26ZM5.083 18.333q-.687 0-1.218-.531-.532-.531-.532-1.219V3.417q0-.688.532-1.219.531-.531 1.218-.531h5.855q.354 0 .677.135.323.136.573.386l3.958 3.958q.25.25.385.573.136.323.136.677v4.146h-2.542q-.729 0-1.24.51-.51.51-.51 1.24v5.041Z"/></svg>';var u1='<svg viewBox="0 -960 960 960"><path d="m516-234 80-80q11-11 25.5-11t25.5 11q11 11 11 25.5T647-263L505-121q-11 11-25 11t-25-11L313-263q-11-11-10.5-25.5T314-314q11-11 25.5-11t25.5 11l79 80v-354q0-15 10.5-25.5T480-624q15 0 25.5 10.5T516-588v354Zm-36-558q-130 0-221 91t-91 221q0 35 7.5 68.5T198-346q7 14 4.5 29.5T189-290q-11 11-26.5 6T139-304q-21-41-32-85.5T96-480q0-80 30-149.5t82.5-122Q261-804 331-834t149-30q80 0 149.5 30t122 82.5Q804-699 834-629.5T864-480q0 47-11.5 91.5T819-302q-8 14-22 18.5t-25-6.5q-11-11-14-27t4-30q14-32 22-65t8-68q0-130-91-221t-221-91Z"/></svg>';var l1=`<svg viewBox="0 0 20 20"><path d="M12.6,6.6c0.2,0.4,0.4,0.7,0.7,1c0.2,0.2,0.6,0.4,0.9,0.6c0.3,0.1,0.7,0.2,1.1,0.2c0.4,0,0.8-0.1,1-0.3
		c0.3-0.1,0.6-0.3,0.9-0.6c0.2-0.2,0.4-0.6,0.6-0.9C17.9,6.3,18,5.9,18,5.5s0-0.8-0.2-1.1c-0.1-0.3-0.4-0.7-0.6-0.9
		s-0.6-0.4-0.9-0.6c-0.3-0.1-0.7-0.2-1.1-0.2c-0.4,0-0.8,0-1.1,0.2c-0.3,0.1-0.7,0.4-0.9,0.6s-0.4,0.6-0.6,0.9c0,0,0,0.1,0,0.1H2.8
		v2L12.6,6.6C12.6,6.5,12.6,6.6,12.6,6.6z"/><path d="M17.9,13.4c-0.1-0.3-0.4-0.7-0.6-0.9s-0.6-0.4-0.9-0.6c-0.3-0.1-0.7-0.2-1.1-0.2c-0.4,0-0.8,0.1-1.1,0.2
		c-0.3,0.1-0.7,0.4-0.9,0.6s-0.5,0.6-0.6,0.9c0,0,0,0.1,0,0.1H2.8v2h9.9c0,0,0,0.1,0,0.1c0.1,0.3,0.4,0.7,0.6,0.9s0.6,0.4,0.9,0.6
		c0.3,0.1,0.7,0.2,1.1,0.2c0.4,0,0.8-0.1,1.1-0.2c0.3-0.1,0.7-0.4,0.9-0.6s0.4-0.6,0.6-0.9c0.1-0.3,0.2-0.7,0.2-1.1
		S18.1,13.7,17.9,13.4z"/></svg>`;var c1='<svg viewBox="0 0 20 20"><path d="M9.958 18.333Q8.25 18.333 6.74 17.677Q5.229 17.021 4.104 15.885Q2.979 14.75 2.323 13.229Q1.667 11.708 1.667 10Q1.667 8.271 2.333 6.75Q3 5.229 4.156 4.104Q5.312 2.979 6.854 2.323Q8.396 1.667 10.125 1.667Q11.771 1.667 13.26 2.25Q14.75 2.833 15.875 3.854Q17 4.875 17.667 6.26Q18.333 7.646 18.333 9.25Q18.333 11.688 16.792 12.948Q15.25 14.208 13.188 14.208H11.75Q11.625 14.208 11.562 14.281Q11.5 14.354 11.5 14.458Q11.5 14.688 11.812 15.219Q12.125 15.75 12.125 16.458Q12.125 17.458 11.51 17.896Q10.896 18.333 9.958 18.333ZM5.458 10.875Q6 10.875 6.375 10.5Q6.75 10.125 6.75 9.583Q6.75 9.042 6.375 8.667Q6 8.292 5.458 8.292Q4.917 8.292 4.542 8.667Q4.167 9.042 4.167 9.583Q4.167 10.125 4.542 10.5Q4.917 10.875 5.458 10.875ZM7.917 7.583Q8.458 7.583 8.833 7.208Q9.208 6.833 9.208 6.292Q9.208 5.75 8.833 5.375Q8.458 5 7.917 5Q7.375 5 7 5.375Q6.625 5.75 6.625 6.292Q6.625 6.833 7 7.208Q7.375 7.583 7.917 7.583ZM12.021 7.583Q12.562 7.583 12.938 7.208Q13.312 6.833 13.312 6.292Q13.312 5.75 12.938 5.375Q12.562 5 12.021 5Q11.479 5 11.104 5.375Q10.729 5.75 10.729 6.292Q10.729 6.833 11.104 7.208Q11.479 7.583 12.021 7.583ZM14.479 10.875Q15.021 10.875 15.396 10.5Q15.771 10.125 15.771 9.583Q15.771 9.042 15.396 8.667Q15.021 8.292 14.479 8.292Q13.938 8.292 13.562 8.667Q13.188 9.042 13.188 9.583Q13.188 10.125 13.562 10.5Q13.938 10.875 14.479 10.875Z"/></svg>';var p1='<svg viewBox="0 0 20 20"><path d="M12.5 15.833q-.729 0-1.24-.51-.51-.511-.51-1.24V5.917q0-.729.51-1.24.511-.51 1.24-.51h1.583q.729 0 1.24.51.51.511.51 1.24v8.166q0 .729-.51 1.24-.511.51-1.24.51Zm-6.583 0q-.729 0-1.24-.51-.51-.511-.51-1.24V5.917q0-.729.51-1.24.511-.51 1.24-.51H7.5q.729 0 1.24.51.51.511.51 1.24v8.166q0 .729-.51 1.24-.511.51-1.24.51Z"/></svg>';var d1='<svg viewBox="0 0 20 20"><path d="M16.188 7.542 12.458 3.812 13.479 2.792Q14 2.271 14.719 2.271Q15.438 2.271 15.958 2.792L17.208 4.042Q17.708 4.542 17.708 5.281Q17.708 6.021 17.208 6.521ZM3.375 17.5Q3.021 17.5 2.76 17.24Q2.5 16.979 2.5 16.625V14.125Q2.5 13.958 2.562 13.802Q2.625 13.646 2.75 13.521L11.229 5.042L14.958 8.771L6.479 17.25Q6.354 17.375 6.198 17.438Q6.042 17.5 5.875 17.5Z"/></svg>';var h1=`<svg viewBox="0 0 20 20"><path d="M16.8,1.7H3.2c-0.8,0-1.5,0.7-1.5,1.5v13.6c0,0.8,0.7,1.5,1.5,1.5h13.6c0.8,0,1.5-0.7,1.5-1.5V3.2
		C18.3,2.4,17.6,1.7,16.8,1.7z M17.3,11v4.5h-1.9v1.8H11v-1.8H9v1.8H4.6v-1.8H2.7V11h1.9V9.1H2.7V4.6h1.9V2.7H9v1.9H11V2.7h4.4v1.9
		h1.9v4.5h-1.9V11H17.3z"/><rect x="9" y="9.1" width="1.9" height="1.9"/></svg>`;var f1='<svg viewBox="0 0 20 20"><path d="M8.042 14.958q-.438.292-.896.042-.458-.25-.458-.792V5.75q0-.542.458-.792T8.042 5l6.646 4.25q.416.25.416.729t-.416.729Z"/></svg>';var m1='<svg viewBox="0 0 20 20"><path d="M10.021 13.333q-.521 0-.886-.323-.364-.322-.302-.906.105-1.021.459-1.656.354-.636 1.125-1.323.854-.75 1.239-1.26.386-.511.386-1.219 0-.854-.511-1.333-.51-.48-1.531-.48-.625 0-1.052.25-.427.25-.719.605-.354.458-.802.604-.448.146-.865-.021-.541-.229-.666-.771t.229-1.021q.604-.875 1.583-1.427Q8.688 2.5 10 2.5q2.188 0 3.365 1.219t1.177 2.927q0 1.042-.448 1.781-.448.74-1.406 1.677-.688.667-.98 1.073-.291.406-.375.927-.104.542-.458.886-.354.343-.854.343Zm-.021 5q-.708 0-1.208-.5t-.5-1.208q0-.708.5-1.208t1.208-.5q.708 0 1.208.5t.5 1.208q0 .708-.5 1.208t-1.208.5Z"/></svg>';var g1='<svg viewBox="0 0 20 20"><path d="M9.958 15.021Q10.417 15.021 10.729 14.708Q11.042 14.396 11.042 13.938Q11.042 13.479 10.729 13.167Q10.417 12.854 9.958 12.854Q9.5 12.854 9.188 13.167Q8.875 13.479 8.875 13.938Q8.875 14.396 9.188 14.708Q9.5 15.021 9.958 15.021ZM10.062 6.458Q10.646 6.458 11.01 6.771Q11.375 7.083 11.375 7.562Q11.375 7.896 11.146 8.271Q10.917 8.646 10.5 9Q9.833 9.583 9.531 10.073Q9.229 10.562 9.229 11.042Q9.229 11.354 9.438 11.562Q9.646 11.771 9.979 11.771Q10.292 11.771 10.531 11.562Q10.771 11.354 10.833 11Q10.896 10.667 11.115 10.365Q11.333 10.062 11.833 9.583Q12.5 8.958 12.74 8.469Q12.979 7.979 12.979 7.396Q12.979 6.312 12.188 5.646Q11.396 4.979 10.104 4.979Q9.229 4.979 8.573 5.323Q7.917 5.667 7.438 6.354Q7.271 6.583 7.344 6.854Q7.417 7.125 7.646 7.312Q7.917 7.521 8.26 7.448Q8.604 7.375 8.833 7.062Q9.062 6.771 9.365 6.615Q9.667 6.458 10.062 6.458ZM10 18.333Q8.292 18.333 6.771 17.677Q5.25 17.021 4.115 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.115 4.104Q5.25 2.979 6.771 2.323Q8.292 1.667 10 1.667Q11.75 1.667 13.271 2.323Q14.792 2.979 15.917 4.104Q17.042 5.229 17.688 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.688 13.25Q17.042 14.771 15.917 15.896Q14.792 17.021 13.271 17.677Q11.75 18.333 10 18.333Z"/></svg>';var D1='<svg viewBox="0 96 960 960"><path d="M398 856q-97 0-167.5-63T160 636q0-94 70.5-156.5T398 417h242l-73-73q-12-12-11.5-29t12.5-29q12-12 29.5-12t29.5 12l143 143q7 7 10 14.5t3 15.5q0 8-3 15.5T770 489L626 633q-12 12-29 11.5T568 632q-12-12-12-29.5t12-29.5l72-72H398q-62 0-108 38t-46 97q0 60 46 98t108 38h239q17 0 29.5 12.5T679 814q0 17-12.5 29.5T637 856H398Z"/></svg>';var Bu='<svg viewBox="0 0 20 20"><path d="M10 19.125Q9.646 19.125 9.385 18.865Q9.125 18.604 9.125 18.25V17.438Q6.583 17.146 4.719 15.281Q2.854 13.417 2.562 10.875H1.75Q1.396 10.875 1.135 10.615Q0.875 10.354 0.875 10Q0.875 9.646 1.135 9.385Q1.396 9.125 1.75 9.125H2.562Q2.854 6.583 4.719 4.719Q6.583 2.854 9.125 2.562V1.75Q9.125 1.396 9.385 1.135Q9.646 0.875 10 0.875Q10.354 0.875 10.615 1.135Q10.875 1.396 10.875 1.75V2.562Q13.417 2.854 15.281 4.719Q17.146 6.583 17.438 9.125H18.25Q18.604 9.125 18.865 9.385Q19.125 9.646 19.125 10Q19.125 10.354 18.865 10.615Q18.604 10.875 18.25 10.875H17.438Q17.146 13.417 15.281 15.281Q13.417 17.146 10.875 17.438V18.25Q10.875 18.604 10.615 18.865Q10.354 19.125 10 19.125ZM10 15.729Q12.396 15.729 14.062 14.062Q15.729 12.396 15.729 10Q15.729 7.604 14.062 5.938Q12.396 4.271 10 4.271Q7.604 4.271 5.938 5.938Q4.271 7.604 4.271 10Q4.271 12.396 5.938 14.062Q7.604 15.729 10 15.729Z"/></svg>';var C1='<svg viewBox="0 0 20 20"><path d="M13.188 11.104 15.354 8.938Q15.625 8.667 15.625 8.312Q15.625 7.958 15.354 7.688L13.208 5.542Q12.958 5.292 12.604 5.292Q12.25 5.292 11.979 5.562Q11.708 5.833 11.708 6.188Q11.708 6.542 11.979 6.812L12.625 7.479H10.042Q9.688 7.479 9.438 7.729Q9.188 7.979 9.188 8.354Q9.188 8.708 9.448 8.969Q9.708 9.229 10.062 9.229H12.583L11.938 9.875Q11.688 10.125 11.688 10.479Q11.688 10.833 11.958 11.104Q12.208 11.354 12.562 11.365Q12.917 11.375 13.188 11.104ZM6.792 14.438Q7.062 14.708 7.417 14.708Q7.771 14.708 8.062 14.417Q8.312 14.167 8.312 13.802Q8.312 13.438 8.042 13.167L7.396 12.521H9.979Q10.333 12.521 10.583 12.271Q10.833 12.021 10.833 11.646Q10.833 11.292 10.573 11.031Q10.312 10.771 9.958 10.771H7.438L8.104 10.104Q8.354 9.854 8.354 9.5Q8.354 9.146 8.083 8.896Q7.833 8.625 7.469 8.625Q7.104 8.625 6.833 8.896L4.667 11.062Q4.396 11.333 4.396 11.688Q4.396 12.042 4.667 12.312ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>';var v1=`<svg viewBox="0 0 20 20"><path d="M14.8,6.1c-1.3-1.3-2.8-1.9-4.7-1.9h0l0.2-0.2c0.2-0.2,0.2-0.4,0.2-0.6c0-0.2-0.1-0.4-0.2-0.6c-0.2-0.2-0.4-0.2-0.6-0.2
				S9.2,2.5,9,2.7L7.3,4.4C7.2,4.5,7.1,4.6,7.1,4.7C7.1,4.8,7,4.9,7,5c0,0.1,0,0.2,0.1,0.3c0,0.1,0.1,0.2,0.2,0.3L9,7.4
				c0.2,0.2,0.4,0.3,0.6,0.3s0.4-0.1,0.6-0.3c0.2-0.2,0.2-0.4,0.2-0.6s-0.1-0.4-0.2-0.6L10,5.9h0c1.4,0,2.5,0.5,3.5,1.4
				s1.4,2.1,1.4,3.5c0,1.1-0.3,2.1-0.9,2.9c-0.3,0.4-0.6,0.7-1,1c-0.4,0.3-0.9,0.5-1.4,0.8c-1,0.3-1.9,0.4-2.9,0.1
				c-0.5-0.2-1-0.4-1.4-0.7c-0.1-0.1-0.2-0.1-0.3-0.2c-0.3-0.3-0.7-0.6-0.9-1c-0.6-0.9-0.9-1.8-0.9-2.9c0-0.5,0.1-1,0.2-1.5
				C5.5,8.8,5.7,8.4,6,7.9c0.1-0.2,0.2-0.4,0.2-0.6S6.1,6.9,6,6.8C5.8,6.6,5.5,6.5,5.3,6.5C5,6.5,4.8,6.6,4.7,6.8
				C4.2,7.4,3.9,8,3.7,8.7c-0.2,0.7-0.3,1.4-0.3,2.1c0,1.5,0.4,2.9,1.3,4c0.8,1.1,1.9,1.9,3.2,2.3c0.1,0,0.2,0.1,0.2,0.1
				c1.5,0.4,2.9,0.4,4.3-0.1c0.4-0.2,0.7-0.4,1-0.6c0.7-0.4,1.3-1,1.9-1.7c0.9-1.2,1.3-2.5,1.3-4C16.7,9,16,7.4,14.8,6.1z"/></svg>`;var b1='<svg viewBox="0 0 20 20"><path d="M10 14.583q1.604 0 2.698-1.093 1.094-1.094 1.094-2.678 0-1.583-1.094-2.677Q11.604 7.042 10 7.042q-1.583 0-2.667 1.093Q6.25 9.229 6.25 10.812q0 1.584 1.083 2.678Q8.417 14.583 10 14.583ZM3.417 17.5q-.729 0-1.24-.51-.51-.511-.51-1.24V5.896q0-.729.51-1.24.511-.51 1.24-.51h2.541l1-1.084q.25-.27.584-.416.333-.146.708-.146h3.521q.354 0 .687.146.334.146.584.416l1.02 1.084h2.521q.729 0 1.24.51.51.511.51 1.24v9.854q0 .729-.51 1.24-.511.51-1.24.51Z"/></svg>';var y1='<svg viewBox="0 0 20 20"><path d="M11.583 18.333H8.417q-.334 0-.573-.218-.24-.219-.282-.553l-.229-1.854q-.208-.125-.458-.27-.25-.146-.458-.271l-1.729.729q-.313.125-.626.021-.312-.105-.479-.396l-1.562-2.729q-.167-.292-.094-.604.073-.313.323-.521l1.458-1.125V9.458L2.25 8.333q-.25-.208-.323-.521-.073-.312.094-.604l1.562-2.729q.167-.291.479-.396.313-.104.626.021l1.729.729q.208-.125.458-.27.25-.146.458-.271l.229-1.854q.042-.334.282-.553.239-.218.573-.218h3.166q.334 0 .573.218.24.219.282.553l.229 1.854q.208.125.458.271.25.145.458.27l1.729-.729q.313-.125.626-.021.312.105.479.396L18 7.208q.167.292.104.604-.062.313-.333.521l-1.459 1.125v1.084l1.459 1.125q.271.208.333.521.063.312-.104.604l-1.583 2.729q-.167.291-.479.396-.313.104-.626-.021l-1.729-.729q-.208.125-.458.271-.25.145-.458.27l-.229 1.854q-.042.334-.282.553-.239.218-.573.218ZM10 12.979q1.229 0 2.104-.875T12.979 10q0-1.229-.875-2.104T10 7.021q-1.229 0-2.104.875T7.021 10q0 1.229.875 2.104t2.104.875Z"/></svg>';var x1='<svg viewBox="0 -960 960 960"><path d="M480-80q-17 0-29.5-12.5T438-122v-114H269q-13 0-25-5t-21-14l-58-58q-9-9-13.5-21t-4.5-24q0-12 4.5-24t13.5-21l58-58q9-9 21-14t25-5h169v-78H225q-26 0-45-19t-19-45v-116q0-26 19-45t45-19h213v-36q0-17 12.5-29.5T480-880q17 0 29.5 12.5T522-838v36h169q13 0 25 5t21 14l58 58q9 9 13.5 21t4.5 24q0 12-4.5 24T795-635l-58 58q-9 9-21 14t-25 5H522v78h213q26 0 45 19t19 45v116q0 26-19 45t-45 19H522v114q0 17-12.5 29.5T480-80Z"/></svg>';var w1=`<svg viewBox="0 0 20 20"><path style="stroke:#000000;stroke-width:2;stroke-miterlimit:10;" d="M6.4,6.3"/><g><path d="M18.9,3.4c-0.4-0.4-1-0.4-1.4,0L4.2,16.8c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3L18.9,4.8
		C19.3,4.5,19.3,3.8,18.9,3.4z"/><path d="M6.1,6.5l6.2,1.9l-1.8-6.7L9,3.4c-2.8-1.9-6.6-2-7.9-2v1v1c2.1,0,4.6,0.4,6.5,1.5L6.1,6.5z"/></g></svg>`;var _1='<svg viewBox="0 0 20 20"><path d="M14.542 15q-.354 0-.615-.26-.26-.261-.26-.615V5.896q0-.354.26-.615.261-.26.615-.26t.614.26q.261.261.261.615v8.229q0 .354-.261.615-.26.26-.614.26Zm-8.604-.896q-.438.292-.896.042-.459-.25-.459-.771V6.646q0-.521.459-.771.458-.25.896.042l5.083 3.354q.396.271.396.729 0 .458-.396.729Z"/></svg>';var S1=`<svg viewBox="0 0 20 20"><path d="M4.4,14.5c-0.5,0-1-0.2-1.4-0.6c-0.4-0.4-0.6-0.8-0.6-1.4c0-0.5,0.2-1,0.6-1.4c0.4-0.4,0.8-0.6,1.4-0.6h11.1
	c0.5,0,1,0.2,1.4,0.6c0.4,0.4,0.6,0.8,0.6,1.4c0,0.5-0.2,1-0.6,1.4c-0.4,0.4-0.8,0.6-1.4,0.6H4.4z"/><path d="M3.4,8.1C3.1,8.1,2.9,8,2.8,7.8C2.6,7.7,2.5,7.5,2.5,7.2s0.1-0.4,0.3-0.6c0.2-0.2,0.4-0.3,0.6-0.3h13.2
	c0.2,0,0.4,0.1,0.6,0.3c0.2,0.2,0.3,0.4,0.3,0.6s-0.1,0.4-0.3,0.6c-0.2,0.2-0.4,0.3-0.6,0.3H3.4z"/></svg>`;var A1='<svg viewBox="0 0 20 20"><path d="M8.375 2.583Q8.021 2.583 7.76 2.323Q7.5 2.062 7.5 1.708Q7.5 1.354 7.76 1.094Q8.021 0.833 8.375 0.833H11.625Q11.979 0.833 12.24 1.094Q12.5 1.354 12.5 1.708Q12.5 2.062 12.24 2.323Q11.979 2.583 11.625 2.583ZM10 11.583Q10.354 11.583 10.615 11.323Q10.875 11.062 10.875 10.708V7.562Q10.875 7.208 10.615 6.948Q10.354 6.688 10 6.688Q9.646 6.688 9.385 6.948Q9.125 7.208 9.125 7.562V10.708Q9.125 11.062 9.385 11.323Q9.646 11.583 10 11.583ZM10 18.333Q8.458 18.333 7.094 17.74Q5.729 17.146 4.708 16.125Q3.688 15.104 3.094 13.74Q2.5 12.375 2.5 10.833Q2.5 9.292 3.094 7.927Q3.688 6.562 4.708 5.542Q5.729 4.521 7.094 3.927Q8.458 3.333 10 3.333Q11.271 3.333 12.458 3.75Q13.646 4.167 14.667 4.958L15.25 4.375Q15.5 4.125 15.854 4.125Q16.208 4.125 16.479 4.375Q16.729 4.646 16.729 5Q16.729 5.354 16.479 5.604L15.875 6.208Q16.667 7.271 17.083 8.417Q17.5 9.562 17.5 10.833Q17.5 12.375 16.906 13.74Q16.312 15.104 15.292 16.125Q14.271 17.146 12.906 17.74Q11.542 18.333 10 18.333Z"/></svg>';var E1='<svg viewBox="0 0 20 20"><path d="M5.896 17.5q-.729 0-1.24-.51-.51-.511-.51-1.24V5.125q-.354 0-.615-.26-.26-.261-.26-.615t.26-.615q.261-.26.615-.26h3.375q0-.354.26-.615.261-.26.615-.26h3.187q.355 0 .615.26.26.261.26.615h3.375q.355 0 .615.26.26.261.26.615t-.26.615q-.26.26-.615.26V15.75q0 .729-.51 1.24-.511.51-1.24.51Zm1.542-4.375q0 .354.26.615.26.26.614.26.355 0 .615-.26.261-.261.261-.615V7.75q0-.354-.261-.615-.26-.26-.615-.26-.354 0-.614.26-.26.261-.26.615Zm3.333 0q0 .354.26.615.261.26.615.26t.614-.26q.261-.261.261-.615V7.75q0-.354-.261-.615-.26-.26-.614-.26t-.615.26q-.26.261-.26.615Z"/></svg>';var T1='<svg viewBox="0 96 960 960"><path d="M323 856q-17 0-29.5-12.5T281 814q0-17 12.5-29.5T323 772h239q62 0 108-38t46-97q0-59-46-97.5T562 501H320l73 73q12 12 11.5 29T392 632q-12 12-29.5 12T333 632L190 489q-7-7-10-14.5t-3-15.5q0-8 3-15.5t10-14.5l144-144q12-12 29.5-12t29.5 12q12 12 12 29.5T393 344l-73 73h242q97 0 167.5 62.5T800 636q0 94-70.5 157T562 856H323Z"/></svg>';var R1='<svg viewBox="0 0 20 20"><path d="M5,8.1C4.8,8.1,4.6,8,4.4,7.9C4.3,7.7,4.2,7.5,4.2,7.2s0.1-0.4,0.3-0.6C4.6,6.5,4.8,6.4,5,6.4H15c0.2,0,0.4,0.1,0.6,0.3c0.2,0.2,0.3,0.4,0.3,0.6s-0.1,0.4-0.3,0.6C15.4,8,15.2,8.1,15,8.1H5z"/><path d="M5.1,14.2c-0.3,0-0.5-0.1-0.7-0.3c-0.3-0.4-0.3-1,0.1-1.3c2.3-1.9,3.7-2.1,5.9-1c1.8,0.9,2.7,0.7,3.8-0.7c0.3-0.4,0.9-0.4,1.3-0.1c0.4,0.3,0.4,0.9,0.1,1.3c-1.7,2.1-3.4,2.4-6,1.2c-1.4-0.7-2-0.8-4,0.8C5.5,14.2,5.3,14.2,5.1,14.2z"/></svg>';var M1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
<path d="M78.5,40v-2H66.9V20.1L30.4,0.5V9h-9.5v2h9.5v5h-9.5v2h9.5v5h-9.5v2h9.5v5h-9.5v2h9.5v8.7L41.5,50l-11.2,9.3V68h-9.5v2h9.5
	v5h-9.5v2h9.5v5h-9.5v2h9.5v5h-9.5v2h9.5v8.5l36.5-20.2V61h11.6v-2H66.9v-5h11.6v-2H66.9v-5h11.6v-2H66.9v-5H78.5z M63.9,77.6
	L33.4,94.5V60.7L46.2,50L33.4,39.3V5.5l30.5,16.4V77.6z"/>
</svg>
`;var I1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<polygon points="45,67.9 52,67.9 52,52.4 67.3,52.4 67.3,45.4 52,45.4 52,30.4 45,30.4 45,45.4 29.8,45.4 29.8,52.4 45,52.4 	" />
	<path d="M103.5,48.7H90V20H71.5V5.5h-2V20H30.2V5.5h-2V20H10v28.7H-3.5v2H10V80h37.9v15.5h2V80H90V50.7h13.5V48.7z M87,77H13V23h74
		V77z" />
</svg>`;var O1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M88.4,34.2v-2H73.2V1.1H28.4V5H13.2v2h15.2v8.1H13.2v2h15.2v9.2H13.2v2h15.2v9.1H13.2v2h15.2v19.8H13.2v2h15.2v8.1H13.2v2
		h15.2v9.1H13.2v2h15.2v9.2H13.2v2h15.2v4h44.8v-31h15.2v-2H73.2v-9.2h15.2v-2H73.2v-9.2h15.2v-2H73.2v-8H88.4z M70.2,94.6H31.4V4.1
		h38.8V94.6z" />
	<polygon points="47.6,64 53.6,64 53.6,53.3 65.1,53.3 65.1,47.3 53.6,47.3 53.6,36.5 47.6,36.5 47.6,47.3 37.5,47.3 37.5,53.3 
		47.6,53.3 	" />
</svg>`;var B1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 50 25" style="enable-background:new 0 0 50 25;" xml:space="preserve" fill="currentColor">
<path d="M30.3,16.8c-0.6,0.6-1.5,0.9-2.5,0.9c-1.2,0-2.2-0.4-2.9-1.2c-0.7-0.8-1.1-1.9-1.1-3.3c0-1.5,0.4-2.7,1.2-3.5
	c0.7-0.7,1.6-1.1,2.7-1.1c1.4,0,2.5,0.5,3.2,1.4c0.4,0.5,0.6,1.1,0.6,1.6h-1.8c-0.1-0.4-0.3-0.7-0.4-0.9c-0.3-0.4-0.8-0.6-1.4-0.6
	c-0.7,0-1.2,0.3-1.5,0.8c-0.4,0.5-0.6,1.3-0.6,2.2s0.2,1.7,0.6,2.2s0.9,0.7,1.5,0.7s1.1-0.2,1.4-0.6c0.2-0.2,0.3-0.6,0.5-1h1.8
	C31.3,15.4,30.9,16.2,30.3,16.8z"/>
<path d="M32.8,8.8h1.8v7h4.2v1.5h-6V8.8z"/>
<path d="M47.7,17.4h-2.3l-2.6-3.7l-0.9,0.9v2.9h-1.8V8.8h1.8v3.5l3.3-3.5h2.3L44,12.4L47.7,17.4z"/>
<polygon points="0,22.2 0,20.2 19.1,20.2 19.1,2.8 50,2.8 50,4.8 21.1,4.8 21.1,22.2 "/>
</svg>
`;var P1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M39.3,55.3c-1.1,1.2-2.5,1.8-4.2,1.8c-2.1,0-3.8-0.8-5-2.4c-1.2-1.6-1.8-3.8-1.8-6.5c0-3,0.7-5.3,2.1-6.9
		c1.2-1.4,2.7-2.1,4.6-2.1c2.5,0,4.3,0.9,5.4,2.8c0.6,1.1,1,2.1,1,3.2h-3.1c-0.2-0.8-0.5-1.4-0.8-1.9c-0.6-0.7-1.4-1.1-2.5-1.1
		c-1.1,0-2,0.5-2.7,1.6c-0.6,1-1,2.5-1,4.5s0.3,3.4,1,4.3c0.7,1,1.6,1.4,2.6,1.4c1.1,0,1.9-0.4,2.5-1.2c0.3-0.4,0.6-1.1,0.8-2h3.1
		C41.1,52.6,40.4,54.1,39.3,55.3z" />
	<path d="M46.5,56.6h-2.9V39.5h4.5l2.7,13.5l2.7-13.5h4.4v17.1H55V45c0-0.3,0-0.8,0-1.4c0-0.6,0-1.1,0-1.4l-2.8,14.4h-3l-2.8-14.4
		c0,0.3,0,0.8,0,1.4c0,0.6,0,1.1,0,1.4V56.6z" />
	<path d="M67,50.4h-3.1v6.2h-3.1V39.5h6.4c1.5,0,2.7,0.4,3.5,1.3c0.9,0.9,1.3,2.3,1.3,4.1c0,2-0.4,3.4-1.3,4.3
		C69.9,50,68.6,50.4,67,50.4z M68.4,46.9c0.4-0.4,0.6-1.1,0.6-2c0-0.9-0.2-1.5-0.6-1.9c-0.4-0.4-1-0.6-1.7-0.6h-2.9v5h2.9
		C67.5,47.5,68,47.3,68.4,46.9z" />
	<path d="M95.5,50.1H80V10H50.7V-3.5h-2V10H20v18.5H5.5v2H20v39.3H5.5v2H20V90h28.7v13.5h2V90H80V52.1h15.5V50.1z M77,87H23V13h54V87
	z" />
</svg>`;var k1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
<path d="M88.4,26.1v-2H73.2V11.9H51.8V4.6h-2v7.3H28.4v12.2H13.2v2h15.2v14.2H13.2v2h15.2v14.2H13.2v2h15.2v14.2H13.2v2h15.2v12.1
	h44.8V74.7h15.2v-2H73.2V58.5h15.2v-2H73.2V42.3h15.2v-2H73.2V26.1H88.4z M70.2,83.8H31.4V14.9h18.4v28.5l-13-6.9v27.7l23.4-13.4
	c0.4,1.5,1.7,2.6,3.3,2.6c1.8,0,3.4-1.6,3.4-3.4c0-1.8-1.4-3.3-3.4-3.4c-1.5,0-2.8,1-3.2,2.4l-8.5-4.5V14.9h18.4V83.8z M57.7,49.9
	L38.8,60.8V39.9L57.7,49.9z M62.1,50c0-0.7,0.7-1.4,1.3-1.4c0.9,0.1,1.5,0.6,1.5,1.4c0,0.7-0.7,1.4-1.4,1.4S62.1,50.7,62.1,50z"/>
</svg>
`;var F1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M68.7,73.8h-34v-50h34V73.8z M36.1,72.3h31v-47h-31V72.3z" />
	<path d="M95.5,26.6v-2h-15v-20h-60V85h-15v2h15v8.6h60V75.5h15v-2h-15V59.2h15v-2h-15v-15h15v-2h-15V26.6H95.5z M23.5,83l7.1,3.1
	l-7.1,3.1V83z M77.5,92.6h-54v-1.2l12.1-5.3l-12.1-5.3V7.6h54V92.6z" />
	<defs>
		<rect id="SVGID_1_" x="35.4" y="24.6" width="32.5" height="48.5" />
	</defs>
	<clipPath id="frame">
		<use xlink:href="#SVGID_1_" style="overflow:visible;" />
	</clipPath>
	<g style="clip-path:url(#frame);">
		<path d="M45,22.6c0-2.5,0.3-4.4,0.8-5.9c0.5-1.5,1.3-2.7,2.3-3.5c1-0.8,2.2-1.2,3.8-1.2c1.1,0,2.1,0.2,2.9,0.7
				c0.8,0.4,1.5,1.1,2.1,1.9c0.5,0.8,1,1.9,1.3,3.1s0.5,2.8,0.5,4.9c0,2.4-0.2,4.4-0.8,5.9c-0.5,1.5-1.2,2.7-2.2,3.5
				s-2.3,1.2-3.8,1.2c-2,0-3.6-0.7-4.7-2.2C45.6,29.3,45,26.5,45,22.6z M47.6,22.6c0,3.4,0.4,5.7,1.2,6.8c0.8,1.1,1.8,1.7,3,1.7
				c1.2,0,2.2-0.6,3-1.7s1.2-3.4,1.2-6.8c0-3.4-0.4-5.7-1.2-6.8s-1.8-1.7-3-1.7c-1.2,0-2.1,0.5-2.8,1.5C48,16.9,47.6,19.2,47.6,22.6
				z" />
		<path d="M54.6,56.9H52V40.6c-0.6,0.6-1.4,1.2-2.4,1.8c-1,0.6-1.9,1-2.7,1.3v-2.5c1.4-0.7,2.7-1.5,3.7-2.4s1.8-1.9,2.3-2.8h1.6
				V56.9z" />
		<path d="M58.4,78.4v2.4H44.6c0-0.6,0.1-1.2,0.3-1.8c0.3-0.9,0.9-1.9,1.7-2.8c0.8-0.9,1.9-2,3.3-3.1c2.3-1.9,3.8-3.3,4.6-4.4
				s1.2-2.1,1.2-3.1c0-1-0.4-1.9-1.1-2.6c-0.7-0.7-1.7-1-2.8-1c-1.2,0-2.2,0.4-2.9,1.1s-1.1,1.8-1.1,3.1L45.1,66
				c0.2-2,0.9-3.4,2-4.5s2.7-1.5,4.7-1.5c2,0,3.6,0.6,4.7,1.7c1.2,1.1,1.7,2.5,1.7,4.1c0,0.8-0.2,1.6-0.5,2.4s-0.9,1.6-1.7,2.5
				c-0.8,0.9-2.1,2.1-3.9,3.7c-1.5,1.3-2.5,2.2-2.9,2.6s-0.8,0.9-1.1,1.4H58.4z" />
	</g>
</svg>`;var N1=`<?xml version="1.0" encoding="UTF-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->

<svg
   version="1.1"
   id="Calque_1"
   fill="currentColor"
   x="0px"
   y="0px"
   viewBox="0 0 100 100"
   style="enable-background:new 0 0 100 100;"
   xml:space="preserve"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink">
    <rect
     stroke="#000000"
     x="16px"
     height="64px"
     y="16px"
     id="rect4"
     stroke-width="3px"
     width="64px"
     fill="none"
     transform="" /><line
     stroke="#000000"
     y1="18.848034"
     id="line1"
     x1="81.442513"
     stroke-width="3px"
     y2="18.848034"
     x2="91.442513" /><line
     stroke="#000000"
     y1="24.732759"
     stroke-width="3px"
     x1="81.442513"
     id="line2"
     y2="24.732759"
     x2="91.442513" /><line
     stroke="#000000"
     y1="50.646645"
     stroke-width="3px"
     x1="4.5000119"
     id="line3"
     y2="50.646645"
     x2="14.500001" /><line
     stroke="#000000"
     y1="30.617487"
     stroke-width="3px"
     x1="81.442513"
     id="line4"
     y2="30.617487"
     x2="91.442513" /><line
     stroke="#000000"
     y1="62.804226"
     stroke-width="3px"
     x1="4.50001"
     id="line5"
     y2="62.804226"
     x2="14.500001" /><line
     stroke="#000000"
     y1="36.502213"
     stroke-width="3px"
     x1="81.442513"
     id="line6"
     y2="36.502213"
     x2="91.442513" /><line
     stroke="#000000"
     y1="68.883018"
     stroke-width="3px"
     x1="4.4999995"
     id="line7"
     y2="68.883018"
     x2="14.500001" /><line
     stroke="#000000"
     y1="32.410271"
     stroke-width="3px"
     x1="4.5000072"
     id="line9"
     y2="32.410271"
     x2="14.500001" /><line
     stroke="#000000"
     y1="44.567852"
     stroke-width="3px"
     x1="4.5000086"
     id="line10"
     y2="44.567852"
     x2="14.500001" /><line
     stroke="#000000"
     y1="38.489063"
     stroke-width="3px"
     x1="4.5000086"
     id="line11"
     y2="38.489063"
     x2="14.500001" /><line
     stroke="#000000"
     y1="56.725433"
     stroke-width="3px"
     x1="4.5000114"
     id="line12"
     y2="56.725433"
     x2="14.500001" /><line
     stroke="#000000"
     y1="4.7428727"
     stroke-width="3px"
     x1="26.639246"
     id="line13"
     y2="14.742862"
     x2="26.639246" /><line
     stroke="#000000"
     y1="26.331532"
     stroke-width="3px"
     x1="14.487592"
     id="line13-3"
     y2="26.248806"
     x2="4.4879427" /><line
     stroke="#000000"
     y1="4.7428694"
     stroke-width="3px"
     x1="59.406345"
     id="line14"
     y2="14.742862"
     x2="59.406345" /><line
     stroke="#000000"
     y1="4.7428708"
     stroke-width="3px"
     x1="20.647053"
     id="line15"
     y2="14.742862"
     x2="20.647053" /><line
     stroke="#000000"
     y1="4.7428684"
     stroke-width="3px"
     x1="32.631439"
     id="line16"
     y2="14.742862"
     x2="32.631439" /><line
     stroke="#000000"
     y1="4.7428703"
     stroke-width="3px"
     x1="38.623634"
     id="line17"
     y2="14.742862"
     x2="38.623634" /><line
     stroke="#000000"
     y1="4.7428703"
     stroke-width="3px"
     x1="65.253151"
     id="line18"
     y2="14.742862"
     x2="65.253151" /><line
     stroke="#000000"
     y1="4.7428703"
     stroke-width="3px"
     x1="71.099953"
     id="line19"
     y2="14.742862"
     x2="71.099953" /><line
     stroke="#000000"
     y1="4.7428699"
     stroke-width="3px"
     x1="76.946754"
     id="line20"
     y2="14.742862"
     x2="76.946754" /><line
     stroke="#000000"
     y1="81.382751"
     stroke-width="3px"
     x1="59.071537"
     id="line21"
     y2="91.382751"
     x2="59.071537" /><line
     stroke="#000000"
     y1="81.465431"
     stroke-width="3px"
     x1="22.395327"
     id="line21-7"
     y2="91.465431"
     x2="22.395327" /><line
     stroke="#000000"
     y1="81.382751"
     stroke-width="3px"
     x1="65.078888"
     id="line22"
     y2="91.382751"
     x2="65.078888" /><line
     stroke="#000000"
     y1="81.382751"
     stroke-width="3px"
     x1="71.086243"
     id="line23"
     y2="91.382751"
     x2="71.086243" /><line
     stroke="#000000"
     y1="81.382751"
     stroke-width="3px"
     x1="77.09359"
     id="line24"
     y2="91.382751"
     x2="77.09359" /><text
     stroke="none"
     id="text1"
     stroke-width="1px"
     x="48.151367"
     text-rendering="geometricPrecision"
     font-family="Helvetica"
     fill="#000000"
     font-size="10px"
     y="45.351074"
     text-anchor="middle"><tspan
       id="tspan2051"
       x="48.151367"
       y="45.351074">CPU</tspan><tspan
       id="tspan2053"
       x="48.151367"
       y="57.851074">4-bit</tspan></text><path
     style="fill:none;stroke:#000000"
     id="path1083"
     d="m 23.076923,79.649464 -6.568109,0.092 3.204378,-5.734151 z"
     transform="translate(2.5316456,-0.68159688)" />
</svg>
`;var L1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.5.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
<path d="M71.1,90.1H26.8V10h44.3V90.1z M29.8,87.1h38.3V13H29.8V87.1z"/>
<rect x="12.8" y="37" width="16.3" height="2"/>
<rect x="12.8" y="56.4" width="16.3" height="2"/>
<rect x="70.8" y="41" width="16.3" height="2"/>
<rect x="70.8" y="54.7" width="16.3" height="2"/>
<rect x="70.8" y="68.3" width="16.3" height="2"/>
<rect x="70.8" y="27.6" width="16.3" height="2"/>
<g>
	<path d="M38.7,55.5h-5.6V40.2h5.6c0.8,0,1.5,0.1,2,0.3c0.9,0.4,1.6,1,2.2,1.9c0.5,0.8,0.8,1.6,0.9,2.5s0.2,1.7,0.2,2.5
		c0,2-0.3,3.8-1,5.2C42.1,54.5,40.7,55.5,38.7,55.5z M40.7,44.1c-0.4-0.8-1.2-1.2-2.5-1.2h-2.5v10h2.5c1.3,0,2.2-0.7,2.7-2.2
		c0.3-0.8,0.4-1.8,0.4-2.9C41.3,46.1,41.1,44.9,40.7,44.1z"/>
	<path d="M54.1,52.2c-0.1,0.7-0.4,1.4-0.9,2c-0.8,1.1-2,1.7-3.4,1.7c-1.2,0-2.3-0.5-3.2-1.4c-0.9-0.9-1.4-2.4-1.4-4.5
		c0-2,0.4-3.5,1.3-4.5s1.9-1.6,3.3-1.6c0.8,0,1.5,0.2,2.2,0.5c0.6,0.4,1.2,0.9,1.6,1.7c0.4,0.7,0.6,1.5,0.7,2.3
		c0.1,0.5,0.1,1.3,0.1,2.2h-6.6c0,1.1,0.3,1.9,0.9,2.4c0.3,0.3,0.8,0.4,1.2,0.4c0.5,0,0.9-0.2,1.3-0.5c0.2-0.2,0.3-0.4,0.5-0.8H54.1
		z M51.6,48.7c0-0.8-0.2-1.4-0.6-1.8c-0.4-0.4-0.8-0.6-1.3-0.6c-0.6,0-1,0.2-1.3,0.6s-0.5,1-0.6,1.7H51.6z"/>
	<path d="M64.2,48.2h-2.6c0-0.4-0.2-0.8-0.4-1.1c-0.3-0.5-0.7-0.7-1.3-0.7c-0.8,0-1.4,0.5-1.7,1.5C58.1,48.4,58,49.1,58,50
		c0,0.8,0.1,1.5,0.2,2c0.3,0.9,0.9,1.4,1.7,1.4c0.6,0,1-0.2,1.2-0.6s0.4-0.9,0.4-1.5h2.6c-0.1,0.9-0.3,1.8-0.8,2.6
		c-0.8,1.3-1.9,1.9-3.5,1.9s-2.7-0.5-3.4-1.6c-0.7-1.1-1.1-2.5-1.1-4.2c0-1.9,0.4-3.5,1.2-4.5s1.9-1.6,3.3-1.6c1.2,0,2.2,0.3,2.9,1
		C63.6,45.5,64.1,46.6,64.2,48.2z"/>
</g>
</svg>
`;var V1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M87.6,16v-2H73.3v-4H26.8v13H12.3v2h14.5v6.8H12.3v2h14.5v6.8H12.3v2h14.5v6.8H12.3v2h14.5v6.8H12.3v2h14.5V67H12.3v2h14.5
	v6.7H12.3v2h14.5V90h46.5v-3.3h14.3v-2H73.3V82h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.8h14.3v-2
	H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3V49h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3v-2.8h14.3v-2H73.3v-2.7h14.3v-2
	H73.3v-2.7h14.3v-2H73.3v-2.7h14.3v-2H73.3V16H87.6z M70.3,87H29.8V13h40.5V87z" />
	<path d="M39.3,55.8h-1.8V44.6c-0.4,0.4-1,0.8-1.7,1.2s-1.3,0.7-1.9,0.9V45c1-0.5,1.8-1,2.6-1.7s1.3-1.3,1.6-1.9h1.1V55.8z" />
	<path d="M56,52.4l1.7-0.3c0.1,0.7,0.4,1.2,0.8,1.6c0.4,0.4,1.1,0.6,1.9,0.6c0.8,0,1.4-0.2,1.8-0.5s0.6-0.7,0.6-1.2
		c0-0.4-0.2-0.7-0.5-0.9c-0.2-0.2-0.8-0.4-1.8-0.6c-1.3-0.3-2.2-0.6-2.7-0.8s-0.9-0.6-1.1-1c-0.3-0.4-0.4-0.9-0.4-1.4
		c0-0.5,0.1-0.9,0.3-1.3c0.2-0.4,0.5-0.7,0.9-1c0.3-0.2,0.6-0.4,1.1-0.5c0.5-0.1,1-0.2,1.5-0.2c0.8,0,1.5,0.1,2.1,0.4s1.1,0.6,1.4,1
		s0.5,0.9,0.6,1.6L62.5,48c-0.1-0.5-0.3-1-0.7-1.2c-0.4-0.3-0.9-0.4-1.6-0.4c-0.8,0-1.4,0.1-1.7,0.4C58.2,47,58,47.3,58,47.7
		c0,0.2,0.1,0.4,0.2,0.6c0.1,0.2,0.4,0.3,0.7,0.5c0.2,0.1,0.7,0.2,1.6,0.4c1.2,0.3,2.1,0.6,2.6,0.8c0.5,0.2,0.9,0.5,1.2,0.9
		c0.3,0.4,0.4,0.9,0.4,1.5c0,0.6-0.2,1.1-0.5,1.7s-0.8,0.9-1.5,1.2s-1.4,0.4-2.2,0.4c-1.3,0-2.4-0.3-3.1-0.8
		C56.7,54.3,56.2,53.5,56,52.4z" />
	<path d="M65.9,55.8v-2h2v2H65.9z" />
	<path d="M50.3,45l-1.7,0.1c-0.2-0.7-0.4-1.2-0.7-1.5c-0.5-0.5-1.1-0.8-1.8-0.8c-0.6,0-1.1,0.2-1.5,0.5c-0.6,0.4-1,1-1.3,1.8
		s-0.5,1.9-0.5,3.3c0.4-0.6,0.9-1.1,1.6-1.4s1.3-0.5,1.9-0.5c1.2,0,2.2,0.4,3,1.3s1.2,2,1.2,3.3c0,0.9-0.2,1.7-0.6,2.5
		S49,55,48.4,55.4s-1.4,0.6-2.3,0.6c-1.5,0-2.7-0.5-3.6-1.6c-0.9-1.1-1.4-2.9-1.4-5.3c0-2.8,0.5-4.8,1.5-6c0.9-1.1,2.1-1.6,3.6-1.6
		c1.1,0,2,0.3,2.8,0.9S50.1,43.9,50.3,45z M43.1,51.2c0,0.6,0.1,1.2,0.4,1.7c0.3,0.6,0.6,1,1.1,1.3c0.5,0.3,0.9,0.4,1.5,0.4
		c0.7,0,1.4-0.3,1.9-0.9c0.5-0.6,0.8-1.4,0.8-2.4c0-1-0.3-1.8-0.8-2.3s-1.2-0.9-2-0.9c-0.8,0-1.5,0.3-2,0.9S43.1,50.3,43.1,51.2z" />
</svg>`;var H1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M87.7,25v-2H73.3V10H26.8v13H11.1v2h15.7v15.6H11.1v2h15.7v15.6H11.1v2h15.7v15.5H11.1v2h15.7V90h46.5V77.7h14.4v-2H73.3V69
	h14.4v-2H73.3v-6.8h14.4v-2H73.3v-6.8h14.4v-2H73.3v-6.8h14.4v-2H73.3v-6.8h14.4v-2H73.3V25H87.7z M70.3,87H29.8V13h40.5V87z" />
	<path d="M35.1,42.3V40h13v1.9c-1.3,1.4-2.5,3.2-3.8,5.4c-1.3,2.3-2.2,4.6-2.9,6.9c-0.5,1.7-0.8,3.5-0.9,5.5h-2.5
		c0-1.6,0.3-3.5,0.9-5.7c0.6-2.2,1.4-4.4,2.5-6.5s2.3-3.8,3.5-5.2H35.1z" />
	<path d="M51.1,55.1l2.4-0.4c0.1,1,0.5,1.7,1.1,2.2c0.6,0.5,1.5,0.8,2.6,0.8c1.1,0,2-0.2,2.5-0.7s0.8-1,0.8-1.6c0-0.6-0.2-1-0.7-1.3
		c-0.3-0.2-1.2-0.5-2.5-0.8c-1.8-0.5-3.1-0.8-3.8-1.2s-1.2-0.8-1.6-1.4c-0.4-0.6-0.5-1.2-0.5-1.9c0-0.6,0.1-1.2,0.4-1.8
		c0.3-0.6,0.7-1,1.2-1.4c0.4-0.3,0.9-0.5,1.6-0.7c0.7-0.2,1.4-0.3,2.1-0.3c1.1,0,2.1,0.2,3,0.5s1.5,0.8,1.9,1.3s0.7,1.3,0.8,2.2
		L60.2,49c-0.1-0.7-0.4-1.3-1-1.8c-0.5-0.4-1.3-0.6-2.2-0.6c-1.1,0-1.9,0.2-2.4,0.6s-0.7,0.8-0.7,1.3c0,0.3,0.1,0.6,0.3,0.9
		c0.2,0.3,0.5,0.5,0.9,0.7c0.2,0.1,1,0.3,2.2,0.6c1.7,0.5,3,0.8,3.6,1.1c0.7,0.3,1.2,0.7,1.6,1.3s0.6,1.3,0.6,2.1
		c0,0.8-0.2,1.6-0.7,2.3s-1.2,1.3-2.1,1.7s-1.9,0.6-3.1,0.6c-1.9,0-3.3-0.4-4.3-1.2C52,57.8,51.4,56.6,51.1,55.1z" />
	<path d="M64.5,59.7v-2.8h2.8v2.8H64.5z" />
</svg>`;var U1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M92,17.4v-2H77.6V10h-55v14.7H8.1v2h14.5v14.2H8.1v2h14.5v14.2H8.1v2h14.5v14.2H8.1v2h14.5V90h55v-5.2H92v-2H77.6V66H92v-2
	H77.6V49.8H92v-2H77.6V33.6H92v-2H77.6V17.4H92z M74.6,87h-49V13h49V87z" />
	<path d="M29.7,60.5V41.4h5.6c1.1,0,2.1,0.2,2.8,0.6c0.7,0.4,1.2,1,1.6,1.8c0.4,0.8,0.6,1.6,0.6,2.5c0,0.8-0.2,1.6-0.5,2.3
		c-0.3,0.7-0.9,1.3-1.6,1.7c0.9,0.3,1.6,0.9,2.1,1.7c0.5,0.8,0.7,1.8,0.7,2.9c0,0.9-0.1,1.7-0.4,2.5c-0.3,0.8-0.7,1.4-1.1,1.8
		c-0.4,0.4-1,0.7-1.6,0.9c-0.7,0.2-1.5,0.3-2.4,0.3H29.7z M31.6,49.4h3.2c0.9,0,1.5-0.1,1.9-0.2c0.5-0.2,0.9-0.5,1.1-1
		c0.3-0.4,0.4-1,0.4-1.7c0-0.6-0.1-1.2-0.4-1.7c-0.2-0.5-0.6-0.8-1-1c-0.4-0.2-1.2-0.3-2.3-0.3h-3V49.4z M31.6,58.3h3.7
		c0.6,0,1.1,0,1.3-0.1c0.5-0.1,0.8-0.3,1.1-0.5c0.3-0.2,0.6-0.6,0.8-1.1c0.2-0.5,0.3-1,0.3-1.6c0-0.7-0.1-1.3-0.4-1.9
		c-0.3-0.5-0.7-0.9-1.2-1.1c-0.5-0.2-1.2-0.3-2.2-0.3h-3.5V58.3z" />
	<path d="M54.4,53.8l2,0.6c-0.4,2.1-1.2,3.7-2.2,4.8c-1.1,1.1-2.4,1.6-4,1.6c-1.6,0-2.9-0.4-3.9-1.3c-1-0.8-1.8-2.1-2.3-3.6
		c-0.5-1.6-0.8-3.3-0.8-5.1c0-2,0.3-3.7,0.9-5.2c0.6-1.5,1.4-2.6,2.5-3.4c1.1-0.8,2.3-1.2,3.6-1.2c1.5,0,2.8,0.5,3.8,1.5
		s1.7,2.3,2.1,4.1l-2,0.6c-0.3-1.4-0.9-2.4-1.5-3c-0.7-0.6-1.5-1-2.5-1c-1.2,0-2.1,0.4-2.9,1.1c-0.8,0.7-1.3,1.7-1.6,2.8
		c-0.3,1.2-0.5,2.4-0.5,3.7c0,1.6,0.2,3,0.6,4.3c0.4,1.2,0.9,2.1,1.7,2.7c0.8,0.6,1.6,0.9,2.5,0.9c1.1,0,2-0.4,2.8-1.2
		C53.6,56.6,54.1,55.4,54.4,53.8z" />
	<path d="M58.8,60.5V41.4H64c1.2,0,2.1,0.1,2.7,0.3c0.9,0.3,1.6,0.7,2.2,1.4c0.8,0.9,1.4,1.9,1.8,3.3c0.4,1.3,0.6,2.8,0.6,4.5
		c0,1.5-0.1,2.7-0.4,3.9s-0.6,2-1,2.8c-0.4,0.7-0.9,1.3-1.4,1.7c-0.5,0.4-1.1,0.7-1.8,1c-0.7,0.2-1.5,0.3-2.4,0.3H58.8z M60.8,58.3
		H64c1,0,1.8-0.1,2.3-0.4s1-0.6,1.3-1c0.5-0.6,0.8-1.4,1.1-2.4c0.3-1,0.4-2.2,0.4-3.7c0-2-0.3-3.5-0.8-4.6c-0.5-1.1-1.1-1.8-1.9-2.2
		c-0.5-0.3-1.4-0.4-2.6-0.4h-3.1V58.3z" />
</svg>`;var W1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
<path d="M80,25v-2H65V4.4l-17,9.9V1h-2v14.4l-15,8.7V43H16v2h15v9H16v2h15v19.9l34,18.6V78h15v-2H65v-9h15v-2H65V36h15v-2H65v-9H80z
	 M62,9.6v13.5c-7.3,0.8-11.3,5.7-15.2,10.5c-3.6,4.4-7,8.6-12.8,9.2v-17L62,9.6z M62,25.1v9c-6.4,0.7-9.8,5.3-13.2,9.7
	c-3.8,5-7.3,9.7-14.8,10.2v-9.1c6.7-0.5,10.6-5.3,14.3-9.9C52.1,30.3,55.7,25.9,62,25.1z M34,74.1V56c8.5-0.5,12.7-6,16.4-10.9
	c3.2-4.2,6.2-8.2,11.6-8.9v53.3L34,74.1z"/>
</svg>
`;var G1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
<path d="M370.3,38.4v117.4H0.6v46.1h369.7v49.7H0.6v46.1h369.7v49.6H0.6v46.1h369.7v49.7H0.6v46.1h369.7v50.7H1.6V584h368.7v51.6
	H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.6H1.6V967h368.7v51.7H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.7H1.6
	v44.1h368.7v51.6H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.7H1.6v44.1h368.7v51.6H1.6v44.1h368.7v119.4h1289.9V38.4H370.3z
	 M1540.2,1636.8H490.3V158.4h1049.9V1636.8z"/>
<g fill="#00ff00" fill-opacity="0.65" stroke="#000000" stroke-width="7">
	<polygon points="650,313.2 694.8,268.5 954.5,268.5 1001.1,315 958.2,357.9 693.7,357.9 	"/>
	<polygon points="1034.4,313.2 1079.2,268.5 1339,268.5 1385.5,315 1342.6,357.9 1078.2,357.9 	"/>
	<polygon points="1404.5,873.1 1359.7,828.4 1359.7,380.6 1406.3,334.1 1449.2,376.9 1449.2,829.4 	"/>
	<polygon points="627.8,873.1 583.1,828.4 583.1,380.6 629.6,334.1 672.5,376.9 672.5,829.4 	"/>
	<polygon points="1404.5,1455.3 1359.7,1410.5 1359.7,962.8 1406.3,916.3 1449.2,959.1 1449.2,1411.6 	"/>
	<polygon points="627.8,1455.3 583.1,1410.5 583.1,962.8 629.6,916.3 672.5,959.1 672.5,1411.6 	"/>
	<polygon points="1015.3,873.1 970.5,828.4 970.5,380.6 1017.1,334.1 1060,376.9 1060,829.4 	"/>
	<polygon points="948.2,826 891.4,826 697,457.4 697,384.2 752.5,384.2 948.2,757.1 	"/>
	<polygon points="1084.2,757.1 1279.9,384.2 1335.5,384.2 1335.5,457.4 1141,826 1084.2,826 	"/>
	<polygon points="695.9,1337.8 891.6,964.9 947.1,964.9 947.1,1038 752.7,1406.6 695.9,1406.6 	"/>
	<polygon points="1335.6,1406.6 1278.8,1406.6 1084.3,1038 1084.3,964.9 1139.9,964.9 1335.6,1337.8 	"/>
	<polygon points="1015.3,1455.3 970.5,1410.5 970.5,962.8 1017.1,916.3 1060,959.1 1060,1411.6 	"/>
	<polygon points="650,893.6 694.8,848.9 954.5,848.9 1001.1,895.4 958.2,938.3 693.7,938.3 	"/>
	<polygon points="1034.4,893.6 1079.2,848.9 1339,848.9 1385.5,895.4 1342.6,938.3 1078.2,938.3 	"/>
	<polygon points="650,1474 694.8,1429.3 954.5,1429.3 1001.1,1475.8 958.2,1518.7 693.7,1518.7 	"/>
	<polygon points="1034.4,1474 1079.2,1429.3 1339,1429.3 1385.5,1475.8 1342.6,1518.7 1078.2,1518.7 	"/>
</g>
</svg>
`;var z1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
<path fill="#8888ff" fill-opacity="1" d="M1041.4,1259.6c-83.2,0-141.6-29.1-175-87.5c-33.5-58.3-50.2-141.3-50.2-249.1s16.7-191,50.2-249.5
	c33.5-58.5,91.9-87.9,175-87.9s141.6,29.3,175.2,87.9c33.3,58.5,50,141.7,50,249.5c0,107.8-16.7,190.8-50.2,249.1
	C1182.8,1230.4,1124.6,1259.6,1041.4,1259.6z M1116.6,1095.2c11.8-39.6,17.6-97,17.6-172c0-78.7-6-137-17.8-174.8
	c-11.9-37.8-36.8-56.7-75-56.7c-38.2,0-63.4,19-75.7,56.7c-12.3,37.8-18.4,96-18.4,174.8c0,75.1,6.1,132.6,18.4,172.3
	c12.3,39.9,37.5,59.6,75.7,59.6C1079.5,1155.2,1104.5,1135.1,1116.6,1095.2z"/>
<path d="M414.2,118v167.5H0v120h414.2v253.9H0v120h414.2v243.2H0v120h414.2v251.7H0v120h414.2V1697H1649V118H414.2z M1469,1517
	H594.2V298H1469V1517z"/>
</svg>
`;var q1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
<path d="M370.3,38.4v248.2H2.5v95h367.8v96.6H-0.6v95h370.9v85.9H2.5v95h367.8v92H2.1v95h368.2v93.1H2.5v95h367.8v92.8H2.5v95h367.8
	v99.5H0.5v95h369.8v245.3h1289.9V38.4H370.3z M1540.2,1636.8H490.3V158.4h1049.9V1636.8z"/>
	<g fill="#00ff00" fill-opacity="0.65" stroke="#000000" stroke-width="10">
<polygon points="760.4,334.1 826,268.5 1206.9,268.5 1275.1,336.7 1212.3,399.6 824.5,399.6 "/>
<polygon points="760.4,893.6 826,828.1 1206.9,828.1 1275.1,896.3 1212.3,959.1 824.5,959.1 "/>
<polygon points="760.4,1446 826,1380.4 1206.9,1380.4 1275.1,1448.6 1212.3,1511.5 824.5,1511.5 "/>
<polygon points="735.6,1416.4 670,1350.8 670,993.8 738.2,925.6 801.1,988.5 801.1,1352.3 "/>
<polygon points="735.6,864.3 670,798.8 670,441.8 738.2,373.6 801.1,436.5 801.1,800.2 "/>
<polygon points="1294.7,1416.4 1229.1,1350.8 1229.1,993.8 1297.3,925.6 1360.2,988.5 1360.2,1352.3 "/>
<polygon points="1294.7,864.3 1229.1,798.8 1229.1,441.8 1297.3,373.6 1360.2,436.5 1360.2,800.2 "/>
	</g>
</svg>
`;var Q1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
	<path fill="#8888ff" fill-opacity="1" d="M1041.4,1366.5c-109.6,0-186.4-38.4-230.5-115.1c-44.1-76.7-66.2-186.1-66.2-328.1c0-142,22-251.6,66.2-328.7
		c44.1-77.1,120.9-115.7,230.5-115.7c109.6,0,186.5,38.6,230.8,115.7c43.9,77.1,65.9,186.7,65.9,328.7c0,142-22.1,251.4-66.2,328.1
		C1227.8,1328.2,1150.9,1366.5,1041.4,1366.5z M1140.4,1149.9c15.4-52.2,23.1-127.8,23.1-226.7c0-103.6-7.8-180.4-23.4-230.2
		c-15.6-49.8-48.6-74.8-98.8-74.8c-50.2,0-83.5,24.9-99.7,74.8c-16.2,49.8-24.3,126.6-24.3,230.2c0,98.9,8.1,174.5,24.3,227
		c16.2,52.4,49.4,78.6,99.7,78.6C1091.6,1228.9,1124.6,1202.6,1140.4,1149.9z" />
	<path d="M346,57.9v62.3H-2.7v120H346v90.3H-2.7v120H346v90.4H-2.7v120H346v90.3H-2.7v120H346v90.4H-2.7v120H346v90.2H-2.7v120H346
	v90.4H-5.2v120H346v90.3H-2.7v120H346v44.5h1371.2V57.9H346z M1587.2,1627.1H476V187.9h1111.2V1627.1z" />
</svg>`;var $1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
	<g fill="#8888ff" fill-opacity="1">
		<path d="M714.4,845.3H611v-76.8c0-37.1,8.8-66.1,26.4-86.9c17.6-20.8,42.8-34.4,75.6-41v37.9
		c-25,7.3-41.6,20.9-49.9,40.8c-4.6,10.7-6.4,20.8-5.5,30.2h56.8V845.3z" />
		<path d="M1256.7,1182.5h-136.2l-102-182.8l-107.8,182.8H780.3L952.9,909L788.7,645.7h134l95.8,174.5l98.3-174.5h129.7
		l-164.3,259L1256.7,1182.5z" />
		<path d="M1417.7,724.3c0,36.7-8.9,65.6-26.8,86.7c-17.8,21.1-42.9,34.8-75.2,41.2v-38.2c23.8-7.5,40.2-20.3,49.2-38.2
		c4.9-10.7,6.9-21.5,6.2-32.4h-57.2v-95.8h103.8V724.3z" />
	</g>
	<path d="M372.2,49.4v234.7H0v100h372.2v91.6H-3.1v100h375.3v80.9H0v100h372.2v87H-0.4v100h372.6v88.1H0v100h372.2v87.8H0v100h372.2
	v94.5H-2v100h374.2v231.7h1286.1V49.4H372.2z M1478.3,1565.7H552.2V229.4h926.1V1565.7z" />
	<rect x="2151.4" y="1368.3" style="fill:none;" width="0" height="4.1" />
</svg>`;var X1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
	<path d="M3.3,848.3h429.1v173.3H3.3V848.3z" />
	<path d="M435.7,1024.9H0V845h435.8V1024.9z M6.6,1018.3h422.4V851.6H6.6V1018.3z" />
	<path fill="#00ff00" fill-opacity="0.65" d="M498.1,1721.2V89.2h738.8v1632H498.1z" />
	<path d="M1301.9,1786.2H433.1V24.2h868.8V1786.2z M563.1,1656.2h608.8v-1502H563.1V1656.2z" />
</svg>`;var j1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M95,31v-2H80V10H20v19H5v2h15v38H5v2h15v19h60V71h15v-2H80V31H95z M23,66.9l7.1,3.1L23,73.1V66.9z M77,87H23V75.3L35.1,70
	L23,64.7V13h54V87z" />
	<rect x="62.4" y="60" width="11.9" height="1.5" />
	<path d="M27.3,36.3V23.4h4.4c1,0,1.8,0.1,2.3,0.2c0.7,0.2,1.4,0.5,1.9,0.9c0.7,0.6,1.2,1.3,1.5,2.2c0.3,0.9,0.5,1.9,0.5,3.1
		c0,1-0.1,1.8-0.3,2.6s-0.5,1.4-0.9,1.9c-0.4,0.5-0.7,0.9-1.2,1.2s-0.9,0.5-1.5,0.6s-1.3,0.2-2.1,0.2H27.3z M29,34.8h2.8
		c0.8,0,1.5-0.1,2-0.2s0.9-0.4,1.2-0.7c0.4-0.4,0.7-0.9,0.9-1.6c0.2-0.7,0.3-1.5,0.3-2.5c0-1.3-0.2-2.4-0.7-3.1
		c-0.4-0.7-1-1.2-1.6-1.5c-0.5-0.2-1.2-0.3-2.2-0.3H29V34.8z" />
	<path d="M72.6,35.1c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S73.2,34.5,72.6,35.1z M68.8,33c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.8,33z" />
	<path d="M72.5,75.1c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S73.1,74.5,72.5,75.1z M68.7,73c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.7,73z" />
</svg>`;var Y1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M95,31v-2H80V10H20v19H5v2h15v18H5v2h15v18H5v2h15v19h60V71h15v-2H80V31H95z M23,46.9l7.1,3.1L23,53.1V46.9z M77,87H23V55.3
	L35.1,50L23,44.7V13h54V87z" />
	<rect x="62.4" y="60.2" width="11.9" height="1.5" />
	<path d="M26.5,32.8l1.5-0.2c0,1,0.2,1.7,0.6,2s0.8,0.5,1.4,0.5c0.4,0,0.8-0.1,1.1-0.3c0.3-0.2,0.5-0.5,0.6-0.8s0.2-0.9,0.2-1.6
		v-8.9h1.7v8.8c0,1.1-0.1,1.9-0.4,2.5s-0.7,1-1.2,1.4s-1.2,0.5-2,0.5c-1.1,0-2-0.3-2.6-1S26.4,34.1,26.5,32.8z" />
	<path d="M27,76.7V63.8h1.7v6.4l6.4-6.4h2.3L32,69l5.6,7.7h-2.2l-4.6-6.5l-2.1,2.1v4.5H27z" />
	<path d="M72.6,35.3c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S73.2,34.7,72.6,35.3z M68.8,33.1c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.8,33.1z" />
	<path d="M72.5,75.3c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S73.1,74.7,72.5,75.3z M68.7,73.1c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.7,73.1z" />
</svg>`;var K1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M95,31v-2H80V10H20v19H5v2h15v38H5v2h15v19h60V71h15v-2H80V31H95z M23,66.9l7.1,3.1L23,73.1V66.9z M77,87H23V75.3L35.1,70
		L23,64.7V13h54V87z" />
	<rect x="61.9" y="60.2" width="11.9" height="1.5" />
	<path d="M30.1,36.4V25h-4.2v-1.5h10.2V25h-4.3v11.4H30.1z" />
	<path d="M72,35.3c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S72.7,34.6,72,35.3z M68.3,33.1c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.3,33.1z" />
	<path d="M72,75.3c0.8,0.5,1.5,0.9,2.2,1.2l-0.5,1.2c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		s-1.7-1.4-2.2-2.4s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S72.6,74.6,72,75.3z M68.2,73.1c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.2,73.1z" />
</svg>`;var Z1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M88.4,34.2v-2H73.2V1.1H28.4V5H13.2v2h15.2v8.1H13.2v2h15.2v9.2H13.2v2h15.2v9.1H13.2v2h15.2v19.8H13.2v2h15.2v8.1H13.2v2
	h15.2v9.1H13.2v2h15.2v9.2H13.2v2h15.2v4h44.8v-31h15.2v-2H73.2v-9.2h15.2v-2H73.2v-9.2h15.2v-2H73.2v-8H88.4z M70.2,94.6H31.4V4.1
	h38.8V94.6z" />
	<path d="M38.7,35.5v25.8h13.2c7.3,0,12.9-5.8,12.9-12.9s-5.6-12.9-12.9-12.9H38.7z M40.5,37.4h11.4c6.3,0,10.8,4.9,10.8,11.1
	s-4.8,11.1-11.1,11.1H40.5C40.5,59.5,40.5,37.4,40.5,37.4z" />
</svg>`;var J1=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
    <polygon points="46,65.9 51,65.9 51,54.3 62.2,54.3 62.2,49.3 51,49.3 51,38.2 46,38.2 46,49.3 34.9,49.3 34.9,54.3 46,54.3 	" />
    <path d="M87.2,32.4v-2H72.7V16.7H25.1v13.7H10.6v2h14.5v35.2H10.6v2h14.5v17.8h47.6V69.6h14.5v-2H72.7V32.4H87.2z M69.7,84.4H28.1
		V19.7h41.6V84.4z" />
</svg>`;var ef=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 32 24" style="enable-background:new 0 0 32 24;" xml:space="preserve" fill="currentColor">
<path d="M32,10.5h-3.6c-0.8-0.8-1.9-2-2.8-2.9c-0.7-0.8-1.1-1.2-1.3-1.4C21.4,2.5,16,1,11.7,3.6c-6.4,3.5-6.4,13.2,0,16.8
	c4.1,2.5,9.4,1.2,12.3-2.2c0.1-0.1,0.2-0.1,0.3-0.2c0,0,0,0,1.6-1.6c0.9-0.9,1.9-1.9,2.6-2.6H32V10.5z M14,17.9
	C8.8,15.7,8.8,8.2,14,6c4.1-1.8,9,1.4,9,5.9C23,16.5,18.1,19.8,14,17.9z"/>
</svg>
`;var tf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
<path d="M1790.2,405.5v-120h-423.9V99H423v1579h943.3v-163.7h423.9v-120h-423.9v-251.7h423.9v-120h-423.9V779.4h423.9v-120h-423.9
	V405.5H1790.2z M603,1163.4V913h583.3v250.4H603z M603,843.9V592.6h583.3v251.3H603z M1186.3,279v239.5H603V279H1186.3z M603,1498
	v-257.3h583.3V1498H603z"/>
</svg>
`;var nf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
	<path d="M1661.1,260v-50h-324.8V37.4H453v1702.2h883.3V1582h324.2v-50h-324.2v-138.9h324.2v-50h-324.2v-138.8h324.2v-50h-324.2
	v-138.9h324.2v-50h-324.2V826.6h324.2v-50h-324.2V637.7h324.2v-50h-324.2V448.9h324.2v-50h-324.2V260H1661.1z M573,1618.9v-138.8
	h643.3v138.8H573z M573,1430.1v-138.8h643.3v138.8H573z M573,1241.3v-138.9h643.3v138.9H573z M573,1052.4V913.6h643.3v138.8H573z
	 M573,863.6V724.7h643.3v138.9H573z M573,674.7V535.9h643.3v138.8H573z M573,485.9V347h643.3v138.9H573z M573,297V158.2h643.3V297
	H573z" />
</svg>`;var rf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 60" style="enable-background:new 0 0 100 60;" xml:space="preserve" fill="currentColor">
	<path d="M7.6,44.1l14.4-15.2L13.4,14h4.4l3.9,6.8c1,1.8,1.6,2.8,1.8,3.1c0.4,0.7,0.7,1.5,1.2,2.4c1-1.4,2.6-3.2,4.7-5.4l6.6-7h5.2
		L26.7,29.5l8.2,14.5h-4.4l-4.9-8.8c-0.5-0.9-1-2-1.7-3.3c-0.7,1-1.6,2.1-2.7,3.2l-8.4,8.9H7.6z"/>
	<path d="M48.6,44.1l2.4-11.6L41.8,14h4.3l4.4,8.8c1,1.9,1.9,4,2.8,6.2c1-1.9,2.4-3.9,4.1-6.1l7.1-8.8h4.8L55,32.7l-2.4,11.3H48.6z"
		/>
	<path d="M65.9,44.1l0.4-3l15.1-18l3.1-3.8c0.6-0.8,1.2-1.5,1.8-2.1c-1.3,0.2-2.2,0.2-2.7,0.2l-1,0l-1.2,0l-1.2,0H70.2l0.7-3.4h20.7
		l-0.3,3.1L75.2,36.3c-2,2.4-3.2,3.8-3.8,4.5c0.6-0.1,1-0.1,1.2-0.1H89l-0.7,3.4H65.9z"/>
</svg>
`;var of=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M95,31v-2H80V10H20v19H5v2h15v38H5v2h15v19h60V71h15v-2H80V31H95z M77,87H23V13h54V87z" />
	<rect x="62" y="59.5" width="11.9" height="1.5" />
	<path d="M26.4,31.6l1.6-0.1c0.1,0.6,0.3,1.2,0.5,1.6c0.3,0.4,0.7,0.7,1.3,1c0.6,0.3,1.2,0.4,2,0.4c0.7,0,1.2-0.1,1.7-0.3
		s0.9-0.5,1.1-0.8s0.4-0.7,0.4-1.1c0-0.4-0.1-0.8-0.4-1.1s-0.6-0.6-1.2-0.8c-0.3-0.1-1.1-0.3-2.3-0.6s-2-0.6-2.5-0.8
		c-0.6-0.3-1.1-0.7-1.4-1.2s-0.5-1-0.5-1.6c0-0.7,0.2-1.3,0.6-1.8s0.9-1,1.6-1.3s1.5-0.4,2.4-0.4c1,0,1.8,0.2,2.5,0.5
		c0.7,0.3,1.3,0.8,1.7,1.4s0.6,1.3,0.6,2l-1.6,0.1c-0.1-0.8-0.4-1.4-0.9-1.8s-1.3-0.6-2.2-0.6c-1,0-1.8,0.2-2.3,0.6
		c-0.5,0.4-0.7,0.8-0.7,1.4c0,0.5,0.2,0.8,0.5,1.1c0.3,0.3,1.2,0.6,2.6,0.9c1.4,0.3,2.3,0.6,2.9,0.8c0.8,0.3,1.3,0.8,1.7,1.3
		s0.5,1.1,0.5,1.8c0,0.7-0.2,1.3-0.6,1.9c-0.4,0.6-1,1.1-1.7,1.4c-0.7,0.3-1.6,0.5-2.5,0.5c-1.2,0-2.1-0.2-2.9-0.5s-1.4-0.9-1.9-1.5
		C26.6,33.3,26.4,32.5,26.4,31.6z" />
	<path d="M26.7,76V63.1h5.7c1.1,0,2,0.1,2.6,0.3s1.1,0.6,1.4,1.2s0.5,1.2,0.5,1.9c0,0.9-0.3,1.7-0.9,2.3s-1.5,1-2.7,1.2
		c0.5,0.2,0.8,0.4,1,0.6c0.5,0.5,1,1,1.4,1.7L38,76h-2.1l-1.7-2.7c-0.5-0.8-0.9-1.4-1.2-1.8s-0.6-0.7-0.9-0.9s-0.5-0.3-0.8-0.3
		c-0.2,0-0.5-0.1-0.9-0.1h-2V76H26.7z M28.4,68.8H32c0.8,0,1.4-0.1,1.8-0.2s0.8-0.4,1-0.8s0.3-0.7,0.3-1.2c0-0.6-0.2-1.1-0.7-1.5
		s-1.1-0.6-2.1-0.6h-4.1V68.8z" />
	<path d="M72.2,34.6c0.8,0.5,1.5,0.9,2.2,1.2L73.9,37c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		S63.1,34,62.6,33s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S72.8,34,72.2,34.6z M68.4,32.4c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7S71,25.4,70.3,25c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.4,32.4z" />
	<path d="M72.1,74.6c0.8,0.5,1.5,0.9,2.2,1.2L73.8,77c-0.9-0.3-1.8-0.9-2.8-1.6c-1,0.5-2,0.8-3.2,0.8c-1.2,0-2.2-0.3-3.2-0.8
		S63,74,62.5,73s-0.8-2.2-0.8-3.4c0-1.3,0.3-2.4,0.8-3.5s1.2-1.8,2.2-2.4s2-0.8,3.2-0.8c1.2,0,2.3,0.3,3.2,0.8
		c1,0.6,1.7,1.4,2.2,2.4c0.5,1,0.8,2.2,0.8,3.4c0,1.1-0.2,2-0.5,2.9S72.7,74,72.1,74.6z M68.3,72.4c1,0.3,1.8,0.7,2.4,1.2
		c1-0.9,1.5-2.3,1.5-4.1c0-1-0.2-2-0.5-2.7s-0.9-1.4-1.6-1.8c-0.7-0.4-1.4-0.6-2.3-0.6c-1.3,0-2.3,0.4-3.2,1.3
		c-0.8,0.9-1.3,2.2-1.3,3.9c0,1.7,0.4,3,1.2,3.9s1.9,1.3,3.2,1.3c0.6,0,1.2-0.1,1.7-0.3c-0.5-0.3-1.1-0.6-1.7-0.7L68.3,72.4z" />
</svg>`;var sf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
<path d="M83,44.9v-2H68V24.1l-15-8.7V1h-2v13.3L34,4.4V23H19v2h15v9H19v2h15v29H19v2h15v9H19v2h15v16.5l34-18.6V56h15v-2H68v-9.1H83
	z M37,25.1c6.5,0.7,10.1,5.1,13.9,9.8c3.7,4.6,7.5,9.3,14.1,9.9v9.1c-7.4-0.6-10.9-5.2-14.6-10.1c-3.4-4.5-6.9-9.1-13.4-9.7V25.1z
	 M65,25.9v16.9c-5.6-0.6-9-4.8-12.6-9.2c-3.9-4.9-8-9.9-15.4-10.6V9.6L65,25.9z M37,89.5V36.1c5.5,0.6,8.6,4.7,11.8,8.9
	c3.7,4.9,7.8,10.4,16.2,10.9v18.2L37,89.5z"/>
</svg>
`;var af=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 32 24" style="enable-background:new 0 0 32 24;" xml:space="preserve" fill="currentColor">
<path d="M24.1,7.2c-0.9-1.5-2-2.7-3.5-3.5c-1.5-0.9-3.1-1.3-4.9-1.3s-3.4,0.4-4.9,1.3c-1.5,0.9-2.7,2-3.5,3.5c-0.6,0.9-0.9,2-1.1,3
	L4.5,7c-0.2-0.4-0.6-0.5-1-0.4l0,0C3.1,6.7,2.9,7,2.9,7.4v0c0,0,0,0,0,0v2.8H0v3.2h2.8V16c0,0.4,0.3,0.7,0.6,0.8c0.1,0,0.2,0,0.2,0
	c0.3,0,0.6-0.2,0.7-0.4l0,0c0,0,0,0,0,0l1.7-2.9c0.2,1.2,0.6,2.3,1.2,3.4c0.9,1.5,2,2.7,3.5,3.5c1.5,0.9,3.1,1.3,4.9,1.3
	s3.4-0.4,4.9-1.3c1.5-0.9,2.7-2,3.5-3.5c0.9-1.5,1.3-3.1,1.3-4.9C25.4,10.3,25,8.7,24.1,7.2z M21.7,14.6c-0.3,0.8-0.8,1.5-1.4,2.1
	c-0.6,0.6-1.3,1-2.1,1.4c-0.8,0.3-1.6,0.5-2.5,0.5S14,18.3,13.3,18c-0.8-0.3-1.5-0.8-2.1-1.4c-0.6-0.6-1-1.3-1.4-2.1
	c-0.3-0.8-0.5-1.6-0.5-2.5c0-0.9,0.2-1.7,0.5-2.5c0.3-0.8,0.8-1.5,1.4-2.1c0.6-0.6,1.3-1,2.1-1.4c0.8-0.3,1.6-0.5,2.5-0.5
	s1.7,0.2,2.5,0.5c0.8,0.3,1.5,0.8,2.1,1.4c0.6,0.6,1,1.3,1.4,2.1c0.3,0.8,0.5,1.6,0.5,2.5C22.2,12.9,22,13.8,21.7,14.6z"/>
</svg>
`;var uf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
<path d="M419.9,115.9v163.7H-4v120h423.9v251.7H-4v120h423.9v243.2H-4v120h423.9v253.9H-4v120h423.9v186.5h943.3v-1579H419.9z
	 M599.9,1201.3V950h583.3v251.3H599.9z M1183.2,630.5v250.4H599.9V630.5H1183.2z M1183.2,295.9v257.3H599.9V295.9H1183.2z
	 M599.9,1514.9v-239.5h583.3v239.5H599.9z"/>
</svg>
`;var lf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1792 1792" style="enable-background:new 0 0 1792 1792;" xml:space="preserve" fill="currentColor">
<path d="M323.8,47.3v157.6H-0.4v50h324.2v138.9H-0.4v50h324.2v138.8H-0.4v50h324.2v138.9H-0.4v50h324.2v138.8H-0.4v50h324.2v138.9
	H-0.4v50h324.2V1338H-0.4v50h324.2v138.9H-1v50h324.8v172.6h883.3V47.3H323.8z M443.8,1628.7v-138.8h643.3v138.8H443.8z
	 M443.8,1439.9V1301h643.3v138.9H443.8z M443.8,1251v-138.8h643.3V1251H443.8z M443.8,1062.2V923.3h643.3v138.9H443.8z M443.8,873.3
	V734.5h643.3v138.8H443.8z M443.8,684.5V545.6h643.3v138.9H443.8z M443.8,495.6V356.8h643.3v138.8H443.8z M443.8,306.8V168h643.3
	v138.8H443.8z"/>
</svg>
`;var cf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<rect x="45.8" y="5.9" fill="#9E9E9E" width="8" height="36.6"/>
<rect x="19.6" y="21.7" width="60" height="6"/>
</svg>
`;var pf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
<rect x="45.8" y="3.6" fill="#9E9E9E" width="8" height="91.2"/>
<rect x="19.6" y="11.6" width="60" height="5.4"/>
<rect x="19.6" y="34.3" width="60" height="5.4"/>
<rect x="19.6" y="56.9" width="60" height="5.4"/>
<rect x="19.6" y="79.6" width="60" height="5.4"/>
</svg>
`;var df=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M36.5,18.8v67h27.1v-67H36.5z M38.5,37.5h4.4V44h-4.4V37.5z M44.1,52.5v-7.2h4.6v7.2H44.1z M48.7,53.8v6.5h-4.6v-6.5H48.7z
	 M38.5,45.3h4.4v7.2h-4.4V45.3z M44.1,44v-6.5h4.6V44H44.1z M38.5,53.8h4.4v6.5h-4.4V53.8z M38.5,61.6h4.4v6.8h-4.4V61.6z
	 M44.1,61.6h4.6v6.8h-4.6V61.6z M50,61.6h5.1v6.8H50V61.6z M50,60.3v-6.5h5.1v6.5H50z M50,52.5v-7.2h5.1v7.2H50z M50,44v-6.5h5.1V44
	H50z M50,36.2v-7h5.1v7H50z M50,27.9v-7h5.1v7H50z M48.7,27.9h-4.6v-7h4.6V27.9z M48.7,29.2v7h-4.6v-7H48.7z M42.8,36.2h-4.4v-7h4.4
	V36.2z M38.5,69.7h4.4v6.5h-4.4V69.7z M44.1,69.7h4.6v6.5h-4.6V69.7z M48.7,77.5v6.3h-4.6v-6.3H48.7z M50,77.5h5.1v6.3H50V77.5z
	 M50,76.2v-6.5h5.1v6.5H50z M56.4,69.7h5.1v6.5h-5.1V69.7z M56.4,68.4v-6.8h5.1v6.8H56.4z M61.6,60.3h-5.1v-6.5h5.1V60.3z
	 M56.4,52.5v-7.2h5.1v7.2H56.4z M61.6,44h-5.1v-6.5h5.1V44z M56.4,36.2v-7h5.1v7H56.4z M61.6,27.9h-5.1v-7h5.1V27.9z M42.8,20.8v7
	h-4.4v-7H42.8z M38.5,77.5h4.4v6.3h-4.4V77.5z M56.4,83.8v-6.3h5.1v6.3H56.4z" />
	<path d="M24.9,55.7V44.3h3.9c0.9,0,1.6,0.1,2,0.2c0.7,0.2,1.2,0.4,1.7,0.8c0.6,0.5,1.1,1.2,1.4,2c0.3,0.8,0.4,1.7,0.4,2.7
		c0,0.9-0.1,1.6-0.3,2.3s-0.5,1.2-0.8,1.7c-0.3,0.4-0.7,0.8-1,1c-0.4,0.3-0.8,0.4-1.4,0.6c-0.5,0.1-1.1,0.2-1.8,0.2H24.9z
		 M26.4,54.4h2.4c0.8,0,1.3-0.1,1.8-0.2s0.8-0.3,1-0.6c0.4-0.4,0.6-0.8,0.8-1.4c0.2-0.6,0.3-1.3,0.3-2.2c0-1.2-0.2-2.1-0.6-2.8
		c-0.4-0.6-0.9-1.1-1.4-1.3c-0.4-0.2-1.1-0.2-2-0.2h-2.4V54.4z" />
	<path d="M74.5,54.5c0.7,0.5,1.4,0.8,1.9,1.1L76,56.6c-0.8-0.3-1.6-0.8-2.5-1.4c-0.8,0.5-1.8,0.7-2.8,0.7c-1,0-2-0.2-2.8-0.8
		s-1.5-1.2-1.9-2.1c-0.5-0.9-0.7-1.9-0.7-3.1c0-1.1,0.2-2.2,0.7-3.1c0.5-0.9,1.1-1.6,2-2.1c0.8-0.5,1.8-0.7,2.8-0.7
		c1.1,0,2,0.3,2.9,0.8c0.8,0.5,1.5,1.2,1.9,2.1s0.7,1.9,0.7,3.1c0,0.9-0.1,1.8-0.4,2.5C75.5,53.3,75.1,53.9,74.5,54.5z M71.1,52.6
		c0.9,0.2,1.6,0.6,2.2,1.1c0.9-0.8,1.3-2,1.3-3.7c0-0.9-0.2-1.7-0.5-2.4c-0.3-0.7-0.8-1.2-1.4-1.6c-0.6-0.4-1.3-0.6-2-0.6
		c-1.1,0-2.1,0.4-2.8,1.2c-0.7,0.8-1.1,1.9-1.1,3.5c0,1.5,0.4,2.6,1.1,3.4c0.7,0.8,1.7,1.2,2.8,1.2c0.5,0,1.1-0.1,1.5-0.3
		c-0.5-0.3-1-0.5-1.5-0.7L71.1,52.6z" />
	<path d="M94.9,24.8v-2h-15V6.5H73V0h-1.3v6.5h-12V0h-1.3v6.5H45.2V0h-1.3v6.5H31.3V0H30v6.5H19.9v16.3H5v2h14.9v13.6H5v2h14.9v15H5
	v2h14.9v14.3H5v2h14.9v15.6h-15v2h15v8.4h60v-26h15v-2h-15V57.4h15v-2h-15v-15h15v-2h-15V24.8H94.9z M22.9,87.3l7.1,3.1l-7.1,3.1
	V87.3z M76.9,96.7h-54v-1.1L35,90.4l-12.1-5.3V9.5h54V96.7z" />
</svg>`;var hf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.5.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M63.6,18.8H36.5v67h27.1V18.8z M56.4,29.2h5.1v7h-5.1V29.2z M56.4,45.3h5.1v7.2h-5.1V45.3z M38.4,20.8h4.4v7h-4.4V20.8z
		 M38.4,29.2h4.4v7h-4.4V29.2z M42.9,83.8h-4.4v-6.3h4.4V83.8z M42.9,76.2h-4.4v-6.5h4.4V76.2z M42.9,68.4h-4.4v-6.8h4.4V68.4z
		 M42.9,60.3h-4.4v-6.5h4.4V60.3z M42.9,52.5h-4.4v-7.2h4.4V52.5z M42.9,44h-4.4v-6.5h4.4V44z M48.7,83.8h-4.6v-6.3h4.6V83.8z
		 M48.7,76.2h-4.6v-6.5h4.6V76.2z M48.7,68.4h-4.6v-6.8h4.6V68.4z M48.7,60.3h-4.6v-6.5h4.6V60.3z M48.7,52.5h-4.6v-7.2h4.6V52.5z
		 M48.7,44h-4.6v-6.5h4.6V44z M48.7,36.2h-4.6v-7h4.6V36.2z M48.7,27.9h-4.6v-7h4.6V27.9z M55.1,83.8H50v-6.3h5.1V83.8z M55.1,76.2
		H50v-6.5h5.1V76.2z M55.1,68.4H50v-6.8h5.1V68.4z M55.1,60.3H50v-6.5h5.1V60.3z M55.1,52.5H50v-7.2h5.1V52.5z M55.1,44H50v-6.5h5.1
		V44z M55.1,36.2H50v-7h5.1V36.2z M55.1,27.9H50v-7h5.1V27.9z M61.5,83.8h-5.1v-6.3h5.1V83.8z M61.5,76.2h-5.1v-6.5h5.1V76.2z
		 M61.5,68.4h-5.1v-6.8h5.1V68.4z M61.6,60.3h-5.1v-6.5h5.1V60.3z M61.6,44h-5.1v-6.5h5.1V44z M61.6,27.9h-5.1v-7h5.1V27.9z" />
	<path d="M94.9,24.8v-2h-15V6.5H73V0h-1.3v6.5h-12V0h-1.3v6.5H45.2V0h-1.3v6.5H31.3V0H30v6.5H19.9v16.3v2v13.6v2v15v2v14.3v2v15.6v2
		v8.4h60v-26h15v-2h-15V57.4h15v-2h-15v-15h15v-2h-15V24.8H94.9z M76.9,96.7h-54v-1.1V85.1V9.5h54V96.7z" />
</svg>`;var ff=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
<g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)">
	<path d="M475.9,12730c-2.1-0.8-339.2-191.5-340.3-192.6c-0.4-0.4-0.3-0.9,0.3-1.5c0.5-0.5,51.6-25,113.5-54.4
		c61.9-29.5,147.6-70.2,190.3-90.5c61.1-29.1,78.5-37.1,81.1-37.4c2.8-0.3,4-0.1,7.5,1.7c3.3,1.7,318.8,200.6,331.3,208.9
		c3.9,2.6,4.7,3.6,3.9,4.9c-0.4,0.7-27,12-158.6,68c-10.5,4.5-63.2,26.8-116.9,49.7c-53.7,22.8-99.4,42.1-101.5,42.8
		C482.3,12730.9,478.9,12731,475.9,12730z M482.4,12692c25.7-3.4,43.5-15.6,43.5-29.7c0-13-15.4-25.3-37.8-30.1
		c-33.4-7.2-69.1,2-78.6,20.1c-2.4,4.5-2.4,11.2-0.3,15.7c4.2,8.4,14.4,15.8,28.5,20.3C451,12692.6,467.4,12694,482.4,12692z
		 M537.5,12470.6c28.3-2.5,48.1-14.9,48.2-30c0.1-14-15.9-26-41.4-31c-8.9-1.8-27.3-2.1-35.6-0.7c-20.3,3.5-34,11.1-39.1,21.6
		c-1.9,3.8-2.1,4.8-1.8,8.7c0.3,6,2.4,9.9,7.8,15C488.1,12466.1,513.5,12472.8,537.5,12470.6z"/>
	<path d="M875.5,12541.5c-12.7-8-299.1-189-315.1-199.1c-10-6.4-19.6-12.8-21.3-14.4l-3.2-2.8v-4.9c0-2.7,0.7-54.9,1.7-115.9
		s2.3-152.7,3-203.9c1.7-123.7,1.5-116.5,3.6-116.5c0.9,0,330.4,219.1,334.9,222.7c1.4,1.2,3,2.8,3.4,3.8
		c0.7,1.3,0.7,43.6,0.4,217.8c-0.3,191.4-0.5,216.2-1.4,216.3C880.9,12544.6,878.2,12543.3,875.5,12541.5z M852.7,12462.6
		c10.3-5,15.3-16.2,14.6-33c-1.5-32.6-26.4-67.1-52.4-72.6c-6-1.3-10.7-0.7-16,1.9c-6.5,3.1-11.3,9.9-13.5,19.1
		c-1.2,5-1,18.3,0.3,24.4c6.6,29.7,27.4,55.7,49.7,61.7C841.7,12465.7,847.2,12465.3,852.7,12462.6z M754.6,12262.5
		c6.4-3.3,11.5-10.5,13.6-19.1c0.5-2.2,0.9-7,0.9-11.9c-0.1-9.3-1.9-18.1-5.5-27.3c-7.9-20.1-22.2-36.9-37.3-44.1
		c-7-3.3-11.3-4.3-17.3-3.9c-11.2,0.8-19.2,8.7-22,21.9c-1.5,6.8-0.9,19.3,1.3,27.7c7,26.7,26.3,50.6,46.3,57.3
		C741.3,12265.3,749.7,12265.1,754.6,12262.5z M642.9,12056.5c7.4-2.2,13.2-8.1,16.1-16.4c2.1-5.8,2.6-19.9,1.1-27.7
		c-5.8-29.1-27-56.2-49-62.5c-5.8-1.7-14.2-1.1-18.6,1.1c-5.7,2.9-9.6,7.9-12.4,15.7c-1.9,5.4-2.4,18.9-0.9,26.7
		c2.3,11.8,8.3,26.2,15.5,36.3c4,5.7,13.4,15.3,18.4,18.9C623.4,12056.1,634.5,12059,642.9,12056.5z"/>
	<path d="M118.7,12510.8c0-0.9,1.2-38.1,2.6-83c5.2-160.1,6.6-204.1,8.5-265.2c2.6-83.4,2.4-79.3,4.6-81.4
		c1.9-1.9,376.6-198,378.4-198c0.6,0,1.3,0.4,1.5,0.9c0.4,1-5.4,406.4-6.1,428.7l-0.4,12.8l-2.1,2.2c-1.6,1.7-24.8,13-106.7,52
		c-57.5,27.3-143.7,68.3-191.5,91c-47.7,22.7-87.3,41.3-87.9,41.3C119.1,12512.3,118.7,12511.7,118.7,12510.8z M299.3,12246.2
		c8.1-2.8,14.8-7.2,22.8-15.2c22.6-22.5,32.6-57.2,22.6-78.5c-11.9-25.2-46.5-17.1-68.5,15.9c-19.1,28.7-20.1,63.5-2.3,75.6
		c4.7,3.2,7.6,4,14,4C292.8,12248.1,294.8,12247.8,299.3,12246.2z"/>
</g>
</svg>
`;var mf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path fill="#888888" fill-opacity="0.3" d="M78.1,86.4H21.2c-4.4,0-8-3.6-8-8V21.6c0-4.4,3.6-8,8-8h56.9c4.4,0,8,3.6,8,8v56.9
		C86.1,82.9,82.5,86.4,78.1,86.4z" />
	<path d="M78.1,88.4H21.2c-5.5,0-10-4.5-10-10V21.6c0-5.5,4.5-10,10-10h56.9c5.5,0,10,4.5,10,10v56.9C88.1,84,83.6,88.4,78.1,88.4z
		 M21.2,15.6c-3.3,0-6,2.7-6,6v56.8c0,3.3,2.7,6,6,6h56.9c3.3,0,6-2.6,6-5.9V21.6c0-3.3-2.7-6-6-6H21.2z" />
</svg>`;var gf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M40.7,16.4v67h20.1v-67H40.7z M58.8,18.4v15.2H42.7V18.4H58.8z M42.7,50V35.1h16.1V50H42.7z M58.8,51.5v14.4H42.7V51.5H58.8
	z M42.7,81.4V67.3h16.1v14.1H42.7z" />
	<path d="M26.3,50.4V38.9h3.9c0.9,0,1.6,0.1,2,0.2c0.7,0.2,1.2,0.4,1.7,0.8c0.6,0.5,1.1,1.2,1.4,2c0.3,0.8,0.4,1.7,0.4,2.7
		c0,0.9-0.1,1.6-0.3,2.3s-0.5,1.2-0.8,1.7c-0.3,0.4-0.7,0.8-1,1c-0.4,0.3-0.8,0.4-1.4,0.6c-0.5,0.1-1.1,0.2-1.8,0.2H26.3z M27.9,49
		h2.4c0.8,0,1.3-0.1,1.8-0.2s0.8-0.3,1-0.6c0.4-0.4,0.6-0.8,0.8-1.4c0.2-0.6,0.3-1.3,0.3-2.2c0-1.2-0.2-2.1-0.6-2.8
		c-0.4-0.6-0.9-1.1-1.4-1.3c-0.4-0.2-1.1-0.2-2-0.2h-2.4V49z" />
	<path d="M72.8,49.2c0.7,0.5,1.4,0.8,1.9,1.1l-0.4,1.1c-0.8-0.3-1.6-0.8-2.5-1.4c-0.8,0.5-1.8,0.7-2.8,0.7c-1,0-2-0.2-2.8-0.8
		s-1.5-1.2-1.9-2.1c-0.5-0.9-0.7-1.9-0.7-3.1c0-1.1,0.2-2.2,0.7-3.1c0.5-0.9,1.1-1.6,2-2.1c0.8-0.5,1.8-0.7,2.8-0.7
		c1.1,0,2,0.3,2.9,0.8c0.8,0.5,1.5,1.2,1.9,2.1s0.7,1.9,0.7,3.1c0,0.9-0.1,1.8-0.4,2.5C73.8,47.9,73.4,48.6,72.8,49.2z M69.5,47.2
		c0.9,0.2,1.6,0.6,2.2,1.1c0.9-0.8,1.3-2,1.3-3.7c0-0.9-0.2-1.7-0.5-2.4c-0.3-0.7-0.8-1.2-1.4-1.6c-0.6-0.4-1.3-0.6-2-0.6
		c-1.1,0-2.1,0.4-2.8,1.2c-0.7,0.8-1.1,1.9-1.1,3.5c0,1.5,0.4,2.6,1.1,3.4c0.7,0.8,1.7,1.2,2.8,1.2c0.5,0,1.1-0.1,1.5-0.3
		c-0.5-0.3-1-0.5-1.5-0.7L69.5,47.2z" />
	<path d="M95,22.4v-2H80v-18H20v18H5.1v2H20V36H5.1v2H20v15H5.1v2H20v14.3H5.1v2H20v17.6H5v2h15v8.3h60V71.3h15v-2H80V55h15v-2H80V38
	h15v-2H80V22.4H95z M23,86.9l7.1,3.1L23,93.1V86.9z M77,96.2H23v-0.9L35.1,90L23,84.7V5.4h54V96.2z" />
</svg>`;var Df=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 60.5" style="enable-background:new 0 0 100 60.5;" xml:space="preserve" fill="currentColor">
	<path d="M17.9,15.7h3.7c0.8,0,1.5,0.1,1.9,0.2c0.6,0.2,1.1,0.5,1.5,0.9s0.7,1,1,1.6c0.2,0.6,0.3,1.4,0.3,2.4c0,0.8-0.1,1.5-0.3,2.1
		c-0.3,0.7-0.6,1.3-1.1,1.8c-0.4,0.3-0.8,0.6-1.4,0.8c-0.4,0.1-1,0.2-1.8,0.2h-3.8V15.7z M19.9,17.4V24h1.5c0.6,0,1,0,1.2-0.1
		c0.3-0.1,0.6-0.2,0.8-0.4s0.4-0.5,0.5-1c0.1-0.4,0.2-1.1,0.2-1.8s-0.1-1.4-0.2-1.8s-0.3-0.7-0.6-1s-0.6-0.4-0.9-0.5
		c-0.3-0.1-0.8-0.1-1.7-0.1H19.9z" />
	<path d="M13,10v8.5H5v2h8V40H5v2h8v9.6h83.3V10H13z M16,36.5l8.7,3.8L16,44.1V36.5z M93.3,48.6H16V46l0.1,0.2l13.6-5.9l-13.6-5.9
	L16,34.6V13h77.3V48.6z" />
	<g fill="#8888ff" fill-opacity="1">
		<path d="M43.4,38.9h-3.3V27.5h-3.9v-2.2c1,0,1.7-0.1,2.1-0.2c0.7-0.1,1.2-0.4,1.6-0.9c0.3-0.3,0.5-0.7,0.6-1.2
		c0.1-0.3,0.1-0.5,0.1-0.7h2.7V38.9z" />
		<path d="M53.9,39.3c-2.1,0-3.6-0.7-4.4-2.2c-0.8-1.5-1.3-3.6-1.3-6.3s0.4-4.8,1.3-6.3c0.8-1.5,2.3-2.2,4.4-2.2
		c2.1,0,3.6,0.7,4.4,2.2c0.8,1.5,1.3,3.6,1.3,6.3s-0.4,4.8-1.3,6.3C57.5,38.5,56,39.3,53.9,39.3z M55.8,35.1c0.3-1,0.4-2.4,0.4-4.3
		c0-2-0.1-3.5-0.4-4.4S54.9,25,53.9,25c-1,0-1.6,0.5-1.9,1.4s-0.5,2.4-0.5,4.4c0,1.9,0.2,3.3,0.5,4.3s0.9,1.5,1.9,1.5
		C54.9,36.6,55.5,36.1,55.8,35.1z" />
		<path d="M69.3,38.9H66V27.5h-3.9v-2.2c1,0,1.7-0.1,2.1-0.2c0.7-0.1,1.2-0.4,1.6-0.9c0.3-0.3,0.5-0.7,0.6-1.2
		c0.1-0.3,0.1-0.5,0.1-0.7h2.7V38.9z" />
		<path d="M79.8,39.3c-2.1,0-3.6-0.7-4.4-2.2s-1.3-3.6-1.3-6.3s0.4-4.8,1.3-6.3s2.3-2.2,4.4-2.2c2.1,0,3.6,0.7,4.4,2.2
		c0.8,1.5,1.3,3.6,1.3,6.3s-0.4,4.8-1.3,6.3C83.4,38.5,81.9,39.3,79.8,39.3z M81.7,35.1c0.3-1,0.4-2.4,0.4-4.3c0-2-0.1-3.5-0.4-4.4
		S80.8,25,79.8,25c-1,0-1.6,0.5-1.9,1.4s-0.5,2.4-0.5,4.4c0,1.9,0.2,3.3,0.5,4.3s0.9,1.5,1.9,1.5C80.8,36.6,81.4,36.1,81.7,35.1z" />
	</g>
</svg>`;var Cf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
	<path d="M60.8,83.4H40.7v-67h20.1V83.4z M42.7,81.4h16.1v-63H42.7V81.4z" />
	<path d="M26.3,42.2V30.8h3.9c0.9,0,1.6,0.1,2,0.2c0.7,0.2,1.2,0.4,1.7,0.8c0.6,0.5,1.1,1.2,1.4,2c0.3,0.8,0.4,1.7,0.4,2.7
		c0,0.9-0.1,1.6-0.3,2.3S35,40,34.7,40.4c-0.3,0.4-0.7,0.8-1,1c-0.4,0.3-0.8,0.4-1.4,0.6c-0.5,0.1-1.1,0.2-1.8,0.2H26.3z M27.9,40.9
		h2.4c0.8,0,1.3-0.1,1.8-0.2s0.8-0.3,1-0.6c0.4-0.4,0.6-0.8,0.8-1.4c0.2-0.6,0.3-1.3,0.3-2.2c0-1.2-0.2-2.1-0.6-2.8
		c-0.4-0.6-0.9-1.1-1.4-1.3c-0.4-0.2-1.1-0.2-2-0.2h-2.4V40.9z" />
	<path d="M26.3,79V67.6h1.5v10.1h3.6V79H26.3z" />
	<path d="M32.3,79V67.6h2.1c1,0,1.3,0.1,1.9,0.3s1,0.6,1.3,1.1s0.5,1.1,0.5,1.7c0,0.8-0.3,1.5-0.8,2.1s-0.9,0.9-2,1.1
	c0.4,0.2,0.7,0.4,0.9,0.6c0.4,0.4,0.5,0.8,0.8,1.5l1.2,3.1h-1.9l-0.7-2.4c-0.2-0.8-0.3-1.2-0.6-1.6s-0.5-0.6-0.8-0.8
	S33.6,74,33.4,74c-0.2,0-0.5-0.1-0.8-0.1h1.2V79H32.3z M33.8,72.6H34c0.7,0,0.8-0.1,1.2-0.2s0.7-0.4,0.9-0.7s0.3-0.7,0.3-1
	c0-0.5-0.2-1-0.6-1.3c-0.4-0.3-0.6-0.5-1.4-0.5h-0.6C33.8,68.9,33.8,72.6,33.8,72.6z" />
	<path d="M72.8,49.2c0.7,0.5,1.4,0.8,1.9,1.1l-0.4,1.1c-0.8-0.3-1.6-0.8-2.5-1.4c-0.8,0.5-1.8,0.7-2.8,0.7c-1,0-2-0.2-2.8-0.8
		s-1.5-1.2-1.9-2.1c-0.5-0.9-0.7-1.9-0.7-3.1c0-1.1,0.2-2.2,0.7-3.1c0.5-0.9,1.1-1.6,2-2.1c0.8-0.5,1.8-0.7,2.8-0.7
		c1.1,0,2,0.3,2.9,0.8c0.8,0.5,1.5,1.2,1.9,2.1s0.7,1.9,0.7,3.1c0,0.9-0.1,1.8-0.4,2.5C73.8,47.9,73.4,48.6,72.8,49.2z M69.5,47.2
		c0.9,0.2,1.6,0.6,2.2,1.1c0.9-0.8,1.3-2,1.3-3.7c0-0.9-0.2-1.7-0.5-2.4c-0.3-0.7-0.8-1.2-1.4-1.6c-0.6-0.4-1.3-0.6-2-0.6
		c-1.1,0-2.1,0.4-2.8,1.2c-0.7,0.8-1.1,1.9-1.1,3.5c0,1.5,0.4,2.6,1.1,3.4c0.7,0.8,1.7,1.2,2.8,1.2c0.5,0,1.1-0.1,1.5-0.3
		c-0.5-0.3-1-0.5-1.5-0.7L69.5,47.2z" />
	<path d="M95,22.4v-2H80v-18H20V36H5.1v2H20v34.6H5.1v2H20v14.3H5v2h15v8.3h60V71.3h15v-2H80V55h15v-2H80V38.7h15v-2H80V22.4H95z
	 M23,86.9l7.1,3.1L23,93.1V86.9z M77,96.2H23v-0.9L35.1,90L23,84.7V5.4h54V96.2z" />
	<polygon points="56,52.3 54.6,53.3 54.6,39.2 52.6,39.2 52.6,54.7 50.9,56 49,54.7 49,39.2 47,39.2 47,53.3 45.5,52.3 44.3,53.9 
	50.9,58.4 57.2,53.9 " />
	<rect x="26.2" y="65.9" width="5.1" height="1" />
</svg>`;var vf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve" fill="currentColor">
<path d="M88.4,26.1v-2H73.2V11.9H51.8V5.5h-2v6.4H28.4v12.2H13.2v2h15.2v14.2H13.2v2h15.2v14.2H13.2v2h15.2v14.2H13.2v2h15.2v12.1
	h44.8V74.7h15.2v-2H73.2V58.5h15.2v-2H73.2V42.3h15.2v-2H73.2V26.1H88.4z M70.2,83.8H31.4V14.9h18.4v27l-10-5.3v27.7l25.1-14.4
	l-13.1-7v-28h18.4V83.8z M60.7,49.9L41.8,60.8V39.9L60.7,49.9z"/>
</svg>
`;var bf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H70.4c-0.5-10.5-9-19-20-19H30v9H5v2h25v18H5v2h25v9h20.5c10.9,0,19.4-8.5,20-19H95V24z M50,42.1H32.9V7.9h17.6
	c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z"/>
</svg>
`;var yf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H70.5c-0.5-10.5-9-19-20-19H30v9H5v2h25v7.9H5v2h25V34H5v2h25v9h20.5c11,0,19.4-8.5,20-19H95V24z M50,42.1H32.9V7.9
	h17.6c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z"/>
</svg>
`;var xf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H70.5c-0.5-10.5-9-19-20-19H30v4.1H5v2h25v7.7H5v2h25v8.3H5v2h25v7.7H5v2h25V45h20.5c11,0,19.4-8.5,20-19H95V24z
	 M50,42.1H32.9V7.9h17.6c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z"/>
</svg>
`;var wf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.9L31.1,3.7L29,2.6V24H5v2h24v21.4l2.2-1.1L72.5,26H95V24z M32,42.6V7.4L68.1,25L32,42.6z"/>
</svg>
`;var _f=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.4C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,0.8,1,1.8,2.7C27,9.7,26.1,9.4,25,9.4c-2.7,0-5,2-5.4,4.6H5v2h14.6
	c0.5,2.5,2.7,4.4,5.4,4.4c2.6,0,4.8-1.9,5.4-4.3c0.8,2.5,1.4,5.6,1.4,9c0,3.4-0.6,6.4-1.4,9H5v2h24.7c-1.6,4.1-3.6,6.6-3.6,6.6
	l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.9-2.4,12.4-7.3,17.5-16.6H95V24z M25,17.4c-1.4,0-2.5-1.1-2.5-2.5s1.1-2.5,2.5-2.5
	s2.5,1.1,2.5,2.5S26.4,17.4,25,17.4z M53.5,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17c0-8-2.9-13.9-4.8-17h11.3
	c4.7,0,18.3-0.1,28,17C64.5,33.4,58.7,37.7,53.5,39.8z"/>
</svg>
`;var Sf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-2,0-3.8,1.1-4.7,2.7C68.9,12.5,60.8,5,50.5,5H30v9H5v2h25v18H5v2h25v9h20.5
	c10.3,0,18.5-7.5,19.8-17.2c1,1.6,2.7,2.7,4.7,2.7c2.7,0,4.9-1.9,5.4-4.5H95V24z M50,42.1H32.9V7.9h17.6c9.8,0,16.7,7.6,16.7,17.1
	S59.8,42.1,50,42.1z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Af=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-2,0-3.8,1.1-4.7,2.7C68.9,12.5,60.8,5,50.5,5H30v9H5v2h25v7.7H5v2h25V34H5v2h25v9
	h20.5c10.3,0,18.4-7.5,19.8-17.2c1,1.6,2.7,2.7,4.7,2.7c2.7,0,4.9-1.9,5.4-4.5H95V24z M50,42.1H32.9V7.9h17.6
	c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5
	C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Ef=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-2,0-3.8,1.1-4.7,2.7C68.9,12.5,60.8,5,50.5,5H30v3.8H5v2h25v8H5v2h25v8H5v2h25v8H5v2
	h25V45h20.5c10.3,0,18.4-7.5,19.8-17.2c1,1.6,2.7,2.7,4.7,2.7c2.7,0,4.9-1.9,5.4-4.5H95V24z M50,42.1H32.9V7.9h17.6
	c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5
	C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Tf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H70.4c-0.5-10.5-9-19-20-19H30v9H5v2h25v15.9c-1-1.4-2.6-2.3-4.5-2.3c-2.7,0-4.9,1.9-5.4,4.5H5v2h15.1
	c0.5,2.6,2.7,4.5,5.4,4.5c1.9,0,3.5-0.9,4.5-2.3V45h20.5c10.9,0,19.4-8.5,20-19H95V24z M25.5,37.5c-1.4,0-2.5-1.1-2.5-2.5
	s1.1-2.5,2.5-2.5S28,33.6,28,35S26.9,37.5,25.5,37.5z M50,42.1H32.9V7.9h17.6c9.8,0,16.7,7.6,16.7,17.1S59.8,42.1,50,42.1z"/>
</svg>
`;var Rf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-1.7,0-3.1,0.7-4.1,1.9C60.5,5.2,45.8,5,41.2,5H24.1l2,2.4c0,0,1.9,2.4,3.6,6.6H5v2
	h25.4c0.8,2.6,1.4,5.6,1.4,9c0,3.4-0.6,6.4-1.4,9H5v2h24.7c-1.6,4.1-3.6,6.6-3.6,6.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4
	c5.3-2.2,11.1-6.3,16-14c1,1.2,2.5,1.9,4.1,1.9c2.7,0,4.9-1.9,5.4-4.5H95V24z M53.5,39.8C48.1,42,43.7,42,41.2,42H30
	c1.9-3.1,4.8-9,4.8-17c0-8-2.9-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.7,37.7,53.5,39.8z M75,27.5
	c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Mf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-1.7,0-3.2,0.8-4.2,1.9C60.6,5.2,45.7,5,41.2,5H24.1l2,2.4c0,0,2,2.4,3.6,6.6H5v2
	h25.4c0.7,2.3,1.2,4.9,1.4,7.9H5v2h26.8c-0.1,3-0.6,5.8-1.4,8.1H5v2h24.7c-1.6,4.2-3.6,6.6-3.6,6.6l-2,2.4h17.2
	c2.4,0,7.7,0,13.6-2.4c5.3-2.1,11.1-6.3,16-14c1,1.1,2.5,1.9,4.1,1.9c2.7,0,4.9-1.9,5.4-4.5H95V24z M53.6,39.8
	C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.8,37.7,53.6,39.8z
	 M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var If=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M29.5,41H5v-2h24.5V41z M32,30.9H5v-2h27V30.9z M95,26H79v-2h16V26z M32.8,21H5v-2h27.8V21z M29.4,10.9H5v-2h24.4V10.9z"/>
<path d="M24.1,5l2,2.4c0,0,5.7,7,5.7,17.6s-5.7,17.6-5.7,17.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4s12.5-7.3,17.7-16.9L71.2,25l1.3-0.7
	C62.3,5.2,46,5,41.2,5H24.1z M30,8h11.3c4.7,0,18.3-0.1,28,17c-4.8,8.4-10.5,12.7-15.7,14.8C48.1,42,43.7,42,41.2,42H30
	c1.9-3.1,4.8-9,4.8-17S31.8,11.1,30,8z"/>
<path d="M75,30.5c-3,0-5.5-2.5-5.5-5.5c0-3,2.5-5.5,5.5-5.5s5.5,2.5,5.5,5.5C80.5,28,78,30.5,75,30.5z M75,22.5
	c-1.4,0-2.5,1.1-2.5,2.5c0,1.4,1.1,2.5,2.5,2.5s2.5-1.1,2.5-2.5C77.5,23.6,76.4,22.5,75,22.5z"/>
</svg>
`;var Of=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-2.2,0-4.1,1.3-5,3.1l-38.9-19L29,2.6V24H5v2H29v21.4l2.2-1.1l38.9-19
	c0.9,1.8,2.8,3.1,5,3.1c2.7,0,4.9-1.9,5.4-4.5H95V24z M32,42.6V7.4L68.1,25L32,42.6z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5
	c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Bf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.4C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,1.9,2.4,3.6,6.6H5v2h25.4c0.8,2.6,1.4,5.6,1.4,9
	c0,3.4-0.6,6.4-1.4,9H5v2h24.7c-1.6,4.1-3.6,6.6-3.6,6.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.9-2.4,12.4-7.3,17.5-16.6H95V24z
	 M53.5,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17c0-8-2.9-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17
	C64.5,33.4,58.7,37.7,53.5,39.8z"/>
</svg>
`;var Pf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.3C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,2,2.4,3.6,6.6H5v2h25.4c0.7,2.3,1.3,5,1.4,8H5v2h26.8
	c-0.1,3-0.6,5.7-1.4,8H5v2h24.7c-1.6,4.2-3.6,6.6-3.6,6.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.8-2.4,12.4-7.2,17.5-16.6H95V24z
	 M53.6,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17
	C64.5,33.4,58.8,37.7,53.6,39.8z"/>
</svg>
`;var kf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.3C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,0.4,0.5,1,1.5H5v2h23.3c1,2,2.2,4.7,2.9,8H5v2h26.5
	c0.2,1.3,0.3,2.7,0.3,4.1c0,1.4-0.1,2.7-0.3,3.9H5v2h26.2c-0.7,3.3-1.8,6-2.8,8H5v2h22.3c-0.7,1.1-1.2,1.7-1.2,1.7l-2,2.4h17.2
	c2.4,0,7.7,0,13.6-2.4c5.8-2.4,12.4-7.2,17.5-16.6H95V24z M53.6,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17
	s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.8,37.7,53.6,39.8z"/>
</svg>
`;var Ff=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.9L51,13.4v-23.5h-2v22.5L31.1,3.7L29,2.6V24H5v2h24v21.4l2.2-1.1L72.5,26H95V24z M32,42.6V7.4L68.1,25L32,42.6z"
	/>
</svg>
`;var Nf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H70.5L29.9,4.3V14H5v2h24.9v18H5v2h24.9v10.4L70.8,26H95V24z M63.6,24H32.9V9.2L63.6,24z M32.9,41.5V26H64L32.9,41.5z
	"/>
</svg>
`;var Lf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-1.7,0-3.1,0.7-4.1,1.9C60.5,5.2,45.8,5,41.2,5H24.1l2,2.4c0,0,1.9,2.4,3.6,6.6h-2.6
	c-0.9-2.5-2-4.6-2.9-6c-0.8-1.3-1.4-2.1-2.2-3h-3.7l2,2.4c0,0,1.9,2.4,3.6,6.6H5v2h19.6c0.8,2.6,1.4,5.6,1.4,9c0,3.4-0.6,6.4-1.4,9
	H5v2h18.9c-1.6,4.1-3.6,6.6-3.6,6.6l-2,2.4H22c0,0,0.7-0.4,2.2-3c0.9-1.4,1.9-3.5,2.8-6h2.6c-1.6,4.1-3.6,6.6-3.6,6.6l-2,2.4h17.2
	c2.4,0,7.7,0,13.6-2.4c5.3-2.2,11.1-6.3,16-14c1,1.2,2.5,1.9,4.1,1.9c2.7,0,4.9-1.9,5.4-4.5H95V24z M27.7,34c0.7-2.6,1.3-5.6,1.3-9
	c0-3.4-0.5-6.4-1.3-9h2.6c0.8,2.6,1.4,5.6,1.4,9c0,3.4-0.6,6.4-1.4,9H27.7z M53.5,39.8C48.1,42,43.7,42,41.2,42H30
	c1.9-3.1,4.8-9,4.8-17c0-8-2.9-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.7,37.7,53.5,39.8z M75,27.5
	c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Vf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-1.7,0-3.2,0.8-4.2,1.9C60.6,5.2,45.7,5,41.2,5H24.1l2,2.4c0,0,2,2.4,3.6,6.6h-2.6
	c-0.9-2.5-2-4.6-2.9-6c-0.8-1.3-1.4-2.1-2.2-3h-3.7l2,2.4c0,0,2,2.4,3.6,6.6H5v2h19.6c0.7,2.2,1.2,4.9,1.4,7.8H5v2h21
	c-0.1,3.1-0.6,5.9-1.4,8.2H5v2h18.9c-1.6,4.2-3.6,6.6-3.6,6.6l-2,2.4H22c0,0,0.6-0.4,2.2-3c0.9-1.4,2-3.5,2.9-6h2.6
	c-1.6,4.2-3.6,6.6-3.6,6.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.3-2.1,11.1-6.3,16-14c1,1.1,2.5,1.9,4.1,1.9c2.7,0,4.9-1.9,5.4-4.5
	H95V24z M27.7,16h2.7v0c0.7,2.3,1.2,4.9,1.4,7.8H29C28.9,20.9,28.4,18.3,27.7,16z M27.7,34c0.7-2.4,1.2-5.1,1.3-8.2h2.8
	c-0.1,3.1-0.6,5.9-1.4,8.2H27.7z M53.6,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17s-3-13.9-4.8-17h11.3
	c4.7,0,18.3-0.1,28,17C64.5,33.4,58.8,37.7,53.6,39.8z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5
	C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Hf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H80.4c-0.5-2.6-2.7-4.5-5.4-4.5c-1.7,0-3.2,0.8-4.2,1.9C60.6,5.2,45.7,5,41.2,5H24.1l2,2.4c0,0,0.5,0.6,1.1,1.6h-2.4
	c-0.2-0.4-0.4-0.7-0.6-1c-0.8-1.3-1.4-2.1-2.2-3h-3.7l2,2.4c0,0,0.5,0.6,1.1,1.6H5v2h17.5c1,2,2.1,4.6,2.8,7.9H5v2h20.7
	c0.2,1.3,0.3,2.7,0.3,4.1c0,1.4-0.1,2.7-0.3,4H5v2h20.4c-0.7,3.2-1.8,5.9-2.8,7.9H5v2h16.5c-0.7,1.1-1.2,1.7-1.2,1.7l-2,2.4H22
	c0,0,0.6-0.4,2.2-3c0.2-0.3,0.4-0.7,0.6-1.1h2.4c-0.7,1.1-1.2,1.7-1.2,1.7l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.3-2.1,11.1-6.3,16-14
	c1,1.1,2.5,1.9,4.1,1.9c2.7,0,4.9-1.9,5.4-4.5H95V24z M25.8,11h2.5c1,2,2.1,4.6,2.8,7.9h-2.7C27.8,15.8,26.8,13.1,25.8,11z
	 M28.7,20.9h2.8c0.2,1.3,0.3,2.7,0.3,4.1c0,1.4-0.1,2.7-0.3,4h-2.8c0.2-1.3,0.2-2.6,0.2-4C29,23.6,28.9,22.2,28.7,20.9z M25.9,38.9
	c1-2.1,2-4.8,2.6-7.9h2.7c-0.7,3.2-1.8,5.9-2.8,7.9H25.9z M53.6,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17
	s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.8,37.7,53.6,39.8z M75,27.5c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5
	s2.5,1.1,2.5,2.5C77.5,26.4,76.4,27.5,75,27.5z"/>
</svg>
`;var Uf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.4C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,1.9,2.4,3.6,6.6h-2.6c-0.9-2.5-2-4.6-2.9-6
	c-0.8-1.3-1.4-2.1-2.2-3h-3.7l2,2.4c0,0,1.9,2.4,3.6,6.6H5v2h19.6c0.8,2.6,1.4,5.6,1.4,9c0,3.4-0.6,6.4-1.4,9H5v2h18.9
	c-1.6,4.1-3.6,6.6-3.6,6.6l-2,2.4H22c0,0,0.7-0.4,2.2-3c0.9-1.4,1.9-3.5,2.8-6h2.6c-1.6,4.1-3.6,6.6-3.6,6.6l-2,2.4h17.2
	c2.4,0,7.7,0,13.6-2.4c5.9-2.4,12.4-7.3,17.5-16.6H95V24z M27.7,34c0.7-2.6,1.3-5.6,1.3-9c0-3.4-0.5-6.4-1.3-9h2.6
	c0.8,2.6,1.4,5.6,1.4,9c0,3.4-0.6,6.4-1.4,9H27.7z M53.5,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17c0-8-2.9-13.9-4.8-17
	h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.7,37.7,53.5,39.8z"/>
</svg>
`;var Wf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.3C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,2,2.4,3.6,6.6h-2.6c-0.9-2.5-2-4.6-2.9-6c-0.8-1.3-1.4-2.1-2.2-3h-3.7
	l2,2.4c0,0,2,2.4,3.6,6.6H5v2h19.6c0.7,2.2,1.2,4.9,1.4,7.8H5v2h21c-0.1,3.1-0.6,5.9-1.4,8.2H5v2h18.9c-1.6,4.2-3.6,6.6-3.6,6.6
	l-2,2.4H22c0,0,0.6-0.4,2.2-3c0.9-1.4,2-3.5,2.9-6h2.6c-1.6,4.2-3.6,6.6-3.6,6.6l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4
	c5.8-2.4,12.4-7.2,17.5-16.6H95V24z M27.7,16h2.7v0c0.7,2.3,1.2,4.9,1.4,7.8H29C28.9,20.9,28.4,18.3,27.7,16z M27.7,34
	c0.7-2.4,1.2-5.1,1.3-8.2h2.8c-0.1,3.1-0.6,5.9-1.4,8.2H27.7z M53.6,39.8C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17
	s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.8,37.7,53.6,39.8z"/>
</svg>
`;var Gf=`<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 26.0.3, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 50" style="enable-background:new 0 0 100 50;" xml:space="preserve" fill="currentColor">
<path d="M95,24H72.3C62.1,5.2,46,5,41.2,5H24.1l2,2.4c0,0,0.5,0.6,1.1,1.6h-2.4c-0.2-0.4-0.4-0.7-0.6-1c-0.8-1.3-1.4-2.1-2.2-3h-3.7
	l2,2.4c0,0,0.5,0.6,1.1,1.6H5v2h17.5c1,2,2.1,4.6,2.8,7.9H5v2h20.7c0.2,1.3,0.3,2.7,0.3,4.1c0,1.4-0.1,2.7-0.3,4H5v2h20.4
	c-0.7,3.2-1.8,5.9-2.8,7.9H5v2h16.5c-0.7,1.1-1.2,1.7-1.2,1.7l-2,2.4H22c0,0,0.6-0.4,2.2-3c0.2-0.3,0.4-0.7,0.6-1.1h2.4
	c-0.7,1.1-1.2,1.7-1.2,1.7l-2,2.4h17.2c2.4,0,7.7,0,13.6-2.4c5.8-2.4,12.4-7.2,17.5-16.6H95V24z M25.8,11h2.5c1,2,2.1,4.6,2.8,7.9
	h-2.7C27.8,15.8,26.8,13.1,25.8,11z M28.7,20.9h2.8c0.2,1.3,0.3,2.7,0.3,4.1c0,1.4-0.1,2.7-0.3,4h-2.8c0.2-1.3,0.2-2.6,0.2-4
	C29,23.6,28.9,22.2,28.7,20.9z M25.9,38.9c1-2.1,2-4.8,2.6-7.9h2.7c-0.7,3.2-1.8,5.9-2.8,7.9H25.9z M53.6,39.8
	C48.1,42,43.7,42,41.2,42H30c1.9-3.1,4.8-9,4.8-17s-3-13.9-4.8-17h11.3c4.7,0,18.3-0.1,28,17C64.5,33.4,58.8,37.7,53.6,39.8z"/>
</svg>
`;var ip={add:Fh,arrowcircledown:Nh,arrowcircleup:Lh,arrowdownward:Vh,arrowupward:Hh,bordercolor:Uh,check:Wh,close:Gh,connect:zh,dimensions:qh,direction:Qh,download:$h,edit:Xh,eye:jh,font:Yh,force:Kh,inputcircle:Zh,inputs:Jh,link:e1,memcontent:t1,memlines:n1,mouse:r1,move:o1,newcomponent:i1,none:s1,open:a1,outputcircle:u1,outputs:l1,palette:c1,pause:p1,pen:d1,placement:h1,play:f1,question:m1,questioncircled:g1,redo:D1,ref:Bu,regroup:Bu,replace:C1,reset:v1,screenshot:b1,settings:y1,signpost:x1,slanted:w1,step:_1,strokewidth:S1,timer:A1,trash:E1,undo:T1,wirestyle:R1},jv={Adder:I1,AdderArray:O1,ALU:M1,and:bf,and3:yf,and4:xf,buf:wf,Clock:B1,Comparator:P1,Counter:F1,CPU:N1,Decoder:L1,Decoder7Seg:H1,Decoder16Seg:V1,DecoderBCD4:U1,Demux:W1,FlipflopD:j1,FlipflopJK:Y1,FlipflopT:K1,GateArray:Z1,HalfAdder:J1,imply:_f,Input1:ef,Input4:tf,Input8:nf,Random:ff,Rectangle:mf,Label:rf,LatchSR:of,Mux:sf,nand:Sf,nand3:Af,nand4:Ef,nimply:Tf,nor:Rf,nor3:Mf,nor4:If,not:Of,or:Bf,or3:Pf,or4:kf,Output1:af,Output4:uf,Output8:lf,Display7Seg:q1,Display16Seg:G1,DisplayAscii:$1,DisplayBar:X1,Display4:z1,Display8:Q1,ShiftDisplay:Df,Passthrough1:cf,PassthroughN:pf,RAM:df,ROM:hf,Register:gf,ShiftRegister:Cf,ControlledInverter:k1,tri:Ff,TristateBufferArray:vf,txa:Nf,xnor:Lf,xnor3:Vf,xnor4:Hf,xor:Uf,xor3:Wf,xor4:Gf};function zf(o){return o in ip}c(zf,"isIconName");function qf(o,n,e){return Pu("svgimg",Ft(sp(jv,o)),n,e)}c(qf,"makeImage");function wa(o,n,e){return Pu("svgicon",Ft(sp(ip,o)),n,e)}c(wa,"makeIcon");function Pu(o,n,e,r){let i=document.createElement("i");return i.classList.add(o),e!==void 0&&(i.style.width=`${e}px`),r!==void 0&&(i.style.height=`${r}px`),we(i,n),i}c(Pu,"makeSvgHolder");function sp(o,n){return o[n]}c(sp,"inlineSvgFor");function an(o){return sp(ip,o)}c(an,"inlineIconSvgFor");function Yv(o){return typeof o.applyTo=="function"}c(Yv,"isModifierObject");function Kv(o){return typeof o=="object"&&"nodeType"in o}c(Kv,"isNode");function we(o,n){if(Kv(n))o.appendChild(n);else if(Yv(n))n.applyTo(o);else{let e=""+n;o.appendChild(document.createTextNode(e))}}c(we,"applyModifierTo");function ku(o,n){for(let e of n)we(o,e)}c(ku,"applyModifiersTo");function yt(o){return(...n)=>({render:()=>{let e=document.createElement(o);return ku(e,n),e},applyTo:function(e){e.appendChild(this.render())}})}c(yt,"elemBuilder");function Nt(o){let n=c(e=>({applyTo:r=>r.setAttribute(o,""+e)}),"builder");return n.attrName=o,n}c(Nt,"attrBuilder");function Ft(o){return{applyTo:n=>n.insertAdjacentHTML("beforeend",o)}}c(Ft,"raw");function Q(...o){return{applyTo:n=>ku(n,o)}}c(Q,"mods");var Lt={applyTo:o=>{}};function Rn(o,n){return Nt(o)(n)}c(Rn,"attr");var W=yt("div"),Rt=yt("span"),bi=yt("a"),zn=yt("b"),qn=yt("i"),Qf=yt("p"),$f=yt("ul"),Xf=yt("ol"),yi=yt("li"),jf=yt("table"),Yf=yt("thead"),Kf=yt("tbody"),ap=yt("tr"),Zf=yt("th"),Jf=yt("td"),Oo=yt("input"),xi=yt("select"),xt=yt("option"),un=yt("button"),em=yt("label"),k7=yt("img"),F7=yt("canvas"),Y=Nt("style"),no=Nt("type"),ne=Nt("class"),up=Nt("href"),lp=Nt("target"),Zt=Nt("title"),N7=Nt("src"),tm=Nt("draggable")("true"),cp=Ft("<br>"),nm=Nt("id"),Mt=Nt("value"),pp=Nt("maxlength"),Cr=Nt("selected"),_a=Nt("selectedIndex"),rm=Nt("start"),wi=Nt("disabled")("true"),Fu=Nt("hidden")("hidden"),_i=c(o=>zn(G(o)||ye(o)?O:String(Number(o))),"asValue");function ee(o,n,e=200){return W(Y(`max-width: ${e}px`),o===void 0?Lt:W(Y("padding-bottom: 3px; border-bottom: 1px solid grey;"),o),W(n))}c(ee,"tooltipContent");function dp(...o){return W(ne("barTab"),...o).render()}c(dp,"makeTab");function Nu(o,n,e,r,i){let s=i===void 0?Lt:Rt(ne("btnLabel"),i),a=un(qn(ne("svgicon"),Ft(an(o))),Zt(n),s).render();return a.addEventListener("click",r.wrapHandler(e)),a}c(Nu,"makeButton");function vn(o,n,e,r){return Nu(o,n[1],e,r,n[0])}c(vn,"makeButtonWithLabel");function Sa(o){return Rt(ne("barLabel"),o).render()}c(Sa,"makeLabel");function hp(o,n,e){let r=bi(ne("barLabel"),o).render();return r.addEventListener("click",e.wrapHandler(n)),r}c(hp,"makeLink");function Aa(o=!1){return W(ne(o?"sep fat":"sep")).render()}c(Aa,"makeSep");var Lu=class{constructor(n){this.templateString=n}expand(n){return this.templateString.replace(/\$(s?)\{(\w+)(\?(\w*)(:(\w*))?)?\}/g,(e,r,i,s,a,u,l)=>{let p=n[i];return r==="s"?w.plural(p===void 0?0:Number(p),a,l):String(p!=null?p:"<<"+i+">>")})}};c(Lu,"Template");function re(o){return new Lu(o)}c(re,"template");var Zv={plural:(o,n,e)=>Math.abs(o)<2?e!=null?e:"":n!=null?n:"s",ComponentBar:{Labels:{More:"Plus",Less:"Moins"},SectionNames:{InputOutput:"Entr\xE9es/ sorties",Layout:"Dispo- sition",Gates:"Portes",Components:"Compo- sants",Custom:"Person- nalis\xE9"},Components:Pt.withProps()({Input1:["Entr\xE9e","IN"],InputN:["Entr\xE9e multiple","IN mult."],Input8:["Entr\xE9e octet (8 bits)","IN 8 bits"],KeypadN:["Clavier","IN mult."],Clock:["G\xE9n\xE9rateur de signal d\u2019horloge","Horloge"],Random:["Entr\xE9e al\xE9atoire","Al\xE9atoire"],Output1:["Sortie","OUT"],OutputN:["Sortie multiple","OUT mult."],Output8:["Sortie octet (8 bits)","OUT 8 bits"],DisplayN:["Afficheur d\u2019une valeur","Afficheur"],Display8:["Affichage de 8 bits","Aff. 8 bits"],Display7Seg:["Afficheur \xE0 7 segments","7 segments"],Display16Seg:["Afficheur \xE0 16 segments","16 segments"],DisplayAscii:["Affichage d\u2019un caract\xE8re ASCII (sur 7 bits)","Caract\xE8re"],DisplayBar:["Affichage d\u2019un bit sous forme de segment lumineux","Segment"],ShiftDisplay:["Affichage avec buffer \xE0 d\xE9calage","Affichage \xE0 d\xE9calage"],Passthrough1:["Broche","Broche"],PassthroughN:["Broche \xE0 plusieurs entr\xE9es-sortes","Broche (n)"],Label:["\xC9tiquette","Label"],Rectangle:["Rectangle de regroupement","Groupe"],not:["Porte NON","NON"],buf:["Buffer (porte OUI)","OUI"],tri:["Sortie \xE0 3 \xE9tats","3 \xE9tats"],and:["Porte ET","ET"],or:["Porte OU","OU"],xor:["Porte OU-X","OU-X"],nand:["Porte NON-ET","NON-ET"],nor:["Porte NON-OU","NON-OU"],xnor:["Porte NON-OU-X","NON-OU-X"],imply:["Porte IMPLIQUE","IMPLIQUE"],nimply:["Porte NON-IMPLIQUE","NON-IMPL."],transfer:["Fausse porte TRANSFERT \xE0 deux entr\xE9es","TRANSF."],and3:["Porte ET \xE0 3 entr\xE9es","ET (3)"],or3:["Porte OU \xE0 3 entr\xE9es","OU (3)"],xor3:["Porte OU-X \xE0 3 entr\xE9es","OU-X (3)"],nand3:["Porte NON-ET \xE0 3 entr\xE9es","NON-ET (3)"],nor3:["Porte NON-OU \xE0 3 entr\xE9es","NON-OU (3)"],xnor3:["Porte NON-OU-X \xE0 3 entr\xE9es","NON-OU-X (3)"],and4:["Porte ET \xE0 4 entr\xE9es","ET (4)"],or4:["Porte OU \xE0 4 entr\xE9es","OU (4)"],xor4:["Porte OU-X \xE0 4 entr\xE9es","OU-X (4)"],nand4:["Porte NON-ET \xE0 4 entr\xE9es","NON-ET (4)"],nor4:["Porte NON-OU \xE0 4 entr\xE9es","NON-OU (4)"],xnor4:["Porte NON-OU-X \xE0 4 entr\xE9es","NON-OU-X (4)"],ControlledInverter:["Inverseur commut\xE9","Inv. comm."],GateArray:["Porte multiple","Porte mult."],TristateBufferArray:["Sortie \xE0 3 \xE9tats multiple","3 \xE9tats mult."],HalfAdder:["Demi-additionneur","Demi-add."],Adder:["Additionneur","Addit."],AdderArray:["Additionneur multiple","Add. mult."],ALU:["Unit\xE9 arithm\xE9tique et logique","ALU"],CPU:["Unit\xE9 centrale","CPU"],CPU_v6:["Unit\xE9 centrale","CPU"],Mux:["Multiplexer","Mux"],Mux2to1:["Multiplexer 2-vers-1 (1 bit de contr\xF4le)","Mux 2-1"],Mux4to1:["Multiplexer 4-vers-1 (2 bits de contr\xF4le)","Mux 4-1"],Mux8to1:["Multiplexer 8-vers-1 (3 bits de contr\xF4le)","Mux 8-1"],Mux4to2:["Multiplexer 4-vers-2 (1 bit de contr\xF4le)","Mux 4-2"],Mux8to2:["Multiplexer 8-vers-2 (2 bits de contr\xF4le)","Mux 8-2"],Mux8to4:["Multiplexer 8-vers-4 (1 bit de contr\xF4le)","Mux 8-4"],Mux16to8:["Multiplexer 16-vers-8 (1 bit de contr\xF4le)","Mux 16-8"],Demux:["D\xE9multiplexer","Demux"],Demux1to2:["D\xE9multiplexer 1-vers-2 (1 bit de contr\xF4le)","Demux 1-2"],Demux1to4:["D\xE9multiplexer 1-vers-4 (2 bits de contr\xF4le)","Demux 1-4"],Demux1to8:["D\xE9multiplexer 1-vers-8 (3 bits de contr\xF4le)","Demux 1-8"],Demux2to4:["D\xE9multiplexer 2-vers-4 (1 bit de contr\xF4le)","Demux 2-4"],Demux2to8:["D\xE9multiplexer 2-vers-8 (2 bits de contr\xF4le)","Demux 2-8"],Demux4to8:["D\xE9multiplexer 4-vers-8 (1 bit de contr\xF4le)","Demux 4-8"],Demux8to16:["D\xE9multiplexer 8-vers-16 (1 bit de contr\xF4le)","Demux 8-16"],LatchSR:["Verrou SR","Verrou SR"],FlipflopJK:["Bascule JK","Basc. JK"],FlipflopT:["Bascule T","Basc. T"],FlipflopD:["Bascule D","Basc. D"],Register:["Registre","Registre"],ShiftRegister:["Registre \xE0 d\xE9calage","Reg. d\xE9c."],RAM:["RAM (m\xE9moire vive)","RAM"],ROM:["ROM (m\xE9moire morte)","ROM"],Counter:["Compteur 4 bits","Compteur"],Decoder:["D\xE9codeur binaire vers 1-sur-n","D\xE9codeur"],Decoder7Seg:["D\xE9codeur 7 segments","D\xE9c. 7 seg."],Decoder16Seg:["D\xE9codeur ASCII vers 16 segments","D\xE9c. 16 seg."],DecoderBCD4:["D\xE9codeur 4 bits vers BCD sur 5 bits","D\xE9c. BCD"],Comparator:["Comparateur","Compar."]})},Modes:{FULL:x("Admin","En plus du mode complet, ce mode permet de rendre les entr\xE9es, les sorties des portes, voire les portes elles-m\xEAmes ind\xE9termin\xE9es"),DESIGN:x("Complet","La totalit\xE9 des actions de conception d\u2019un circuit sont possible"),CONNECT:x("Connexion","Il est possible de d\xE9placer et de connecter des \xE9l\xE9ments d\xE9j\xE0 sur le canevas, mais pas d\u2019en rajouter (le menu de gauche ne serait pas actif)"),TRYOUT:x("Test","Il est seulement possible de changer les entr\xE9es pour tester un circuit pr\xE9\xE9tabli"),STATIC:x("Statique","Les \xE9l\xE9ments sont juste affich\xE9s; aucune interaction n\u2019est possible")},Orientations:{e:"Vers la droite (par d\xE9faut)",s:"Vers le bas",w:"Vers la gauche",n:"Vers le haut"},Settings:{Settings:"R\xE9glages",CircuitName:"Nom:",DefaultFileName:"circuit",NameOfDownloadedFile:"Ceci sera le nom du fichier t\xE9l\xE9charg\xE9.",animateWires:x("Animer les fils","Si coch\xE9, les fils sont anim\xE9s pour montrer dans quel sens logique le signal se propage."),hideWireColors:x("Cacher l\u2019\xE9tat des fils","Si coch\xE9, les fils sont affich\xE9s avec une couleur neutre plut\xF4t que de montrer s\u2019ils v\xE9hiculent un 1 ou un 0."),hideInputColors:x("Cacher l\u2019\xE9tat des entr\xE9es","Si coch\xE9, les entr\xE9es sont affich\xE9es avec une couleur neutre, m\xEAme si elles livrent au circuit une valeur bien d\xE9termin\xE9e. S\u2019utilise volontiers en cachant aussi l\u2019\xE9tat des fils."),hideOutputColors:x("Cacher l\u2019\xE9tat des sorties","Si coch\xE9, les sorties sont affich\xE9es avec une couleur neutre. S\u2019utilise volontiers en cachant aussi l\u2019\xE9tat des fils."),hideMemoryContent:x("Cacher le contenu stock\xE9","Si coch\xE9, les verrous, bascules, registres et autres m\xE9moires ne montrent pas leur contenu."),showGateTypes:x("Montrer type des portes","Si coch\xE9, affiche sur les portes logique le nom de la fonction r\xE9alis\xE9e."),showDisconnectedPins:x("Toujours montrer les pattes","Si non coch\xE9, les pattes non connect\xE9es des composants sont masqu\xE9es dans les modes o\xF9 les connexions du circuit ne peuvent pas \xEAtre modifi\xE9es (et restent visibles sinon)."),hideTooltips:x("D\xE9sactiver tooltips","Si coch\xE9, les informations suppl\xE9mentaires des tooltips (comme les tables de v\xE9rit\xE9) ne seront pas affich\xE9es."),groupParallelWires:x("Grouper les fils parall\xE8les","Si coch\xE9, les fils parral\xE8les allant d'un composant \xE0 un autre seront regroup\xE9s en un seul fil plus \xE9pais."),propagationDelay:"Un 1 ou un 0 impos\xE9 sur une connexion sera r\xE9percut\xE9 \xE0 l\u2019autre bout de la connexion apr\xE8s ce d\xE9lai de propagation.",propagationDelayField:x("Propagation en","ms"),zoomLevel:"Le niveau de zoom sur les composants du circuit.",zoomLevelField:x("Zoom:","%"),showUserDataLink:x("Voir les","donn\xE9es li\xE9es"),userDataHeader:"Les donn\xE9es suivantes sont export\xE9es avec le circuit:",wireStyle:"Style des fils:",WireStyleAuto:"Auto",WireStyleLine:"Ligne",WireStyleCurve:"Courbe"},TopBar:{DirtyTooltip:"Le circuit a \xE9t\xE9 modifi\xE9 depuis la derni\xE8re sauvegarde.",CircuitNameTooltip:"Nom du circuit actuellement \xE9dit\xE9; cliquez pour modifier",SetCircuitName:"Tapez le nom du circuit (ou laissez vide pour le nom par d\xE9faut):",CustomComponentCaptionTooltip:"Nom du sous-circuit actuellement \xE9dit\xE9; cliquez pour modifier",CloseCircuit:"Retour au circuit complet",Undo:x("Annuler","Annule la derni\xE8re action"),Redo:x("R\xE9tablir","R\xE9tablit la derni\xE8re action annul\xE9e ou r\xE9p\xE8te l\u2019action pr\xE9c\xE9dente"),Download:x("T\xE9l\xE9charger","T\xE9l\xE9charge le circuit (ou les composants personnalis\xE9s avec la touche Option/Alt)"),Screenshot:x("Screenshot","T\xE9l\xE9charge le circuit sous forme d\u2019image (PNG ou SVG avec touche Option/Alt)"),Open:x("Ouvrir","Ouvre un circuit pr\xE9c\xE9demment t\xE9l\xE9charg\xE9"),Reset:x("R\xE9initialiser","R\xE9initialise l\u2019\xE9tat de ce circuit"),TimelinePlay:x("Play","D\xE9marre l\u2019\xE9coulement du temps"),TimelinePause:x("Pause","Arr\xEAte l\u2019\xE9coulement du temps"),TimelineStep:x("Pas \xE0 pas","Avance au prochain \xE9v\xE9nement"),TimeLabel:"Temps: ",Design:x("Concevoir","Compose ou modifie le circuit"),Delete:x("Supprimer","Supprime des \xE9l\xE9ments du circuit"),Move:x("D\xE9placer","D\xE9place tout le circuit")},AssemblerEditor:{DirtyTooltip:"Le circuit a \xE9t\xE9 modifi\xE9 depuis la derni\xE8re sauvegarde.",CircuitNameTooltip:"Nom du circuit actuellement \xE9dit\xE9; cliquez pour modifier",SetCircuitName:"Tapez le nom du circuit (ou laissez vide pour le nom par d\xE9faut):",CustomComponentCaptionTooltip:"Nom du sous-circuit actuellement \xE9dit\xE9; cliquez pour modifier",CloseCircuit:"Retour au circuit complet",Undo:x("Annuler","Annule la derni\xE8re action"),Redo:x("R\xE9tablir","R\xE9tablit la derni\xE8re action annul\xE9e ou r\xE9p\xE8te l\u2019action pr\xE9c\xE9dente"),Download:x("T\xE9l\xE9charger","T\xE9l\xE9charge le circuit (ou les composants personnalis\xE9s avec la touche Option/Alt)"),Screenshot:x("Screenshot","T\xE9l\xE9charge le circuit sous forme d\u2019image (PNG ou SVG avec touche Option/Alt)"),Open:x("Ouvrir","Ouvre un circuit pr\xE9c\xE9demment t\xE9l\xE9charg\xE9"),Reset:x("R\xE9initialiser","R\xE9initialise l\u2019\xE9tat de ce circuit"),TimelinePlay:x("Play","D\xE9marre l\u2019\xE9coulement du temps"),TimelinePause:x("Pause","Arr\xEAte l\u2019\xE9coulement du temps"),TimelineStep:x("Pas \xE0 pas","Avance au prochain \xE9v\xE9nement"),TimeLabel:"Temps: ",Design:x("Concevoir","Compose ou modifie le circuit"),Delete:x("Supprimer","Supprime des \xE9l\xE9ments du circuit"),Move:x("D\xE9placer","D\xE9place tout le circuit")},Messages:{UnsupportedFileType:re("Type de fichier non pris en charge: ${type}."),LoadedDefinitions:re("${n} composant$s{n} personnalis\xE9$s{n} charg\xE9$s{n}"),SavedToUrl:"Circuit enregistr\xE9 dans l\u2019URL",NotImplemented:"Cette fonctionnalit\xE9 n\u2019est pas encore impl\xE9ment\xE9e.",ReallyCloseWindow:"Voulez-vous vraiment fermer la fen\xEAtre sans prendre en compte les derniers changements?",DevelopedBy:"D\xE9velopp\xE9 par "},Components:{Generic:{contextMenu:{Delete:"Supprimer",Reset:"R\xE9activer",MakeNewComponent:"Cr\xE9er un nouveau composant\u2026",MakeNewComponentFailed:"Impossible de cr\xE9er un nouveau composant.",SetIdentifier:"Attribuer un identifiant\u2026",ChangeIdentifier:x("Changer l\u2019identifiant (",")\u2026"),SetIdentifierPrompt:"Choisissez l\u2019identifiant unique \xE0 attribuer \xE0 ce composant:",IdentifierCannotBeEmpty:"L\u2019identifiant ne peut pas \xEAtre vide.",IdentifierAlreadyInUseShouldSwap:"L\u2019identifiant est d\xE9j\xE0 utilis\xE9 par un autre composant. Voulez-vous inverser les identifiants?",Orientation:"Orientation",ChangeOrientationDesc:"Changez l\u2019orientation avec Commande + double-clic sur le composant",LockPosition:"Verrouiller la position",ShowAsUnknown:"Afficher comme inconnu",ForceOutputSingle:"Forcer la sortie",ForceOutputMultiple:"Forcer une sortie",Output:"Sortie",NormalOutput:"Sortie normale",ForceAsUnknown:"Forcer comme \xE9tat inconnu",ForceAs1:"Forcer \xE0 1",ForceAs0:"Forcer \xE0 0",ForceAsZ:"Forcer \xE0 haute imp\xE9dance",ForceOutputDesc:"Forcez une sortie avec Option + double-clic sur la sortie",SetName:"Ajouter un nom\u2026",ChangeName:"Changer le nom\u2026",SetNamePrompt:"Choisissez le nom \xE0 afficher ou laissez vide pour le supprimer:",SetFontPrompt:x("Entrez une sp\xE9cification de police ou laissez vide pour la valeur par d\xE9faut (","):"),TriggerOn:"Stocker au",TriggerRisingEdge:"flanc montant",TriggerFallingEdge:"flanc descendant",ShowContent:"Montrer le contenu",ParamNumInputs:x("Nombre d\u2019entr\xE9es",re("${val} entr\xE9e$s{val}")),ParamNumBits:x("Nombre de bits",re("${val} bit$s{val}")),ParamNumWords:x("Nombre de lignes",re("${val} ligne$s{val}")),ParamNumAddressBits:x("Largeur d'adresses",re("${val} bit$s{val}")),ParamNumStackBits:x("Taille de la pile",re("${val} bit$s{val}"))},InputCarryInDesc:"Cin (retenue pr\xE9c\xE9dente)",InputClockDesc:"Clock (horloge)",InputClearDesc:"C (Clear, mise \xE0 0)",InputPresetDesc:"P (Preset, mise \xE0 1)",InputSetDesc:"S (Set, mise \xE0 1)",InputResetDesc:"R (Reset, mise \xE0 0)",InputDataDesc:"D (Donn\xE9es)",InputWriteEnableDesc:"WE (\xE9criture activ\xE9e)",OutputSumDesc:"S (somme)",OutputCarryDesc:"C (retenue)",OutputCarryOutDesc:"Cout (retenue)",OutputQDesc:"Q (sortie normale)",OutputQBarDesc:"Q\u0305 (sortie invers\xE9e)"},Custom:{MenuButtonSuffix:" (composant personnalis\xE9)",contextMenu:{ChangeName:"Renommer\u2026",ChangeNamePrompt:"Choisissez le nom de ce composant personnalit\xE9:",ChangeNameEmpty:"Le nom ne peut pas \xEAtre vide.",ChangeCircuit:"Modifier le circuit",Delete:"Supprimer ce composant",EditFromComponentMessage:"Vous pouvez modifier ce composant depuis le menu d\u2019un composant du circuit.",CannotDeleteInUse:"Impossible de supprimer ce composant car il est utilis\xE9 dans le circuit.",CannotDeleteInUseBy:re("Impossible de supprimer ce composant car il est utilis\xE9 dans la d\xE9finition d\u2019un autre composant (${caption})."),ConfirmDelete:"Voulez-vous vraiment supprimer ce composant personnalis\xE9?"},tooltip:{titleSuffix:" (composant personnalis\xE9)",desc:"Ce composant calcule ses sorties selon le circuit personnalis\xE9 que vous avez d\xE9fini."},messages:{EmptySelection:"Aucun composant n\u2019est s\xE9lectionn\xE9.",NoInput:"Aucune entr\xE9e n\u2019est s\xE9lectionn\xE9e.",NoOutput:"Aucune sortie n\u2019est s\xE9lectionn\xE9e.",InputsOutputsMustHaveNames:"Toutes les entr\xE9es et sorties doivent avoir un nom.",MissingComponents:re("Les composants suivants sont connect\xE9s \xE0 des sorties mais ne sont pas s\xE9lectionn\xE9s: ${list}."),NoWires:"Aucun fil n\u2019est pr\xE9sent entre les composants s\xE9lectionn\xE9s.",UselessComponents:re("Les composants suivants ne sont pas connect\xE9s \xE0 des sorties et sont inutiles: ${list}."),CannotIncludeClock:"Les horloges ne peuvent pas \xEAtre incluses dans les composants personnalis\xE9s. Ajoutez une entr\xE9e normale, qui pourra \xEAtre connect\xE9e \xE0 une horloge de l'ext\xE9rieur du composant.",EnterCaptionPrompt:"Entrez le nom (unique) du composant personnalis\xE9:",ComponentAlreadyExists:re("Un composant personnalis\xE9 avec l\u2019identifiant '${id}' existe d\xE9j\xE0."),InputsOutputsChanged:"Les entr\xE9es et sorties ont chang\xE9 et certaines connexions pourront \xEAtre supprim\xE9es en adaptant le circuit. Voulez-vous continuer?",NotInMainEditor:"Revenez d\u2019abord \xE0 l\u2019\xE9diteur principal pour modifier le circuit personnalis\xE9 de ce composant."}},Adder:{tooltip:{title:"Additionneur",desc:"Additionne deux bits A et B et une retenue d\u2019entr\xE9e Cin, et fournit un bit de somme S et une retenue de sortie Cout."}},AdderArray:{tooltip:{title:re("Additionneur \xE0 ${numBits} bit$s{numBits}"),desc:"Additionne les deux nombres d'entr\xE9es A et B avec une retenue d\u2019entr\xE9e Cin, et fournit les bits de somme S et une retenue de sortie Cout."}},ALU:{"A+B":x("+","Addition"),"A-B":x("A\u2013B","Soustraction (A \u2013 B)"),"B-A":x("B\u2013A","Soustraction (B \u2013 A)"),"A+1":x("A+1","A + 1"),"A-1":x("A\u20131","A \u2013 1"),"-A":x("\u2013A","N\xE9gation d\u2019A"),"A*2":x("A\xD72","Addition d\u2019A \xE0 lui-m\xEAme (A \xD7 2)"),"A/2":x("A/2","D\xE9calage arithm\xE9tique \xE0 droite de 1 (A / 2)"),"A|B":x("OU","Disjonction (A OU B)"),"A&B":x("ET","Conjonction (A ET B)"),"A|~B":x("OU-n","A OU NON(B)"),"A&~B":x("ET-n","A ET NON(B)"),"~A":x("A\u0305","Inversion d\u2019A"),"A^B":x("OU-X","Disjonction excl. (A OU-X B)"),"A<<":x("<<","D\xE9calage logique \xE0 gauche de 1 de A"),"A>>":x(">>","D\xE9calage logique \xE0 droite de 1 de A"),InputCinDesc:"retenue d\u2019entr\xE9e",OutputCoutDesc:"retenue de sortie",tooltip:{title:"Unit\xE9 arithm\xE9tique et logique (ALU)",CurrentlyCarriesOut:"Effectue actuellement",SomeUnknownOperation:"une op\xE9ration inconnue",ThisOperation:"l\u2019op\xE9ration"},contextMenu:{toggleShowOp:"Afficher l\u2019op\xE9ration",ParamUseExtendedOpcode:"Utiliser op\xE9rations \xE9tendues"}},CPU:{NOP:x("No operation","Pas d'op\xE9ration"),STA:x("Store ACC to RAM","Enregistre l'ACC dans la RAM"),LDA:x("Load RAM to ACC","Charge la RAM dans l'ACC"),LDK:x("Load Constant to ACC","Charge une constante dans l'ACC"),JMD:x("Jump Down","Saute vers le bas"),JMU:x("Jump Up","Saute vers le haut"),BRZ:x("Branch If Z","Saute vers le bas si Z = 1"),BRC:x("Branch If C","Saute vers le bas si C = 1"),ADD:x("Add RAM to ACC","Additionne la RAM \xE0 l'ACC"),SUB:x("Sub RAM from ACC","Soustrait la RAM \xE0 l'ACC"),JSR:x("Jump to subroutine","Saute vers la sous-routine"),RET:x("Return from subroutine","Revient de la sous-routine"),OR_:x("Or RAM and ACC","ACC ou RAM"),AND:x("And RAM and ACC","ACC et RAM"),NOT:x("Not ACC","Compl\xE9ment de l'ACC"),XOR:x("Xor RAM and ACC","ACC ou exclusif RAM"),StageName:{FETCH:x("Fetch","Fetch"),DECODE:x("Decode","Decode"),EXECUTE:x("Execute","Execute"),WRITEBACK:x("Write back","Write back")},StageColor:{FETCH:"green",DECODE:"blue",EXECUTE:"orange",WRITEBACK:"black"},tooltip:{title:"Unit\xE9 centrale (CPU)",CurrentlyCarriesOut:"Effectue actuellement",SomeUnknownInstruction:"une instruction inconnue",ThisInstruction:"l'instruction"},contextMenu:{toggleShowOpCode:"Afficher l\u2019op\xE9ration",toggleShowOperands:"Afficher les op\xE9randes",toggleShowStage:"Afficher l'\xE9tape",toggleEnablePipeline:"Activer le pipeline",toggleShowClockCycle:"Afficher le cycle",toggleShowStack:"Afficher la pile",toggleAddProgramRAM:"Ajouter une RAM programme",toggleDirectAddressingMode:"Adressage direct"}},CPU_v6:{NOP:x("No operation","Pas d'op\xE9ration"),DEC:x("Decrement ACC","D\xE9cr\xE9mente l'ACC"),LDM:x("Load RAM to ACC","Charge la RAM dans l'ACC"),LDK:x("Load Constant to ACC","Charge une constante dans l'ACC"),GDW:x("Go Down","Saute vers le bas"),GUP:x("Go Up","Saute vers le haut"),JIZ:x("Jump If Z","Saute vers le bas si Z = 1"),JIC:x("Jump If C","Saute vers le bas si C = 1"),ADM:x("Add RAM to ACC","Additionne la RAM \xE0 l'ACC"),SBM:x("Sub RAM from ACC","Soustrait la RAM \xE0 l'ACC"),HLT:x("Halt","Arr\xEAte le CPU"),STM:x("Store ACC to RAM","Enregistre l'ACC dans la RAM"),ORM:x("Or RAM and ACC","ACC ou RAM"),ANM:x("And RAM and ACC","ACC et RAM"),NOT:x("Not ACC","Compl\xE9ment de l'ACC"),XRM:x("Xor RAM and ACC","ACC ou exclusif RAM"),StageName:{FETCH:x("Fetch","Fetch"),DECODE:x("Decode","Decode"),EXECUTE:x("Execute","Execute"),WRITEBACK:x("Write back","Write back")},StageColor:{FETCH:"green",DECODE:"blue",EXECUTE:"orange",WRITEBACK:"black"},tooltip:{title:"Unit\xE9 centrale (CPU)",CurrentlyCarriesOut:"Effectue actuellement",SomeUnknownInstruction:"une instruction inconnue",ThisInstruction:"l'instruction"},contextMenu:{toggleShowOpCode:"Afficher l\u2019op\xE9ration",toggleShowOperands:"Afficher les op\xE9randes",toggleShowStage:"Afficher l'\xE9tape",toggleEnablePipeline:"Activer le pipeline",toggleShowClockCycle:"Afficher le cycle",toggleAddProgramRAM:"Ajouter une RAM programme",toggleDirectAddressingMode:"Adressage direct"}},Clock:{tooltip:{title:"Horloge",period:x("P\xE9riode: "," ms"),dutycycle:x("Rapport cyclique: ","%"),phase:x("D\xE9phasage: "," ms")},contextMenu:{Period:"P\xE9riode",CustomPeriod:"Autre",SetPeriodMillis:"Entrez la p\xE9riode de l\u2019horloge en millisecondes:",InvalidPeriod:"La p\xE9riode doit \xEAtre un nombre entier positif.",ReplaceWithInput:"Remplacer par entr\xE9e"},timeline:{NextRisingEdge:"Prochain flanc montant de l\u2019horloge",NextFallingEdge:"Prochain flanc descendant de l\u2019horloge"}},Comparator:{tooltip:{title:"Comparateur",desc:"Comparateur entre deux bits A et B, activ\xE9 par une entr\xE9e E."}},Counter:{tooltip:{title:"Compteur",desc:"Compteur \xE0 quatre bits."},contextMenu:{DisplayTempl:re("Affichage ${desc}"),DisplayNone:"absent",DisplayDecimal:"d\xE9cimal",DisplayHex:"hexad\xE9cimal"}},Decoder:{tooltip:{title:"D\xE9codeur binaire",desc:re("Ce d\xE9codeur prend en entr\xE9e un nombre binaire cod\xE9 sur ${numFrom} bit$s{numFrom} et active la sortie correspondante parmi ${numTo} (actuellement, ${n}).")}},Decoder7Seg:{tooltip:"D\xE9codeur 7 segments"},Decoder16Seg:{tooltip:"D\xE9codeur ASCII vers 16 segments"},DecoderBCD4:{tooltip:"D\xE9codeur 4 bits vers BCD (binary-coded decimal)"},Demux:{tooltip:re("D\xE9multiplexeur ${from} vers ${to}")},FlipflopD:{tooltip:{title:"Bascule D",desc:"Stocke un bit."}},FlipflopJK:{InputJDesc:"J (Jump, mise \xE0 1)",InputKDesc:"K (Kill, mise \xE0 0)",tooltip:{title:"Bascule JK",desc:"Stocke un bit."}},FlipflopT:{InputTDesc:"T (Toggle, bascule)",tooltip:{title:"Bascule T",desc:"Stocke un bit."}},Gate:{not:x("NON","NON","La sortie est \xE9gale \xE0 l\u2019entr\xE9e invers\xE9e."),buf:x("OUI","OUI","La sortie est \xE9gale \xE0 l\u2019entr\xE9e."),and:x("ET","ET","La sortie vaut 1 lorsque toutes les entr\xE9es valent 1."),or:x("OU","OU","La sortie vaut 1 lorsqu\u2019au moins une des entr\xE9es vaut 1."),xor:x("OU-X","OU-X","La sortie vaut 1 lorsqu\u2019un nombre impair d\u2019entr\xE9es valent 1."),nand:x("NON-ET","N-ET","Porte ET invers\xE9e: la sortie vaut 1 \xE0 moins que toutes les entr\xE9es ne valent 1."),nor:x("NON-OU","N-OU","Porte OU invers\xE9e: la sortie vaut 1 lorsque toutes les entr\xE9es valent 0."),xnor:x("NON-OU-X","N-OU-X","Porte OU-X invers\xE9e: la sortie vaut 1 lorsqu\u2019un nombre pair d\u2019entr\xE9es valent 1."),imply:x("IMPLIQUE","IMPL","La sortie vaut 1 si la premi\xE8re entr\xE9e vaut 0 ou si les deux entr\xE9es valent 1."),rimply:x("IMPLIQUE (bis)","IMPL","La sortie vaut 1 si la seconde entr\xE9e vaut 0 ou si les deux entr\xE9es valent 1."),nimply:x("NON-IMPLIQUE","N-IMPL","Porte IMPLIQUE invers\xE9e: la sortie ne vaut 1 que lorsque la premi\xE8re entr\xE9e vaut 1 et la seconde 0."),rnimply:x("NON-IMPLIQUE (bis)","N-IMPL","Porte IMPLIQUE invers\xE9e: la sortie ne vaut 1 que lorsque la premi\xE8re entr\xE9e vaut 0 et la seconde 1."),txa:x("TRANSFERT-A",void 0,"La sortie est \xE9gale \xE0 la premi\xE8re entr\xE9e; la seconde entr\xE9e est ignor\xE9e."),txb:x("TRANSFERT-B",void 0,"La sortie est \xE9gale \xE0 la seconde entr\xE9e; la premi\xE8re entr\xE9e est ignor\xE9e."),txna:x("TRANSFERT-NON-A",void 0,"La sortie est \xE9gale \xE0 la premi\xE8re entr\xE9e invers\xE9e; la seconde entr\xE9e est ignor\xE9e."),txnb:x("TRANSFERT-NON-B",void 0,"La sortie est \xE9gale \xE0 la seconde entr\xE9e invers\xE9e; la premi\xE8re entr\xE9e est ignor\xE9e."),tooltip:{GateTitle:o=>Q("Porte ",o),UnknownGate:"Porte inconnue",Input:"Entr\xE9e",Output:"Sortie",CurrentlyDelivers:"Actuellement, il livre",ShouldCurrentlyDeliver:"Actuellement, il devrait livrer",UndeterminedOutputBecauseInputUnknown:"une sortie ind\xE9termin\xE9e comme son entr\xE9e n\u2019est pas connue. Sa table de v\xE9rit\xE9 est:",UndeterminedOutputBecauseInputsUnknown:"une sortie ind\xE9termin\xE9e comme toutes ses entr\xE9es ne sont connues. Sa table de v\xE9rit\xE9 est:",ThisOutput:"une sortie de",BecauseInputIs:"car son entr\xE9e est",AccordingToTruthTable:"selon la table de v\xE9rit\xE9 suivante:",Inverter:x("Inverseur (porte ",")"),Buffer:x("Buffer (porte ",")")},contextMenu:{ReplaceBy:"Remplacer par",GateTempl:re("Porte ${type}"),ShowAs:"Afficher comme",NormalGateTempl:re("Porte ${type} normale"),UnknownGate:"Porte inconnue (avec \xAB?\xBB)",VariantChangeDesc:"Changez entre les variantes avec Majuscule + double-clic sur la porte"}},HalfAdder:{tooltip:{title:"Demi-additionneur",desc:"Additionne deux bits A et B et fournit un bit de somme S et une retenue de sortie C."}},Input:{tooltip:{title:re("Entr\xE9e (${numBits} bit$s{numBits})")},contextMenu:{LockValue:"Verrouiller cette valeur",PushButton:"Poussoir",ToggleButton:"Commutateur",ReplaceWithClock:"Remplacer par horloge"}},Keypad:{tooltip:{title:re("Clavier (${numBits} bit$s{numBits})")},contextMenu:{LockValue:"Verrouiller cette valeur",PushButton:"Poussoir",ToggleButton:"Commutateur",ReplaceWithClock:"Remplacer par horloge"}},Random:{tooltip:{title:"Valeur al\xE9atoire",desc:x("\xC0 chaque coup d\u2019horloge, la valeur de sortie sera 1 avec une probabilit\xE9 de ",".")},contextMenu:{ShowProb:"Montrer la probabilit\xE9"}},Rectangle:{contextMenu:{Size:"Taille",SizePrompt:"Entrez la taille de ce rectangle:",Rounded:"Arrondi",WithBackgroundColor:"Avec couleur de fond",SetTitle:"Ajouter un titre\u2026",ChangeTitle:"Changer le titre\u2026",SetTitlePrompt:"Entrez le titre \xE0 afficher ou laissez vide pour le supprimer:",InsideFrame:"\xC0 l\u2019int\xE9rieur du cadre",Font:"Police\u2026",Color:"Couleur",ColorYellow:"Jaune",ColorRed:"Rouge",ColorGreen:"Vert",ColorBlue:"Bleu",ColorTurquoise:"Turquoise",ColorGrey:"Gris",Border:"Bordure",BorderNone:"Aucune bordure",Border1px:"Fine (1 pixel)",Border2px:"Moyenne (2 pixels)",Border3px:"\xC9paisse (3 pixels)",Border5px:"Tr\xE8s \xE9paisse (5 pixels)",Border10px:"\xC9norme (10 pixels)",TitlePlacement:"Position du titre",PlacementTop:"En haut",PlacementTopLeft:"En haut \xE0 gauche",PlacementTopRight:"En haut \xE0 droite",PlacementBottom:"En bas",PlacementBottomLeft:"En bas \xE0 gauche",PlacementBottomRight:"En bas \xE0 droite",PlacementLeft:"\xC0 gauche",PlacementRight:"\xC0 droite",PlacementCenter:"Au centre"}},Label:{contextMenu:{ChangeText:"Changer le texte\u2026",ChangeTextPrompt:"Choisissez le texte \xE0 afficher:",Font:"Police\u2026"}},LatchSR:{tooltip:{title:"Verrou SR",desc:"Stocke un bit."}},Mux:{tooltip:re("Multiplexeur ${from} vers ${to}")},MuxDemux:{contextMenu:{ShowWiring:"Afficher les connexions",UseZForDisconnected:"Utiliser Z pour sorties d\xE9connect\xE9es",ParamNumFrom:x("Nombre d\u2019entr\xE9es",re("${val} entr\xE9e$s{val}")),ParamNumTo:x("Nombre de sorties",re("${val} sortie$s{val}")),ParamControlAtBottom:"Bits de contr\xF4le en bas"}},Output:{tooltip:{title:re("Sortie (${numBits} bit$s{numBits})")}},Display7Seg:{tooltip:"Afficheur 7 segments"},Display16Seg:{tooltip:"Afficheur 16 segments"},DisplayAscii:{tooltip:{title:"Afficheur de caract\xE8re ASCII",desc:x("Affiche le caract\xE8re ASCII repr\xE9sent\xE9 par ses 7 entr\xE9es, actuellement ","."),CurrentlyUndefined:"Comme toutes ses entr\xE9es ne sont pas connues, ce caract\xE8re est actuellement ind\xE9fini.",CurrentlyThisCharacter:"Actuellement, c\u2019est le caract\xE8re num\xE9ro",WhichIsNotPrintable:" (un caract\xE8re non imprimable)."},contextMenu:{AdditionalDisplay:"Affichage suppl\xE9mentaire",DisplayNone:"Aucun",DisplayDecimal:"Valeur d\xE9cimale",DisplayHex:"Valeur hexad\xE9cimale",ChangeDisplayDesc:"Changez l\u2019affichage suppl\xE9mentaire avec un double-clic sur le composant"}},DisplayBar:{tooltip:{title:"Afficheur lumineux",ValueUnknown:"Son \xE9tat est ind\xE9termin\xE9 car son entr\xE9e n\u2019est pas connue.",ValueZ:"Son \xE9tat est ind\xE9termin\xE9 car son entr\xE9e est flottante (haute imp\xE9dance).",Value1:x("Il est actuellement allum\xE9 car son entr\xE9e est de ","."),Value0:x("Il est actuellement \xE9teint car son entr\xE9e est de ",".")},contextMenu:{TransparentWhenOff:"Transparent si \xE9teint",Display:"Affichage",DisplayVerticalBar:"Barre verticale",DisplayHorizontalBar:"Barre horizontale",DisplaySmallSquare:"Petit carr\xE9",DisplayLargeSquare:"Grand carr\xE9",DisplayChangeDesc:"Changez l\u2019affichage avec un double-clic sur le composant",Color:"Couleur",ColorGreen:"Vert",ColorRed:"Rouge",ColorYellow:"Jaune"}},Display:{tooltip:{title:re("Afficheur ${numBits} bit$s{numBits}"),desc:x(re("Affiche la valeur ${radixStr} de ses ${numBits} entr\xE9e$s{numBits}, actuellement "),"."),RadixBinary:"binaire",RadixDecimal:"d\xE9cimale",RadixSignedDecimal:"d\xE9cimale sign\xE9e",RadixHexadecimal:"hexad\xE9cimale",RadixGeneric:re("en base ${radix}"),CurrentlyUndefined:"Comme toutes ses entr\xE9es ne sont pas connues, cette valeur est actuellement ind\xE9finie."},contextMenu:{DisplayAs:"Afficher",DisplayNone:"Aucun",DisplayAsBinary:"en binaire (base 2)",DisplayAsDecimal:"en d\xE9cimal (base 10)",DisplayAsSignedDecimal:"en d\xE9cimal sign\xE9",DisplayAsOctal:"en octal (base 8)",DisplayAsHexadecimal:"en hexad\xE9cimal (base 16)",DisplayAsUnknown:"comme inconnu"}},ShiftDisplay:{tooltip:"Affichage \xE0 d\xE9calage",contextMenu:{Decoding:"D\xE9codage",DecodingNone:"Aucun",DecodingOctal:"Octal",DecodingHex:"Hexad\xE9cimal",DecodingAscii7:"ASCII (7 bits)",DecodingAscii8:"ASCII (8 bits)",DecodingUint4:"Entier sur 4 bits",DecodingInt4:"Entier sign\xE9 sur 4 bits",DecodingUint8:"Entier sur 8 bits",DecodingInt8:"Entier sign\xE9 sur 8 bits",DecodingUint16:"Entier sur 16 bits",DecodingInt16:"Entier sign\xE9 sur 16 bits",DecodingChangeWarning:"Attention, changer le d\xE9codage peut tronquer la valeur stock\xE9e",Grouping:"Regrouper les donn\xE9es",GroupingNone:"Pas de regroupement",GroupBy:re("Par ${n}")},EmptyCaption:"(vide)"},Passthrough:{tooltip:"Broche. Sert uniquement \xE0 arranger les connexions.",contextMenu:{Slant:"Inclinaison",SlantNone:"Aucune",SlantRight:"De 45\xB0 vers la droite",SlantLeft:"De 45\xB0 vers la gauche"}},GateArray:{tooltip:{title:"Porte multiple",desc:re("Effectue plusieurs fois en parall\xE8le l\u2019op\xE9ration logique choisie; actuellement, ${op}.")},contextMenu:{Type:"Type",ShowAsUnknown:"Masquer le type"}},TristateBufferArray:{tooltip:{title:"Sortie \xE0 3 \xE9tats multiple",desc:"Repr\xE9sente plusieurs sorties \xE0 trois \xE9tats, contr\xF4l\xE9es par un seul bit de contr\xF4le."}},RAM:{tooltip:{title:"RAM (m\xE9moire vive)",desc:re("Stocke ${numWords} ligne$s{numWords} de ${numDataBits} bit$s{numDataBits}.")},contextMenu:{SelectedDataDisplay:"Affichage des donn\xE9es adress\xE9es",EditContent:"\xC9diter le contenu\u2026",EditContentPrompt:"Tapez le nouveau contenu de la m\xE9moire en s\xE9parant les lignes par des espaces. S\u2019il y a autant de caract\xE8res que de bits, les donn\xE9es sont lues comme \xE9tant du binaire, sinon, comme de l'hexad\xE9cimal.",SaveContent:"Sauvegarder le contenu",LoadContent:"Charger le contenu\u2026",SwapROMRAM:"\xC9changer ROM et RAM"}},ROM:{tooltip:{title:"ROM (m\xE9moire morte)",desc:re("Stocke ${numWords} ligne$s{numWords} de ${numDataBits} bits${numDataBits}.")}},Register:{tooltip:{title:"Registre",desc:re("Stocke ${numBits} bit$s{numBits}.")},contextMenu:{ParamHasIncDec:"Avec incr\xE9mentaiton",Saturating:"Avec saturation"}},ShiftRegister:{tooltip:{title:"Registre \xE0 d\xE9calage",desc:re("Stocke ${numBits} bit$s{numBits} et les d\xE9cale \xE0 chaque activation.")}},ControlledInverter:{tooltip:{title:"Inverseur commut\xE9",desc:"Inverse ses entr\xE9es si le bit de contr\xF4le S vaut 1; sinon, les sorties sont \xE9gales aux entr\xE9es."}},TristateBuffer:{tooltip:"Sortie \xE0 3 \xE9tats"},Wire:{contextMenu:{AddMiddlePoint:"Ajouter un point interm\xE9diaire",AddPassthrough:"Ajouter une broche",CustomPropagationDelay:re("D\xE9lai de propagation sp\xE9cifique${current}\u2026"),CustomPropagationDelayDesc:re("D\xE9lai de propagation personnalis\xE9 en millisecondes pour cette connexion (laisser vide pour utiliser la valeur par d\xE9faut du circuit, actuellement de ${current} ms):"),WireColor:"Couleur du fil",WireColorBlack:"Noir (par d\xE9faut)",WireColorRed:"Rouge",WireColorBlue:"Bleu",WireColorYellow:"Jaune",WireColorGreen:"Vert",WireColorWhite:"Blanc",WireStyle:"Style",WireStyleDefault:"Par d\xE9faut",WireStyleAuto:"Automatique",WireStyleStraight:"Ligne droite",WireStyleCurved:"Courbe"},timeline:{PropagatingValue:re("Propagation de la valeur ${val} sur le fil")}}},Dialogs:{Generic:{Close:"Fermer"},Share:{title:"Partager ce circuit",URL:"URL:",EmbedInIframe:"Inclusion via <iframe>:",EmbedWithWebComp:"Inclusion via un web component:",EmbedInMarkdown:"Inclusion en Markdown/Myst:"}}},Jv={plural:(o,n,e)=>Math.abs(o)===1?e!=null?e:"":n!=null?n:"s",ComponentBar:{SectionNames:{InputOutput:"Input/ Output",Gates:"Gates",Layout:"Layout",Components:"Compo- nents",Custom:"Custom"},Labels:{More:"More",Less:"Less"},Components:Pt.withProps()({Input1:["Input","IN"],InputN:["Multiple Inputs","IN Mult."],Input8:["Byte (8-Bit) Input","IN (8-Bit)"],KeypadN:["Keypad","IN mult."],Clock:["Clock Generator","Clock"],Random:["Random Input","Random"],Output1:["Output","OUT"],OutputN:["Multiple Outputs","OUT Mult."],Output8:["Byte (8-Bit) Output","OUT (8-Bit)"],DisplayN:["Value Display","Display"],Display8:["Byte (8-Bit) Display","8-Bit Displ."],Display7Seg:["7-Segment Display","7-Segment"],Display16Seg:["16-Segment Display","16-Segment"],DisplayAscii:["ASCII Character (7-Bit) Display","Character"],DisplayBar:["Bit Display as a Light Bar","Bar"],ShiftDisplay:["Display with Shift Buffer","Shift Displ."],Passthrough1:["Passthrough","Passthrough"],PassthroughN:["Passthrough with multiple inputs-outputs","Passthr. (n)"],Label:["Label","Label"],Rectangle:["Grouping Rectangle","Group"],not:["NOT Gate","NOT"],buf:["Buffer","BUF"],tri:["Tristate Buffer","Tristate"],and:["AND Gate","AND"],or:["OR Gate","OR"],xor:["XOR Gate","XOR"],nand:["NAND Gate","NAND"],nor:["NOR Gate","NOR"],xnor:["XNOR Gate","XNOR"],imply:["IMPLY Gate","IMPLY"],nimply:["NIMPLY Gate","NIMPLY"],transfer:["Fake 2-Input TRANSFER Gate","TRANSF."],and3:["3-Input AND Gate","AND (3)"],or3:["3-Input OR Gate","OR (3)"],xor3:["3-Input XOR Gate","XOR (3)"],nand3:["3-Input NAND Gate","NAND (3)"],nor3:["3-Input NOR Gate","NOR (3)"],xnor3:["3-Input XNOR Gate","XNOR (3)"],and4:["4-Input AND Gate","AND (4)"],or4:["4-Input AND Gate","OR (4)"],xor4:["4-Input AND Gate","XOR (4)"],nand4:["4-Input AND Gate","NAND (4)"],nor4:["4-Input AND Gate","NOR (4)"],xnor4:["4-Input AND Gate","XNOR (4)"],ControlledInverter:["Switched Inverter","Switched Inv."],GateArray:["Gate Array","Gate Array"],TristateBufferArray:["Tristate Buffer Array","Tristate Arr."],HalfAdder:["Half Adder","Half Adder"],Adder:["Full Adder","Full Adder"],AdderArray:["Adder Array","Adder Arr."],ALU:["Arithmetic and Logic Unit","ALU"],CPU:["Central Processing Unit","CPU"],CPU_v6:["Central Processing Unit","CPU"],Mux:["Multiplexer","Mux"],Mux2to1:["2-to-1 Multiplexer (1 Control Bit)","Mux 2-1"],Mux4to1:["4-to-1 Multiplexer (2 Control Bit)","Mux 4-1"],Mux8to1:["8-to-1 Multiplexer (3 Control Bit)","Mux 8-1"],Mux4to2:["4-to-2 Multiplexer (1 Control Bit)","Mux 4-2"],Mux8to2:["8-to-2 Multiplexer (2 Control Bit)","Mux 8-2"],Mux8to4:["8-to-4 Multiplexer (1 Control Bit)","Mux 8-4"],Mux16to8:["16-to-8 Multiplexer (1 Control Bit)","Mux 16-8"],Demux:["Demultiplexer","Demux"],Demux1to2:["1-to-2 Demultiplexer (1 Control Bit)","Demux 1-2"],Demux1to4:["1-to-4 Demultiplexer (2 Control Bit)","Demux 1-4"],Demux1to8:["1-to-8 Demultiplexer (3 Control Bit)","Demux 1-8"],Demux2to4:["2-to-4 Demultiplexer (1 Control Bit)","Demux 2-4"],Demux2to8:["2-to-8 Demultiplexer (2 Control Bit)","Demux 2-8"],Demux4to8:["4-to-8 Demultiplexer (1 Control Bit)","Demux 4-8"],Demux8to16:["8-to-16 Demultiplexer (1 Control Bit)","Demux 8-16"],LatchSR:["SR Latch","SR Latch"],FlipflopJK:["JK Flip-Flop","FF-JK"],FlipflopT:["T Flip-Flop","FF-T"],FlipflopD:["D Flip-Flop","FF-D"],Register:["Register","Register"],ShiftRegister:["Shift Register","Shift Reg."],RAM:["RAM Module","RAM"],ROM:["ROM Module","ROM"],Counter:["4-Bit Counter","Counter"],Decoder:["Binary to One-of-N Decoder","Decoder"],Decoder7Seg:["7-Segment Decoder","7-Seg. Dec."],Decoder16Seg:["ASCII-to-16-Segment Decoder","16-Seg. Dec."],DecoderBCD4:["4-Bit-to-BCD Decoder","BCD Dec."],Comparator:["Comparator","Compar."]})},Modes:{FULL:x("Admin","In addition to the full mode, this enables features like hiding wire colors, setting inputs and output to undetermined values, create faulty components, etc."),DESIGN:x("Full","All standard circuit-design features are enabled"),CONNECT:x("Connect","You can move and connect components already on the canvas, but not add more components (the left component bar is not shown)"),TRYOUT:x("Tryout","You can only change inputs to try out a already-designed circuit"),STATIC:x("Static","Components are displayed without any possible interaction")},Orientations:{e:"Right (default)",s:"Down",w:"Left",n:"Up"},Settings:{Settings:"Settings",CircuitName:"Name:",DefaultFileName:"circuit",NameOfDownloadedFile:"This will be the name of the downloaded file.",animateWires:x("Animate wires","If checked, wires are shown as animated to show the propagation direction."),hideWireColors:x("Hide wire colors","If checked, wires are shown with a neutral color instead of showing whether they carry a 1 or a 0."),hideInputColors:x("Hide input colors","If checked, inputs are shown with a neutral color, even if they still deliver a well determined value. Can be used together with hidden wire colors."),hideOutputColors:x("Hide output colors","If checked, outputs are shown with a neutral color. Can be used together with hidden wire colors."),hideMemoryContent:x("Hide stored values","If checked, latches, flip-flops, registers and other memory components don\u2019t show the content they store."),showGateTypes:x("Show gate types","If checked, gates types are displayed textually on top of the gate symbol."),showDisconnectedPins:x("Always show pins","If unchecked, disconnected component pins are hidden in modes where new connections can\u2019t be made (but stay visible otherwise)."),hideTooltips:x("Disable tooltips","If checked, additional information in component tooltips (such as truth tables) won\u2019t be shown."),groupParallelWires:x("Group parallel wires","If checked, parallel wires from one component to another will be grouped together as a thicker wire."),propagationDelay:"A 1 or 0 output on some wire will propagate to the other end of the wire after this propagation delay.",propagationDelayField:x("Propagation in","ms"),zoomLevel:"The zoom level on the circuit components.",zoomLevelField:x("Zoom:","%"),showUserDataLink:x("See ","linked data"),userDataHeader:"This data is exported with the circuit:",wireStyle:"Wire style:",WireStyleAuto:"Auto",WireStyleLine:"Line",WireStyleCurve:"Curve"},TopBar:{DirtyTooltip:"The circuit has been modified since the last download/save",CircuitNameTooltip:"Name of the circuit; click to change",SetCircuitName:"Set the name of the circuit (or leave empty to use the default name):",CustomComponentCaptionTooltip:"Name of the subcircuit currently being edited; click to change",CloseCircuit:"Back to the main circuit",Undo:x("Undo","Undo the last action"),Redo:x("Redo","Redo the last undone action or repeat the last action"),Download:x("Download","Download the circuit (or the custom components with Option/Alt key down)"),Screenshot:x("Screenshot","Download the circuit as an image (PNG or SVG with Option/Alt key down)"),Open:x("Open","Open a previously downloaded circuit"),Reset:x("Reset","Reset the state of this circuit"),TimelinePlay:x("Play","Starts logical time"),TimelinePause:x("Pause","Stops logical time"),TimelineStep:x("Step","Moves logical time to the next scheduled event"),TimeLabel:"Time: ",Design:x("Design","Create or modify the circuit"),Delete:x("Delete","Delete elements from the circuit"),Move:x("Move","Move the whole circuit")},AssemblerEditor:{DirtyTooltip:"The circuit has been modified since the last download/save",CircuitNameTooltip:"Name of the circuit; click to change",SetCircuitName:"Set the name of the circuit (or leave empty to use the default name):",CustomComponentCaptionTooltip:"Name of the subcircuit currently being edited; click to change",CloseCircuit:"Back to the main circuit",Undo:x("Undo","Undo the last action"),Redo:x("Redo","Redo the last undone action or repeat the last action"),Download:x("Download","Download the circuit (or the custom components with Option/Alt key down)"),Screenshot:x("Screenshot","Download the circuit as an image (PNG or SVG with Option/Alt key down)"),Open:x("Open","Open a previously downloaded circuit"),Reset:x("Reset","Reset the state of this circuit"),TimelinePlay:x("Play","Starts logical time"),TimelinePause:x("Pause","Stops logical time"),TimelineStep:x("Step","Moves logical time to the next scheduled event"),TimeLabel:"Time: ",Design:x("Design","Create or modify the circuit"),Delete:x("Delete","Delete elements from the circuit"),Move:x("Move","Move the whole circuit")},Messages:{UnsupportedFileType:re("Unsupported file type: ${type}."),LoadedDefinitions:re("Loaded ${n} custom component definition$s{n}"),SavedToUrl:"Circuit saved to URL",NotImplemented:"This feature is not implemented yet.",ReallyCloseWindow:"Do you really want to close the window without saving the changes?",DevelopedBy:"Developed by"},Components:{Generic:{contextMenu:{Delete:"Delete",Reset:"Reset",MakeNewComponent:"Make New Component\u2026",MakeNewComponentFailed:"Cannot create new custom component.",SetIdentifier:"Set Identifier\u2026",ChangeIdentifier:x("Change Identifier (",")\u2026"),SetIdentifierPrompt:"Choose the unique identifier to use for this component:",IdentifierCannotBeEmpty:"The identifier cannot be empty.",IdentifierAlreadyInUseShouldSwap:"The identifier is already in use. Do you want to swap the component identifiers?",Orientation:"Orientation",ChangeOrientationDesc:"Change the orientation with Command + double click on the component",LockPosition:"Lock Position",ShowAsUnknown:"Show As Unknown",ForceOutputSingle:"Force Output",ForceOutputMultiple:"Force an Output",Output:"Output",NormalOutput:"Normal Output",ForceAsUnknown:"Force as Unkown",ForceAs1:"Force as 1",ForceAs0:"Force as 0",ForceAsZ:"Force as High Impedance",ForceOutputDesc:"Force an output with Option + click on an output node",SetName:"Set Name\u2026",ChangeName:"Change Name\u2026",SetNamePrompt:"Choose the name to display or leave empty to remove it:",SetFontPrompt:x("Enter a font specification or leave empty to use the default value (","):"),TriggerOn:"Trigger on",TriggerRisingEdge:"Rising Edge",TriggerFallingEdge:"Fallling Edge",ShowContent:"Show Content",ParamNumInputs:x("Number of Inputs",re("${val} Input$s{val}")),ParamNumBits:x("Number of Bits",re("${val} Bit$s{val}")),ParamNumWords:x("Number of Lines",re("${val} Line$s{val}")),ParamNumAddressBits:x("Adrresses width",re("${val} Bit$s{val}")),ParamNumStackBits:x("Size of Stack",re("${val} bit$s{val}"))},InputCarryInDesc:"Cin (Previous Carry)",InputClockDesc:"Clock",InputClearDesc:"C (Clear, set to 0)",InputPresetDesc:"P (Preset, set to 1)",InputSetDesc:"S (Set, set to 1)",InputResetDesc:"R (Reset, set to 0)",InputDataDesc:"D (Data)",InputWriteEnableDesc:"WE (Write Enable)",OutputSumDesc:"S (Sum)",OutputCarryDesc:"C (Carry)",OutputCarryOutDesc:"Cout (Carry)",OutputQDesc:"Q (Normal Output)",OutputQBarDesc:"Q\u0305 (Inverted Output)"},Custom:{MenuButtonSuffix:" (custom component)",contextMenu:{ChangeName:"Rename\u2026",ChangeNamePrompt:"Enter the name of this custom component:",ChangeNameEmpty:"The name cannot be empty.",ChangeCircuit:"Edit Circuit",Delete:"Delete Custom Component",EditFromComponentMessage:"You can edit this custom component by right-clicking such a component in the circuit.",CannotDeleteInUse:"Cannot delete this custom component because it is in use in the circuit.",CannotDeleteInUseBy:re("Cannot delete this custom component because it is used to define another component (${caption})."),ConfirmDelete:"Are you sure you want to delete this custom component?"},tooltip:{titleSuffix:" (Custom Component)",desc:"This custom component computes its outputs according to the circuit you have defined."},messages:{EmptySelection:"No components are selected.",NoInput:"No input is selected.",NoOutput:"No output is selected.",InputsOutputsMustHaveNames:"All inputs and outputs must have unique (non-dynamic) names.",MissingComponents:re("The following components are connected to outputs but are missing from selection: ${list}."),NoWires:"There are no wires between the selected components.",UselessComponents:re("The following components are not connected to outputs and are useless: ${list}."),CannotIncludeClock:"Clocks cannot be included in custom components. Add a normal input, which can later be connected to an external clock.",EnterCaptionPrompt:"Entrez le nom (unique) du composant personnalis\xE9:",ComponentAlreadyExists:re("A custom component definition with id '${id}' already exists."),InputsOutputsChanged:"The inputs and outputs have changed and some connections may be removed by adapting the circuit. Do you want to continue?",NotInMainEditor:"Please go back to the main editor to edit the custom circuit of this component."}},Adder:{tooltip:{title:"Adder",desc:"Adds two bits A and B together with an input carry Cin, and outputs a sum bit S and an output carry Cout."}},AdderArray:{tooltip:{title:re("${numBits}-Bit Adder Array"),desc:"Adds the two inputs numbers A et B together with an input carry Cin, and outputs sum bits S and an output carry Cout."}},ALU:{"A+B":x("+","Addition"),"A-B":x("A\u2013B","Subtraction (A \u2013 B)"),"B-A":x("B\u2013A","Subtraction (B \u2013 A)"),"A+1":x("A+1","A + 1"),"A-1":x("A\u20131","A \u2013 1"),"-A":x("\u2013A","Negation of A"),"A*2":x("A\xD72","Addition of A to itself (A \xD7 2)"),"A/2":x("A/2","Arithmetic right shift by 1 (A/2)"),"A|B":x("OR","Disjunction (A OR B)"),"A&B":x("AND","Conjunction (A AND B)"),"A|~B":x("ORn","A OR NOT(B)"),"A&~B":x("ANDn","A AND NOT(B)"),"~A":x("A\u0305","Inversion of A"),"A^B":x("XOR","Excl. Disjunction (A XOR B)"),"A<<":x("<<","Logical Left Shift by 1 of A"),"A>>":x(">>","Logical Right Shift by 1 of A"),InputCinDesc:"input carry",OutputCoutDesc:"output carry",tooltip:{title:"Arithmetic and Logic Unit (ALU)",CurrentlyCarriesOut:"Currently carries out",SomeUnknownOperation:"an unknown operation",ThisOperation:"operation"},contextMenu:{toggleShowOp:"Show Operation",ParamUseExtendedOpcode:"Use Extended Opcode"}},CPU:{NOP:x("No operation","Pas d'op\xE9ration"),STA:x("Store ACC to RAM","Enregistre l'ACC dans la RAM"),LDA:x("Load RAM to ACC","Charge la RAM dans l'ACC"),LDK:x("Load Constant to ACC","Charge une constante dans l'ACC"),JMD:x("Jump Down","Saute vers le bas"),JMU:x("Jump Up","Saute vers le haut"),BRZ:x("Branch If Z","Saute vers le bas si Z = 1"),BRC:x("Branch If C","Saute vers le bas si C = 1"),ADD:x("Add RAM to ACC","Additionne la RAM \xE0 l'ACC"),SUB:x("Sub RAM from ACC","Soustrait la RAM \xE0 l'ACC"),JSR:x("Jump to subroutine","Saute vers la sous-routine"),RET:x("Return from subroutine","Revient de la sous-routine"),OR_:x("Or RAM and ACC","ACC ou RAM"),AND:x("And RAM and ACC","ACC et RAM"),NOT:x("Not ACC","Compl\xE9ment de l'ACC"),XOR:x("Xor RAM and ACC","ACC ou exclusif RAM"),StageName:{FETCH:x("Fetch","Fetch"),DECODE:x("Decode","Decode"),EXECUTE:x("Execute","Execute"),WRITEBACK:x("Write back","Write back")},StageColor:{FETCH:"green",DECODE:"blue",EXECUTE:"orange",WRITEBACK:"black"},tooltip:{title:"Central Processing Unit (CPU)",CurrentlyCarriesOut:"Currently carries out",SomeUnknownInstruction:"an unknown instruction",ThisInstruction:"instruction"},contextMenu:{toggleShowOpCode:"Show Operation",toggleShowOperands:"Show Operands",toggleShowStage:"Show Stage",toggleEnablePipeline:"Pipeline enabled",toggleShowClockCycle:"Show Cycle",toggleShowStack:"Show Stack",toggleAddProgramRAM:"Add a program RAM",toggleDirectAddressingMode:"Direct addressing mode enabled"}},CPU_v6:{NOP:x("No operation","Pas d'op\xE9ration"),DEC:x("Decrement ACC","D\xE9cr\xE9mente l'ACC"),LDM:x("Load RAM to ACC","Charge la RAM dans l'ACC"),LDK:x("Load Constant to ACC","Charge une constante dans l'ACC"),GDW:x("Go Down","Saute vers le bas"),GUP:x("Go Up","Saute vers le haut"),JIZ:x("Jump If Z","Saute vers le bas si Z = 1"),JIC:x("Jump If C","Saute vers le bas si C = 1"),ADM:x("Add RAM to ACC","Additionne la RAM \xE0 l'ACC"),SBM:x("Sub RAM from ACC","Soustrait la RAM \xE0 l'ACC"),HLT:x("Halt","Arr\xEAte le CPU"),STM:x("Store ACC to RAM","Enregistre l'ACC dans la RAM"),ORM:x("Or RAM and ACC","ACC ou RAM"),ANM:x("And RAM and ACC","ACC et RAM"),NOT:x("Not ACC","Compl\xE9ment de l'ACC"),XRM:x("Xor RAM and ACC","ACC ou exclusif RAM"),StageName:{FETCH:x("Fetch","Fetch"),DECODE:x("Decode","Decode"),EXECUTE:x("Execute","Execute"),WRITEBACK:x("Write back","Write back")},StageColor:{FETCH:"green",DECODE:"blue",EXECUTE:"orange",WRITEBACK:"black"},tooltip:{title:"Central Processing Unit (CPU)",CurrentlyCarriesOut:"Currently carries out",SomeUnknownInstruction:"an unknown instruction",ThisInstruction:"instruction"},contextMenu:{toggleShowOpCode:"Show Operation",toggleShowOperands:"Show Operands",toggleShowStage:"Show Stage",toggleEnablePipeline:"Pipeline enabled",toggleShowClockCycle:"Show Cycle",toggleAddProgramRAM:"Add a program RAM",toggleDirectAddressingMode:"Direct addressing mode enabled"}},Clock:{tooltip:{title:"Clock",period:x("Period: "," ms"),dutycycle:x("Duty cycle: ","%"),phase:x("Phase: "," ms")},contextMenu:{Period:"Period",CustomPeriod:"Other",SetPeriodMillis:"Enter the period in milliseconds:",InvalidPeriod:"The period must be a positive number.",ReplaceWithInput:"Replace with Input"},timeline:{NextRisingEdge:"Next rising edge of the clock",NextFallingEdge:"Next falling edge of the clock"}},Comparator:{tooltip:{title:"Comparator",desc:"Comparator between two bits A and B, enabled by an input E."}},Counter:{tooltip:{title:"Counter",desc:"4-bit counter."},contextMenu:{DisplayTempl:re("${desc} Display"),DisplayNone:"No",DisplayDecimal:"Decimal",DisplayHex:"Hexadecimal"}},Decoder:{tooltip:{title:"Binary Decoder",desc:re("Takes as input a binary number coded on ${numFrom} bit$s{numFrom} and activates the corresponding output among ${numTo} (currently, ${n}).")}},Decoder7Seg:{tooltip:"7-Segment Decoder"},Decoder16Seg:{tooltip:"7-Bit ASCII to 16-Segment Decoder"},DecoderBCD4:{tooltip:"4-Bit to BCD (Binary-Coded Decimal) Decoder"},Demux:{tooltip:re("${from}-to-${to} Demultiplexer")},FlipflopD:{tooltip:{title:"D Flip-Flop",desc:"Stores one bit."}},FlipflopJK:{InputJDesc:"J (Jump, set to 1)",InputKDesc:"K (Kill, set to 0)",tooltip:{title:"JK Flip-Flop",desc:"Stores one bit."}},FlipflopT:{InputTDesc:"T (Toggle)",tooltip:{title:"T Flip-Flop",desc:"Stores one bit."}},Gate:{not:x("NOT","NOT","The output is the inverted input."),buf:x("BUF","BUF","The output is the same as the input."),and:x("AND","AND","The output is 1 when all inputs are 1."),or:x("OR","OR","The output is 1 when at least one of the inputs is 1."),xor:x("XOR","XOR","The output is 1 when an odd number of inputs are 1."),nand:x("NAND","NAND","Inverted AND gate: the output is 1 unless all inputs are 1."),nor:x("NOR","NOR","Inverted OR gate: the output is 1 when all inputs are 0."),xnor:x("XNOR","XNOR","Inverted XOR gate: the output is 1 when an even number of inputs are 1."),imply:x("IMPLY","IMPL","The output is 1 if the first input is 0 or if both inputs are 1."),rimply:x("IMPLY (bis)","IMPL","The output is 1 if the second input is 0 or if both inputs are 1."),nimply:x("NIMPLY","N-IMPL","Inverted IMPLY gate: the output is only 1 if the first input is 1 and the second one 0."),rnimply:x("NIMPLY (bis)","N-IMPL","Inverted IMPLY gate: la sortie ne vaut 1 que lorsque la premi\xE8re entr\xE9e vaut 0 et la seconde 1."),txa:x("TRANSFER-A",void 0,"The output is the same as the first input; the second input is ignored."),txb:x("TRANSFER-B",void 0,"The output is the same as the second input; the first input is ignored."),txna:x("TRANSFER-NOT-A",void 0,"The output is the inverted first input; the second input is ignored."),txnb:x("TRANSFER-NOT-B",void 0,"The output is the inverted second input; the first input is ignored."),tooltip:{GateTitle:o=>Q(o," Gate"),UnknownGate:"Unknown Gate",Input:"Input",Output:"Output",CurrentlyDelivers:"It currently delivers",ShouldCurrentlyDeliver:"it should currently deliver",UndeterminedOutputBecauseInputUnknown:"an unknown output as its input is unknown. Its truth table is:",UndeterminedOutputBecauseInputsUnknown:"an unknown output as not all inputs are known. Its truth table is:",ThisOutput:"the output",BecauseInputIs:"because its input is",AccordingToTruthTable:"according to the following truth table:",Inverter:x("Inverter ("," gate)"),Buffer:x("Buffer ("," gate)")},contextMenu:{ReplaceBy:"Replace By",GateTempl:re("${type} Gate"),ShowAs:"Show As",NormalGateTempl:re("Normal ${type} Gate"),UnknownGate:"Unknown Gate (with \u201C?\u201D)",VariantChangeDesc:"Switch to a variant with Shift + double-click on the gate"}},HalfAdder:{tooltip:{title:"Half Adder",desc:"Adds two bits A and B. Outputs a sum bit S and an output carry bit C."}},Input:{tooltip:{title:re("Input (${numBits}-Bit)")},contextMenu:{LockValue:"Lock This Value",PushButton:"Push Button",ToggleButton:"Toggle Button",ReplaceWithClock:"Replace With Clock"}},Keypad:{tooltip:{title:re("Keypad (${numBits}-Bit)")},contextMenu:{LockValue:"Lock This Value",PushButton:"Push Button",ToggleButton:"Toggle Button",ReplaceWithClock:"Replace With Clock"}},Random:{tooltip:{title:"Random Input",desc:x("When triggered by the clock, the output value will be 1 with probability ",".")},contextMenu:{ShowProb:"Show Probability"}},Rectangle:{contextMenu:{Size:"Size",SizePrompt:"Enter the size of this rectangle:",Rounded:"Rounded",WithBackgroundColor:"With Background Color",SetTitle:"Add Title\u2026",ChangeTitle:"Change Title\u2026",SetTitlePrompt:"Enter the title to display or leave empty to remove it:",InsideFrame:"Inside Frame",Font:"Font",Color:"Color",ColorYellow:"Yellow",ColorRed:"Red",ColorGreen:"Green",ColorBlue:"Blue",ColorTurquoise:"Turquoise",ColorGrey:"Grey",Border:"Border",BorderNone:"None",Border1px:"Fine (1 pixel)",Border2px:"Medium (2 pixels)",Border3px:"Thick (3 pixels)",Border5px:"Very Thick (5 pixels)",Border10px:"Huge (10 pixels)",TitlePlacement:"Title Placement",PlacementTop:"Top",PlacementTopLeft:"Top Left",PlacementTopRight:"Top Right",PlacementBottom:"Bottom",PlacementBottomLeft:"Bottom Left",PlacementBottomRight:"Bottom Right",PlacementLeft:"Left",PlacementRight:"Right",PlacementCenter:"Center"}},Label:{contextMenu:{ChangeText:"Change Text\u2026",ChangeTextPrompt:"Type the text to display:",Font:"Font\u2026"}},LatchSR:{tooltip:{title:"SR Latch",desc:"Stores one bit."}},Mux:{tooltip:re("${from}-to-${to} Multiplexer")},MuxDemux:{contextMenu:{ShowWiring:"Show Internal Wiring",UseZForDisconnected:"Use Z For Disconnected Pins",ParamNumFrom:x("Number of Inputs",re("${val} Input$s{val}")),ParamNumTo:x("Number of Outputs",re("${val} Output$s{val}")),ParamControlAtBottom:"Control Bits at Bottom"}},Output:{tooltip:{title:re("Output (${numBits}-Bit)")}},Display7Seg:{tooltip:"7-Segment Display"},Display16Seg:{tooltip:"16-Segment Display"},DisplayAscii:{tooltip:{title:"ASCII Character Display",desc:x("Displays the ASCII character represented by the 7 inputs, currently ","."),CurrentlyUndefined:"As not all inputs are known, this character is currently undefined.",CurrentlyThisCharacter:"Currently, this character is",WhichIsNotPrintable:" (a non-printable character)."},contextMenu:{AdditionalDisplay:"Additional Display",DisplayNone:"None",DisplayDecimal:"Decimal Value",DisplayHex:"Hexadecimal Value",ChangeDisplayDesc:"Change the additional display with a double-click on the component"}},DisplayBar:{tooltip:{title:"Bar/LED Display",ValueUnknown:"Its state is undefined because its input is unknown.",ValueZ:"Its state is undefined because its input is floating (high impedance).",Value1:x("It is currently on because its input is ","."),Value0:x("It is currently off because its input is ",".")},contextMenu:{TransparentWhenOff:"Transparent When Off",Display:"Display",DisplayVerticalBar:"Vertical Bar",DisplayHorizontalBar:"Horizontal Bar",DisplaySmallSquare:"Small Square",DisplayLargeSquare:"Large Square",DisplayChangeDesc:"Change display types with a double-click on the component",Color:"Color",ColorGreen:"Green",ColorRed:"Red",ColorYellow:"Yellow"}},Display:{tooltip:{title:re("${numBits}-Bit Display"),desc:x(re("Displays the ${radixStr} value of its ${numBits} input$s{numBits}, which is currently "),"."),RadixBinary:"binary",RadixDecimal:"decimal",RadixSignedDecimal:"signed decimal",RadixHexadecimal:"hexadecimal",RadixGeneric:re("base-${radix}"),CurrentlyUndefined:"As not all inputs are known, this value is currently undefined."},contextMenu:{DisplayAs:"Display as",DisplayNone:"None",DisplayAsBinary:"Binary (Base 2)",DisplayAsDecimal:"Decimal (Base 10)",DisplayAsSignedDecimal:"Signed Decimal",DisplayAsOctal:"Octal (Base 8)",DisplayAsHexadecimal:"Hexadecimal (Base 16)",DisplayAsUnknown:"Unkown"}},ShiftDisplay:{tooltip:"Shift Buffer Display",contextMenu:{Decoding:"Decoding",DecodingNone:"None",DecodingOctal:"Octal",DecodingHex:"Hexadecimal",DecodingAscii7:"ASCII (on 7 bits)",DecodingAscii8:"ASCII (on 8 bits)",DecodingUint4:"4-Bit Integer",DecodingInt4:"4-Bit Signed Integer",DecodingUint8:"8-Bit Integer",DecodingInt8:"8-Bit Signed Integer",DecodingUint16:"16-Bit Integer",DecodingInt16:"16-Bit Signed Integer",DecodingChangeWarning:"Changing the decoding may truncate the stored value.",Grouping:"Group Data",GroupingNone:"No Grouping",GroupBy:re("By ${n}")},EmptyCaption:"(empty)"},Passthrough:{tooltip:"Passthrough. Only used to arrange wires.",contextMenu:{Slant:"Slant",SlantNone:"None",SlantRight:"Rightward By 45\xB0",SlantLeft:"Leftward By 45\xB0"}},GateArray:{tooltip:{title:"Gate Array",desc:re("Computes in parallel several times the chosen logical operation, which currently is ${op}.")},contextMenu:{Type:"Type",ShowAsUnknown:"Hide Type"}},TristateBufferArray:{tooltip:{title:"Tristate Buffer Array",desc:"Represents multiple tristate buffers switched by a single control bit."}},RAM:{tooltip:{title:"RAM (Random-Access Memory)",desc:re("Stores ${numWords} row$s{numWords} of ${numDataBits} bit$s{numDataBits}.")},contextMenu:{SelectedDataDisplay:"Addressed Data Display",EditContent:"Edit Content\u2026",EditContentPrompt:"Type in the new memory content, separating lines with spaces. If there are as many characters as bits, the input is parsed as a binary string, and otherwise as a hexadecimal string.",SaveContent:"Save Content",LoadContent:"Load Content\u2026",SwapROMRAM:"Swap ROM/RAM"}},ROM:{tooltip:{title:"ROM (Read-Only Memory)",desc:re("Stores ${numWords} row$s{numWords} of ${numDataBits} bit$s{numDataBits}.")}},Register:{tooltip:{title:"Register",desc:re("Stores ${numBits} bit$s{numBits}.")},contextMenu:{ParamHasIncDec:"With Increment/Decrement",Saturating:"Saturating"}},ShiftRegister:{tooltip:{title:"Shift Register",desc:re("Stores ${numBits} bit$s{numBits} and shifts them left or right at each activation.")}},ControlledInverter:{tooltip:{title:"Switched Inverter",desc:"Inverts its inputs when the control bit S is on; otherwise, just outputs the inputs."}},TristateBuffer:{tooltip:"Tristate Buffer"},Wire:{contextMenu:{AddMiddlePoint:"Add Middle Point",AddPassthrough:"Add Passthrough",CustomPropagationDelay:re("Specific Propagation Delay${current}\u2026"),CustomPropagationDelayDesc:re("Specific propagation delay in milliseconds for this connection (leave empty to use the default value for the circuit, which currently is ${current} ms):"),WireColor:"Wire Color",WireColorBlack:"Black (default)",WireColorRed:"Red",WireColorGreen:"Green",WireColorBlue:"Blue",WireColorYellow:"Yellow",WireColorWhite:"White",WireStyle:"Style",WireStyleDefault:"By Default",WireStyleAuto:"Automatic",WireStyleStraight:"Straight Line",WireStyleCurved:"Curve"},timeline:{PropagatingValue:re("Propagation of value ${val} on wire")}}},Dialogs:{Generic:{Close:"Close"},Share:{title:"Share Circuit",URL:"URL:",EmbedInIframe:"Embed using <iframe>:",EmbedWithWebComp:"Embed with a web component:",EmbedInMarkdown:"Embed in Markdown/Myst:"}}},fp={fr:Zv,en:Jv};function om(o){return o in fp}c(om,"isLang");function im(o){w=fp[o],am=o}c(im,"setLang");function sm(){return am}c(sm,"getLang");var Ea="en",w=fp[Ea],am=Ea;var bn=ge(He());var T={sep(){return{_tag:"sep"}},text(o){return{_tag:"text",caption:o}},item(o,n,e,r,i){return{_tag:"item",icon:o,caption:n,action:e,shortcut:r,danger:i}},submenu(o,n,e){return{_tag:"submenu",icon:o,caption:n,items:e}}},Vu=class{constructor(n,e,r,i,s){this.g=e;this.drawParams=r;this.isMouseOver=i;this.borderColor=s;this.entranceTransform=e.getTransform(),this.entranceTransformInv=this.entranceTransform.inverse(),n.applyDrawTransform(e),this.componentTransform=e.getTransform()}exit(){this.g.setTransform(this.entranceTransform)}inNonTransformedFrame(n){this.g.setTransform(this.entranceTransform),n(this),this.g.setTransform(this.componentTransform)}rotatePoint(n,e){return um(this.entranceTransformInv,...um(this.componentTransform,n,e))}};c(Vu,"_DrawContextImpl");function um(o,n,e){return[o.a*n+o.c*e+o.e,o.b*n+o.d*e+o.f]}c(um,"mult");var vr=class{constructor(n){this._ref=void 0;this.parent=n,this.setNeedsRedraw("newly created")}get ref(){return this._ref}doSetValidatedId(n){this._ref=n}setNeedsRedraw(n){var e;(e=this.parent.ifEditing)==null||e.redrawMgr.addReason(n,this)}get drawZIndex(){return 1}draw(n,e){var u,l;let r=(l=(u=e.currentSelection)==null?void 0:u.isSelected(this))!=null?l:!1,i=this===e.currentMouseOverComp||r,s=i?e.anythingMoving&&this.lockPos?Ra:Ds:oe,a=new Vu(this,n,e,i,s);try{this.doDraw(n,a)}finally{a.exit()}}applyDrawTransform(n){}get lockPos(){return!1}cursorWhenMouseover(n){}toString(){return`${this.constructor.name}(${this.toStringDetails()})`}toStringDetails(){return""}makeTooltip(){}makeContextMenu(){}makeSetIdContextMenuItem(){let n=this._ref,e=w.Components.Generic.contextMenu,r=n===void 0?e.SetIdentifier:Rt(e.ChangeIdentifier[0],Rt(Y("font-family: monospace; font-weight: bolder; font-size: 90%"),n),e.ChangeIdentifier[1]);return T.item("ref",r,()=>{this.runSetIdDialog()},"\u2325\u21A9\uFE0E")}runSetIdDialog(){let n=w.Components.Generic.contextMenu;for(;;){let e=this._ref,r=window.prompt(n.SetIdentifierPrompt,e);if(r===null||r===e)break;if(!(this instanceof Re))this.doSetValidatedId(r.length===0?void 0:r);else{if(r.length===0){window.alert(n.IdentifierCannotBeEmpty);continue}let i=this.parent.components,s=i.get(r);if(s===void 0)i.changeIdOf(this,r);else if(window.confirm(n.IdentifierAlreadyInUseShouldSwap))i.swapIdsOf(s,this);else continue}this.setNeedsRedraw("ref changed");break}}mouseDown(n){return{wantsDragEvents:!0}}mouseDragged(n){}mouseUp(n){return ae.NoChange}mouseClicked(n){return ae.NoChange}mouseDoubleClicked(n){return ae.NoChange}keyDown(n){n.key==="Enter"&&n.altKey&&this.runSetIdDialog()}};c(vr,"Drawable");var Ta={e:{},s:{},w:{},n:{}},mp=Pt.withProps()(Ta),ie={default:"e",invert(o){switch(o){case"e":return"w";case"w":return"e";case"n":return"s";case"s":return"n"}},nextClockwise(o){switch(o){case"e":return"s";case"s":return"w";case"w":return"n";case"n":return"e"}},nextCounterClockwise(o){switch(o){case"e":return"n";case"n":return"w";case"w":return"s";case"s":return"e"}},isVertical(o){return o==="s"||o==="n"},add(o,n){switch(o){case"e":return n;case"w":return ie.invert(n);case"s":return ie.nextClockwise(n);case"n":return ie.nextCounterClockwise(n)}}},lm=bn.type({pos:bn.readonly(bn.tuple([bn.number,bn.number])),lockPos:P(bn.boolean),orient:P(bn.keyof(Ta)),ref:P(bn.string)}),Nr=class extends vr{constructor(e,r){var i,s;super(e);if(r!==void 0)this.doSetValidatedId(r.ref),this._posX=r.pos[0],this._posY=r.pos[1],this._lockPos=(i=r.lockPos)!=null?i:!1,this._orient=(s=r.orient)!=null?s:ie.default;else{let a=this.parent.editor;this._posX=Math.max(0,a.mouseX),this._posY=a.mouseY,this._lockPos=!1,this._orient=ie.default}}toJSONBase(){return{pos:[this.posX,this.posY],lockPos:this._lockPos?!0:void 0,orient:this.orient===ie.default?void 0:this.orient,ref:this.ref}}get posX(){return this._posX}get posY(){return this._posY}get lockPos(){return this._lockPos}isInRect(e){return this._posX>=e.left&&this._posX<=e.right&&this._posY>=e.top&&this._posY<=e.bottom}get orient(){return this._orient}canRotate(){return!0}canLockPos(){return!0}doSetLockPos(e){this._lockPos=e}doSetOrient(e){this._orient=e,this.setNeedsRedraw("orientation changed")}get width(){return ie.isVertical(this._orient)?this.unrotatedHeight:this.unrotatedWidth}get height(){return ie.isVertical(this._orient)?this.unrotatedWidth:this.unrotatedHeight}applyDrawTransform(e){let r=(()=>{switch(this._orient){case"e":return;case"s":return[0,1,-1,0];case"w":return[-1,0,0,-1];case"n":return[0,-1,1,0]}})();r!==void 0&&(e.translate(this.posX,this.posY),e.transform(...r,0,0),e.translate(-this.posX,-this.posY))}isOver(e,r){return this.parent.mode>=2&&Hu(this._posX,this._posY,this.width,this.height,e,r)}trySetPosition(e,r,i){let s=this.tryMakePosition(e,r,i);return s!==void 0&&this.doSetPosition(s[0],s[1]),s}tryMakePosition(e,r,i){let s=i?z/2:1;if(e=Math.round(e/s)*s,r=Math.round(r/s)*s,e!==this._posX||r!==this.posY)return[e,r]}doSetPosition(e,r){this._posX=e,this._posY=r,this.setNeedsRedraw("position changed")}makeOrientationAndPosMenuItems(){let e=w.Components.Generic.contextMenu,r={e:"\u2192",s:"\u2193",w:"\u2190",n:"\u2191"},i=this.canRotate()?[["start",T.submenu("direction",e.Orientation,[...mp.values.map(a=>{let u=this._orient===a,l=u?"check":"none",p=w.Orientations[a],d=u?()=>{}:()=>{this.doSetOrient(a)};return T.item(l,p,d,r[a])}),T.sep(),T.text(e.ChangeOrientationDesc)])]]:[],s=this.canLockPos()?[["start",T.item(this.lockPos?"check":"none",e.LockPosition,()=>{this.doSetLockPos(!this.lockPos)},"L")]]:[];return[...i,...s]}keyDown(e){if(this.canRotate()){if(e.key==="ArrowRight"){this.doSetOrient("e");return}else if(e.key==="ArrowDown"){this.doSetOrient("s");return}else if(e.key==="ArrowLeft"){this.doSetOrient("w");return}else if(e.key==="ArrowUp"){this.doSetOrient("n");return}}if(this.canLockPos()&&e.key==="l"){this.doSetLockPos(!this.lockPos);return}super.keyDown(e)}};c(Nr,"DrawableWithPosition");var Si=class extends Nr{constructor(e,r){super(e,r);this._isMovingWithContext=void 0}get isMoving(){return this._isMovingWithContext!==void 0}tryStartMoving(e){if(!this.lockPos&&this._isMovingWithContext===void 0){let[r,i]=this.parent.editor.offsetXY(e);this._isMovingWithContext={mouseOffsetToPosX:r-this.posX,mouseOffsetToPosY:i-this.posY,lastAnchorX:this.posX,lastAnchorY:this.posY,createdClone:void 0}}}tryStopMoving(e){var i;let r=!1;return this._isMovingWithContext!==void 0&&(this._isMovingWithContext=void 0,r=!0),(i=this.parent.ifEditing)==null||i.moveMgr.setDrawableStoppedMoving(this,e),r}setPosition(e,r,i){let s=this.tryMakePosition(e,r,i);s!==void 0&&(this.doSetPosition(...s),this.positionChanged())}mouseDown(e){return this.parent.mode>=2&&this.tryStartMoving(e),{wantsDragEvents:!0}}mouseDragged(e){var r;if(this.parent.mode>=2&&!this.lockPos){let[i,s]=this.parent.editor.offsetXY(e),a=!e.metaKey;this.updateSelfPositionIfNeeded(i,s,a,e)!==void 0&&(this.positionChanged(),(r=this.parent.ifEditing)==null||r.moveMgr.setDrawableMoving(this,e))}}mouseUp(e){var i,s;(s=(i=this._isMovingWithContext)==null?void 0:i.createdClone)==null||s.mouseUp(e);let r=this.tryStopMoving(e);return ae.fromBoolean(r)}positionChanged(){}updateSelfPositionIfNeeded(e,r,i,s){if(this._isMovingWithContext===void 0)return;let{mouseOffsetToPosX:a,mouseOffsetToPosY:u,lastAnchorX:l,lastAnchorY:p,createdClone:d}=this._isMovingWithContext;if(d!==void 0){d.mouseDragged(s);return}let h=e-a,m=r-u;if(s.shiftKey){let C=Math.abs(l-h),D=Math.abs(p-m);C<=D?h=l:m=p}let f=this.tryMakePosition(h,m,i);if(f!==void 0){let C;s.altKey&&this.parent.mode>=3&&(C=this.makeClone(!0))!==void 0?(this._isMovingWithContext.createdClone=C,this.parent.editor.eventMgr.setCurrentMouseOverComp(C)):this.doSetPosition(...f)}return f}makeClone(e){}};c(Si,"DrawableWithDraggablePosition");var br={black:"black",red:"red",blue:"blue",yellow:"yellow",green:"green",white:"white"},gp=br.black,Ma=class extends Nr{constructor(e,r,i,s,a,u,l,p,d){super(e.parent);this.component=e;this.group=i;this.shortName=s;this.fullName=a;this._gridOffsetX=u;this._gridOffsetY=l;this.hasTriangle=p;this._isAlive=!0;this._value=!1;this._initialValue=void 0;this._color=gp;if(this.id=r.id,"force"in r&&(this._forceValue=Fr(r.force)),"color"in r&&r.color!==void 0&&(this._color=r.color),"initialValue"in r&&r.initialValue!==void 0){let h=Fr(r.initialValue);this._initialValue=h,this._value=h}this.parent.nodeMgr.addLiveNode(this.asNode),this.updatePositionFromParent(),this.doSetOrient(d)}get asNode(){return this}isOutput(){return Dp.isOutput(this.asNode)}get unrotatedWidth(){return oo}get unrotatedHeight(){return oo}get color(){return this._color}doSetColor(e){this._color=e,this.propagateColor(e),this.setNeedsRedraw("color changed")}propagateColor(e){}isOver(e,r){return this.parent.mode>=2&&Uu(e,r,this.posX,this.posY)}destroy(){this.preDestroy(),this._isAlive=!1,this.parent.nodeMgr.removeLiveNode(this.asNode)}forceDraw(){return!1}doDraw(e,r){let i=this.parent.mode;if(i<2&&!this.forceDraw())return;let s=this._forceValue!==void 0&&i>=4,a=i>=4&&!G(this._value)&&!G(this.value)&&this._value!==this.value,u=ie.isVertical(this.component.orient),l=this.parent.editor.options.hideWireColors;Wu(e,r,this.posX,this.posY,this.nodeDisplayStyle,this.value,r.isMouseOver,l,s,a,u)}get isAlive(){return this._isAlive}get value(){return this._forceValue!==void 0?this._forceValue:this._value}set value(e){let r=this.value;e!==this._value&&(this._value=e,this.propagateNewValueIfNecessary(r))}propagateNewValueIfNecessary(e){let r=this.value;r!==e&&this.propagateNewValue(r)}get gridOffsetX(){return this._gridOffsetX}set gridOffsetX(e){this._gridOffsetX=e,this.updatePositionFromParent()}get gridOffsetY(){return this._gridOffsetY}set gridOffsetY(e){this._gridOffsetY=e,this.updatePositionFromParent()}get posXInParentTransform(){return this.component.posX+this._gridOffsetX*z}get posYInParentTransform(){return this.component.posY+this._gridOffsetY*z}updatePositionFromParent(){var s;let e=this.component,[r,i]=(()=>{switch(e.orient){case"e":return[+this._gridOffsetX,+this._gridOffsetY];case"w":return[-this._gridOffsetX,-this._gridOffsetY];case"s":return[-this._gridOffsetY,+this._gridOffsetX];case"n":return[+this._gridOffsetY,-this._gridOffsetX]}})();return(s=super.trySetPosition(e.posX+r*z,e.posY+i*z,!1))!=null?s:[this.posX,this.posY]}get wireProlongDirection(){switch(this.component.orient){case"e":switch(this.orient){case"e":return"w";case"w":return"e";case"s":return"n";case"n":return"s"}break;case"w":return this.orient;case"s":switch(this.orient){case"e":return"n";case"w":return"s";case"s":return"e";case"n":return"w"}break;case"n":switch(this.orient){case"e":return"s";case"w":return"n";case"s":return"w";case"n":return"e"}}}cursorWhenMouseover(e){return"crosshair"}mouseDown(e){return this.parent.wireMgr.startDraggingFrom(this.asNode),{wantsDragEvents:!1}}mouseUp(e){let r=this.parent.wireMgr.stopDraggingOn(this.asNode);return r===void 0?ae.NoChange:Cp(r.startNode,r.endNode,(i,s)=>this.parent.wireMgr.addWire(i,s,!0)!==void 0)}};c(Ma,"NodeBase");var Bo=class extends Ma{constructor(){super(...arguments);this._tag="_nodein";this._incomingWire=null;this.prefersSpike=!1;this.isClock=!1}get incomingWire(){return this._incomingWire}set incomingWire(e){this._incomingWire=e,e===null?this.value=!1:this.value=e.startNode.value}preDestroy(){this._incomingWire!==null&&this.parent.wireMgr.deleteWire(this._incomingWire)}get acceptsMoreConnections(){return this._incomingWire===null}get isDisconnected(){return this._incomingWire===null}get forceValue(){}get initialValue(){}propagateNewValue(e){this.component.setNeedsRecalc()}get nodeDisplayStyle(){return this._incomingWire===null?1:0}};c(Bo,"NodeIn");var ro=class extends Ma{constructor(){super(...arguments);this._tag="_nodeout";this._outgoingWires=[]}get isClock(){return!1}addOutgoingWire(e){this._outgoingWires.indexOf(e)===-1&&this._outgoingWires.push(e)}removeOutgoingWire(e){let r=this._outgoingWires.indexOf(e);r!==-1&&this._outgoingWires.splice(r,1)}get outgoingWires(){return this._outgoingWires}preDestroy(){for(let e of[...this._outgoingWires])this.parent.wireMgr.deleteWire(e)}get acceptsMoreConnections(){return!0}get isDisconnected(){return this._outgoingWires.length===0}findWireTo(e){return this._outgoingWires.find(r=>r.endNode===e)}get forceValue(){return this._forceValue}set forceValue(e){let r=this.value;this._forceValue=e,this.propagateNewValueIfNecessary(r),this.setNeedsRedraw("changed forced output value")}get initialValue(){return this._initialValue}propagateColor(e){for(let r of this._outgoingWires)r.endNode.doSetColor(e)}propagateNewValue(e){let r=this.parent.editor.timeline.logicalTime();for(let i of this._outgoingWires)i.propagateNewValue(e,r)}forceDraw(){return this._outgoingWires.length>1&&this.component.alwaysDrawMultiOutNodes}get nodeDisplayStyle(){return this._outgoingWires.length===0?3:2}mouseDoubleClicked(e){let r=super.mouseDoubleClicked(e);return r.isChange?r:this.parent.mode>=4&&e.altKey&&this.isOutput()&&this.component.allowsForcedOutputs?(this.forceValue=(()=>{switch(this._forceValue){case void 0:return O;case O:return Qe;case Qe:return!1;case!1:return!0;case!0:return}})(),ae.SimpleChange):ae.NoChange}};c(ro,"NodeOut");var Dp={isOutput(o){return o._tag==="_nodeout"}};function Cp(o,n,e){let r=o.group,i=n.group;if(r===void 0||i===void 0)return ae.SimpleChange;let s=r.indexOf(o),a=s<r.nodes.length-1?1:-1,u=i.indexOf(n),l=u<i.nodes.length-1?1:-1,d=c(function h(m,f){return m>=r.nodes.length||m<0||f>=i.nodes.length||f<0?!1:()=>e(r.nodes[m],i.nodes[f])?h(m+a,f+l):!1},"makeRepeatFunction")(s+a,u+l);return d===!1?ae.SimpleChange:ae.RepeatableChange(d)}c(Cp,"tryMakeRepeatableNodeAction");var cm=c(o=>Pe.union([Pe.number,Pe.string,o,Pe.array(Pe.union([Pe.number,Pe.string,o]))],"NodeSeqRepr"),"NodeSeqRepr"),t4=Pe.type({id:Pe.number},"InputNode"),n4=Pe.intersection([Pe.type({id:Pe.number}),Pe.partial({force:To,initialValue:To,color:Pe.keyof(br)})],"OutputNode"),pm=cm(t4),dm=cm(n4),r4=Pe.partial({id:pm}),o4=Pe.partial({id:dm}),i4=Pe.partial({in:pm,out:dm}),s4=Pe.type({}),a4=c((o,n)=>o?n?i4:r4:n?o4:s4,"NodeIDsRepr"),bp=c((o,n)=>Pe.intersection([Pe.type({type:Pe.string}),lm,a4(o,n)],"Component"),"ComponentRepr");function yp(o){return me(o)}c(yp,"isNodeArray");var zu=class{constructor(n,e){this.parent=n;this.name=e;this._orient="e";this._avgGridOffets=void 0;this.hasNameOverrides=!1;this._nodes=[],this._nodes.group=this}get nodes(){return this._nodes}addNode(n){this._avgGridOffets!==void 0&&console.warn("Adding nodes to a group after the group's position has been used"),this._nodes.push(n),this._orient=n.orient}get avgGridOffsets(){if(this._avgGridOffets===void 0){let n=0,e=0;for(let i of this._nodes)n+=i.gridOffsetX,e+=i.gridOffsetY;let r=this._nodes.length;this._avgGridOffets=[n/r,e/r]}return this._avgGridOffets}get orient(){return this._orient}get posXInParentTransform(){return this.parent.posX+this.avgGridOffsets[0]*z}get posYInParentTransform(){return this.parent.posY+this.avgGridOffsets[1]*z}indexOf(n){for(let e=0;e<this._nodes.length;e++)if(this._nodes[e]===n)return e;return-1}};c(zu,"NodeGroup");function u4(o){if(!Wn(o))return!1;for(let n in o)if(Object.prototype.hasOwnProperty.call(o,n)&&typeof o[n]!="string")return!1;return!0}c(u4,"isDynamicName");var qt=P(Pe.union([Pe.string,Pe.record(Pe.union([Pe.string,Pe.number]),Pe.string)]));function Gu(o){return Un(o[0])}c(Gu,"isNodeDesc");var Re=class extends Si{constructor(e,r,i){super(e,i);this.def=r,this._width=r.size.gridWidth*z,this._height=r.size.gridHeight*z,this._value=r.initialValue(i);let s=r.nodeRecs.ins,a=r.nodeRecs.outs;function u(f){if(f===void 0)return 0;let C=0;for(let D of Object.values(f))if(Gu(D))C++;else for(let b of D)Gu(b)?C++:C+=b.length;return C}c(u,"countNodes");let l=u(s),p=u(a);i!==void 0?this._state=1:this.setSpawning();let[d,h,m]=this.nodeSpecsFromRepr(i,l,p);[this.inputs,this.inputGroups]=this.makeNodes(s,d,Bo),[this.outputs,this.outputGroups]=this.makeNodes(a,h,ro),m?this.setNeedsPropagate():this.setNeedsRecalc(!0)}setSpawning(){var e;this._state=0,(e=this.parent.ifEditing)==null||e.moveMgr.setDrawableMoving(this)}setSpawned(){var e;this._state=1,(e=this.parent.ifEditing)==null||e.moveMgr.setDrawableStoppedMoving(this)}setInvalid(){this._state=3}toNodelessJSON(){let e=this.toJSON();return delete e.ref,delete e.in,delete e.out,delete e.id,e}toJSONBase(){let e={type:this.jsonType()};return L(L(L({},e),super.toJSONBase()),this.buildNodesRepr())}jsonType(){return this.def.type}makeNodes(e,r,i){let s={},a=[],u=new Map;if(e!==void 0){let l=c((d,h,m)=>{var S,H,F;let f=r[p++],[C,D,b,v,_]=m,M=_,A=(S=M==null?void 0:M.isClock)!=null?S:!1,E=(H=M==null?void 0:M.prefersSpike)!=null?H:!1,B=(F=M==null?void 0:M.hasTriangle)!=null?F:!1;d!==void 0&&v!==void 0?(h=v,d.hasNameOverrides=!0):(M==null?void 0:M.labelName)!==void 0&&(h=M.labelName);let I=v===void 0?h:v,k=new i(this,f,d,h,I,C,D,B,b);return(E||A)&&(k instanceof Bo?(k.prefersSpike=!0,k.isClock=A):console.warn(`prefersSpike is only supported for inputs, can't set it for ${name}`)),a.push(k),k},"makeNode"),p=0;for(let[d,h]of Object.entries(e))if(Gu(h))s[d]=l(void 0,d,h);else{let m=c((f,C,D)=>{let b=new zu(this,C);u.set(C,b);for(let v=0;v<f.length;v++)b.addNode(l(b,D+v,f[v]));return b.nodes},"makeNodesForGroup");if(Gu(h[0])){let f=h;s[d]=m(f,d,d)}else{let f=h;s[d]=f.map((C,D)=>m(C,`${d}${D}`,`${d}${D}.`))}}}return s._all=a,[s,u]}nodeSpecsFromRepr(e,r,i){let s=this.parent.nodeMgr,a=c(()=>({id:s.getFreeId()}),"makeDefaultSpec"),u=c(m=>kt(a,m),"makeDefaultSpecArray");if(e===void 0)return[u(r),u(i),!1];let l=[],p=[],d=c((m,f)=>{if(f===void 0)return u(m);let C=[];function D(b){let v=s.getFreeIdFrom(b);C.push({id:v})}c(D,"pushId");for(let b of me(f)?f:[f])if(Un(b))D(b);else if(Ae(b)){let[v,_]=b.split("-").map(M=>parseInt(M));for(let M=v;M<=_;M++)D(M)}else b.id=s.getFreeIdFrom(b.id),C.push(b);return C},"makeNormalizedSpecs");if(r!==0)if(i!==0){let m=e;l=d(r,m.in),p=d(i,m.out)}else l=d(r,e.id);else i!==0&&(p=d(i,e.id));let h=p.some(m=>m.initialValue!==void 0);return[l,p,h]}buildNodesRepr(){let e=this.inputs._all.length,r=this.outputs._all.length;function i(u){let l=c(p=>p.id,"reprOne");return u.length===1?l(u[0]):a(u.map(l))}c(i,"inNodeReprs");function s(u){let l=c(p=>{let d=p.forceValue===void 0,h=p.initialValue===void 0,m=p.color===gp;return d&&m&&h?p.id:{id:p.id,intialValue:h?void 0:pt(p.initialValue),force:d?void 0:pt(p.forceValue),color:m?void 0:p.color}},"reprOne");return u.length===1?l(u[0]):a(u.map(l))}c(s,"outNodeReprs");function a(u){let l=[],p,d;function h(){p!==void 0&&d!==void 0&&(p===d?l.push(p):d===p+1?(l.push(p),l.push(d)):l.push(`${p}-${d}`),p=void 0,d=void 0)}c(h,"pushRange");for(let m of u)Un(m)?p!==void 0&&m-1===d?d=m:(h(),p=d=m):(h(),l.push(m));return h(),l.length===1?l[0]:l}return c(a,"compactRepr"),e!==0?r!==0?{in:i(this.inputs._all),out:s(this.outputs._all)}:{id:i(this.inputs._all)}:r!==0?{id:s(this.outputs._all)}:{}}get unrotatedWidth(){return this._width}get unrotatedHeight(){return this._height}toStringDetails(){let e=this._name;return(e!==void 0?`name='${e}', `:"")+String(this.value)}get state(){return this._state}get allowsForcedOutputs(){return!0}get alwaysDrawMultiOutNodes(){return!1}*allNodes(){for(let e of this.inputs._all)yield e;for(let e of this.outputs._all)yield e}*allNodeGroups(){for(let e of this.inputGroups.values())yield e;for(let e of this.outputGroups.values())yield e}get value(){return this._value}doSetValue(e,r=!1){let i=this._value;(r||!Dr(e,i))&&(this._value=e,this.setNeedsRedraw("value changed"),this.setNeedsPropagate())}recalcValue(e){this.doSetValue(this.doRecalcValue(),e)}propagateCurrentValue(){this.propagateValue(this._value)}propagateValue(e){}inputValues(e){return e.map(r=>r.value)}setInputValues(e,r,i=!1){let s=e.length;if(r.length!==s)throw new Error(`inputValues: expected ${s} values, got ${r.length}`);for(let a=0;a<s;a++){let u=i?s-a-1:a;e[a].value=r[u]}}getOutputValues(e){return e.map(r=>r.value)}outputValues(e,r,i=!1){let s=e.length;if(r.length!==s)throw new Error(`outputValues: expected ${s} values, got ${r.length}`);for(let a=0;a<s;a++){let u=i?s-a-1:a;e[a].value=r[u]}}setNeedsRecalc(e=!1){this.parent.recalcMgr.enqueueForRecalc(this,e)}setNeedsPropagate(){this.parent.recalcMgr.enqueueForPropagate(this)}updateNodePositions(){for(let e of this.allNodes())e.updatePositionFromParent()}bounds(e=!1){return new Ia(this,e)}draw(e,r){if(super.draw(e,r),this._state===3){e.fillStyle="rgba(255, 0, 0, 0.3)";let i=this.bounds(!0);e.fill(i.outline(e,5))}}doDraw(e,r){this.doDrawDefault(e,r)}doDrawDefault(e,r,i){var p,d,h;let s=this.bounds(),a=typeof i!="function"?i:{drawLabels:i};e.fillStyle=(p=a==null?void 0:a.background)!=null?p:Je;let u=s.outline(e);e.fill(u);for(let m of this.allNodes())this.drawWireLineTo(e,m,s);let l=!((d=a==null?void 0:a.skipLabels)!=null&&d);if(l)for(let m of this.allNodeGroups())m.hasNameOverrides||this.drawGroupBox(e,m,s);(h=a==null?void 0:a.drawInside)==null||h.call(a,s),e.lineWidth=3,e.strokeStyle=r.borderColor,e.stroke(u),r.inNonTransformedFrame(m=>{var f,C,D;if(((f=a==null?void 0:a.componentName)==null?void 0:f[0])!==void 0){let[b,v,_]=a.componentName,M=Un(_)||Ae(_)?_:_();Fo(e,m,b,M,this,v)}if(l){let b=(C=a==null?void 0:a.labelSize)!=null?C:11;e.fillStyle=In,e.textAlign="center",e.font=`bold ${b}px sans-serif`;for(let v of this.allNodeGroups())v.hasNameOverrides||this.drawGroupLabel(m,v,s);e.font=`${b}px sans-serif`;for(let v of this.allNodes())(v.group===void 0||v.group.hasNameOverrides)&&this.drawNodeLabel(m,v,s)}(D=a==null?void 0:a.drawLabels)==null||D.call(a,m,s)})}drawWireLineTo(e,r,i){var a;if(r.isClock){fm(e,i.left,r,(a=this._trigger)!=null?a:Z.rising);return}let s=r.hasTriangle?3:0;de(e,r,...this.anchorFor(r,i,s),r.hasTriangle)}drawGroupBox(e,r,i){if(!Oa(r.nodes))return;let s=ie.isVertical(ie.add(this.orient,r.orient))?8:6,a=r.nodes[0],u=r.nodes[r.nodes.length-1],l=2;switch(e.beginPath(),r.orient){case"e":e.rect(i.right-s,a.posYInParentTransform-l,s,u.posYInParentTransform-a.posYInParentTransform+2*l);break;case"w":e.rect(i.left,a.posYInParentTransform-l,s,u.posYInParentTransform-a.posYInParentTransform+2*l);break;case"n":e.rect(u.posXInParentTransform-l,i.top,a.posXInParentTransform-u.posXInParentTransform+2*l,s);break;case"s":e.rect(u.posXInParentTransform-l,i.bottom-s,a.posXInParentTransform-u.posXInParentTransform+2*l,s);break}e.fillStyle=vs,e.fill()}drawNodeLabel(e,r,i){!r.isClock&&!Po(r.shortName)&&Ie(e,this.orient,r.shortName,r.orient,...this.anchorFor(r,i,1),r)}drawGroupLabel(e,r,i){Po(r.name)||Ie(e,this.orient,r.name,r.orient,...this.anchorFor(r,i,1),r.nodes)}anchorFor(e,r,i){switch(e.orient){case"e":return[r.right+i,e.posYInParentTransform];case"w":return[r.left-i,e.posYInParentTransform];case"n":return[e.posXInParentTransform,r.top-i];case"s":return[e.posXInParentTransform,r.bottom+i]}}replaceWithComponent(e){var d,h;let r=c((m,f)=>{let C=new Map;for(let D of m){let b=f(D);if(b===null)continue;let v=D.group,_=v===void 0?D.shortName:`${v.name}[${v.nodes.indexOf(D)}]`;C.set(_,b)}return C},"saveWires"),i=r(this.inputs._all,m=>m.incomingWire),s=r(this.outputs._all,m=>m.outgoingWires),a=c((m,f,C)=>{for(let D of f){let b=D.group;if(b===void 0){let v=m.get(D.shortName);v===void 0&&(v=m.get(D.shortName+"[0]")),v!==void 0&&C(v,D)}else{let v=b.nodes.indexOf(D),_=m.get(`${b.name}[${v}]`);_===void 0&&v===0&&(_=m.get(b.name)),_!==void 0&&C(_,D)}}},"restoreNodes");a(i,e.inputs._all,(m,f)=>{m.setEndNode(f)});let u=this.parent.editor.timeline.logicalTime();a(s,e.outputs._all,(m,f)=>{for(let C of[...m])C.setStartNode(f,u)});let l=this.parent.components;return l.tryDelete(this)||console.warn("Could not delete old component"),this.ref!==void 0&&l.changeIdOf(e,this.ref),e.setPosition(this.posX,this.posY,!1),e.setSpawned(),(d=this.parent.ifEditing)==null||d.undoMgr.takeSnapshot(),(h=this.parent.ifEditing)==null||h.redrawMgr.addReason("component replaced",e),e}makeClone(e){let r=this.toNodelessJSON(),i=this.def.makeFromJSON(this.parent,r);return i===void 0?console.warn("Could not create component clone"):e&&i.setSpawning(),i}mouseDown(e){if(this.parent.mode>=2&&!e.shiftKey){let r=this.parent.editor.eventMgr,i;r.currentSelection!==void 0&&(i=r.currentSelection.previouslySelectedElements).size>0&&!i.has(this)&&(r.currentSelection=void 0)}return super.mouseDown(e)}mouseUp(e){var s;let r=!1;this._state===0&&(this._state=1,r=!0);let i=super.mouseUp(e).isChange;if(r||i){let a=this.parent.nodeMgr.tryConnectNodesOf(this);return a.length>0&&this.autoConnected(a),(s=this.parent.ifEditing)==null||s.setDirty("moved component"),ae.SimpleChange}return ae.NoChange}autoConnected(e){}updateSelfPositionIfNeeded(e,r,i,s){return this._state===0?this.trySetPosition(e,r,i):super.updateSelfPositionIfNeeded(e,r,i,s)}positionChanged(){this.updateNodePositions()}mouseClicked(e){return this.parent.mode>=2&&e.shiftKey?(this.parent.editor.eventMgr.toggleSelect(this),ae.SimpleChange):ae.NoChange}mouseDoubleClicked(e){if(this.parent.mode>=2&&e.metaKey&&this.canRotate()){let r=c(()=>(this.doSetOrient(ie.nextClockwise(this.orient)),!0),"doChange");return r(),ae.RepeatableChange(r)}return ae.NoChange}doSetOrient(e){super.doSetOrient(e),this.updateNodePositions()}destroy(){this._state=2;for(let e of this.allNodes())e.destroy()}cursorWhenMouseover(e){var i,s;let r=this.parent.mode;if((i=e==null?void 0:e.ctrlKey)!=null&&i&&r>=2)return"context-menu";if((s=e==null?void 0:e.altKey)!=null&&s&&r>=3)return"copy";if(!this.lockPos&&r>=2)return"grab"}makeContextMenu(){let e=[],r=this.makeBaseContextMenu(this.parent.editor),i=this.makeComponentSpecificContextMenuItems(),s=!0;function a(u,l,p=!1){p&&(s||e.push(T.sep()),s=!0);for(let[d,h]of l)d===u&&(e.push(h),s=h._tag==="sep")}return c(a,"addItemsAt"),a("start",i),a("start",r),a("mid",r,!0),a("mid",i),a("end",r,!0),a("end",i),e}makeBaseContextMenu(e){let r=w.Components.Generic.contextMenu,i=e.eventMgr.currentSelectionEmpty()||!this.parent.isMainEditor()?[]:[["start",T.item("newcomponent",r.MakeNewComponent,()=>{let l=e.factory.tryMakeNewCustomComponent(e);l!==void 0?l.length>0&&window.alert(r.MakeNewComponentFailed+" "+l):e.updateCustomComponentButtons()})],["start",T.sep()]],s=e.mode<4?[]:[["end",this.makeSetIdContextMenuItem()],["end",T.sep()]],a=this.state!==3?[]:[["end",T.item("reset",r.Reset,()=>{this._state=1,this.setNeedsRecalc(!0)})]],u=T.item("trash",r.Delete,()=>this.parent.components.tryDelete(this)?(this.setNeedsRedraw("deleted component"),ae.SimpleChange):ae.NoChange,"\u232B",!0);return[...i,...this.makeOrientationAndPosMenuItems(),...s,...a,["end",u]]}makeComponentSpecificContextMenuItems(){return[]}makeForceOutputsContextMenuItem(e=!1){let r=this.outputs._all.length;if(r===0||this.parent.mode<4)return[];let i=w.Components.Generic.contextMenu;function s(l){let p=l.forceValue,d=[void 0,O,!0,!1,Qe].map(h=>T.item(p===h?"check":"none",(()=>{switch(h){case void 0:return i.NormalOutput;case O:return i.ForceAsUnknown;case!0:return i.ForceAs1;case!1:return i.ForceAs0;case Qe:return i.ForceAsZ}})(),()=>{l.forceValue=h}));return d.splice(1,0,T.sep()),d}c(s,"makeOutputItems");let a=[T.sep(),T.text(i.ForceOutputDesc)],u=[];return e&&u.push(["mid",T.sep()]),r===1?u.push(["mid",T.submenu("force",i.ForceOutputSingle,[...s(this.outputs._all[0]),...a])]):u.push(["mid",T.submenu("force",i.ForceOutputMultiple,[...this.outputs._all.map(l=>{let p=l.forceValue!==void 0?"force":"none";return T.submenu(p,i.Output+" "+l.fullName,s(l))}),...a])]),u}makeSetNameContextMenuItem(e,r){let i=w.Components.Generic.contextMenu,s=e===void 0?i.SetName:i.ChangeName;return T.item("pen",s,()=>this.runSetNameDialog(e,r),"\u21A9\uFE0E")}runSetNameDialog(e,r){let i=e===void 0||Ae(e)?e:vp.default.stringify(e),s=window.prompt(w.Components.Generic.contextMenu.SetNamePrompt,i);if(s!==null){let a;if(s.length===0)a=void 0;else try{let u=vp.default.parse(s);u4(u)?a=u:a=s}catch(u){a=s}r(a)}}runSetFontDialog(e,r,i){let s=w.Components.Generic.contextMenu,a=window.prompt(s.SetFontPrompt[0]+r+s.SetFontPrompt[1],e===r?"":e);if(a!==null){let u=a.length===0?r:a;i(u)}}};c(Re,"ComponentBase");var Fe=class extends Re{constructor(e,[r,i],s){super(e,r,s);this._defP=i}makeChangeParamsContextMenuItem(e,[r,i],s,a,u){let l=c(p=>{let d=s===p,h=d?"check":"none",m=d?()=>{}:()=>{this.replaceWithNewParams({[a]:p})};return T.item(h,i.expand({val:p}),m)},"makeChangeValueItem");return u===void 0&&(u=this._defP.paramDefs[a].range),["mid",T.submenu(e,r,u.map(l))]}makeChangeBooleanParamsContextMenuItem(e,r,i){let s=r?"check":"none";return["mid",T.item(s,e,()=>{this.replaceWithNewParams({[i]:!r})})]}replaceWithNewParams(e){let r=this.toNodelessJSON(),i=L(L({},r),e),s=this._defP.makeFromJSON(this.parent,i);if(s===void 0){console.warn("Could not create component variant");return}return this.replaceWithComponent(s)}keyDown(e){e.key==="+"?this.tryChangeParam(0,!0):e.key==="-"?this.tryChangeParam(0,!1):e.key==="*"?this.tryChangeParam(1,!0):e.key==="/"?this.tryChangeParam(1,!1):super.keyDown(e)}tryChangeParam(e,r){let i=Object.keys(this._defP.defaultParams),s=i.length;if(e>=s)return;let a=i[e],u=this.toJSON()[a],l=this._defP.paramDefs[a];u===void 0&&(u=l.defaultValue);let p;if(Un(u)){if(p=l.nextValue(u,r),p===void 0||p===u)return}else Ci(u)&&(p=!u);if(p===void 0)return;let d=this.replaceWithNewParams({[a]:p});d!==void 0&&this.parent.editor.eventMgr.setCurrentMouseOverComp(d)}};c(Fe,"ParametrizedComponentBase");function yn(o,n){return yh(n,([e,r,i])=>[e,r,o,i])}c(yn,"group");function fe(o,n,e,r,i){let s=i!=null?i:at(r)?1:2,a=(r-1)*s,u=e-a/2;return yn(o,kt(l=>[n,u+l*s],r))}c(fe,"groupVertical");function $u(o,n,e,r,i){let s=at(i===1?r:i)?1:2,a=i===1?s:s*2,u=(i-1)*s+a,l=r*(i-1)*s+(r-1)*a,p=e-l/2;return kt(d=>yn(o,kt(h=>[n,p+d*u+h*s],i)),r)}c($u,"groupVerticalMulti");function Mn(o,n,e,r,i){let s=i!=null?i:at(r)?1:2,a=(r-1)*s,u=n+a/2;return yn(o,kt(l=>[u-l*s,e],r))}c(Mn,"groupHorizontal");function hm(o,n,e,r){return Pe.intersection([Pe.type(L({type:Pe.string},r)),bp(n,e)],o)}c(hm,"makeComponentRepr");var qu=class{constructor(n,e,r,i,s,a,u,l){this.type=n;this.idPrefix=e;this.aults=r;this.size=i;this._buttonProps=s;this._initialValue=a;this.impl=void 0;let p=u(i,r);this.nodeRecs=p;let d="ins"in p,h="outs"in p;this.repr=hm(n,d,h,l!=null?l:{})}isValid(){return this.impl!==void 0}initialValue(n){return this._initialValue(n,this.aults)}button(n,e){return L({type:this.type,visual:n,width:this._buttonProps.imgWidth},e)}make(n){let e=new this.impl(n);return n.components.add(e),e}makeFromJSON(n,e){var s;let r=Zr(e,this.repr,(s=this.impl.name)!=null?s:"component");if(r===void 0)return;let i=new this.impl(n,r);return n.components.add(i),i}};c(qu,"ComponentDef");function ke(o,{idPrefix:n,button:e,repr:r,valueDefaults:i,size:s,makeNodes:a,initialValue:u}){return new qu(o,n,i,s,e,u!=null?u:()=>{},a,r)}c(ke,"defineComponent");function xp(o){return j(L({},o),{aults:o.valueDefaults})}c(xp,"defineAbstractComponent");var Cs=class{constructor(n,e,r){this.defaultValue=n;this.range=e;this.isAllowed=r}validate(n,e){return this.isAllowed(n)?n:(console.warn(`Using default value ${this.defaultValue} for ${e} instead of invalid value ${n}; allowed values are: ${this.range.join(", ")}`),this.defaultValue)}nextValue(n,e){let r=this.range.indexOf(n);if(r===-1)return this.defaultValue;let i=r+(e?1:-1);if(!(i<0||i>=this.range.length))return this.range[i]}};c(Cs,"ParamDef");function Ee(o,n){return n===void 0?new Cs(o,[],()=>!0):new Cs(o,n,e=>n.includes(e))}c(Ee,"param");function ko(){return new Cs(!1,[!1,!0],Ci)}c(ko,"paramBool");function l4(o){return Object.fromEntries(Object.entries(o).map(([n,e])=>[n,e.defaultValue]))}c(l4,"paramDefaults");var Qu=class{constructor(n,e,r,i,s,a,u,l,p,d,h,m,f){this.type=n;this.idPrefix=e;this.variantName=s;this._buttonProps=a;this.paramDefs=p;this.size=d;this._makeNodes=h;this._initialValue=m;this._validateParams=f;this.impl=void 0;this.defaultParams=l4(p),this.aults=L(L({},l),this.defaultParams),this.repr=hm(n,r,i,u!=null?u:{})}isValid(){return this.impl!==void 0}with(n){let e=this.size(n),r=this._makeNodes(L(L({},e),n),this.aults);return[{type:this.type,idPrefix:this.idPrefix,size:e,nodeRecs:r,initialValue:i=>this._initialValue(i,n),makeFromJSON:this.makeFromJSON.bind(this)},this]}button(n,e,r){return L({type:this.type,params:c4(this,n),visual:e,width:this._buttonProps.imgWidth},r)}make(n,e){let r=e===void 0?this.defaultParams:Kc(this.defaultParams,e),i=this.doValidate(r,void 0),s=new this.impl(n,i);return n.components.add(s),s}makeFromJSON(n,e){var u;let r=Zr(e,this.repr,(u=this.impl.name)!=null?u:"component");if(r===void 0)return;let i=Kc(this.defaultParams,r),s=this.doValidate(i,r.type),a=new this.impl(n,s,r);return n.components.add(a),a}doValidate(n,e){var i,s;let r=(s=(i=this.impl)==null?void 0:i.name)!=null?s:"component";return n=Object.fromEntries(Object.entries(this.paramDefs).map(([a,u])=>{var p;let l=(p=n[a])!=null?p:u.defaultValue;if(a==="type")return[a,l];{let d=u.validate(l,`${r}.${a}`);return[a,d]}})),this._validateParams(n,e,this.paramDefs)}};c(Qu,"ParametrizedComponentDef");function Oe(o,n,e,{variantName:r,idPrefix:i,button:s,repr:a,valueDefaults:u,params:l,validateParams:p,size:d,makeNodes:h,initialValue:m}){return new Qu(o,i,n,e,r,s,a,u,l,d,h,m,p!=null?p:f=>f)}c(Oe,"defineParametrizedComponent");function c4(o,n){return bh()({def:o,params:n})}c(c4,"defParams");var z=10,Vo=8,oo=8,p4=oo+5;function gm(o){return Math.round(o/z)}c(gm,"pxToGrid");function Ep(o){return Math.max(.1,Math.min(10,o/100))}c(Ep,"clampZoom");function xr(o,n,e,r){let i=e-o,s=r-n;return Math.sqrt(i*i+s*s)}c(xr,"dist");function Hu(o,n,e,r,i,s){let a=e/2,u=r/2;return i>=o-a&&i<o+a&&s>=n-u&&s<n+u}c(Hu,"inRect");var Ia=class{constructor(n,e){this.width=n.unrotatedWidth,this.height=n.unrotatedHeight,e&&ie.isVertical(n.orient)&&([this.width,this.height]=[this.height,this.width]),this.top=n.posY-this.height/2,this.left=n.posX-this.width/2,this.bottom=this.top+this.height,this.right=this.left+this.width}outline(n,e=0){let r=n.createPath();return r.rect(this.left-e,this.top-e,this.width+e*2,this.height+e*2),r}};c(Ia,"DrawingRect");var Dm="rgba(0,0,0,0)",d4={COLOR_BACKGROUND:void 0},Je,ys,Xu,xs,ju,Yu,Ku,so,Sp,wp,oe,In,vs,Ai,Ds,Ap,Ra,Ba,bs,Zu,Cm,Ei,io,yr,vm,mt,Tp,Ti,Ju,Pa,ws,tl,nl,ka,Rp,el,rl=!1;ym(rl);function Ri(o,n){if(n||o!==rl){ym(o);for(let e of Bn.allConnectedEditors)e.wrapHandler(()=>{e.setDark(o),e.editTools.redrawMgr.addReason("dark/light mode switch",null)})()}}c(Ri,"setDarkMode");function bm(){return rl}c(bm,"isDarkMode");function ym(o){var n;o?(Je=(n=d4.COLOR_BACKGROUND)!=null?n:K(30),ys=K(60),xs=K([168,20,20]),Xu=K(55),ju=K(85),Yu=K(30),Ku=K(45),so=K(185),Sp=Je,wp=220,In=K(139),vs=K([128,128,128,.13]),Ai=K(175),Ap=K([0,123,255]),Ra=K([194,34,14]),Ba=K([128,128,128,.5]),bs=[255,193,7],Ei=K([180,0,0]),io=[80,89,99],mt=K([108,106,98]),Ti=K([103,84,23]),Ju=K([95,95,95]),Pa={green:K([11,144,11]),red:K([144,11,11]),yellow:K([144,144,11])},ws={black:Ai,red:K([206,63,57]),blue:K([77,102,153]),yellow:K([245,209,63]),green:K([87,136,97]),white:K([230,217,199])},el=mm(Je,"rgba(128,128,128,0.4)")):(Je=K(255),ys=K(223),xs=K([255,187,187]),Xu=K(238),ju=K(200),Yu=K(240),Ku=K(215),so=K(255),Sp=K(0),wp=0,In=K(170),vs=K([128,128,128,.13]),Ai=K(80),Ap=K([0,123,255]),Ra=K([194,34,14]),Ba=K([128,128,128,.5]),bs=[255,193,7],Ei=K([180,0,0]),io=[52,58,64],mt=K([152,158,164]),Ti=K([137,114,35]),Ju=K([190,190,190]),Pa={green:K([20,232,20]),red:K([232,20,20]),yellow:K([232,232,20])},ws={black:Ai,red:K([206,63,57]),blue:K([77,102,153]),yellow:K([245,209,63]),green:K([87,136,97]),white:K([230,217,199])},el=mm(Je,"rgba(128,128,128,0.2)")),tl={yellow:K([230,230,0,.2]),blue:K([54,54,255,.2]),green:K([54,255,54,.2]),red:K([255,54,54,.2]),grey:K([120,120,120,.2]),turquoise:K([0,210,210,.2])},nl={yellow:K([196,196,0,.5]),blue:K([115,115,255,.5]),green:K([0,167,0,.5]),red:K([214,0,0,.5]),grey:K([35,35,35,.5]),turquoise:K([0,162,162,.5])},ka={green:K([54,255,54,.2]),blue:K([54,54,255,.2]),orange:K([238,154,0,.2]),black:K([0,0,0,.2]),grey:K([120,120,120,.2])},Rp={green:K([0,167,0,.8]),blue:K([115,115,255,.8]),orange:K([204,120,0,.8]),black:K([0,0,0,.8]),grey:K([35,35,35,.5])},oe=K(wp),Mp(!1),Zu=K(bs),yr=K(io),Cm=_p(Zu,40),vm=_p(yr,80),Tp=_p(mt,50),rl=o}c(ym,"doSetColors");function mm(o,n){if(!Su)return null;let e=document.createElement("canvas"),r=4;e.width=2*r,e.height=6*r;let i=e.getContext("2d");i.fillStyle=o,i.fillRect(0,0,e.width,e.height),i.fillStyle=n,i.beginPath(),i.moveTo(r,0),i.lineTo(e.width,0),i.lineTo(0,e.height),i.lineTo(0,3*r),i.closePath(),i.moveTo(r,e.height),i.lineTo(e.width,e.height),i.lineTo(e.width,3*r),i.closePath(),i.fill();let s=i.createPattern(e,"repeat");return s===null&&console.warn("Failed to create pattern"),s}c(mm,"createStripedPattern");function Mp(o){Ds=o?Ra:Ap}c(Mp,"setColorMouseOverIsDanger");function K(o){return me(o)?o.length===3?`rgb(${o[0]},${o[1]},${o[2]})`:`rgba(${o[0]},${o[1]},${o[2]},${o[3]})`:`rgb(${o},${o},${o})`}c(K,"ColorString");function Ip(o){let n="rgb(";o.startsWith(n)&&(o=o.substring(n.length));let e=")";o.endsWith(e)&&(o=o.substring(0,o.length-e.length));let r=o.split(",").map(i=>parseInt(i));return Au(r,3)}c(Ip,"colorCompsRGB");function _p(o,n){let e=Ip(o),r=Au(e.map(i=>Math.min(255,i+n)),3);return K(r)}c(_p,"ligherColor");function Vt(o){return G(o)?mt:ye(o)?Ti:o?Zu:yr}c(Vt,"colorForLogicValue");function h4(o){return G(o)?[mt,Tp]:ye(o)?[Ti,Ti]:o?[Zu,Cm]:[yr,vm]}c(h4,"colorsForLogicValue");function xm(o){let n=[(bs[0]-io[0])*o+io[0],(bs[1]-io[1])*o+io[1],(bs[2]-io[2])*o+io[2]];return K(n)}c(xm,"colorForFraction");function wm(o){let n=document.createElement("canvas");n.width=n.height=1;let e=n.getContext("2d");e.clearRect(0,0,1,1),e.fillStyle="#000",e.fillStyle=o;let r=e.fillStyle;if(e.fillStyle="#fff",e.fillStyle=o,r===e.fillStyle)return e.fillRect(0,0,1,1),Au([...e.getImageData(0,0,1,1).data],4)}c(wm,"parseColorToRGBA");var ol="18px sans-serif";function at(o){return o>=5}c(at,"useCompact");var f4=/^(In|Out|in|out)\d*$/;function Po(o){return o===void 0||f4.test(o)}c(Po,"isTrivialNodeName");function Lo(o,n,e,r,i,s,a){o.moveTo(n,e),o.lineTo(r,i),o.lineTo(s,a),o.closePath()}c(Lo,"triangle");function On(o,n,e,r){let i=r/2;o.ellipse(n,e,i,i,0,0,2*Math.PI)}c(On,"circle");function Ho(o,n,e,r,i){o.beginPath(),o.moveTo(n,e),o.lineTo(r,i),o.stroke()}c(Ho,"strokeSingleLine");function Oa(o){if(me(o))return o.map(Oa).includes(!0);let n=o,e=n.parent.editor;return!(e.mode<=1&&!e.options.showDisconnectedPins&&n.isDisconnected)}c(Oa,"shouldShowNode");function de(o,n,e,r,i=!1){if(!Oa(n))return;let s=n.parent.editor.options.hideWireColors,a=n.posXInParentTransform,u=n.posYInParentTransform;if(Op(o,a,u,e,r,n.value,n.color,s,0),i){if(o.strokeStyle=oe,o.fillStyle=oe,o.beginPath(),a===e)if(n.isOutput()&&r<=u||!n.isOutput()&&u<=r){let p=n.isOutput()?1:0;Lo(o,e-3,r-2+p,e+3,r-2+p,e,r+1+p)}else{let p=n.isOutput()?-3:-4;Lo(o,e-3,r-2-p,e+3,r-2-p,e,r-5-p)}else if(u===r){let l=n.isOutput()?1:0;n.isOutput()&&e<=a||!n.isOutput()&&a<=e?Lo(o,e-2+l,r-3,e-2+l,r+3,e+1+l,r):Lo(o,e+2-l,r-3,e+2-l,r+3,e-1-l,r)}else console.log(`ERROR  wireLineToComponent cannot draw triangle as line is not vertical or horizontal between (${a}, ${u}) and (${e}, ${r})`);o.fill(),o.stroke()}}c(de,"drawWireLineToComponent");function Op(o,n,e,r,i,s,a,u,l){o.beginPath(),o.moveTo(n,e),o.lineTo(r,i),Uo(o,s,a,!1,u,l)}c(Op,"drawStraightWireLine");function Uo(o,n,e,r,i,s,a){function u(){a?o.stroke(a):o.stroke()}c(u,"doStroke");let l=o.lineCap;o.lineCap="butt";let p=Vo/2;r?(o.lineWidth=p+2,o.strokeStyle=Ds):(o.lineWidth=p,o.strokeStyle=ws[e]),u(),o.lineWidth=p-2;let[d,h]=i?[mt,Tp]:h4(n);if(o.strokeStyle=d,s===void 0)u();else{o.setLineDash([20,20]);let f=-s*20*2;o.lineDashOffset=f,u();let C=f+20;o.strokeStyle=h,o.lineDashOffset=C,u(),o.setLineDash([]),o.lineDashOffset=0}o.lineCap=l}c(Uo,"strokeAsWireLine");function Uu(o,n,e,r){return xr(o,n,e,r)<p4/2}c(Uu,"isOverWaypoint");function Wu(o,n,e,r,i,s,a,u,l,p,d){let[h,m]=l?[Ei,3]:[Ai,1];o.strokeStyle=h,o.lineWidth=m,o.fillStyle=i===1?Je:u?mt:Vt(s),o.beginPath(),On(o,e,r,oo),o.fill(),o.stroke(),a&&(o.fillStyle=Ba,o.beginPath(),On(o,e,r,oo*2),o.fill(),o.stroke()),p&&(o.textAlign="center",o.fillStyle=h,o.font="bold 14px sans-serif",n.inNonTransformedFrame(f=>{o.fillText("!!",...f.rotatePoint(e+(d?13:0),r+(d?0:-13)))}))}c(Wu,"drawWaypoint");function fm(o,n,e,r){let i=e.posYInParentTransform,s=1;o.strokeStyle=oe,o.lineWidth=2,o.beginPath(),o.moveTo(n+1,i-4),o.lineTo(n+9,i),o.lineTo(n+1,i+4),o.stroke(),r===Z.falling&&(o.fillStyle=oe,o.closePath(),o.fill()),de(o,e,n-s,i,!1)}c(fm,"drawClockInput");function Ie(o,n,e,r,i,s,a,u){if(e===void 0)return;a===void 0&&(Un(i)?Un(s)||(a=s):a=i);let l=!1;if(a!==void 0&&(l=!Oa(a)),l)return;u===void 0&&(u=!1);let[p,d,h,m,f]=(()=>{if(r===void 0)return["center","middle",0,0,0];switch(ie.add(n,r)){case"e":return["right","middle",-3,0,0];case"w":return["left","middle",3,0,0];case"n":return u?["right","middle",0,3,1]:["center","top",0,2,0];case"s":return u?["left","middle",0,-3,1]:["center","bottom",0,-2,0]}})(),C=Un(i)?i:(yp(i)?i.group:i).posXInParentTransform,D=Un(s)?s:(yp(s)?s.group:s).posYInParentTransform,[b,v]=o.rotatePoint(C,D),_=o.g;_.textAlign=p,_.textBaseline=d,u?(_.save(),_.translate(b+h,v+m),_.rotate(-Math.PI/2*f),_.fillText(e,0,0),_.restore()):_.fillText(e,b+h,v+m)}c(Ie,"drawLabel");function il(o,n,e,r){Mi(o,n,e.posX,e.posY,r)}c(il,"drawValueTextCentered");function Mi(o,n,e,r,i){var h;o.textAlign="center",o.textBaseline="middle";let s="",a="",u=(h=i==null?void 0:i.small)!=null?h:!1,l=i==null?void 0:i.fillStyle,p=u?"12":"18",d=u?"10":"16";G(n)?(o.fillStyle=l!=null?l:so,s="bold "+p,a="?"):ye(n)?(o.fillStyle=l!=null?l:so,s=d,a="Z"):n?(o.fillStyle=l!=null?l:Sp,s="bold "+p,a="1"):(o.fillStyle=l!=null?l:so,s=p,a="0"),o.font=`${s}px sans-serif`,o.fillText(a,e,r)}c(Mi,"drawValueText");var $n=26,No={right:["start","middle",7],left:["end","middle",9],top:["center","bottom",5],bottom:["center","top",5]};function m4(o,n){if(o)switch(n){case"e":return No.right;case"w":return No.left;case"n":return No.top;case"s":return No.bottom}else switch(n){case"e":return No.left;case"w":return No.right;case"n":return No.bottom;case"s":return No.top}}c(m4,"textSettingsForName");function Fo(o,n,e,r,i,s){if(e===void 0)return;let a;if(Ae(e)?a=e:r in e?a=`${e[r]}`:"default"in e?a=`${e.default}`:G(r)?a=O:a=void 0,a===void 0)return;let[u,l,p]=m4(s,i.orient);o.textAlign=u,o.textBaseline=l,o.font="italic 18px sans-serif",o.fillStyle=oe;let d=n.rotatePoint(i.posX+(s?1:-1)*(i.unrotatedWidth/2+p),i.posY);o.fillText(a,...d),o.textBaseline="middle"}c(Fo,"drawComponentName");function De(o,n){let e="",r=!1,i=n?a=>e=e+a:a=>e=a+e;for(let a of o)G(a)||ye(a)?(r=!0,i(a)):i(+a);let s=r?O:parseInt(e,2);return[e,s]}c(De,"displayValuesFromArray");function wr(o,n,e,r=!0){if(G(o))return O;if(n===-10){let i=(o>>>0).toString(2).padStart(e,"0");if(i[0]==="1"){let s=parseInt(i.substring(1),2);return"\u2013"+String(-(-Math.pow(2,e-1)+s))}else return String(o)}else{let i=o.toString(n).toUpperCase();return(r?(()=>{switch(n){case 16:return"0x";case 8:return"0o";case 2:return"0b";default:return""}})():"")+i}}c(wr,"formatWithRadix");var al=ge(He());var Wo={none:"none",up:"up",down:"down"},er=Oe("pass",!0,!0,{variantName:({bits:o})=>`pass-${o}`,idPrefix:"pass",button:{imgWidth:32},repr:{bits:P(al.number),slant:P(al.keyof(Wo))},valueDefaults:{slant:Wo.none},params:{bits:Ee(1,[1,2,3,4,8,16])},validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>({gridWidth:2,gridHeight:at(o)?o:2*o}),makeNodes:({numBits:o})=>({ins:{In:fe("w",-1,0,o)},outs:{Out:fe("e",1,0,o)}}),initialValue:(o,{numBits:n})=>U(!1,n)}),sl=class extends Fe{constructor(e,r,i){var s;super(e,er.with(r),i);this.numBits=r.numBits,this._hShift=[0,0],this._slant=(s=i==null?void 0:i.slant)!=null?s:er.aults.slant,this.updateNodeOffsets()}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits===er.aults.bits?void 0:this.numBits,slant:this._slant===er.aults.slant?void 0:this._slant})}destroy(){var r;let e=[];for(let i=0;i<this.numBits;i++){let s=(r=this.inputs.In[i].incomingWire)==null?void 0:r.startNode;if(s===void 0||!(s instanceof ro))continue;let a=[];for(let u of this.outputs.Out[i].outgoingWires){let l=u.endNode;l!==null&&a.push([l,u.style])}a.length>0&&e.push([s,a])}if(super.destroy(),e.length>0){let i=this.parent.wireMgr;for(let[s,a]of e)for(let[u,l]of a){let p=i.addWire(s,u,!1);if(p===void 0){console.error("Failed to add wire back");continue}l!==void 0&&p.doSetStyle(l)}}}get alwaysDrawMultiOutNodes(){return!0}doRecalcValue(){return this.inputValues(this.inputs.In)}propagateValue(e){this.outputValues(this.outputs.Out,e)}isOver(e,r){if(this._slant===Wo.none)return super.isOver(e,r);let i=0,s=0;switch(this._slant){case Wo.up:i=this.inputs.In[0].posY,s=-1;break;case Wo.down:i=this.inputs.In[this.numBits-1].posY,s=1;break}let a=(r-i)*s;return super.isOver(e+a,r)}makeTooltip(){return ee(void 0,Q(W(w.Components.Passthrough.tooltip)))}doDraw(e,r){let s=this.unrotatedHeight,a=this.posY-s/2,u=a+s,l=this.posX-3/2,p=l+3,d=4,[h,m]=this._hShift;e.beginPath(),e.moveTo(this.posX+h,a),e.lineTo(this.posX+m,u),r.isMouseOver?(e.lineWidth=3+d*2,e.strokeStyle=Ba,e.stroke(),e.strokeStyle=oe):e.strokeStyle=mt,this.parent.mode>=2&&(e.lineWidth=3,e.stroke());for(let f of this.inputs._all)de(e,f,l+2+(f.gridOffsetX+1)*z,f.posYInParentTransform);for(let f of this.outputs._all)de(e,f,p-2+(f.gridOffsetX-1)*z,f.posYInParentTransform)}makeComponentSpecificContextMenuItems(){if(this.numBits===1)return[];let e=w.Components.Passthrough.contextMenu,r=c((i,s)=>{let a=this._slant===s,u=a?"check":"none",l=a?()=>{}:()=>this.doSetSlant(s);return T.item(u,i,l)},"makeItemSetSlant");return[["mid",T.submenu("slanted",e.Slant,[r(e.SlantNone,Wo.none),T.sep(),r(e.SlantRight,Wo.down),r(e.SlantLeft,Wo.up)])],["mid",T.sep()],this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits")]}doSetSlant(e){this._slant=e,this.updateNodeOffsets(),this.setNeedsRedraw("slant changed")}updateNodeOffsets(){let e=this.numBits;switch(this._slant){case"none":for(let r=0;r<e;r++)this.inputs.In[r].gridOffsetX=-1,this.outputs.Out[r].gridOffsetX=1;this._hShift=[0,0];break;case"down":{let r=e>4?1:2;for(let i=0;i<e;i++){let s=r*(e-1-i);this.inputs.In[i].gridOffsetX=-1+s,this.outputs.Out[i].gridOffsetX=1+s}this._hShift=[r*(e-.5)*z,-r*z/2];break}case"up":{let r=e>4?1:2;for(let i=0;i<e;i++){let s=r*i;this.inputs.In[i].gridOffsetX=-1+s,this.outputs.Out[i].gridOffsetX=1+s}this._hShift=[-r*z/2,r*(e-.5)*z];break}}}};c(sl,"Passthrough");er.impl=sl;var tr=class extends Si{constructor(e,r){super(e.parent,tr.toSuperRepr(r));this.wire=e}static get Repr(){return We.union([We.tuple([We.number,We.number,We.keyof(Ta),We.partial({lockPos:We.boolean})]),We.tuple([We.number,We.number,We.keyof(Ta)]),We.tuple([We.number,We.number])],"Wire")}static toSuperRepr(e){var r;if(e!==void 0)return{pos:[e[0],e[1]],lockPos:(r=e[3])==null?void 0:r.lockPos,orient:e[2],ref:void 0}}toJSON(){return this.lockPos?[this.posX,this.posY,this.orient,{lockPos:!0}]:this.orient!==ie.default?[this.posX,this.posY,this.orient]:[this.posX,this.posY]}get unrotatedWidth(){return oo}get unrotatedHeight(){return oo}isOver(e,r){return this.parent.mode>=2&&Uu(e,r,this.posX,this.posY)}cursorWhenMouseover(e){var i;let r=this.parent.mode;if((i=e==null?void 0:e.ctrlKey)!=null&&i&&r>=2)return"context-menu";if(!this.lockPos&&r>=2)return"grab"}getPrevAndNextAnchors(){var a;let e=this.wire.waypoints,r=e.indexOf(this),i=r>0?e[r-1]:this.wire.startNode,s=r<e.length-1?e[r+1]:(a=this.wire.endNode)!=null?a:this.wire.startNode;return[i,s]}removeFromParent(){this.wire.removeWaypoint(this)}doDraw(e,r){if(this.parent.mode<2)return;let i=this.parent.editor.options.hideWireColors;Wu(e,r,this.posX,this.posY,5,this.wire.startNode.value,r.isMouseOver,i,!1,!1,!1)}makeContextMenu(){return[...this.makeOrientationAndPosMenuItems().map(e=>e[1]),T.sep(),T.item("trash",w.Components.Generic.contextMenu.Delete,()=>{this.removeFromParent()},"\u232B",!0)]}};c(tr,"Waypoint");var ln={auto:"auto",straight:"straight",bezier:"bezier"},Lr=class extends vr{constructor(e,r){let i=e.parent;super(i);this._waypoints=[];this._style=void 0;this._propagatingValues=[];this._waypointBeingDragged=void 0;this.customPropagationDelay=void 0;this.ribbon=void 0;this._startNode=e,this._endNode=r;let s=-1-i.editor.options.propagationDelay;this._propagatingValues.push([e.value,s]),this.setStartNode(e),this.setEndNode(r)}static get Repr(){let e=We.tuple([We.number,We.number]),r=We.tuple([We.number,We.number,We.type({ref:P(We.string),via:P(We.array(tr.Repr)),propagationDelay:P(We.number),style:P(We.keyof(ln))})]);return We.union([r,e],"Wire")}toJSON(){let e=this._endNode.id;if(this._waypoints.length===0&&this.customPropagationDelay===void 0&&this.ref===void 0&&this.style===void 0)return[this._startNode.id,e];{let r=this._waypoints.map(i=>i.toJSON());return[this._startNode.id,e,{ref:this.ref,via:r.length===0?void 0:r,propagationDelay:this.customPropagationDelay,style:this.style}]}}get startNode(){return this._startNode}get endNode(){return this._endNode}isInRect(e){return!1}get waypoints(){return this._waypoints}setWaypoints(e){this._waypoints=e.map(r=>new tr(this,r))}get style(){return this._style}doSetStyle(e){this._style=e,this.setNeedsRedraw("style changed")}setStartNode(e,r){this._startNode!==void 0&&this._startNode.removeOutgoingWire(this),this._startNode=e,e.addOutgoingWire(this),r!==void 0&&this.propagateNewValue(this._startNode.value,r)}setEndNode(e){this._endNode!==void 0&&(this._endNode.incomingWire=null),this._endNode=e,e.incomingWire!==null&&e.incomingWire!==void 0&&console.warn(`Unexpectedly replacing existing incoming wire on node ${this._endNode.id}`),e.incomingWire=this,e.value=this._startNode.value,e.doSetColor(this._startNode.color)}propagateNewValue(e,r){var s;this._propagatingValues[this._propagatingValues.length-1][0]!==e&&this._propagatingValues.push([e,r]);let i=(s=this.customPropagationDelay)!=null?s:this.parent.editor.options.propagationDelay;if(i===0)this.endNode.value=e;else{let a=w.Components.Wire.timeline.PropagatingValue.expand({val:pt(e)});this.parent.editor.timeline.scheduleAt(r+i,()=>{this.endNode.value=e},a,!1)}}destroy(){Dp.isOutput(this._startNode)&&this._startNode.removeOutgoingWire(this),this._endNode!==null&&(this._endNode.incomingWire=null)}get isAlive(){return this.startNode.isAlive&&this.endNode.isAlive}addPassthroughFrom(e){let r=this.parent,[i,s]=r.editor.offsetXYForContextMenu(e,!0),a=this.endNode,u=er.make(r,{bits:1});u.setSpawned(),u.setPosition(i,s,!1),this.setEndNode(u.inputs.In[0]);let l=r.wireMgr.addWire(u.outputs.Out[0],a,!1);if(l===void 0){console.warn("Couldn't create new wire");return}return l.doSetStyle(this.style),u}addWaypointFrom(e){let[r,i]=this.parent.editor.offsetXYForContextMenu(e,!0);return this.addWaypointWith(r,i)}addWaypointWith(e,r){let i=this.indexOfNextWaypointIfMouseover(e,r);i===void 0&&(i=[0,[this.startNode.posX,this.startNode.posY],[this.endNode.posX,this.endNode.posY]]);let[s,[a,u],[l,p]]=i,d=l-a,h=p-u,m;Math.abs(d)>=Math.abs(h)?l>=a?m="e":m="w":p>=u?m="s":m="n";let f=new tr(this,[e,r,m]);return this._waypoints.splice(s,0,f),f}removeWaypoint(e){let r=this._waypoints.indexOf(e);r!==-1&&(this._waypoints.splice(r,1),this.setNeedsRedraw("waypoint deleted"))}prunePropagatingValues(e,r){let i=0;for(let s=1;s<this._propagatingValues.length&&e>=this._propagatingValues[s][1]+r;s++)i=s;return i>0&&this._propagatingValues.splice(0,i),this._propagatingValues[0][0]}doDraw(e,r){var A,E,B,I;let i=this._propagatingValues.length>1,s=this.parent.editor.options,a=(A=this.customPropagationDelay)!=null?A:s.propagationDelay,u=s.hideWireColors,l=r.drawParams.drawTime;this.prunePropagatingValues(l,a);let p=this.startNode.posX,d=this.startNode.posY,h=this.startNode.wireProlongDirection,m={posX:this.endNode.posX,posY:this.endNode.posY,orient:this.endNode.wireProlongDirection},f=[...this._waypoints,m],C="M"+p+" "+d+" ",D=(E=this.style)!=null?E:this.startNode.parent.editor.options.wireStyle;for(let k=0;k<f.length;k++){let S=f[k],H=S.posX,F=S.posY,q=H-p,te=F-d,se=S.orient,le,X,J,Te;if(D===ln.straight||D===ln.auto&&(p===H||d===F))k===0&&([le,X]=Go(h,p,d,-Vo/2,-Vo/2),C+="M"+le+" "+X+" ",C+="L"+p+" "+d+" "),C+="L"+H+" "+F+" ",k===f.length-1&&([le,X]=Go(se,H,F,-Vo/2,-Vo/2),C+="L"+le+" "+X+" ");else{let Ce=Math.max(25,Math.abs(q)/3),_e=Math.max(25,Math.abs(te)/3);[le,X]=Go(h,p,d,Ce,_e),[J,Te]=Go(se,H,F,Ce,_e),C+="C"+le+" "+X+","+J+" "+Te+","+H+" "+F+" "}p=H,d=F,h=ie.invert(se)}let b=this.parent.editor.lengthOfPath(C),v=e.createPath(C),_=r.drawParams;_.highlightColor!==void 0&&((I=(B=_.highlightedItems)==null?void 0:B.wires.includes(this))!=null&&I)&&(e.lineWidth=15,e.shadowColor=_.highlightColor,e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0,e.strokeStyle=e.shadowColor,e.stroke(v),e.shadowBlur=0);let M=e.getLineDash();for(let[k,S]of this._propagatingValues){let H=Math.min(1,(l-S)/a),F=b*H;e.setLineDash([F,b]),Uo(e,k,this._startNode.color,r.isMouseOver,u,_.drawTimeAnimationFraction,v)}e.setLineDash(M),i&&!this.parent.editor.timeline.isPaused&&this.setNeedsRedraw("propagating value")}isOver(e,r){return this.parent.mode<2||!this.startNode.isAlive||!this.endNode.isAlive?!1:this.indexOfNextWaypointIfMouseover(e,r)!==void 0}indexOfNextWaypointIfMouseover(e,r){let i=[this.startNode,...this._waypoints,this.endNode],s=Vo/(10*2);for(let a=0;a<i.length-1;a++){let u=i[a].posX,l=i[a].posY,p=i[a+1].posX,d=i[a+1].posY,h=xr(u,l,e,r)+xr(p,d,e,r),m=xr(u,l,p,d);if(h>=m-s&&h<=m+s)return[a,[u,l],[p,d]]}}mouseDown(e){if(e.altKey&&this.parent.mode>=3){let r=this.addPassthroughFrom(e);if(r!==void 0)return r.outputs.Out[0].mouseDown(e)}return super.mouseDown(e)}mouseDragged(e){if(this._waypointBeingDragged!==void 0)this._waypointBeingDragged.mouseDragged(e);else if(this.parent.editor.eventMgr.currentSelectionEmpty()){let r=this.addWaypointFrom(e);this._waypointBeingDragged=r,r.mouseDown(e),r.mouseDragged(e)}}mouseUp(e){return this._waypointBeingDragged!==void 0?(this._waypointBeingDragged.mouseUp(e),this._waypointBeingDragged=void 0,ae.SimpleChange):ae.NoChange}makeContextMenu(){let e=w.Components.Wire.contextMenu,r=this.customPropagationDelay===void 0?"":` (${this.customPropagationDelay} ms)`,i=c((l,p)=>{let d=this._startNode.color===p,h=d?"check":"none",m=d?()=>{}:()=>this._startNode.doSetColor(p),f=ws[p];return T.item(h,Rt(Zt(l),Y(`display: inline-block; width: 140px; height: ${Vo}px; background-color: ${f}; margin-right: 8px`)),m)},"makeItemUseColor"),s=c((l,p)=>{let d=this.style===p,h=d?"check":"none",m=d?()=>{}:()=>this.doSetStyle(p);return T.item(h,l,m)},"makeItemDisplayStyle"),a=this.parent.mode<3?[]:[T.sep(),T.item("timer",e.CustomPropagationDelay.expand({current:r}),l=>{let p=this.customPropagationDelay===void 0?"":String(this.customPropagationDelay),d=String(this.parent.editor.options.propagationDelay),h=e.CustomPropagationDelayDesc.expand({current:d}),m=prompt(h,p);if(m!==null)if(m==="")this.customPropagationDelay=void 0;else{let f=parseInt(m);isNaN(f)||(this.customPropagationDelay=f)}}),T.submenu("palette",e.WireColor,[i(e.WireColorBlack,br.black),i(e.WireColorRed,br.red),i(e.WireColorBlue,br.blue),i(e.WireColorYellow,br.yellow),i(e.WireColorGreen,br.green),i(e.WireColorWhite,br.white)]),T.submenu("wirestyle",e.WireStyle,[s(e.WireStyleDefault,void 0),T.sep(),s(e.WireStyleAuto,ln.auto),s(e.WireStyleStraight,ln.straight),s(e.WireStyleCurved,ln.bezier)])],u=this.parent.mode<4?[]:[T.sep(),this.makeSetIdContextMenuItem()];return[T.item("add",e.AddMiddlePoint,(l,p)=>{this.addWaypointFrom(p)}),T.item("add",e.AddPassthrough,(l,p)=>{this.addPassthroughFrom(p)}),...a,...u,T.sep(),T.item("trash",w.Components.Generic.contextMenu.Delete,()=>this.parent.wireMgr.deleteWire(this),"\u232B",!0)]}};c(Lr,"Wire");function Go(o,n,e,r,i){switch(o){case"e":return[n-r,e];case"w":return[n+r,e];case"s":return[n,e-i];case"n":return[n,e+i]}}c(Go,"bezierAnchorForWire");var ul=class extends vr{constructor(e,r,i){super(e);this.startNodeGroup=r;this.endNodeGroup=i;this._startGroupStartIndex=Number.MAX_SAFE_INTEGER;this._startGroupEndIndex=Number.MIN_SAFE_INTEGER;this._endGroupStartIndex=Number.MAX_SAFE_INTEGER;this._endGroupEndIndex=Number.MIN_SAFE_INTEGER;this._coveredWires=[]}isEmpty(){return this._coveredWires.length===0}addCoveredWire(e,r,i){this._coveredWires.push(e),this.updateIndices(r,i)}wireWasDeleted(e){}updateIndices(e,r){this._startGroupStartIndex=Math.min(this._startGroupStartIndex,e),this._startGroupEndIndex=Math.max(this._startGroupEndIndex,e),this._endGroupStartIndex=Math.min(this._endGroupStartIndex,r),this._endGroupEndIndex=Math.max(this._endGroupEndIndex,r)}doDraw(e,r){let[[i,s],a]=this.drawRibbonEnd(e,r,this.startNodeGroup,this._startGroupStartIndex,this._startGroupEndIndex),[[u,l],p]=this.drawRibbonEnd(e,r,this.endNodeGroup,this._endGroupStartIndex,this._endGroupEndIndex),d=u-i,h=l-s,m=Math.max(25,Math.abs(d)/3),f=Math.max(25,Math.abs(h)/3),[C,D]=Go(ie.invert(a),i,s,m,f),[b,v]=Go(ie.invert(p),u,l,m,f),_=new Ye(i,s,C,D,b,v,u,l),M=[];for(let A=this._startGroupStartIndex;A<=this._startGroupEndIndex;A++)M.push(this.startNodeGroup.nodes[A].value);this.strokeWireBezier(e,_,M,br.black,r.isMouseOver,!1)}strokeWireBezier(e,r,i,s,a,u){let l=i.length,p=l===1?1:l<=4||l>8?2:3,d=1,h=l<=8?2:1;if(l===0)return;let m=2*p+l*h+(l-1)*d,f=c(_=>{let[M,A,E,B]=_.points;e.moveTo(M.x,M.y),e.bezierCurveTo(A.x,A.y,E.x,E.y,B.x,B.y)},"addBezierToPath"),C=c(_=>{e.beginPath(),f(_),e.stroke()},"drawBezier"),D=c(_=>{if(me(_)){e.beginPath();for(let M of _)f(M);e.stroke()}},"drawBeziers"),b=e.lineCap;e.lineCap="butt",a?(e.lineWidth=m+2,e.strokeStyle=Ds,C(r),e.lineWidth=m-2*p):e.lineWidth=m,e.strokeStyle=ws[s],C(r),e.lineWidth=h;let v=-((l-1)/2)*(h+d);for(let _ of i){e.strokeStyle=u?mt:Vt(_);let M=r.offset(v);D(M),v+=h+d}e.lineCap=b}drawRibbonEnd(e,r,i,s,a){let u=i.nodes,l=u[s].orient,p=a-s+1,d=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,C=0,D=0;for(let E=s;E<=a;E++){let B=u[E],I=B.posX,k=B.posY;d=Math.min(d,I),h=Math.min(h,k),m=Math.max(m,I),f=Math.max(f,k),C+=I,D+=k}let[[b,v],[_,M],A]=(()=>{switch(l){case"e":return[[m,h],[m,f],[m,D/p]];case"w":return[[d,h],[d,f],[d,D/p]];case"s":return[[d,h],[m,h],[C/p,h]];case"n":return[[d,f],[m,f],[C/p,f]]}})();return Op(e,b,v,_,M,"Z","black",!0,r.drawParams.drawTimeAnimationFraction),[A,l]}isOver(e,r){return!1}isInRect(e){return!1}};c(ul,"Ribbon");var Ii=class{constructor(n){this._wires=[];this._ribbons=[];this._wireBeingAddedFrom=void 0;this.parent=n}get wires(){return this._wires}get ribbons(){return this._ribbons}get isAddingWire(){return this._wireBeingAddedFrom!==void 0}draw(n,e){this.removeDeadWires();let r=this.parent.editor.options.groupParallelWires;if(r)for(let i of this._ribbons)i.draw(n,e);for(let i of this._wires)if(!(r&&i.ribbon!==void 0)){i.draw(n,e);for(let s of i.waypoints)s.draw(n,e)}this.drawWireBeingAdded(n,e)}drawWireBeingAdded(n,e){let r=this._wireBeingAddedFrom;if(r!==void 0){let i=r.posX,s=r.posY,a=this.parent.editor,u=a.options.zoom/100,l=a.mouseX/u,p=a.mouseY/u;if(n.beginPath(),n.moveTo(i,s),this.parent.editor.options.wireStyle===ln.straight)n.lineTo(l,p);else{let d=l-i,h=p-s,m=Math.max(25,Math.abs(d)/3),f=Math.max(25,Math.abs(h)/3),C=ie.add(r.component.orient,r.orient),[D,b]=Go(ie.invert(C),i,s,m,f),[v,_]=Go(C,l,p,m,f);n.bezierCurveTo(D,b,v,_,l,p)}Uo(n,r.value,r.color,!1,!1,e.drawTimeAnimationFraction)}}removeDeadWires(){let n=0;for(;n<this._wires.length;){let e=this._wires[n];e.isAlive?n++:(e.destroy(),this._wires.splice(n,1))}}addWire(n,e,r){var s,a;if(!n.acceptsMoreConnections||!e.acceptsMoreConnections)return;let i=new Lr(n,e);return this._wires.push(i),r&&this.offsetWireIfNecessary(i),this.tryMergeWire(i),(s=this.parent.ifEditing)==null||s.setToolCursor(null),(a=this.parent.ifEditing)==null||a.setDirty("added wire"),i}startDraggingFrom(n){var e;this._wireBeingAddedFrom!==void 0&&console.warn("WireManager.startDraggingFrom: already dragging from a node"),n.acceptsMoreConnections&&(this._wireBeingAddedFrom=n,(e=this.parent.ifEditing)==null||e.setToolCursor("crosshair"))}stopDraggingOn(n){let e=this.getOutInNodes(n);if(this._wireBeingAddedFrom=void 0,e!==void 0)return this.addWire(e[0],e[1],!0)}isValidMouseUp(n){return this.getOutInNodes(n)!==void 0}getOutInNodes(n){var r,i;let e=this._wireBeingAddedFrom;if(e!==void 0&&n!==e){if(e.isOutput())return n.isOutput()||!n.acceptsMoreConnections?void 0:[e,n];if(n.isOutput())return[n,e];{let s=(r=n.incomingWire)==null?void 0:r.startNode;return s!==void 0&&e.acceptsMoreConnections?[s,e]:(s=(i=e.incomingWire)==null?void 0:i.startNode,s!==void 0&&n.acceptsMoreConnections?[s,n]:void 0)}}}tryCancelWire(){var n;return this._wireBeingAddedFrom!==void 0?(this._wireBeingAddedFrom=void 0,(n=this.parent.ifEditing)==null||n.setToolCursor(null),!0):!1}offsetWireIfNecessary(n){let e=n.startNode,r=n.endNode,i=e.component;if(i!==r.component)return;let s=(r.posX-e.posX)/2,a=(r.posY-e.posY)/2,u=e.posX+s,l=e.posY+a;if(!i.isOver(u,l))return;let p=s>a,d=p?e.posX<r.posX?1:e.posX>r.posX||e.posX<i.posX?-1:1:e.posY<r.posY?1:e.posY>r.posY||e.posY<i.posY?-1:1,h=c(D=>d*(D/2+2*z),"calcOffsetFromDim"),m=ie.isVertical(i.orient),f=u+(p?h(m?i.unrotatedHeight:i.unrotatedWidth):0),C=l+(p?0:h(m?i.unrotatedWidth:i.unrotatedHeight));n.addWaypointWith(f,C)}tryMergeWire(n){let e=n.startNode,r=n.endNode,i=e.group,s=r.group;if(i===void 0||s===void 0)return;let a=c((d,h,m,f)=>{if(!(h<0||f<0||h>=d.nodes.length||f>=m.nodes.length))return d.nodes[h].findWireTo(m.nodes[f])},"findWire"),u=i.nodes.indexOf(e),l=s.nodes.indexOf(r),p=a(i,u-1,s,l-1);if(p!==void 0){let d=p.ribbon;d===void 0&&(d=new ul(e.parent,i,s),this._ribbons.push(d),p.ribbon=d,d.addCoveredWire(p,u-1,l-1)),d.addCoveredWire(n,u,l),n.ribbon=d}}deleteWire(n){let e=n.startNode,r=n.endNode;return this.doDeleteWire(n)?Cp(e,r,(s,a)=>{let u=a.incomingWire;return u===null||u.startNode!==s?!1:this.doDeleteWire(u)}):ae.NoChange}doDeleteWire(n){var r;n.destroy();let e=n.ribbon;return e!==void 0&&(e.wireWasDeleted(n),e.isEmpty()&&this._ribbons.splice(this._ribbons.indexOf(e),1)),this._wires.splice(this._wires.indexOf(n),1),(r=this.parent.ifEditing)==null||r.redrawMgr.addReason("deleted wire",null),!0}clearAll(){var n;for(let e of this._wires)e.destroy();this._wires.splice(0,this._wires.length),(n=this.parent.ifEditing)==null||n.redrawMgr.addReason("deleted wires",null)}};c(Ii,"WireManager");var ll=class{saveCircuitToFile(n){let e=this.stringifyObject(this.buildCircuitObject(n),!1),r=new Blob([e],{type:"application/json"}),i=n.documentDisplayName+".json";(0,Fp.saveAs)(r,i)}saveLibraryToFile(n){let e=this.stringifyObject(this.buildLibraryObject(n),!1),r=new Blob([e],{type:"application/json"}),i=n.documentDisplayName+"-lib.json";(0,Fp.saveAs)(r,i)}loadCircuitOrLibrary(n,e,r){let i;if(!Ae(e))i=e;else try{i=Da(e)}catch(a){return console.error(a),"can't load this JSON - error \u201C"+a+`\u201D, length = ${e.length}, JSON:
`+e}return i.type==="lib"?this.doLoadLibrary(n,i):this.loadCircuit(n,i,r)}pasteComponents(n,e){let r;try{r=Da(e)}catch(l){return console.error(l),"can't load this JSON - error \u201C"+l+`\u201D, length = ${e.length}, JSON:
`+e}let i;if(me(r.pos)){let l=n.editor,p=c(d=>Math.ceil(d/10)*10,"ceil10");i=[p(l.mouseX-r.pos[0]),p(l.mouseY-r.pos[1])]}let s=r.components;if(!me(s)&&!Wn(s))return"invalid JSON: 'components' must be an array or an object";let{nodeMapping:a,createdComponents:u}=this.makeComponents(n,s,i);return this.makeWires(n,r.wires,a,!1),u}doLoadLibrary(n,e){np(e);let r=n.factory.tryLoadCustomDefsFrom(e.defs);n.updateCustomComponentButtons(),n.showMessage(w.Messages.LoadedDefinitions.expand({n:r}))}loadCircuit(n,e,r){var d,h,m;let i=n.components,s=L({},e);try{(d=r==null?void 0:r.skipMigration)!=null&&d||np(s)}catch(f){return console.error(f),"can't migrate JSON - error \u201C"+f+`\u201D, JSON:
`+Ss(s,{maxLength:120})}delete s.v,n.isMainEditor()&&(n.factory.clearCustomDefs(),n.factory.tryLoadCustomDefsFrom(s.defs),delete s.defs);for(let f of i.all())f.destroy();i.clearAll(),n.wireMgr.clearAll(),n.nodeMgr.clearAll(),n.isMainEditor()&&n.timeline.reset();let a=s.components,{nodeMapping:u}=this.makeComponents(n,a,void 0);delete s.components;let l=(h=r==null?void 0:r.immediateWirePropagation)!=null?h:!1;if(this.makeWires(n,s.wires,u,l),delete s.wires,n.isMainEditor()){s.userdata!==void 0&&(typeof n.userdata=="object"&&typeof s.userdata=="object"&&(n.userdata=L(L({},s.userdata),n.userdata)),delete s.userdata),n.setPartialOptions(s.opts),delete s.opts,((m=r==null?void 0:r.isUndoRedoAction)!=null?m:!1)||n.editor.editTools.undoMgr.takeSnapshot(),n.updateCustomComponentButtons();let C=s.scratch,D;if(C!==void 0&&Wn(C)&&Ae(C.id)&&(D=n.components.get(C.id))!==void 0){delete C.id;let b=D;this.loadCircuit(b,C,{immediateWirePropagation:!0,skipMigration:!0}),n.setEditorRoot(b)}delete s.scratch}let p=ga(s);p.length!==0&&console.warn("Unloaded data fields: "+p.join(", "))}makeComponents(n,e,r){let i=[],s=c(u=>{u!==void 0&&i.push(u)},"add");return{nodeMapping:n.nodeMgr.recordMappingWhile(()=>{let u=n.editor.factory;if(me(e))for(let l of e)s(u.makeFromJSON(n,l,r));else if(Wn(e))for(let[l,p]of Object.entries(e))Wn(p)?(p.ref=l,s(u.makeFromJSON(n,p,r))):console.error(`Invalid non-object component repr: '${p}'`)}),createdComponents:i}}makeWires(n,e,r,i){let s=n.wireMgr,a=n.nodeMgr,u=n.recalcMgr;u.recalcAndPropagateIfNeeded();for(let l of me(e)?e:[]){let p=Zr(l,Lr.Repr,"wire");if(p===void 0)return;let[d,h,m]=p,f=a.findNode(d,r),C=a.findNode(h,r);if(f!==void 0&&C!==void 0&&f.isOutput()&&!C.isOutput()){let D=s.addWire(f,C,!1);D!==void 0&&(m!==void 0&&(D.doSetValidatedId(m.ref),m.via!==void 0&&D.setWaypoints(m.via),m.propagationDelay!==void 0&&(D.customPropagationDelay=m.propagationDelay),m.style!==void 0&&D.doSetStyle(m.style)),i&&(D.customPropagationDelay=0)),u.recalcAndPropagateIfNeeded()}}}buildCircuitObject(n){var i;let e={v:ms,opts:n.nonDefaultOptions(),defs:n.factory.customDefReprs(),scratch:void 0,userdata:n.userdata},r=n.editorRoot;if(!(r instanceof Bn)){let a={id:(i=r.ref)!=null?i:"n/a"};this.buildComponentAndWireReprsInto(a,r.components.all(),r.wireMgr.wires),e.scratch=a}return this.buildComponentAndWireReprsInto(e,n.components.all(),n.wireMgr.wires),e}buildLibraryObject(n){return{v:ms,defs:n.factory.customDefReprs(),type:"lib"}}buildComponentsAndWireObject(n,e){let r={};e!==void 0&&(r.pos=e);let i=[];for(let s of n)for(let a of s.inputs._all){let u=a.incomingWire;u!==null&&n.includes(u.startNode.component)&&i.push(u)}return this.buildComponentAndWireReprsInto(r,n,i),r}buildComponentAndWireReprsInto(n,e,r){for(let i of e){n.components===void 0&&(n.components={});let s=i.ref;if(s===void 0){console.error("Skipping component with no id: "+i);continue}n.components[s]!==void 0&&console.error("Skipping component with duplicate id: "+i);let a=i.toJSON();n.components[s]=a}r.length!==0&&(n.wires=r.map(i=>i.toJSON()))}removeShowOnlyFrom(n){n.opts!==void 0&&delete n.opts.showOnly}stringifyObject(n,e){if(e)return cl.default.stringify(n);let r=L({},n),i=[];_s(i,r,"v"),_s(i,r,"type"),_s(i,r,"opts"),_s(i,r,"userdata"),_s(i,r,"pos");let s=r.defs;if(s!==void 0&&me(s)){let l=[];for(let p of s){let d=p.circuit;delete p.circuit;let h=Ss(p,{maxLength:1/0});p.circuit=d;let m=[];Bp(m,L({},d),3,!0);let f=m.length===0?"{}":`{
      `+m.join(`,
      `)+`
    }`;h=h.slice(0,h.length-1)+", circuit: "+f+"}",l.push(h)}i.push(`defs: [
    `+l.join(`,
    `)+`
  ]`)}delete r.defs;let a=r.scratch;if(a!==void 0){let l=[];l.push(`id: ${Ss(a.id)}`),Bp(l,L({},a),2,!1),i.push(`scratch: {
    `+l.join(`,
    `)+`
  }`)}delete r.scratch,Bp(i,r,1,!1);let u=ga(r);return u.length!==0&&console.error("ERROR: unprocessed fields in stringified JSON: "+u.join(", ")),`{ // JSON5
  `+i.join(`,
  `)+`
}`}};c(ll,"_Serialization");var ut=new ll;function _s(o,n,e){let r=n[e];r!==void 0&&o.push(`${Np(e)}: ${Ss(r,{maxLength:1/0})}`),delete n[e]}c(_s,"stringifyCompactReprTo");function Bp(o,n,e,r){let i="  ".repeat(e),s=i+"  ",a=n.components,u;if(a!==void 0){if(me(a)&&a.length!==0){let l=[];for(let p of a)l.push(Ss(p,{maxLength:1/0}));o.push(`components: [
${s}`+l.join(`,
${s}`)+`,
${i}]`)}else if((u=Object.entries(a)).length!==0){let l=[];for(let[p,d]of u)delete d.ref,l.push(`${Np(p)}: ${Ss(d,{maxLength:1/0})}`);o.push(`components: {
${s}`+l.join(`,
${s}`)+`,
${i}}`)}}if(delete n.components,r&&n.wires!==void 0)for(let l of n.wires){let p=l[2];p!==void 0&&(delete p.propagationDelay,g4(p)&&l.splice(2,1))}_s(o,n,"wires")}c(Bp,"stringifyComponentAndWiresReprsTo");function g4(o){for(let n of Object.values(o))if(n!==void 0)return!1;return!0}c(g4,"allValuesUndefined");var D4=/("([^\\"]|\\.)*")|[:,]/g;function Ss(o,n){var s,a;n!=null||(n={});let e=JSON.stringify([1],void 0,(s=n.indent)!=null?s:2).slice(2,-3),r=e===""?1/0:(a=n.maxLength)!=null?a:80,i=n.replacer;return c(function u(l,p,d){l!==void 0&&typeof l.toJSON=="function"&&(l=l.toJSON());let h=cl.default.stringify(l,i);if(h===void 0)return h;let m=r-p.length-d;if(h.length<=m){let f=h.replace(D4,function(C,D){return D!=null?D:C+" "});if(f.length<=m)return f}if(i!==null&&(l=cl.default.parse(h),i=void 0),typeof l=="object"&&l!==null){let f=p+e,C=[],D=0,b,v;if(Array.isArray(l))for(b="[",v="]",m=l.length;D<m;D++)C.push(u(l[D],f,D===m-1?0:1)||"null");else{b="{",v="}";let _=Object.keys(l);for(m=_.length;D<m;D++){let M=_[D],A=Np(M)+": ",E=u(l[M],f,A.length+(D===m-1?0:1));E!==void 0&&C.push(A+E)}}if(C.length>0)return[b,e+C.join(`,
`+f),v].join(`
`+p)}return h},"_stringify")(o,"",0)}c(Ss,"stringifySmart");function Np(o){if(o.length===0)return kp(o);let n=String.fromCodePoint(o.codePointAt(0));if(!As.isIdStartChar(n))return kp(o);for(let e=n.length;e<o.length;e++)if(!As.isIdContinueChar(String.fromCodePoint(o.codePointAt(e))))return kp(o);return o}c(Np,"stringifyKey");var Pp={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};function kp(o){let n={"'":.1,'"':.2},e="";for(let i=0;i<o.length;i++){let s=o[i];switch(s){case"'":case'"':n[s]++,e+=s;continue;case"\0":if(As.isDigit(o[i+1])){e+="\\x00";continue}}if(Pp[s]!==void 0){e+=Pp[s];continue}if(s<" "){let a=s.charCodeAt(0).toString(16);e+="\\x"+("00"+a).substring(a.length);continue}e+=s}let r=ga(n).reduce(function(i,s){return n[i]<n[s]?i:s});return e=e.replace(new RegExp(r,"g"),Pp[r]),r+e+r}c(kp,"quoteString");var Na=ge(He());var Es=ge(He());var zo=Pt.withProps()({not:{out:([o])=>o===!1?!0:o===!0?!1:O,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.not},buf:{out:([o])=>o===!0?!0:o===!1?!1:O,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.buf}}),Am=Es.keyof(zo.props),Oi=Pt.withProps()({and:{out:_m,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.and},or:{out:Lp,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.or},xor:{out:Sm,includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.xor},nand:{out:o=>xe.invert(_m(o)),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.nand},nor:{out:o=>xe.invert(Lp(o)),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.nor},xnor:{out:o=>xe.invert(Sm(o)),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.xnor}}),C4=Es.keyof(Oi.props),dl=Pt.withProps()({imply:{out:o=>pl(o[0],o[1]),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.imply},rimply:{out:o=>pl(o[1],o[0]),includeInContextMenu:!1,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.rimply},nimply:{out:o=>xe.invert(pl(o[0],o[1])),includeInContextMenu:!0,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.nimply},rnimply:{out:o=>xe.invert(pl(o[1],o[0])),includeInContextMenu:!1,includeInPoseAs:!0,fullShortDesc:()=>w.Components.Gate.rnimply},txa:{out:o=>o[0],includeInContextMenu:!0,includeInPoseAs:!1,fullShortDesc:()=>w.Components.Gate.txa},txb:{out:o=>o[1],includeInContextMenu:!1,includeInPoseAs:!1,fullShortDesc:()=>w.Components.Gate.txb},txna:{out:o=>xe.invert(o[0]),includeInContextMenu:!1,includeInPoseAs:!1,fullShortDesc:()=>w.Components.Gate.txna},txnb:{out:o=>xe.invert(o[1]),includeInContextMenu:!1,includeInPoseAs:!1,fullShortDesc:()=>w.Components.Gate.txnb}}),v4=Es.keyof(dl.props),Vr=Pt.withProps()(L(L({},Oi.props),dl.props)),Em=Es.union([C4,v4]);function _m(o){return o.includes(!1)?!1:o.includes(O)||o.includes(Qe)?O:!0}c(_m,"logicAnd");function Lp(o){return o.includes(!0)?!0:o.includes(O)||o.includes(Qe)?O:!1}c(Lp,"logicOr");function Sm(o){let n=0;for(let e of o)if(e===!0)n++;else if(e===O||e===Qe)return O;return n%2===1}c(Sm,"logicXor");function pl(o,n){return Lp([xe.invert(o),n])}c(pl,"logicImply");var nr=Oe("alu",!0,!0,{variantName:({bits:o,ext:n})=>`alu-${o}${n?"e":""}`,idPrefix:"alu",button:{imgWidth:50},repr:{bits:P(Na.number),ext:P(Na.boolean),showOp:P(Na.boolean)},valueDefaults:{showOp:!0},params:{bits:Ee(4,[2,4,8,16]),ext:ko()},validateParams:({bits:o,ext:n})=>({numBits:o,usesExtendedOpcode:n}),size:({numBits:o})=>({gridWidth:7,gridHeight:19+Math.max(0,o-8)*2}),makeNodes:({numBits:o,usesExtendedOpcode:n,gridWidth:e,gridHeight:r})=>{let i=5+Math.max(0,(o-8)/2),s=e/2+1,a=(r+1)/2,u=-a,p=Mn("n",0,u,n?5:3),d=p.pop(),h=p.pop();return{ins:{A:fe("w",-s,-i,o),B:fe("w",-s,i,o),Op:p,Mode:h,Cin:[d[0],d[1],"n",`Cin (${w.Components.ALU.InputCinDesc})`]},outs:{S:fe("e",s,0,o),V:[0,a,"s","V (oVerflow)"],Z:[2,a,"s","Z (Zero)"],Cout:[-2,a,"s",`Cout (${w.Components.ALU.OutputCoutDesc})`]}}},initialValue:(o,{numBits:n})=>({s:U(!1,n),v:!1,cout:!1})}),Tm={shortName(o){return w.Components.ALU[o][0]},fullName(o){return w.Components.ALU[o][1]}},Hp=["A+B","A-B","A+1","A-1","-A","B-A","A*2","A/2","A|B","A&B","A|~B","A&~B","~A","A^B","A<<","A>>"],b4=["A+B","A-B","A|B","A&B"],hl=class extends Fe{constructor(e,r,i){var s;super(e,nr.with(r),i);this.numBits=r.numBits,this.usesExtendedOpcode=r.usesExtendedOpcode,this._showOp=(s=i==null?void 0:i.showOp)!=null?s:nr.aults.showOp}toJSON(){return j(L({bits:this.numBits===nr.aults.bits?void 0:this.numBits,ext:this.usesExtendedOpcode===nr.aults.ext?void 0:this.usesExtendedOpcode},this.toJSONBase()),{showOp:this._showOp!==nr.aults.showOp?this._showOp:void 0})}makeTooltip(){let e=this.op,r=w.Components.ALU.tooltip,i=G(e)?r.SomeUnknownOperation:r.ThisOperation+" "+Tm.fullName(e);return ee(r.title,Q(W(`${r.CurrentlyCarriesOut} ${i}.`)))}get op(){let e=this.inputValues(this.inputs.Op);e.push(this.inputs.Mode.value);let r=De(e,!1)[1];return G(r)?O:(this.usesExtendedOpcode?Hp:b4)[r]}doRecalcValue(){let e=this.op;if(G(e))return{s:U(O,this.numBits),v:O,cout:O};let r=this.inputValues(this.inputs.A),i=this.inputValues(this.inputs.B),s=this.inputs.Cin.value;return qo(e,r,i,s)}propagateValue(e){this.outputValues(this.outputs.S,e.s),this.outputs.V.value=e.v,this.outputs.Z.value=y4(e.s),this.outputs.Cout.value=e.cout}doDraw(e,r){let i=this.bounds(),{left:s,top:a,right:u,bottom:l}=i,p=a+2*z;for(let D of this.inputs.A)de(e,D,s,D.posYInParentTransform);for(let D of this.inputs.B)de(e,D,s,D.posYInParentTransform);for(let D of this.inputs.Op)de(e,D,D.posXInParentTransform,p);de(e,this.inputs.Mode,this.inputs.Mode.posXInParentTransform,p),de(e,this.inputs.Cin,this.inputs.Cin.posXInParentTransform,p);for(let D of this.outputs.S)de(e,D,u,D.posYInParentTransform);de(e,this.outputs.Z,this.outputs.Z.posXInParentTransform,l-17),de(e,this.outputs.V,this.outputs.V.posXInParentTransform,l-9),de(e,this.outputs.Cout,this.outputs.Cout.posXInParentTransform,l-3),e.fillStyle=Je,e.lineWidth=3,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(s,a),e.lineTo(u,p),e.lineTo(u,l-2*z),e.lineTo(s,l),e.lineTo(s,this.posY+1*z),e.lineTo(s+2*z,this.posY),e.lineTo(s,this.posY-1*z),e.closePath(),e.fill(),e.stroke(),this.drawGroupBox(e,this.inputs.A.group,i),this.drawGroupBox(e,this.inputs.B.group,i),this.drawGroupBox(e,this.outputs.S.group,i),e.beginPath();let d=8,h=this.inputs.Mode.posXInParentTransform-2,m=this.inputs.Op[0].posXInParentTransform+2,f=a+(this.usesExtendedOpcode?8:11),C=a+18;e.moveTo(h,f),e.lineTo(m,C),e.lineTo(m,C+d),e.lineTo(h,f+d),e.closePath(),e.fillStyle=vs,e.fill(),r.inNonTransformedFrame(D=>{e.fillStyle=In,e.font="11px sans-serif";let v=ie.isVertical(this.orient)?0:1;if(Ie(D,this.orient,"Z","s",this.outputs.Z,l-16),Ie(D,this.orient,"V","s",this.outputs.V.posXInParentTransform+v*2,l-10,this.outputs.V),Ie(D,this.orient,"Cout","s",this.outputs.Cout.posXInParentTransform+v*4,l-7,this.outputs.Cout),Ie(D,this.orient,"Cin","n",this.inputs.Cin.posXInParentTransform,a+4,this.inputs.Cin),e.font="bold 11px sans-serif",Ie(D,this.orient,"Op","n",(h+m)/2,a+12,this.inputs.Op),e.font="bold 12px sans-serif",Ie(D,this.orient,"A","w",s,this.inputs.A),Ie(D,this.orient,"B","w",s,this.inputs.B),Ie(D,this.orient,"S","e",u,this.outputs.S),this._showOp){let _=G(this.op)?"??":Tm.shortName(this.op),M=_.length===1?25:_.length===2?17:13;e.font=`bold ${M}px sans-serif`,e.fillStyle=oe,e.textAlign="center",e.textBaseline="middle",e.fillText(_,...D.rotatePoint(this.posX+5,this.posY))}})}doSetShowOp(e){this._showOp=e,this.setNeedsRedraw("show op changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.ALU.contextMenu,r=this._showOp?"check":"none";return[["mid",T.item(r,e.toggleShowOp,()=>{this.doSetShowOp(!this._showOp)})],["mid",T.sep()],this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),this.makeChangeBooleanParamsContextMenuItem(e.ParamUseExtendedOpcode,this.usesExtendedOpcode,"ext"),["mid",T.sep()],...this.makeForceOutputsContextMenuItem()]}};c(hl,"ALU");nr.impl=hl;function y4(o){for(let n of o){if(G(n)||ye(n))return O;if(n===!0)return!1}return!0}c(y4,"allZeros");function qo(o,n,e,r){let i=n.length;switch(o){case"A+B":return Pi(n,e,r);case"A*2":return Pi(n,n,r);case"A+1":return Pi(n,[!0,...U(!1,i-1)],r);case"A/2":return Bi([...n.slice(1),n[i-1]],U(!1,i),r);case"A-1":return Bi(n,[!0,...U(!1,i-1)],r);case"A-B":return Bi(n,e,r);case"B-A":return Bi(e,n,r);case"-A":return Bi(U(!1,i),n,r);default:{let s=!1;return{s:(()=>{switch(o){case"A|B":return Fa("or",n,e);case"A&B":return Fa("and",n,e);case"A^B":return Fa("xor",n,e);case"A|~B":return Fa("or",n,Vp(e));case"A&~B":return Fa("and",n,Vp(e));case"~A":return Vp(n);case"A>>":return[...n.slice(1),r];case"A<<":return s=n[n.length-1],[r,...n.slice(0,n.length-1)]}})(),v:!1,cout:s}}}}c(qo,"doALUOp");function Pi(o,n,e){let r=o.length,i=c((p,d,h)=>{let m=c(D=>D===!0?1:0,"asNumber"),f=(G(p)||ye(p)?1:0)+(G(d)||ye(p)?1:0)+(G(h)||ye(p)?1:0),C=m(p)+m(d)+m(h);return f===0?[C%2===1,C>=2]:f===1&&C>=2?[O,!0]:[O,O]},"sum3bits"),s=U(O,r),a=U(O,r+1);a[0]=e;for(let p=0;p<r;p++){let[d,h]=i(a[p],o[p],n[p]);s[p]=d,a[p+1]=h}let u=a[r],l=!Ci(u)||!Ci(a[r-2])?O:u!==a[r-1];return{s,cout:u,v:l}}c(Pi,"doALUAdd");function Bi(o,n,e){let r=o.length,i=U(O,r),s=c(d=>{let h=0,m=1;for(let f of d){if(G(f))return;h+=Number(f)*m,m*=2}return h},"toInt"),a=s(o),u=s(n),l=O,p=O;if(a!==void 0&&u!==void 0&&Ci(e)){let d=a-u-(e?1:0);d<0&&(d+=Math.pow(2,r));let h=(d>>>0).toString(2).padStart(r,"0"),m=r-1;for(let b=0;b<r;b++)i[b]=h[m-b]==="1";l=u>a-(e?1:0);let f=o[m]===!0,C=n[m]===!0,D=i[m]===!0;p=f!==C&&f!==D}return{s:i,cout:l,v:p}}c(Bi,"doALUSub");function Vp(o){let n=zo.props.not.out;return kt(e=>n([o[e]]),o.length)}c(Vp,"doALUNot");function Fa(o,n,e){let r=Oi.props[o].out;return kt(i=>r([n[i],e[i]]),n.length)}c(Fa,"doALUBinOp");var Ts=ke("adder",{idPrefix:"adder",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:7,gridHeight:5},makeNodes:()=>{let o=w.Components.Generic;return{ins:{A:[-2,-4,"n","A",{hasTriangle:!0}],B:[2,-4,"n","B",{hasTriangle:!0}],Cin:[5,0,"e",o.InputCarryInDesc,{hasTriangle:!0}]},outs:{S:[0,4,"s",o.OutputSumDesc,{hasTriangle:!0}],Cout:[-5,0,"w",o.OutputCarryOutDesc,{hasTriangle:!0}]}}},initialValue:()=>({s:!1,cout:!1})}),fl=class extends Re{constructor(n,e){super(n,Ts,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=w.Components.Adder.tooltip;return ee(n.title,Q(W(n.desc)))}doRecalcValue(){let n=this.inputs.A.value,e=this.inputs.B.value,r=this.inputs.Cin.value;if(G(n)||G(e)||G(r)||ye(n)||ye(e)||ye(r))return{s:O,cout:O};switch(+n+ +e+ +r){case 0:return{s:!1,cout:!1};case 1:return{s:!0,cout:!1};case 2:return{s:!1,cout:!0};case 3:return{s:!0,cout:!0};default:return console.log("ERROR: sum of adder is > 3"),{s:!1,cout:!1}}}propagateValue(n){this.outputs.S.value=n.s,this.outputs.Cout.value=n.cout}doDraw(n,e){this.doDrawDefault(n,e,()=>{n.fillStyle=oe,n.font="bold 30px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText("+",this.posX,this.posY-2)})}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};c(fl,"Adder");Ts.impl=fl;var Rm=ge(He());var ao=Oe("adder-array",!0,!0,{variantName:({bits:o})=>`adder-array-${o}`,idPrefix:"adder",button:{imgWidth:50},repr:{bits:P(Rm.number)},valueDefaults:{},params:{bits:Ee(4,[2,4,8,16])},validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>({gridWidth:4,gridHeight:nr.size({numBits:o,usesExtendedOpcode:!1}).gridHeight}),makeNodes:({numBits:o,gridHeight:n})=>{let e=5+Math.max(0,(o-8)/2),r=Math.floor(n/2)+1,i=-r;return{ins:{A:fe("w",-3,-e,o),B:fe("w",-3,e,o),Cin:[0,i,"n"]},outs:{S:fe("e",3,0,o),Cout:[0,r,"s"]}}},initialValue:(o,{numBits:n})=>({s:U(!1,n),cout:!1})}),ml=class extends Fe{constructor(e,r,i){super(e,ao.with(r),i);this.numBits=r.numBits}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits===ao.aults.bits?void 0:this.numBits})}makeTooltip(){let e=w.Components.AdderArray.tooltip;return ee(e.title.expand({numBits:this.numBits}),Q(W(e.desc)))}doRecalcValue(){let e=this.inputValues(this.inputs.A),r=this.inputValues(this.inputs.B),i=this.inputs.Cin.value;return Pi(e,r,i)}propagateValue(e){this.outputValues(this.outputs.S,e.s),this.outputs.Cout.value=e.cout}doDraw(e,r){this.doDrawDefault(e,r,i=>{e.font="bold 25px sans-serif",e.fillStyle=oe,e.textAlign="center",e.textBaseline="middle",e.fillText("+",...i.rotatePoint(this.posX-4,this.posY))})}makeComponentSpecificContextMenuItems(){return[this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)]}};c(ml,"AdderArray");ao.impl=ml;var Ms=ge(He());var _r=ge(He());var Rs=class extends Fe{constructor(e,r,i){var s;super(e,r,i);this._name=(s=i==null?void 0:i.name)!=null?s:void 0}toJSONBase(){return j(L({},super.toJSONBase()),{name:this._name})}isOver(e,r){return this.numBits===1?xr(e,r,this.posX,this.posY)<$n/2:Hu(this.posX,this.posY,this.width,this.height,e,r)}get allowsForcedOutputs(){return!1}get name(){return this._name}doRecalcValue(){return this.value}propagateValue(e){this.outputValues(this.outputs.Out,e)}shouldDrawBorder(){return!0}doDraw(e,r){this.numBits===1?this.doDrawSingle(e,r,this.outputs.Out[0]):this.doDrawMulti(e,r,this.outputs.Out)}doDrawSingle(e,r,i){de(e,i,this.posX+8,this.posY);let s=this.parent.editor.options.hideInputColors?O:i.value,a=this.shouldDrawBorder();if(a){r.isMouseOver&&this.parent.mode!==0?(e.strokeStyle=r.borderColor,e.fillStyle=r.borderColor):(e.strokeStyle=oe,e.fillStyle=oe),e.lineWidth=3,e.beginPath();let l=this.posX+$n/2-1,p=this.posX+$n/2+5,d=6.75;Lo(e,l,this.posY+d,p,this.posY,l,this.posY-d),e.fill(),e.stroke(),e.fillStyle=Vt(s),e.lineWidth=4,e.beginPath(),On(e,this.posX,this.posY,$n),e.fill(),e.stroke()}r.inNonTransformedFrame(u=>{this._name!==void 0&&Fo(e,u,this._name,pt(s),this,!1);let l=a?void 0:e.fillStyle=oe;il(e,s,this,{fillStyle:l})})}doDrawMulti(e,r,i){let s=this.bounds(),{left:a,top:u,width:l,right:p}=s,d=s.outline(e);e.fillStyle=Je,e.fill(d);for(let C of i)de(e,C,p+3,C.posYInParentTransform,!0);let h=this.parent.editor.options.hideInputColors?U(O,this.numBits):this.value,m=r.isMouseOver&&this.parent.mode!==0;e.strokeStyle=m?r.borderColor:oe,e.lineWidth=1;let f=at(this.numBits)?z:2*z;for(let C=0;C<this.numBits;C++){let D=u+C*f;e.fillStyle=Vt(h[C]),e.beginPath(),e.rect(a,D,l,f),e.fill(),e.stroke()}e.lineWidth=3,e.stroke(d),r.inNonTransformedFrame(C=>{if(this._name!==void 0){let D=h.map(pt).reverse().join("");Fo(e,C,this._name,D,this,!1)}for(let D=0;D<this.numBits;D++){let b=u+f/2+D*f;Mi(e,h[D],...C.rotatePoint(this.posX,b),{small:at(this.numBits)})}})}autoConnected(e){if(e.length!==1)return;let[r,i,s]=e[0];if(s instanceof Bo&&(s.prefersSpike&&this.doSetIsPushButton(!0),this._name===void 0&&!Po(s.shortName)&&this.doSetName(s.shortName)),r.orient==="e")switch(ie.add(i.orient,s.orient)){case"w":return;case"e":this.doSetOrient("w"),this.setPosition(this.posX+z*6,this.posY,!1);return;case"s":this.doSetOrient("n"),this.setPosition(this.posX+z*3,this.posY+z*3,!1);return;case"n":this.doSetOrient("s"),this.setPosition(this.posX+z*3,this.posY-z*3,!1);return}}doSetIsPushButton(e){}doSetName(e){this._name=e,this.setNeedsRedraw("name changed")}makeComponentSpecificContextMenuItems(){return[["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};c(Rs,"InputBase");var Jt=Oe("in",!1,!0,{variantName:({bits:o})=>`in-${o}`,idPrefix:"in",button:{imgWidth:32},repr:{bits:P(_r.number),val:P(_r.union([To,_r.string,_r.array(To)])),isPushButton:P(_r.boolean),isConstant:P(_r.boolean),name:qt},valueDefaults:{isPushButton:!1,isConstant:!1},params:{bits:Ee(1,[1,2,3,4,8,16,32])},validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>{if(o===1){let n=$n/z;return{gridWidth:n,gridHeight:n}}return{gridWidth:2,gridHeight:at(o)?o:2*o}},makeNodes:({numBits:o})=>({outs:{Out:fe("e",o===1?3:2,0,o)}}),initialValue:(o,{numBits:n})=>{let e=c(()=>U(!1,n),"allFalse");if(o===void 0)return e();let r;return(r=o.val)!==void 0?me(r)?vi(r.map(i=>Fr(i)),n,!1):Un(r)?U(Fr(r),n):r.length===0?e():vi(Array.from(r).reverse().map(i=>ep(i)),n,!1):e()}}),uo=class extends Rs{constructor(e,r,i){var s,a;super(e,Jt.with(r),i);this.numBits=r.numBits,this._isPushButton=(s=i==null?void 0:i.isPushButton)!=null?s:Jt.aults.isPushButton,this._isConstant=(a=i==null?void 0:i.isConstant)!=null?a:Jt.aults.isConstant}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits===Jt.aults.bits?void 0:this.numBits,val:this.contentRepr(),isPushButton:this._isPushButton!==Jt.aults.isPushButton?this._isPushButton:void 0,isConstant:this._isConstant!==Jt.aults.isConstant?this._isConstant:void 0})}get isConstant(){return this._isConstant}contentRepr(){if(this.numBits===1){let i=this.value[0];return i===!1?void 0:pt(i)}let e=this.value,r=!1;for(let i=0;i<this.numBits;i++)if(e[i]!==!1){r=!0;break}if(r)return this.value.map(pt).reverse().join("")}cursorWhenMouseover(e){var i,s;let r=this.parent.mode;return r===0?"not-allowed":(i=e==null?void 0:e.ctrlKey)!=null&&i&&r>=2?"context-menu":(s=e==null?void 0:e.altKey)!=null&&s&&r>=3?"copy":this._isConstant?r>=3&&!this.lockPos?"grab":void 0:"pointer"}makeTooltip(){let e=w.Components.Input.tooltip;return ee(void 0,Q(e.title.expand({numBits:this.numBits})))}get isLinkedToSomeClock(){return this.outputs._all.some(e=>e.outgoingWires.some(r=>r.endNode.isClock))}get isPushButton(){return this._isPushButton}shouldDrawBorder(){return!this._isConstant}mouseClicked(e){let r;if((r=super.mouseClicked(e)).isChange)return r;if(this.parent.mode===0||this._isPushButton||this._isConstant)return ae.NoChange;let i=this.clickedBitIndex(e);if(i===-1)return ae.SimpleChange;let s=e.altKey,a=c(()=>(this.doSetValueChangingBit(i,x4(this.value[i],this.parent.mode,s)),!0),"doChange");return a(),ae.RepeatableChange(a)}mouseDown(e){return this.trySetPushButtonBit(!0,e),super.mouseDown(e)}mouseUp(e){let r=super.mouseUp(e);return this.trySetPushButtonBit(!1,e),r}clickedBitIndex(e){let r=this.unrotatedHeight,i=this.parent.editor.offsetXYForComponent(e,this)[1]-this.posY+r/2,s=Math.floor(i*this.numBits/r);return s>=0&&s<this.numBits?s:-1}trySetPushButtonBit(e,r){let i;this.parent.mode!==0&&this._isPushButton&&!this._isConstant&&this.parent.editor.eventMgr.currentSelectionEmpty()&&(i=this.clickedBitIndex(r))!==-1&&this.doSetValueChangingBit(i,e)}doSetValueChangingBit(e,r){let i=[...this.value];i[e]=r,this.doSetValue(i)}doSetIsPushButton(e){this._isPushButton=e,e&&this.doSetValue(U(!1,this.numBits))}doSetIsConstant(e){this._isConstant=e,this.setNeedsRedraw("constant changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.Input.contextMenu,r=c((s,a)=>{let u=this._isPushButton===a,l=u?"check":"none",p=u?()=>{}:()=>this.doSetIsPushButton(a);return T.item(l,s,p)},"makeItemBehaveAs"),i=[["mid",r(e.ToggleButton,!1)],["mid",r(e.PushButton,!0)],["mid",T.sep()],this.makeChangeParamsContextMenuItem("outputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),["mid",T.sep()]];if(this.numBits===1){let s=c(()=>{let u=this._isConstant?"check":"none",l=c(()=>this.doSetIsConstant(!this._isConstant),"action");return T.item(u,e.LockValue+` (${pt(this.value[0])})`,l)},"makeToggleConstantItem"),a=T.item("timer",e.ReplaceWithClock,()=>{this.replaceWithComponent(xn.make(this.parent))});i.push(["mid",s()],["mid",T.sep()],["mid",a],["mid",T.sep()])}return i.push(...super.makeComponentSpecificContextMenuItems()),i}};c(uo,"Input");Jt.impl=uo;function x4(o,n,e){switch(o){case!0:return n>=4&&e?O:!1;case!1:return n>=4&&e?O:!0;case O:return n>=4?e?Qe:!1:O;case Qe:return n>=4?e?O:!1:Qe}}c(x4,"nextValue");var xn=ke("clock",{idPrefix:"clock",button:{imgWidth:50},repr:{name:qt,period:Ms.number,dutycycle:P(Ms.number),phase:P(Ms.number),showLabel:P(Ms.boolean)},valueDefaults:{period:2e3,dutycycle:50,phase:0,showLabel:!0},size:{gridWidth:2,gridHeight:2},makeNodes:()=>({outs:{Out:[[3,0,"e"]]}}),initialValue:()=>[!1]}),Is=class extends Rs{constructor(e,r){var i,s;super(e,[xn,void 0],r);this._period=(i=r==null?void 0:r.period)!=null?i:xn.aults.period,this._dutycycle=(r==null?void 0:r.dutycycle)!==void 0?r.dutycycle%100:xn.aults.dutycycle,this._phase=(r==null?void 0:r.phase)!==void 0?r.phase%this._period:xn.aults.phase,this._showLabel=(s=r==null?void 0:r.showLabel)!=null?s:xn.aults.showLabel,this.tickCallback()}get numBits(){return 1}toJSON(){return j(L({},this.toJSONBase()),{period:this._period,dutycycle:this._dutycycle===xn.aults.dutycycle?void 0:this._dutycycle,phase:this._phase===xn.aults.phase?void 0:this._phase,showLabel:this._showLabel===xn.aults.showLabel?void 0:this._showLabel})}toStringDetails(){return`period=${this._period} duty=${this._dutycycle} phase=${this._phase}`}makeTooltip(){let e=w.Components.Clock.tooltip;return ee(e.title,Q(e.period[0]+this._period+e.period[1],cp,e.dutycycle[0]+this._dutycycle+e.dutycycle[1],this._phase===0?Lt:Q(cp,e.phase[0]+this._phase+e.phase[1])))}currentClockValue(e){let i=(e-this._phase)%this._period;i<0&&(i+=this._period);let s=this._period*this._dutycycle/100,a=this._period-s,u,l;i<s?(u=!0,l=i):(u=!1,l=i-s);let d=e-l+(u?s:a);return[u,d]}tickCallback(){let e=this.parent.editor.timeline,[r,i]=this.currentClockValue(e.logicalTime());if(this.doSetValue([r]),this.state!==2){let s=w.Components.Clock.timeline,a=r?s.NextFallingEdge:s.NextRisingEdge;e.scheduleAt(i,()=>{this.tickCallback()},a,!0)}}doDraw(e,r){super.doDraw(e,r),this._showLabel&&r.inNonTransformedFrame(()=>{let a=this.orient==="s"?-36:26;e.strokeStyle=oe,e.lineWidth=1;let u=this.posX-40/2,l=u+40*this._phase/this._period,p=l+40*this._dutycycle/100,d=this.posX+40/2,h=this.posY+a+10/2,m=this.posY+a-10/2;e.beginPath(),e.moveTo(u,h),e.lineTo(l,h),e.lineTo(l,m),e.lineTo(p,m),e.lineTo(p,h),e.lineTo(d,h),e.stroke(),e.fillStyle=oe,e.textAlign="center",e.font="10px sans-serif";let f=this._period>=1e3?this._period/1e3+" s":this._period+" ms";e.fillText(f,this.posX,h+8)})}doSetPeriod(e){this._period=e,this.setNeedsRedraw("period changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.Clock.contextMenu,r=[[10,"10 ms (100 Hz)"],[50,"50 ms (20 Hz)"],[100,"100 ms (10 Hz)"],[125,"125 ms (8 Hz)"],[250,"250 ms (4 Hz)"],[500,"500 ms (2 Hz)"],[1e3,"1 s (1 Hz)"],[2e3,"2 s (0.5 Hz)"],[4e3,"4 s (0.25 Hz)"],[8e3,"8 s (0.125 Hz)"],[16e3,"16 s (0.0625 Hz)"]],i=!1,s=c(p=>{let[d,h]=p,f=this._period===d?"check":"none";return T.item(f,h,()=>this.doSetPeriod(d))},"makeItemSetPeriod"),a=r.map(s),u=T.item(i?"none":"check",e.CustomPeriod+(i?"\u2026":" ("+this._period+" ms, "+Math.round(1e6/this._period)/1e3+" Hz)\u2026"),()=>this.runSetPeriodDialog()),l=T.item("replace",e.ReplaceWithInput,()=>{this.replaceWithComponent(Jt.make(this.parent,{bits:1}))});return[...super.makeComponentSpecificContextMenuItems(),["mid",T.sep()],["mid",T.submenu("timer",e.Period,[...a,T.sep(),u])],["mid",T.sep()],["mid",l]]}runSetPeriodDialog(){let e=w.Components.Clock.contextMenu,r=window.prompt(e.SetPeriodMillis,String(this._period));if(r===null||r.length===0)return;let i=parseInt(r);if(isNaN(i)||i<1){window.alert(e.InvalidPeriod),this.runSetPeriodDialog();return}this.doSetPeriod(i)}};c(Is,"Clock");xn.impl=Is;var Os=ke("comp",{idPrefix:"comp",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:5,gridHeight:7},makeNodes:()=>({ins:{A:[-4,2,"w","A",{hasTriangle:!0}],B:[-4,-2,"w","B",{hasTriangle:!0}],E:[0,5,"s","E",{hasTriangle:!0}]},outs:{G:[4,0,"e",">",{hasTriangle:!0,labelName:">"}],Eq:[0,-5,"n","=",{hasTriangle:!0,labelName:"="}]}}),initialValue:()=>({g:!1,eq:!1})}),gl=class extends Re{constructor(n,e){super(n,Os,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=w.Components.Comparator.tooltip;return ee(n.title,Q(W(n.desc)))}doRecalcValue(){let n=this.inputs.A.value,e=this.inputs.B.value,r=this.inputs.E.value;if(G(n)||G(e)||G(r)||ye(n)||ye(e)||ye(r))return{g:O,eq:O};if(+r==0)return{g:!1,eq:!1};let i=+n>+e,s=+n==+e;return{g:i,eq:s}}propagateValue(n){this.outputs.G.value=n.g,this.outputs.Eq.value=n.eq}doDraw(n,e){this.doDrawDefault(n,e,()=>{n.fillStyle=oe,n.font="bold 11px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText("CMP",this.posX,this.posY)})}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};c(gl,"Comparator");Os.impl=gl;var Mm=ge(He());var lo=Oe("cnot-array",!0,!0,{variantName:({bits:o})=>`cnot-array-${o}`,idPrefix:"cnot",button:{imgWidth:50},repr:{bits:P(Mm.number)},valueDefaults:{},params:{bits:Ee(4,[2,4,8,16])},validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>({gridWidth:4,gridHeight:8+Math.max(0,o-8)}),makeNodes:({numBits:o,gridHeight:n})=>({ins:{In:fe("w",-3,0,o),S:[0,-(n/2+1),"n"]},outs:{Out:fe("e",3,0,o)}}),initialValue:(o,{numBits:n})=>U(!1,n)}),Dl=class extends Fe{constructor(e,r,i){super(e,lo.with(r),i);this.numBits=r.numBits}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits===lo.aults.bits?void 0:this.numBits})}makeTooltip(){let e=w.Components.ControlledInverter.tooltip;return ee(e.title,Q(W(e.desc)))}doRecalcValue(){let e=this.inputValues(this.inputs.In),r=this.inputs.S.value;return G(r)||ye(r)?U(O,this.numBits):r?e.map(xe.invert):e}propagateValue(e){this.outputValues(this.outputs.Out,e)}doDraw(e,r){this.doDrawDefault(e,r,{skipLabels:!0,drawInside:({top:i,left:s,right:a})=>{let u=this.inputs.S.value;e.lineWidth=2,e.strokeStyle=Vt(u),e.beginPath(),e.moveTo(this.posX,i),e.lineTo(this.posX,this.posY-4),e.stroke(),e.strokeStyle=u===!0?oe:mt,e.beginPath(),e.moveTo(s+12,this.posY-8),e.lineTo(a-13,this.posY),e.lineTo(s+12,this.posY+8),e.closePath(),e.stroke(),e.beginPath(),On(e,a-10,this.posY,5),e.stroke()}})}makeComponentSpecificContextMenuItems(){return[this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)]}};c(Dl,"ControlledInverter");lo.impl=Dl;var Bs=ge(He());var Cl=ge(He());var rr=xp({button:{imgWidth:50},repr:{state:P(To),showContent:P(Cl.boolean)},valueDefaults:{state:!1,showContent:!0},size:{gridWidth:5,gridHeight:7},makeNodes:()=>{let o=w.Components.Generic;return{outs:{Q:[4,-2,"e",o.OutputQDesc],Q\u0305:[4,2,"e",o.OutputQBarDesc]}}},initialValue:(o,n)=>{if(o===void 0)return[!1,!0];let e=o.state===void 0?n.state:Fr(o.state);return[e,xe.invert(e)]}}),Qt=class extends Re{constructor(e,r,i){var s;super(e,r,i);this._isInInvalidState=!1;this._showContent=(s=i==null?void 0:i.showContent)!=null?s:rr.aults.showContent}toJSONBase(){let e=this.value[0];return j(L({},super.toJSONBase()),{state:e!==rr.aults.state?pt(e):void 0,showContent:this._showContent!==rr.aults.showContent?this._showContent:void 0})}propagateValue(e){this.outputs.Q.value=e[0],this.outputs.Q\u0305.value=e[1]}doSetShowContent(e){this._showContent=e,this.setNeedsRedraw("show content changed")}doDraw(e,r){this.doDrawDefault(e,r,{background:this._isInInvalidState?xs:void 0,drawLabels:()=>{this._showContent&&!this.parent.editor.options.hideMemoryContent&&Qt.drawStoredValue(e,this.value[0],this.posX,this.posY,26,!1)}})}static drawStoredValueFrame(e,r,i,s,a,u){u&&([s,a]=[a,s]),e.strokeStyle=oe,e.lineWidth=2,e.beginPath(),e.rect(r-s/2,i-a/2,s,a),e.fill(),e.stroke()}static drawStoredValue(e,r,i,s,a,u){e.fillStyle=Vt(r),Qt.drawStoredValueFrame(e,i,s,20,a,u),Mi(e,r,i,s,{small:a<18})}};c(Qt,"FlipflopOrLatch");var Sr=xp({button:rr.button,repr:j(L({},rr.repr),{trigger:P(Cl.keyof(Z))}),valueDefaults:j(L({},rr.valueDefaults),{trigger:Z.rising}),size:rr.size,makeNodes:o=>{let n=rr.makeNodes(),e=w.Components.Generic;return{ins:{Clock:[-4,o,"w",e.InputClockDesc,{isClock:!0}],Pre:[0,-4,"n",e.InputPresetDesc,{prefersSpike:!0}],Clr:[0,4,"s",e.InputClearDesc,{prefersSpike:!0}]},outs:n.outs}},initialValue:rr.initialValue}),gt=class extends Qt{constructor(e,r,i){var s;super(e,r,i);this._lastClock=O;this._trigger=(s=i==null?void 0:i.trigger)!=null?s:Sr.aults.trigger}toJSONBase(){return j(L({},super.toJSONBase()),{trigger:this._trigger!==Sr.aults.trigger?this._trigger:void 0})}get trigger(){return this._trigger}static doRecalcValueForSyncComponent(e,r,i,s,a){return s===!0?a===!0?{isInInvalidState:!0,newState:e.makeInvalidState()}:{isInInvalidState:!1,newState:e.makeStateFromMainValue(!0)}:a===!0?{isInInvalidState:!1,newState:e.makeStateFromMainValue(!1)}:gt.isClockTrigger(e.trigger,r,i)?{isInInvalidState:!1,newState:e.makeStateAfterClock()}:{isInInvalidState:!1,newState:e.value}}static isClockTrigger(e,r,i){return e===Z.rising&&r===!1&&i===!0||e===Z.falling&&r===!0&&i===!1}doRecalcValue(){let e=this._lastClock,r=this._lastClock=this.inputs.Clock.value,{isInInvalidState:i,newState:s}=gt.doRecalcValueForSyncComponent(this,e,r,this.inputs.Pre.value,this.inputs.Clr.value);return this._isInInvalidState=i,s}makeInvalidState(){return[!1,!1]}makeStateFromMainValue(e){return[e,xe.invert(e)]}makeStateAfterClock(){return this.makeStateFromMainValue(xe.filterHighZ(this.doRecalcValueAfterClock()))}doSetTrigger(e){this._trigger=e,this.setNeedsRedraw("trigger changed")}makeComponentSpecificContextMenuItems(){let e=this._showContent?"check":"none",r=T.item(e,w.Components.Generic.contextMenu.ShowContent,()=>this.doSetShowContent(!this._showContent));return[...co(this._trigger,this.doSetTrigger.bind(this)),["mid",T.sep()],["mid",r],...this.makeForceOutputsContextMenuItem(!0)]}};c(gt,"Flipflop");function co(o,n){let e=w.Components.Generic.contextMenu,r=c((i,s)=>{let a=o===i,u=a?"check":"none",l=e.TriggerOn+" "+s,p=a?()=>{}:()=>n(i);return T.item(u,l,p)},"makeTriggerItem");return[["mid",r(Z.rising,e.TriggerRisingEdge)],["mid",r(Z.falling,e.TriggerFallingEdge)]]}c(co,"makeTriggerItems");var Ar=Oe("counter",!0,!0,{variantName:({bits:o})=>`counter-${o}`,idPrefix:"counter",button:{imgWidth:50},repr:{bits:P(Bs.number),count:P(Bs.number),trigger:P(Bs.keyof(Z)),displayRadix:P(Rh(Bs.number))},valueDefaults:{trigger:Z.rising,displayRadix:10},params:{bits:Ee(4,[2,3,4,7,8,16])},validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>({gridWidth:o<=6?5:o<=8?6:7,gridHeight:Math.max(11,1+(o+1)*(at(o)?1:2))}),makeNodes:({numBits:o,gridWidth:n,gridHeight:e})=>{let r=w.Components.Generic,i=1+n/2,s=fe("e",i,-1,o),a=s[o-1][1],u=a-s[o-2][1],l=a+u,p=(e+1)/2;return{ins:{Clock:[-i,l,"w",r.InputClockDesc,{isClock:!0}],Clr:[0,p,"s",r.InputClearDesc,{prefersSpike:!0}]},outs:{Q:s,V:[i,l,"e","V (oVerflow)"]}}},initialValue:(o,{numBits:n})=>o===void 0||o.count===void 0?wn.emptyValue(n):[wn.decimalToNBits(o.count,n),!1]}),wn=class extends Fe{constructor(e,r,i){var s;super(e,Ar.with(r),i);this._lastClock=O;this.numBits=r.numBits,this._trigger=(s=i==null?void 0:i.trigger)!=null?s:Ar.aults.trigger,this._displayRadix=(i==null?void 0:i.displayRadix)===void 0?Ar.aults.displayRadix:i.displayRadix===null?void 0:i.displayRadix}static emptyValue(e){return[U(!1,e),!1]}static decimalToNBits(e,r){let i=e.toString(2).padStart(r,"0"),s=U(!1,r);for(let a=0;a<r;a++)s[a]=i[r-a-1]==="1";return s}toJSON(){let[e,r]=De(this.value[0],!1),i=G(r)?0:r,s=this._displayRadix===void 0?null:this._displayRadix;return j(L({},this.toJSONBase()),{bits:this.numBits===Ar.aults.bits?void 0:this.numBits,count:i===0?void 0:i,trigger:this._trigger!==Ar.aults.trigger?this._trigger:void 0,displayRadix:s!==Ar.aults.displayRadix?s:void 0})}get trigger(){return this._trigger}makeTooltip(){let e=w.Components.Counter.tooltip;return ee(e.title,Q(W(e.desc)))}doRecalcValue(){if(this.inputs.Clr.value===!0)return wn.emptyValue(this.numBits);let r=this._lastClock,i=this._lastClock=this.inputs.Clock.value,s=this._trigger===Z.rising;if(gt.isClockTrigger(this._trigger,r,i)){let[a,u]=De(this.value[0],!1);if(G(u))return[U(O,this.numBits),O];let l=u+1;return l>=Math.pow(2,this.numBits)?[U(!1,this.numBits),s]:[wn.decimalToNBits(l,this.numBits),!s]}else return[this.value[0],!s]}propagateValue(e){let[r,i]=e;this.outputValues(this.outputs.Q,r),this.outputs.V.value=i}doSetTrigger(e){this._trigger=e,this.setNeedsRedraw("trigger changed")}doDraw(e,r){this.doDrawDefault(e,r,(i,{width:s})=>{if(this._displayRadix!==void 0){e.font="bold 20px sans-serif";let[a,u]=De(this.value[0],!1),l=wr(u,this._displayRadix,this.numBits,!1),p=10,d=i.rotatePoint(this.posX-p/2,this.outputs.Q.group.posYInParentTransform);e.fillStyle=yr;let h=s-p-12;Qt.drawStoredValueFrame(e,...d,h,28,!1),e.textAlign="center",e.textBaseline="middle",e.fillStyle=so,e.fillText(l,...d)}})}doSetDisplayRadix(e){this._displayRadix=e,this.setNeedsRedraw("display radix changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.Counter.contextMenu,r=c((i,s)=>{let a=this._displayRadix===i?"check":"none",u=e.DisplayTempl.expand({desc:s}),l=c(()=>this.doSetDisplayRadix(i),"action");return T.item(a,u,l)},"makeItemShowRadix");return[...co(this._trigger,this.doSetTrigger.bind(this)),["mid",T.sep()],["mid",r(void 0,e.DisplayNone)],["mid",r(10,e.DisplayDecimal)],["mid",r(16,e.DisplayHex)],["mid",T.sep()],this.makeChangeParamsContextMenuItem("outputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)]}};c(wn,"Counter");Ar.impl=wn;var _n=ge(He()),s2=ge(o2());var Tl=class{constructor(){this._isInInvalidState=!1;this.outputQ=!1,this.outputQ\u0305=!0}propagateInternalValue(n){this.outputQ=n[0],this.outputQ\u0305=n[1]}getInternalOutputsValue(){return[this.outputQ,this.outputQ\u0305]}};c(Tl,"InternalFlipflopOrLatch");var ir=class extends Tl{constructor(e){super();this._lastClock=O;this.trigger=e,this.value=super.getInternalOutputsValue(),this.inputD=!1,this.inputClock=!1,this.inputClr=!1,this.inputPre=!1}static doRecalcInternalValueForInternalSyncComponent(e,r,i,s,a){return s===!0?a===!0?{isInInvalidState:!0,newState:e.makeInternalInvalidState()}:{isInInvalidState:!1,newState:e.makeInternalStateFromMainValue(!0)}:a===!0?{isInInvalidState:!1,newState:e.makeInternalStateFromMainValue(!1)}:ir.isInternalClockTrigger(e.trigger,r,i)?{isInInvalidState:!1,newState:e.makeInternalStateAfterClock()}:{isInInvalidState:!1,newState:e.value}}static isInternalClockTrigger(e,r,i){return e===Z.rising&&r===!1&&i===!0||e===Z.falling&&r===!0&&i===!1}doRecalcInternalValue(){let e=this._lastClock,r=this._lastClock=this.inputClock,{isInInvalidState:i,newState:s}=ir.doRecalcInternalValueForInternalSyncComponent(this,e,r,this.inputPre,this.inputClr);return this._isInInvalidState=i,s}doSetInternalValue(e,r=!1){let i=this.value;(r||!Dr(e,i))&&(this.value=e,this.propagateInternalValue(e))}recalcInternalValue(){this.doSetInternalValue(this.doRecalcInternalValue(),!1)}makeInternalInvalidState(){return[!1,!1]}makeInternalStateFromMainValue(e){return[e,xe.invert(e)]}makeInternalStateAfterClock(){return this.makeInternalStateFromMainValue(this.doRecalcValueAfterClock())}getInternalInputValue(e){return e}static setInternalInputValue(e,r){e=r}doRecalcInternalValueIntoDoRecalcValue(){let e=this._lastClock,r=this._lastClock=this.inputClock,{isInInvalidState:i,newState:s}=ir.doRecalcInternalValueForInternalSyncComponent(this,e,r,this.inputPre,this.inputClr);this._isInInvalidState=i,this.propagateInternalValue(s)}};c(ir,"InternalFlipflop");var cn=class extends ir{constructor(n){super(n)}doRecalcValueAfterClock(){return xe.filterHighZ(this.inputD)}};c(cn,"InternalFlipflopD");var Rl=class{constructor(n,e){this._isInInvalidState=!1;this._lastClock=O;this.numBits=n,this.inputClock=!1,this.inputClr=!1,this.inputPre=!1,this.outputsQ=U(!1,this.numBits),this.trigger=e,this._lastClock=!1}makeInternalInvalidState(){return U(!1,this.numBits)}makeInternalStateFromMainValue(n){return U(n,this.numBits)}internalOutputs(){return this.outputsQ}propagateInternalValue(n){this.outputsQ=n}};c(Rl,"InternalRegisterBase");var dt=class extends Rl{constructor(e,r){super(e,r);this.value=super.internalOutputs(),this.inputInc=!1,this.inputDec=!1,this._saturating=!1,this.inputsD=U(!1,this.numBits)}getInternalValueFromArray(e){let r="",i=!1,s=u=>r=u+r;for(let u of e)G(u)||ye(u)?(i=!0,s(u)):s(+u);return i?O:parseInt(r,2)}makeInternalStateAfterClock(){let e=this.inputInc,r=this.inputDec;if(G(e)||G(r)||ye(e)||ye(r))return U(!1,this.numBits);if(e||r){if(e&&r)return this.value;let[i,s]=De(this.value,!1);if(G(s))return U(O,this.numBits);let a;if(e){if(a=s+1,a>=Cn(2,this.numBits))return this._saturating?U(!0,this.numBits):U(!1,this.numBits)}else if(a=s-1,a<0)return this._saturating?U(!1,this.numBits):U(!0,this.numBits);return wn.decimalToNBits(a,this.numBits)}return this.inputsD.map(xe.filterHighZ)}doRecalcInternalValue(){let e=this._lastClock,r=this._lastClock=this.inputClock,{isInInvalidState:i,newState:s}=ir.doRecalcInternalValueForInternalSyncComponent(this,e,r,this.inputPre,this.inputClr);return this._isInInvalidState=i,s}doSetInternalValue(e,r=!1){let i=this.value;(r||!Dr(e,i))&&(this.value=e,this.propagateInternalValue(e))}recalcInternalValue(){this.doSetInternalValue(this.doRecalcInternalValue(),!1)}isInternalClockTrigger(e,r){return this.trigger===Z.rising&&e===!1&&r===!0||this.trigger===Z.falling&&e===!0&&r===!1}getInputValue(e){return e}static setInputValues(e,r,i=!1){let s=e.length;if(r.length!==s)throw new Error(`inputValues: expected ${s} values, got ${r.length}`);for(let a=0;a<s;a++){let u=i?s-a-1:a;e[a]=r[u]}}getInternalInputsValues(e){return e}setInternalInputsValues(e,r,i=!1){let s=e.length;if(r.length!==s)throw new Error(`inputValues: expected ${s} values, got ${r.length}`);for(let a=0;a<s;a++){let u=i?s-a-1:a;e[a]=r[u]}}doRecalcInternalValueIntoDoRecalcValue(){let e=this._lastClock,r=this._lastClock=this.inputClock,{isInInvalidState:i,newState:s}=ir.doRecalcInternalValueForInternalSyncComponent(this,e,r,this.inputPre,this.inputClr);this._isInInvalidState=i,this.propagateInternalValue(s)}};c(dt,"InternalRegister");var La=class{constructor(n,e,r){this._lastClock=O;this.numBits=n,this.outputsQ=U(!1,this.numBits),this.outputV=!1,this.trigger=e,this._displayRadix=r,this.inputClr=!1,this.inputClock=!1,this.value=[this.outputsQ,this.outputV]}doRecalcInternalValue(){if(this.inputClr===!0)return[U(!1,this.numBits),!1];let e=this._lastClock,r=this._lastClock=this.inputClock,i=this.trigger===Z.rising;if(this.isInternalClockTrigger(e,r)){let[s,a]=De(this.value[0],!1);if(G(a))return[U(O,this.numBits),O];let u=a+1;return u>=Math.pow(2,this.numBits)?[U(!1,this.numBits),i]:[wn.decimalToNBits(u,this.numBits),!i]}else return[this.value[0],!i]}propagateInternalValue(n){let[e,r]=n;this.outputsQ=e,this.outputV=r}doSetInternalValue(n,e=!1){let r=this.value;(e||!Dr(n,r))&&(this.value=n,this.propagateInternalValue(n))}recalcInternalValue(){this.doSetInternalValue(this.doRecalcInternalValue(),!1)}isInternalClockTrigger(n,e){return this.trigger===Z.rising&&n===!1&&e===!0||this.trigger===Z.falling&&n===!0&&e===!1}};c(La,"InternalCounter");var Ni=class{constructor(n,e){this.numDataBits=n,this.numAddressBits=e,this.numWords=Math.pow(2,e),this.inputsAddr=U(!1,this.numAddressBits),this.outputsQ=U(!1,this.numDataBits)}static defaultInternalValue(n,e){return Ni.internalValueFilledWith(!1,n,e)}static internalValueFilledWith(n,e,r){let i=new Array(e);for(let a=0;a<e;a++)i[a]=U(n,r);let s=U(n,r);return{mem:i,out:s}}static internalContentsFromString(n,e,r){let i=me(n)?n:n.split(/\s+/),s=new Array(r);for(let a=0;a<r;a++){let u=a>=i.length?U(!1,e):fs(i[a],e);s[a]=u}return s}currentAddress(){let n=this.inputsAddr,[e,r]=De(n,!1);return r}internalOutputs(){return this.outputsQ}propagateInternalValue(n){this.outputsQ=n.out}};c(Ni,"InternalROMRAMBase");var po=class extends Ni{constructor(e,r){super(e,r);this._lastClock=O;this.inputClock=!1,this.inputWE=!1,this.inputClr=!1,this.inputsD=U(!1,this.numDataBits),this._trigger=Z.falling,this.value=po.defaultInternalValue(this.numWords,this.numDataBits)}get trigger(){return this._trigger}doSetTrigger(e){this._trigger=e}recalcInternalValue(){let e=this.inputClr,r=this.numWords;if(e===!0)return po.internalValueFilledWith(!1,r,this.numDataBits);let i=this.currentAddress(),s=this._lastClock,a=this._lastClock=this.inputClock,u=this.value;if(this.inputWE!==!0||!gt.isClockTrigger(this.trigger,s,a)){let h=G(i)?U(O,this.numDataBits):u.mem[i];return{mem:u.mem,out:h}}if(G(i))return po.internalValueFilledWith(O,r,this.numDataBits);let p=this.inputsD.map(xe.filterHighZ),d=new Array(r);for(let h=0;h<r;h++)h===i?d[h]=p:d[h]=u.mem[h];return{mem:d,out:p}}};c(po,"InternalRAM");var ar=["NOP","STA","LDA","LDK","JMD","JMU","BRZ","BRC","ADD","SUB","JSR","RET","OR_","AND","NOT","XOR"],q4=["JMD","JSR"],Q4=["BRZ","BRC"],$4=q4.concat(Q4),X4=["JMU"],xR=$4.concat(X4),j4={shortName(o){return w.Components.CPU[o][0]},fullName(o){return w.Components.CPU[o][1]}},sr=["FETCH","DECODE","EXECUTE","WRITEBACK"],Y4={shortName(o){return w.Components.CPU.StageName[o][0]},fullName(o){return w.Components.CPU.StageName[o][1]}},a2={green:"green",blue:"blue",orange:"orange",black:"black",grey:"grey"},wR=Object.keys(a2),Xp={color:function(o){let n=w.Components.CPU.StageColor[o];return a2[n]}},$o={button:{imgWidth:40},repr:{instructionAddressBits:P(_n.number),dataBits:P(_n.number),dataAddressBits:P(_n.number),stackBits:P(_n.number),showStage:P(_n.boolean),showOpCode:P(_n.boolean),showOperands:P(_n.boolean),showClockCycle:P(_n.boolean),showStack:P(_n.boolean),addProgramRAM:P(_n.boolean),trigger:P(_n.keyof(Z))},valueDefaults:{showStage:!0,showOpCode:!0,showOperands:!0,showClockCycle:!0,showStack:!0,addProgramRAM:!1,trigger:Z.falling},params:{instructionAddressBits:Ee(4,[4,8]),dataBits:Ee(4,[4]),dataAddressBits:Ee(4,[4]),stackBits:Ee(2,[1,2,3])},validateParams:({instructionAddressBits:o,dataBits:n,dataAddressBits:e,stackBits:r})=>({numInstructionAddressBits:o,numDataBits:n,numDataAddressBits:e,numStackBits:r}),size:({numDataBits:o})=>({gridWidth:32,gridHeight:32}),makeNodes:({numInstructionAddressBits:o,numDataBits:n,numDataAddressBits:e,numStackBits:r,gridWidth:i,gridHeight:s})=>{let a=s/2,u=-a,l=i/2,p=-l,d=l+1.5,h=a+1.5,m=a/2,f=l/2;return{ins:{SequentialExecution:[-15,h,"s","Sequential Execution"],Pipeline:[-13,h,"s","Pipeline"],RunStop:[-11,h,"s","Run/Stop",{prefersSpike:!0}],Reset:[-9,h,"s","Reset CPU",{prefersSpike:!0}],ManStep:[-7,h,"s","Man STEP",{prefersSpike:!0}],Speed:[-5,h,"s","Select Clock"],ClockS:[-3,h,"s","Slow Clock",{isClock:!0}],ClockF:[-1,h,"s","Fast Clock",{isClock:!0}],AddressingMode:[1,h,"s","Addressing Mode"]},outs:{InstructionAddress:Mn("n",-f,-h,o),DataAddress:Mn("n",f,-h,e),DataOut:fe("e",d,-m,n),RAMweSync:[d,-1,"e","RAM WE sync"],RAMwe:[d,1,"e","RAM WE"],ResetSync:[d,3,"e","Reset sync"],Sync:[d,5,"e","Sync"],Z:[d,7,"e","Z (Zero)"],Cout:[d,9,"e","Cout"],StackOUflow:[d,11,"e","Run state"],HaltSignal:[d,13,"e","Halt"],RunningState:[d,15,"e","Run state"]}}},initialValue:(o,n)=>{let r={instructionaddress:U(!1,n.numInstructionAddressBits),dataaddress:U(!1,n.numDataAddressBits),dataout:U(!1,n.numDataBits),ramwesync:!1,ramwe:!1,resetsync:!1,sync:!1,z:!1,cout:!1,stackouflow:!1,haltsignal:!1,runningstate:!1},i;return o===void 0?i=r:i={instructionaddress:U(!1,n.numInstructionAddressBits),dataaddress:U(!1,n.numDataAddressBits),dataout:U(!1,n.numDataBits),ramwesync:!1,ramwe:!1,resetsync:!1,sync:!1,z:!1,cout:!1,stackouflow:!1,haltsignal:!1,runningstate:!1},i}},Ml=class extends Fe{constructor(e,r,i,s){var a,u,l,p,d,h,m;super(e,r.with(i),s);this._isInInvalidState=!1;this._lastClock=O;this.numInstructionAddressBits=i.numInstructionAddressBits,this.numDataBits=i.numDataBits,this.numDataAddressBits=i.numDataAddressBits,this.numStackBits=i.numStackBits,this._opCodeOperandsInStages={FETCH:"",DECODE:"",EXECUTE:"",WRITEBACK:""},this._addressesInStages={FETCH:-1,DECODE:-1,EXECUTE:-1,WRITEBACK:-1},this._showStage=(a=s==null?void 0:s.showStage)!=null?a:lt.aults.showStage,this._showOpCode=(u=s==null?void 0:s.showOpCode)!=null?u:lt.aults.showOpCode,this._showOperands=(l=s==null?void 0:s.showOperands)!=null?l:lt.aults.showOperands,this._showClockCycle=(p=s==null?void 0:s.showClockCycle)!=null?p:lt.aults.showClockCycle,this._showStack=(d=s==null?void 0:s.showStack)!=null?d:lt.aults.showStack,this._addProgramRAM=(h=s==null?void 0:s.addProgramRAM)!=null?h:lt.aults.addProgramRAM,this._trigger=(m=s==null?void 0:s.trigger)!=null?m:lt.aults.trigger}makeInvalidState(){let r;return r={instructionaddress:U(!1,this.numInstructionAddressBits),dataaddress:U(!1,this.numDataBits),dataout:U(!1,this.numDataBits),ramwesync:!1,ramwe:!1,resetsync:!1,sync:!1,z:!1,cout:!1,stackouflow:!1,haltsignal:!1,runningstate:!1},r}makeStateFromMainValue(e){let r;return r={instructionaddress:U(e,this.numInstructionAddressBits),dataaddress:U(e,this.numDataAddressBits),dataout:U(e,this.numDataBits),ramwesync:e,ramwe:e,resetsync:e,sync:e,z:e,cout:e,stackouflow:e,haltsignal:e,runningstate:e},r}get trigger(){return this._trigger}doSetTrigger(e){this._trigger=e,this.setNeedsRedraw("trigger changed")}toJSONBase(){return j(L({instructionAddressBits:this.numInstructionAddressBits===lt.aults.instructionAddressBits?void 0:this.numInstructionAddressBits,dataBits:this.numDataBits===lt.aults.dataBits?void 0:this.numDataBits,dataAddressBits:this.numDataAddressBits===lt.aults.dataAddressBits?void 0:this.numDataAddressBits,stackBits:this.numStackBits===lt.aults.stackBits?void 0:this.numStackBits},super.toJSONBase()),{showStage:this._showStage!==lt.aults.showStage?this._showStage:void 0,showOpCode:this._showOpCode!==lt.aults.showOpCode?this._showOpCode:void 0,showOperands:this._showOperands!==lt.aults.showOperands?this._showOperands:void 0,showClockCycle:this._showClockCycle!==lt.aults.showClockCycle?this._showClockCycle:void 0,showStack:this._showStack!==lt.aults.showStack?this._showStack:void 0,addProgramRAM:this._addProgramRAM!==lt.aults.addProgramRAM?this._addProgramRAM:void 0,trigger:this._trigger!==lt.aults.trigger?this._trigger:void 0})}propagateValue(e){}doSetShowStage(e){this._showStage=e,this.setNeedsRedraw("show stage changed")}doSetShowOpCode(e){this._showOpCode=e,this.setNeedsRedraw("show opCode changed")}doSetShowOperands(e){this._showOperands=e,this.setNeedsRedraw("show operands changed")}doSetShowClockCycle(e){this._showClockCycle=e,this.setNeedsRedraw("show clockCycle changed")}doSetShowStack(e){this._showStack=e,this.setNeedsRedraw("show stack changed")}doAddProgramRAM(e){this._addProgramRAM=e,this.setNeedsRedraw("show assembler editor changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.CPU.contextMenu,r=this._showStage?"check":"none",i=T.item(r,e.toggleShowStage,()=>{this.doSetShowStage(!this._showStage),this._showOpCode&&this.doSetShowOpCode(!this._showOpCode)}),s=this._showOpCode?"check":"none",a=this._showStage?[["mid",T.item(s,e.toggleShowOpCode,()=>{this.doSetShowOpCode(!this._showOpCode)})]]:[],u=this._showOperands?"check":"none",l=!this._showStage||!this._showOpCode?[]:[["mid",T.item(u,e.toggleShowOperands,()=>{this.doSetShowOperands(!this._showOperands)})]],p=this._showClockCycle?"check":"none",d=T.item(p,e.toggleShowClockCycle,()=>{this.doSetShowClockCycle(!this._showClockCycle)}),h=this._showStack?"check":"none",m=T.item(h,e.toggleShowStack,()=>{this.doSetShowStack(!this._showStack)}),f=this._addProgramRAM?"add":"none",C=T.item(f,e.toggleAddProgramRAM,()=>{this.doAddProgramRAM(!this._addProgramRAM)});return[["mid",i],...a,...l,["mid",T.sep()],["mid",d],["mid",T.sep()],["mid",m],this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumStackBits,this.numStackBits,"stackBits"),["mid",T.sep()],this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumAddressBits,this.numInstructionAddressBits,"instructionAddressBits"),...this.makeCPUSpecificContextMenuItems(),["mid",T.sep()],...this.makeForceOutputsContextMenuItem()]}makeCPUSpecificContextMenuItems(){return[]}getInstructionParts(e,r){(e===void 0||e=="")&&(e="NOP+0");let i=e.split(/\++/);switch(r){case"opCode":return i[0];case"operands":return i[1]}}getOperandsNumberWithRadix(e,r){let i=De(e,!0)[1];return wr(i,r,e.length,!0)}allZeros(e){for(let r of e){if(G(r)||ye(r))return O;if(r===!0)return!1}return!0}innerStateRepr(e,r){let i=[];if(r){let s=0}return i}};c(Ml,"CPUBase");var lt=Oe("CPU",!0,!0,j(L({variantName:({instructionAddressBits:o})=>`CPU-${o}`,idPrefix:"CPU"},$o),{repr:j(L({},$o.repr),{instructionBits:P(_n.number)}),valueDefaults:L({},$o.valueDefaults),params:{instructionAddressBits:$o.params.instructionAddressBits,dataBits:$o.params.dataBits,dataAddressBits:$o.params.dataAddressBits,stackBits:$o.params.stackBits,instructionBits:Ee(8,[8])},validateParams:({instructionAddressBits:o,dataBits:n,dataAddressBits:e,stackBits:r,instructionBits:i})=>({numInstructionAddressBits:o,numDataBits:n,numDataAddressBits:e,numStackBits:r,numInstructionBits:i}),makeNodes:(o,n)=>{let e=$o.makeNodes(o,n),r=o.gridHeight/2,i=-r,s=o.gridWidth/2,a=-s,u=s+1.5,l=r+1.5,p=r/2,d=s/2;return{ins:j(L({},e.ins),{Instruction:fe("w",-u,0,o.numInstructionBits),DataIn:Mn("s",d,l,o.numDataBits)}),outs:e.outs}}})),ho=class extends Ml{constructor(e,r,i){var s;super(e,lt,r,i);this.CPUevent=new s2.SubEvent;this._jump=O;this._backwardJump=O;this._operandValue=U(!1,this.numDataBits);this.numInstructionBits=r.numInstructionBits,this._trigger=(s=i==null?void 0:i.trigger)!=null?s:lt.aults.trigger,this._mustGetFetchInstructionAgain=!0,this._fetchStage_SequentialExecutionClock_InternalFlipflopD=new cn(Z.falling),this._fetchStage_SequentialExecutionClock_InternalFlipflopD.inputPre=!0,this._decodeStage_SequentialExecutionClock_InternalFlipflopD=new cn(Z.falling),this._decodeStage_SequentialExecutionClock_InternalFlipflopD.inputClr=!0,this._executeStage_SequentialExecutionClock_InternalFlipflopD=new cn(Z.falling),this._executeStage_SequentialExecutionClock_InternalFlipflopD.inputClr=!0,this._writebackStage_SequentialExecutionClock_InternalFlipflopD=new cn(Z.falling),this._writebackStage_SequentialExecutionClock_InternalFlipflopD.inputClr=!0,this._control_SequentialExecutionState_InternalFlipflopD=new cn(Z.falling),this._control_SequentialExecutionState_InternalFlipflopD.inputClr=!0,this._control_PipelineState_InternalFlipflopD=new cn(Z.falling),this._control_PipelineState_InternalFlipflopD.inputClr=!0,this._control_RunStopState_InternalFlipflopD=new cn(Z.falling),this._control_RunStopState_InternalFlipflopD.inputClr=!0,this._control_ResetState_InternalFlipflopD=new cn(Z.falling),this._control_ResetState_InternalFlipflopD.inputPre=!0,this._control_AddressingModeState_InternalFlipflopD=new cn(Z.falling),this._control_AddressingModeState_InternalFlipflopD.inputClr=!0,this._control_HaltState_InternalFlipflopD=new cn(Z.falling),this._control_HaltState_InternalFlipflopD.inputClr=!0,this._StackPointer_InternalRegister=new dt(this.numStackBits,Z.falling),this._StackPointer_InternalRegister.inputPre=!0,this._ProgramCounter_InternalRegister=new dt(this.numInstructionAddressBits,Z.falling),this._ProgramCounter_InternalRegister.inputClr=!0,this._fetchDecodeStage_StackPointer_InternalRegister=new dt(this.numStackBits,Z.falling),this._fetchDecodeStage_StackPointer_InternalRegister.inputPre=!0,this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister=new dt(this.numStackBits,Z.falling),this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister.inputClr=!0,this._fetchDecodeStage_CallStack_InternalRegister=new dt(this.numInstructionAddressBits,Z.falling),this._fetchDecodeStage_CallStack_InternalRegister.inputClr=!0,this._fetchDecodeStage_ProgramCounter_InternalRegister=new dt(this.numInstructionAddressBits,Z.falling),this._fetchDecodeStage_ProgramCounter_InternalRegister.inputClr=!0,this._fetchDecodeStage_Instruction_InternalRegister=new dt(this.numInstructionBits,Z.falling),this._fetchDecodeStage_Instruction_InternalRegister.inputClr=!0,this._CallStack_InternalRAM=new po(this.numInstructionAddressBits,this.numStackBits),this._CallStack_InternalRAM.inputClr=!0,this._StackPointerControlUOflow_InternalFlipflopD=new cn(Z.falling),this._StackPointerControlUOflow_InternalFlipflopD.inputClr=!0,this._StackPointerUOflow_InternalFlipflopD=new cn(Z.falling),this._StackPointerUOflow_InternalFlipflopD.inputClr=!0,this._decodeExecuteStage_CallStack_InternalRegister=new dt(this.numInstructionAddressBits,Z.falling),this._decodeExecuteStage_CallStack_InternalRegister.inputClr=!0,this._decodeExecuteStage_ProgramCounter_InternalRegister=new dt(this.numInstructionAddressBits,Z.falling),this._decodeExecuteStage_ProgramCounter_InternalRegister.inputClr=!0,this._decodeExecuteStage_DataRAMAddress_InternalRegister=new dt(this.numDataBits,Z.falling),this._decodeExecuteStage_DataRAMAddress_InternalRegister.inputClr=!0,this._Accumulator_InternalRegister=new dt(this.numDataBits,Z.falling),this._Accumulator_InternalRegister.inputClr=!0,this._decodeExecuteStage_DataRAMIn_InternalRegister=new dt(this.numDataBits,Z.falling),this._decodeExecuteStage_DataRAMIn_InternalRegister.inputClr=!0,this._decodeExecuteStage_ALUoperation_InternalRegister=new dt(this.numDataBits,Z.falling),this._decodeExecuteStage_ALUoperation_InternalRegister.inputClr=!0,this._decodeExecuteStage_ControlUnit_InternalRegister=new dt(8,Z.falling),this._decodeExecuteStage_ControlUnit_InternalRegister.inputClr=!0,this._executeWritebackStage_CallStack_InternalRegister=new dt(this.numInstructionAddressBits,Z.falling),this._executeWritebackStage_CallStack_InternalRegister.inputClr=!0,this._executeWritebackStage_ProgramCounter_InternalRegister=new dt(this.numInstructionAddressBits,Z.falling),this._executeWritebackStage_ProgramCounter_InternalRegister.inputClr=!0,this._executeWritebackStage_DataRAMAddress_InternalRegister=new dt(this.numDataAddressBits,Z.falling),this._executeWritebackStage_DataRAMAddress_InternalRegister.inputClr=!0,this._executeWritebackStage_DataRAMOut_InternalRegister=new dt(this.numDataBits,Z.falling),this._executeWritebackStage_DataRAMOut_InternalRegister.inputClr=!0,this._executeWritebackStage_ALUOuputs_InternalRegister=new dt(this.numDataBits,Z.falling),this._executeWritebackStage_ALUOuputs_InternalRegister.inputClr=!0,this._Flags_InternalRegister=new dt(4,Z.falling),this._Flags_InternalRegister.inputClr=!0,this._executeWritebackStage_ControlUnit_InternalRegister=new dt(8,Z.falling),this._executeWritebackStage_ControlUnit_InternalRegister.inputClr=!0,this._Operations_InternalCounter=new La(16,Z.falling,10),this._Operations_InternalCounter.inputClr=!0,this._pipeline=this._control_PipelineState_InternalFlipflopD.outputQ,this._sequentialExecution=!(this._control_SequentialExecutionState_InternalFlipflopD.outputQ&&this._pipeline),this._addressingMode=this._control_AddressingModeState_InternalFlipflopD.outputQ,this._lastClock=O}CPUeventDispatcher(e){this.CPUevent.emit(`${e}`)}toJSON(){return L({instructionBits:this.numInstructionBits===lt.aults.instructionBits?void 0:this.numInstructionBits},this.toJSONBase())}get moduleName(){return"CPU"}static isClockTrigger(e,r,i){return e===Z.rising&&r===!1&&i===!0||e===Z.falling&&r===!0&&i===!1}doRecalcValue(){let e=this._lastClock,r=this.inputs.Speed.value?this.inputs.ClockF.value:this.inputs.ClockS.value,i=this._lastClock=(this._control_RunStopState_InternalFlipflopD.outputQ\u0305?this.inputs.ManStep.value:r)&&this._control_HaltState_InternalFlipflopD.outputQ\u0305,s=this._control_RunStopState_InternalFlipflopD.outputQ\u0305?this.inputs.ManStep.value&&this._control_RunStopState_InternalFlipflopD.outputQ\u0305:this._control_RunStopState_InternalFlipflopD.outputQ,a=this._control_HaltState_InternalFlipflopD.outputQ||this._control_ResetState_InternalFlipflopD.outputQ\u0305&&this._control_RunStopState_InternalFlipflopD.outputQ\u0305,u=this._control_ResetState_InternalFlipflopD.outputQ&&this.inputs.AddressingMode.value,l=this.inputs.Reset.value&&this._control_RunStopState_InternalFlipflopD.outputQ\u0305;this._fetchStage_SequentialExecutionClock_InternalFlipflopD.inputPre=l,this._decodeStage_SequentialExecutionClock_InternalFlipflopD.inputClr=l,this._executeStage_SequentialExecutionClock_InternalFlipflopD.inputClr=l,this._writebackStage_SequentialExecutionClock_InternalFlipflopD.inputClr=l,this.inputs.SequentialExecution.value?this._control_SequentialExecutionState_InternalFlipflopD.inputPre=l:this._control_SequentialExecutionState_InternalFlipflopD.inputClr=l,this.inputs.Pipeline.value?this._control_PipelineState_InternalFlipflopD.inputPre=l:this._control_PipelineState_InternalFlipflopD.inputClr=l,this._control_RunStopState_InternalFlipflopD.inputClr=l,this._control_ResetState_InternalFlipflopD.inputPre=l,this.inputs.AddressingMode.value?this._control_AddressingModeState_InternalFlipflopD.inputPre=l:this._control_AddressingModeState_InternalFlipflopD.inputClr=l,this._control_HaltState_InternalFlipflopD.inputClr=l,this._ProgramCounter_InternalRegister.inputClr=l,this._fetchDecodeStage_Instruction_InternalRegister.inputClr=l,this._fetchDecodeStage_StackPointer_InternalRegister.inputPre=l,this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister.inputClr=l,this._fetchDecodeStage_CallStack_InternalRegister.inputClr=l,this._fetchDecodeStage_ProgramCounter_InternalRegister.inputClr=l,this._fetchDecodeStage_Instruction_InternalRegister.inputClr=l,this._Accumulator_InternalRegister.inputClr=l,this._Flags_InternalRegister.inputClr=l,this._decodeExecuteStage_DataRAMIn_InternalRegister.inputClr=l,this._decodeExecuteStage_ALUoperation_InternalRegister.inputClr=l,this._decodeExecuteStage_ControlUnit_InternalRegister.inputClr=l,this._executeWritebackStage_CallStack_InternalRegister.inputClr=l,this._executeWritebackStage_ProgramCounter_InternalRegister.inputClr=l,this._executeWritebackStage_DataRAMAddress_InternalRegister.inputClr=l,this._executeWritebackStage_DataRAMOut_InternalRegister.inputClr=l,this._executeWritebackStage_ALUOuputs_InternalRegister.inputClr=l,this._executeWritebackStage_ControlUnit_InternalRegister.inputClr=l,this._CallStack_InternalRAM.inputClr=l,this._StackPointerControlUOflow_InternalFlipflopD.inputClr=l,this._StackPointerUOflow_InternalFlipflopD.inputClr=l,this._Operations_InternalCounter.inputClr=l,this._sequentialExecution=!(this._control_SequentialExecutionState_InternalFlipflopD.outputQ&&this._control_PipelineState_InternalFlipflopD.outputQ),this._pipeline=this._control_PipelineState_InternalFlipflopD.outputQ,this._addressingMode=this._control_AddressingModeState_InternalFlipflopD.outputQ;let p=this.inputValues(this.inputs.Instruction),d;this._pipeline?d=this._fetchDecodeStage_Instruction_InternalRegister.inputsD:d=p.reverse();let h=d.slice(0,4),m=De(h,!0)[1],f=G(m)?O:ar[m],C=d.slice(4,8),D=this.cycle,b=(this._pipeline,sr[D%sr.length]);if((l||D==0)&&(this._opCodeOperandsInStages={FETCH:"",DECODE:"",EXECUTE:"",WRITEBACK:""},this._addressesInStages={FETCH:-1,DECODE:-1,EXECUTE:-1,WRITEBACK:-1}),ho.isClockTrigger(this._trigger,e,i)||l){let Be=De(this._ProgramCounter_InternalRegister.outputsQ,!1)[1];if(Be==O&&(Be=-1),Be=l?-1:Be,console.log("before ",this._addressesInStages),!this._pipeline)for(let At of sr)At==b?(console.log(b),this._opCodeOperandsInStages[At]=f+"+"+this.getOperandsNumberWithRadix(C,2),this._addressesInStages[At]=Be):(this._opCodeOperandsInStages[At]="",this._addressesInStages[At]=-1);console.log("after",this._opCodeOperandsInStages);let vt="";for(let At of sr){let Hn=Xp.color(At),ai=ka[Hn];vt+=this._addressesInStages[At].toString()+":"+ai+"+"}this.CPUeventDispatcher(vt)}this._opCodeOperandsInStages.FETCH=f+"+"+this.getOperandsNumberWithRadix(C,2);let v=d.slice(0,4).reverse(),_=De(v,!1)[1],M=G(_)?O:ar[_],A=d.slice(4,8).reverse(),E;E=v[0]&&!v[1]&&!v[2]||v[0]&&v[1];let B=!v[0]&&!v[1]&&v[2],I=B&&!v[3],k;this._pipeline?k=this._executeWritebackStage_ControlUnit_InternalRegister.outputsQ[7]:k=E;let S=k||B,H=!v[0]&&!v[1]&&!v[2]&&v[3],F=v[1]&&!v[2]&&v[3],q=F&&!v[3],te=F&&v[3],se=!v[0]&&v[1]&&!v[2],le=se&&v[3],X=F||se,J=!v[0]&&v[1]&&v[2],Te=J&&!v[3],Ce=J&&v[3],_e=this.allZeros(A)&&se,it;this._pipeline?it=this._executeWritebackStage_ControlUnit_InternalRegister.outputsQ[6]:it=H,this._executeWritebackStage_ControlUnit_InternalRegister.inputsD=this._decodeExecuteStage_ControlUnit_InternalRegister.outputsQ;let hn=this._StackPointer_InternalRegister.outputsQ,jt=[!0];vi(jt,this.numStackBits,!1);let Yt;q?Yt=qo("A-B",hn,jt,!1):Yt=qo("A+B",hn,jt,!1),F?this._StackPointer_InternalRegister.inputsD=Yt.s:this._StackPointer_InternalRegister.inputsD=this._StackPointer_InternalRegister.outputsQ;let Ct=this._ProgramCounter_InternalRegister.outputsQ,$e=[!0];vi($e,this.numInstructionAddressBits,!1);let Ke=qo("A+B",Ct,$e,!1);this._fetchDecodeStage_StackPointer_InternalRegister.inputsD=this._StackPointer_InternalRegister.outputsQ,this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister.inputsD=Yt.s,this._fetchDecodeStage_CallStack_InternalRegister.inputsD=Ke.s,this._fetchDecodeStage_ProgramCounter_InternalRegister.inputsD=this._ProgramCounter_InternalRegister.outputsQ,this._fetchDecodeStage_Instruction_InternalRegister.inputsD=this.inputValues(this.inputs.Instruction),te?this._pipeline?this._CallStack_InternalRAM.inputsAddr=this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister.outputsQ:this._CallStack_InternalRAM.inputsAddr=Yt.s:this._pipeline?this._CallStack_InternalRAM.inputsAddr=this._fetchDecodeStage_StackPointer_InternalRegister.outputsQ:this._CallStack_InternalRAM.inputsAddr=this._StackPointer_InternalRegister.outputsQ,this._pipeline?this._CallStack_InternalRAM.inputsD=this._fetchDecodeStage_CallStack_InternalRegister.outputsQ:this._CallStack_InternalRAM.inputsD=Ke.s,this._CallStack_InternalRAM.inputWE=q;let ze;this._pipeline?ze=this._fetchDecodeStage_ProgramCounter_InternalRegister.outputsQ:ze=this._ProgramCounter_InternalRegister.outputsQ;let Wt=A;vi(Wt,this.numInstructionAddressBits,!1);let si;le?si=qo("A-B",ze,Wt,!1):si=qo("A+B",ze,Wt,!1);let Br;this._addressingMode?Br=Wt:Br=si.s;let yo=!K4(this._StackPointer_InternalRegister.outputsQ),tt=Z4(this._StackPointer_InternalRegister.outputsQ);q&&yo&&this._StackPointerControlUOflow_InternalFlipflopD.outputQ\u0305||te&&tt&&this._StackPointerControlUOflow_InternalFlipflopD.outputQ?this._StackPointerControlUOflow_InternalFlipflopD.inputD=this._StackPointerControlUOflow_InternalFlipflopD.outputQ\u0305:this._StackPointerControlUOflow_InternalFlipflopD.inputD=this._StackPointerControlUOflow_InternalFlipflopD.outputQ;let Ot=te&&tt&&this._StackPointerControlUOflow_InternalFlipflopD.outputQ\u0305||q&&yo&&this._StackPointerControlUOflow_InternalFlipflopD.outputQ||this._StackPointerUOflow_InternalFlipflopD.outputQ;this._StackPointerUOflow_InternalFlipflopD.inputD=Ot,this._decodeExecuteStage_DataRAMAddress_InternalRegister.inputsD=A;let Gt;I?Gt=this.inputValues(this.inputs.DataIn).reverse():Gt=A;let hr;this._pipeline?hr=this._decodeExecuteStage_ALUoperation_InternalRegister.outputsQ:hr=[v[0],!v[3],v[1],v[2]];let Nn=De(hr,!1)[1],fn=G(Nn)?"A+B":Hp[Nn],Ze=this._Accumulator_InternalRegister.outputsQ,Kn;this._pipeline?Kn=this._decodeExecuteStage_DataRAMIn_InternalRegister.outputsQ:Kn=this.inputValues(this.inputs.DataIn).reverse();let Ln=qo(fn,Ze,Kn,!1);this._Flags_InternalRegister.inputsD[0]=this.allZeros(Ln.s),this._Flags_InternalRegister.inputsD[1]=Ln.cout;let Xr;this._pipeline?Xr=this._Flags_InternalRegister.outputsQ[0]&&this._decodeExecuteStage_ControlUnit_InternalRegister.outputsQ[1]||this._Flags_InternalRegister.outputsQ[1]&&this._decodeExecuteStage_ControlUnit_InternalRegister.outputsQ[2]||this._decodeExecuteStage_ControlUnit_InternalRegister.outputsQ[4]:Xr=this._Flags_InternalRegister.outputsQ[0]&&Te||this._Flags_InternalRegister.outputsQ[1]&&Ce||X,this._pipeline?this._executeWritebackStage_ControlUnit_InternalRegister.outputsQ[3]?this._executeWritebackStage_ControlUnit_InternalRegister.outputsQ[5]?this._ProgramCounter_InternalRegister.inputsD=this._executeWritebackStage_CallStack_InternalRegister.outputsQ:this._ProgramCounter_InternalRegister.inputsD=this._executeWritebackStage_ProgramCounter_InternalRegister.outputsQ:this._ProgramCounter_InternalRegister.inputsD=Ke.s:Xr?te?this._ProgramCounter_InternalRegister.inputsD=this._CallStack_InternalRAM.outputsQ:this._ProgramCounter_InternalRegister.inputsD=Br:this._ProgramCounter_InternalRegister.inputsD=Ke.s,E&&(this._pipeline?Gt=this._executeWritebackStage_ALUOuputs_InternalRegister.outputsQ:Gt=Ln.s),this._decodeExecuteStage_CallStack_InternalRegister.inputsD=this._CallStack_InternalRAM.outputsQ,this._decodeExecuteStage_ProgramCounter_InternalRegister.inputsD=Br,this._decodeExecuteStage_DataRAMAddress_InternalRegister.inputsD=A,this._Accumulator_InternalRegister.inputsD=Gt,this._decodeExecuteStage_DataRAMIn_InternalRegister.inputsD=this.inputValues(this.inputs.DataIn).reverse(),this._decodeExecuteStage_ALUoperation_InternalRegister.inputsD=[v[0],!v[3],v[1],v[2]],this._decodeExecuteStage_ControlUnit_InternalRegister.inputsD[0]=le,this._decodeExecuteStage_ControlUnit_InternalRegister.inputsD[1]=Te,this._decodeExecuteStage_ControlUnit_InternalRegister.inputsD[2]=Ce,this._decodeExecuteStage_ControlUnit_InternalRegister.inputsD[4]=X,this._decodeExecuteStage_ControlUnit_InternalRegister.inputsD[5]=te,this._decodeExecuteStage_ControlUnit_InternalRegister.inputsD[6]=H,this._decodeExecuteStage_ControlUnit_InternalRegister.inputsD[7]=E,this._executeWritebackStage_CallStack_InternalRegister.inputsD=this._decodeExecuteStage_CallStack_InternalRegister.outputsQ,this._executeWritebackStage_ProgramCounter_InternalRegister.inputsD=this._decodeExecuteStage_ProgramCounter_InternalRegister.outputsQ,this._executeWritebackStage_DataRAMAddress_InternalRegister.inputsD=this._decodeExecuteStage_DataRAMAddress_InternalRegister.outputsQ,this._executeWritebackStage_DataRAMOut_InternalRegister.inputsD=this._Accumulator_InternalRegister.outputsQ,this._executeWritebackStage_ALUOuputs_InternalRegister.inputsD=Ln.s,this._executeWritebackStage_ControlUnit_InternalRegister.inputsD[3]=Xr,this._executeWritebackStage_ControlUnit_InternalRegister.inputsD[5]=this._decodeExecuteStage_ControlUnit_InternalRegister.outputsQ[5],this._executeWritebackStage_ControlUnit_InternalRegister.inputsD[6]=this._decodeExecuteStage_ControlUnit_InternalRegister.outputsQ[6],this._executeWritebackStage_ControlUnit_InternalRegister.inputsD[7]=this._decodeExecuteStage_ControlUnit_InternalRegister.outputsQ[7];let jr=this._sequentialExecution?i:i&&this._writebackStage_SequentialExecutionClock_InternalFlipflopD.outputQ;this._control_HaltState_InternalFlipflopD.inputD=_e,this._control_HaltState_InternalFlipflopD.inputClock=i,this._control_HaltState_InternalFlipflopD.recalcInternalValue();let Se=this._control_RunStopState_InternalFlipflopD.outputQ\u0305;this._control_RunStopState_InternalFlipflopD.inputD=this._control_RunStopState_InternalFlipflopD.outputQ\u0305,this._control_RunStopState_InternalFlipflopD.inputClock=i&&this._control_HaltState_InternalFlipflopD.outputQ||this.inputs.RunStop.value,this._control_RunStopState_InternalFlipflopD.recalcInternalValue(),this._control_ResetState_InternalFlipflopD.inputD=!1,this._control_ResetState_InternalFlipflopD.inputClock=i,this._control_ResetState_InternalFlipflopD.recalcInternalValue(),this._control_PipelineState_InternalFlipflopD.inputD=this.inputs.Pipeline.value,this._control_PipelineState_InternalFlipflopD.inputClock=i&&this._control_ResetState_InternalFlipflopD.outputQ,this._control_PipelineState_InternalFlipflopD.recalcInternalValue(),this._control_SequentialExecutionState_InternalFlipflopD.inputD=this.inputs.SequentialExecution.value,this._control_SequentialExecutionState_InternalFlipflopD.inputClock=i&&this._control_ResetState_InternalFlipflopD.outputQ,this._control_SequentialExecutionState_InternalFlipflopD.recalcInternalValue();let ve=this._fetchStage_SequentialExecutionClock_InternalFlipflopD.outputQ,fr=this._decodeStage_SequentialExecutionClock_InternalFlipflopD.outputQ,mn=this._executeStage_SequentialExecutionClock_InternalFlipflopD.outputQ,Ne=this._writebackStage_SequentialExecutionClock_InternalFlipflopD.outputQ;if(this._fetchStage_SequentialExecutionClock_InternalFlipflopD.inputD=mn,this._fetchStage_SequentialExecutionClock_InternalFlipflopD.inputClock=i,this._fetchStage_SequentialExecutionClock_InternalFlipflopD.recalcInternalValue(),this._decodeStage_SequentialExecutionClock_InternalFlipflopD.inputD=ve,this._decodeStage_SequentialExecutionClock_InternalFlipflopD.inputClock=i,this._decodeStage_SequentialExecutionClock_InternalFlipflopD.recalcInternalValue(),this._executeStage_SequentialExecutionClock_InternalFlipflopD.inputD=fr,this._executeStage_SequentialExecutionClock_InternalFlipflopD.inputClock=i,this._executeStage_SequentialExecutionClock_InternalFlipflopD.recalcInternalValue(),this._Operations_InternalCounter.inputClock=i,this._Operations_InternalCounter.recalcInternalValue(),this._sequentialExecution){let Be=i&&ve,vt=i&&fr,At=i&&mn,Hn=i&&Ne;this._StackPointer_InternalRegister.inputClock=Be,this._StackPointer_InternalRegister.recalcInternalValue(),this._ProgramCounter_InternalRegister.inputClock=Be,this._ProgramCounter_InternalRegister.recalcInternalValue(),this._fetchDecodeStage_StackPointer_InternalRegister.inputClock=vt,this._fetchDecodeStage_StackPointer_InternalRegister.recalcInternalValue,this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister.inputClock=vt,this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister.recalcInternalValue,this._fetchDecodeStage_CallStack_InternalRegister.inputClock=vt,this._fetchDecodeStage_CallStack_InternalRegister.recalcInternalValue,this._fetchDecodeStage_ProgramCounter_InternalRegister.inputClock=vt,this._fetchDecodeStage_ProgramCounter_InternalRegister.recalcInternalValue(),this._fetchDecodeStage_Instruction_InternalRegister.inputClock=vt,this._fetchDecodeStage_Instruction_InternalRegister.recalcInternalValue(),this._CallStack_InternalRAM.inputClock=vt,this._CallStack_InternalRAM.value=this._CallStack_InternalRAM.recalcInternalValue(),this._StackPointerControlUOflow_InternalFlipflopD.inputClock=vt,this._StackPointerControlUOflow_InternalFlipflopD.recalcInternalValue(),this._StackPointerUOflow_InternalFlipflopD.inputClock=vt,this._StackPointerUOflow_InternalFlipflopD.recalcInternalValue(),this._decodeExecuteStage_CallStack_InternalRegister.inputClock=At,this._decodeExecuteStage_CallStack_InternalRegister.recalcInternalValue(),this._decodeExecuteStage_ProgramCounter_InternalRegister.inputClock=At,this._decodeExecuteStage_ProgramCounter_InternalRegister.recalcInternalValue(),this._decodeExecuteStage_DataRAMAddress_InternalRegister.inputClock=At,this._decodeExecuteStage_DataRAMAddress_InternalRegister.recalcInternalValue(),this._Accumulator_InternalRegister.inputClock=At&&S,this._Accumulator_InternalRegister.recalcInternalValue(),this._decodeExecuteStage_DataRAMIn_InternalRegister.inputClock=At,this._decodeExecuteStage_DataRAMIn_InternalRegister.recalcInternalValue(),this._decodeExecuteStage_ControlUnit_InternalRegister.inputClock=At,this._decodeExecuteStage_ControlUnit_InternalRegister.recalcInternalValue(),this._Flags_InternalRegister.inputClock=Hn,this._Flags_InternalRegister.recalcInternalValue(),this._executeWritebackStage_CallStack_InternalRegister.inputClock=Hn,this._executeWritebackStage_CallStack_InternalRegister.recalcInternalValue(),this._executeWritebackStage_ProgramCounter_InternalRegister.inputClock=Hn,this._executeWritebackStage_ProgramCounter_InternalRegister.recalcInternalValue(),this._executeWritebackStage_DataRAMAddress_InternalRegister.inputClock=Hn,this._executeWritebackStage_DataRAMAddress_InternalRegister.recalcInternalValue(),this._executeWritebackStage_DataRAMOut_InternalRegister.inputClock=Hn,this._executeWritebackStage_DataRAMOut_InternalRegister.recalcInternalValue(),this._executeWritebackStage_ALUOuputs_InternalRegister.inputClock=Hn,this._executeWritebackStage_ALUOuputs_InternalRegister.recalcInternalValue(),this._executeWritebackStage_ControlUnit_InternalRegister.inputClock=Hn,this._executeWritebackStage_ControlUnit_InternalRegister.recalcInternalValue()}else this._StackPointer_InternalRegister.inputClock=i,this._StackPointer_InternalRegister.recalcInternalValue(),this._ProgramCounter_InternalRegister.inputClock=i,this._ProgramCounter_InternalRegister.recalcInternalValue(),this._fetchDecodeStage_StackPointer_InternalRegister.inputClock=i,this._fetchDecodeStage_StackPointer_InternalRegister.recalcInternalValue,this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister.inputClock=i,this._fetchDecodeStage_StackPointerALUoutputs_InternalRegister.recalcInternalValue,this._fetchDecodeStage_CallStack_InternalRegister.inputClock=i,this._fetchDecodeStage_CallStack_InternalRegister.recalcInternalValue,this._fetchDecodeStage_ProgramCounter_InternalRegister.inputClock=i,this._fetchDecodeStage_ProgramCounter_InternalRegister.recalcInternalValue(),this._fetchDecodeStage_Instruction_InternalRegister.inputClock=i,this._fetchDecodeStage_Instruction_InternalRegister.recalcInternalValue(),this._CallStack_InternalRAM.inputClock=i,this._CallStack_InternalRAM.value=this._CallStack_InternalRAM.recalcInternalValue(),this._StackPointerControlUOflow_InternalFlipflopD.inputClock=i,this._StackPointerControlUOflow_InternalFlipflopD.recalcInternalValue(),this._StackPointerUOflow_InternalFlipflopD.inputClock=i,this._StackPointerUOflow_InternalFlipflopD.recalcInternalValue(),this._decodeExecuteStage_CallStack_InternalRegister.inputClock=i,this._decodeExecuteStage_CallStack_InternalRegister.recalcInternalValue(),this._decodeExecuteStage_ProgramCounter_InternalRegister.inputClock=i,this._decodeExecuteStage_ProgramCounter_InternalRegister.recalcInternalValue(),this._decodeExecuteStage_DataRAMAddress_InternalRegister.inputClock=i,this._decodeExecuteStage_DataRAMAddress_InternalRegister.recalcInternalValue(),this._Accumulator_InternalRegister.inputClock=i&&S,this._Accumulator_InternalRegister.recalcInternalValue(),this._decodeExecuteStage_DataRAMIn_InternalRegister.inputClock=i,this._decodeExecuteStage_DataRAMIn_InternalRegister.recalcInternalValue(),this._decodeExecuteStage_ControlUnit_InternalRegister.inputClock=i,this._decodeExecuteStage_ControlUnit_InternalRegister.recalcInternalValue(),this._Flags_InternalRegister.inputClock=i,this._Flags_InternalRegister.recalcInternalValue(),this._executeWritebackStage_CallStack_InternalRegister.inputClock=i,this._executeWritebackStage_CallStack_InternalRegister.recalcInternalValue(),this._executeWritebackStage_ProgramCounter_InternalRegister.inputClock=i,this._executeWritebackStage_ProgramCounter_InternalRegister.recalcInternalValue(),this._executeWritebackStage_DataRAMAddress_InternalRegister.inputClock=i,this._executeWritebackStage_DataRAMAddress_InternalRegister.recalcInternalValue(),this._executeWritebackStage_DataRAMOut_InternalRegister.inputClock=i,this._executeWritebackStage_DataRAMOut_InternalRegister.recalcInternalValue(),this._executeWritebackStage_ALUOuputs_InternalRegister.inputClock=i,this._executeWritebackStage_ALUOuputs_InternalRegister.recalcInternalValue(),this._executeWritebackStage_ControlUnit_InternalRegister.inputClock=i,this._executeWritebackStage_ControlUnit_InternalRegister.recalcInternalValue();if(ho.isClockTrigger(this._trigger,e,i)||l){let Be=De(this._ProgramCounter_InternalRegister.outputsQ,!1)[1];Be==O&&(Be=-1),Be=l?-1:Be,console.log("before ",this._addressesInStages),this._pipeline&&(this._opCodeOperandsInStages.EXECUTE=this._opCodeOperandsInStages.DECODE,this._opCodeOperandsInStages.DECODE=this._opCodeOperandsInStages.WRITEBACK,this._opCodeOperandsInStages.WRITEBACK=this._opCodeOperandsInStages.FETCH,this._opCodeOperandsInStages.FETCH=f+"+"+this.getOperandsNumberWithRadix(C,2),this._addressesInStages.EXECUTE=this._addressesInStages.DECODE,this._addressesInStages.DECODE=this._addressesInStages.WRITEBACK,this._addressesInStages.WRITEBACK=this._addressesInStages.FETCH,this._addressesInStages.FETCH=Be),console.log("after",this._opCodeOperandsInStages);let vt="";for(let At of sr){let Hn=Xp.color(At),ai=ka[Hn];vt+=this._addressesInStages[At].toString()+":"+ai+"+"}this.CPUeventDispatcher(vt)}let En=!1,Vn,V;this._pipeline&&this._executeWritebackStage_ControlUnit_InternalRegister.outputsQ[6]?V=this._executeWritebackStage_DataRAMAddress_InternalRegister.outputsQ:V=A;let Dc;return this._pipeline?V=this._executeWritebackStage_DataRAMOut_InternalRegister.outputsQ:V=this._Accumulator_InternalRegister.outputsQ,G(M)?Vn={instructionaddress:U(En,this.numInstructionAddressBits),dataaddress:U(En,this.numDataBits),dataout:U(En,this.numDataBits),ramwesync:En,ramwe:En,resetsync:En,sync:En,z:En,cout:En,stackouflow:En,haltsignal:En,runningstate:En}:Vn={instructionaddress:this._ProgramCounter_InternalRegister.outputsQ,dataaddress:V,dataout:V,ramwesync:jr,ramwe:it,resetsync:l,sync:i,z:this._Flags_InternalRegister.outputsQ[0],cout:this._Flags_InternalRegister.outputsQ[1],stackouflow:this._StackPointerUOflow_InternalFlipflopD.outputQ,haltsignal:a,runningstate:s},Vn}propagateValue(e){this.outputValues(this.outputs.InstructionAddress,e.instructionaddress,!0),this.outputValues(this.outputs.DataAddress,e.dataaddress,!0),this.outputValues(this.outputs.DataOut,e.dataout),this.outputs.RAMweSync.value=e.ramwesync,this.outputs.RAMwe.value=e.ramwe,this.outputs.ResetSync.value=e.resetsync,this.outputs.Sync.value=e.sync,this.outputs.Z.value=e.z,this.outputs.Cout.value=e.cout,this.outputs.StackOUflow.value=e.stackouflow,this.outputs.HaltSignal.value=e.haltsignal,this.outputs.RunningState.value=e.runningstate}doRecalcValueAfterClock(){return[this.inputValues(this.inputs.Instruction).map(xe.filterHighZ),this.inputValues(this.inputs.DataIn).map(xe.filterHighZ),xe.filterHighZ(this.inputs.SequentialExecution.value),xe.filterHighZ(this.inputs.Pipeline.value),xe.filterHighZ(this.inputs.RunStop.value),xe.filterHighZ(this.inputs.Reset.value),xe.filterHighZ(this.inputs.ManStep.value),xe.filterHighZ(this.inputs.Speed.value),xe.filterHighZ(this.inputs.ClockS.value),xe.filterHighZ(this.inputs.ClockF.value),xe.filterHighZ(this.inputs.AddressingMode.value)]}makeTooltip(){let e=this.opCode,r=this.stage,i=w.Components.CPU.tooltip,s=G(e)?i.SomeUnknownInstruction:i.ThisInstruction+" "+j4.fullName(e);return ee(i.title,Q(W(`${i.CurrentlyCarriesOut} ${s}.`)))}doDraw(e,r){let i=this.bounds(),{left:s,top:a,right:u,bottom:l}=i,p=a-2*z,d=a-2*z,h=s-2*z,m=u-2*z;for(let f of this.inputs.Instruction)de(e,f,s,f.posYInParentTransform);for(let f of this.inputs.DataIn)de(e,f,f.posXInParentTransform,l);de(e,this.inputs.SequentialExecution,this.inputs.SequentialExecution.posXInParentTransform,l),de(e,this.inputs.Pipeline,this.inputs.Pipeline.posXInParentTransform,l),de(e,this.inputs.RunStop,this.inputs.RunStop.posXInParentTransform,l),de(e,this.inputs.Reset,this.inputs.Reset.posXInParentTransform,l),de(e,this.inputs.ManStep,this.inputs.ManStep.posXInParentTransform,l),de(e,this.inputs.Speed,this.inputs.Speed.posXInParentTransform,l),de(e,this.inputs.ClockS,this.inputs.ClockS.posXInParentTransform,l),de(e,this.inputs.ClockF,this.inputs.ClockF.posXInParentTransform,l),de(e,this.inputs.AddressingMode,this.inputs.AddressingMode.posXInParentTransform,l);for(let f of this.outputs.InstructionAddress)de(e,f,f.posXInParentTransform,a);for(let f of this.outputs.DataOut)de(e,f,u,f.posYInParentTransform);for(let f of this.outputs.DataAddress)de(e,f,f.posXInParentTransform,a);de(e,this.outputs.RAMweSync,u,this.outputs.RAMweSync.posYInParentTransform),de(e,this.outputs.RAMwe,u,this.outputs.RAMwe.posYInParentTransform),de(e,this.outputs.ResetSync,u,this.outputs.ResetSync.posYInParentTransform),de(e,this.outputs.Sync,u,this.outputs.Sync.posYInParentTransform),de(e,this.outputs.Z,u,this.outputs.Z.posYInParentTransform),de(e,this.outputs.Cout,u,this.outputs.Cout.posYInParentTransform),de(e,this.outputs.StackOUflow,u,this.outputs.StackOUflow.posYInParentTransform),de(e,this.outputs.HaltSignal,u,this.outputs.HaltSignal.posYInParentTransform),de(e,this.outputs.RunningState,u,this.outputs.RunningState.posYInParentTransform),e.fillStyle=Je,e.lineWidth=3,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(s,a),e.lineTo(u,a),e.lineTo(u,l),e.lineTo(s,l),e.lineTo(s,a),e.closePath(),e.fill(),e.stroke(),this.drawGroupBox(e,this.inputs.Instruction.group,i),this.drawGroupBox(e,this.inputs.DataIn.group,i),this.drawGroupBox(e,this.outputs.InstructionAddress.group,i),this.drawGroupBox(e,this.outputs.DataOut.group,i),this.drawGroupBox(e,this.outputs.DataAddress.group,i),r.inNonTransformedFrame(f=>{e.fillStyle=In,e.font="11px sans-serif",Ie(f,this.orient,"DataIn","s",this.inputs.DataIn,l),Ie(f,this.orient,"Seq Exec","s",this.inputs.SequentialExecution,l,void 0,!0),Ie(f,this.orient,"Pipeline","s",this.inputs.Pipeline,l,void 0,!0),Ie(f,this.orient,"Run/Stop","s",this.inputs.RunStop,l,void 0,!0),Ie(f,this.orient,"Reset","s",this.inputs.Reset,l,void 0,!0),Ie(f,this.orient,"Man Step","s",this.inputs.ManStep,l,void 0,!0),Ie(f,this.orient,"Speed","s",this.inputs.Speed,l,void 0,!0),Ie(f,this.orient,"Clock S","s",this.inputs.ClockS,l,void 0,!0),Ie(f,this.orient,"Clock F","s",this.inputs.ClockF,l,void 0,!0),Ie(f,this.orient,"Addr Mode","s",this.inputs.AddressingMode,l,void 0,!0),Ie(f,this.orient,"InstrAddr","n",this.outputs.InstructionAddress,a),Ie(f,this.orient,"DataAddr","n",this.outputs.DataAddress,a),Ie(f,this.orient,"Instr","w",s,this.inputs.Instruction),Ie(f,this.orient,"DataOut","e",u,this.outputs.DataOut),Ie(f,this.orient,"RAM Sync","e",u,this.outputs.RAMweSync,void 0,!0),Ie(f,this.orient,"RAM WE","e",u,this.outputs.RAMwe,void 0,!0),Ie(f,this.orient,"Reset Sync","e",u,this.outputs.ResetSync,void 0,!0),Ie(f,this.orient,"Sync","e",u,this.outputs.Sync,void 0,!0),Ie(f,this.orient,"Z","e",u,this.outputs.Z,void 0,!0),Ie(f,this.orient,"Cout","e",u,this.outputs.Cout,void 0,!0),Ie(f,this.orient,"Stack OUflow","e",u,this.outputs.StackOUflow,void 0,!0),Ie(f,this.orient,"Halt","e",u,this.outputs.HaltSignal,void 0,!0),Ie(f,this.orient,"Run state","e",u,this.outputs.RunningState,void 0,!0);let C=De(this._Operations_InternalCounter.outputsQ,!1)[1],D=wr(C,10,16,!1),b=C=="?"?0:sr[(C-1)%sr.length];if(this._showStage)for(let v of sr){let _=Xp.color(v),M=Rp[_],A=ka[_],E=Y4.shortName(v),B=this.orient=="e"?75:this.orient=="w"?-75:0,I=this.orient=="n"?75:this.orient=="s"?-75:0,k=this.posX,S=ie.isVertical(this.orient)?this.inputs.Instruction.group.posYInParentTransform:this.inputs.Instruction.group.posYInParentTransform-130;switch(v){case"FETCH":k=k-2*B+(ie.isVertical(this.orient)?this.orient=="n"?50:25:0)+37.5,S=S-2*I;break;case"DECODE":k=k-B+(ie.isVertical(this.orient)?this.orient=="n"?50:25:0)+37.5,S=S-I;break;case"EXECUTE":k=k+B+(ie.isVertical(this.orient)?this.orient=="n"?50:25:0)-37.5,S=S+I;break;case"WRITEBACK":k=k+2*B+(ie.isVertical(this.orient)?this.orient=="n"?50:25:0)-37.5,S=S+2*I;break}let H=14,F=f.rotatePoint(k+(ie.isVertical(this.orient)?this.orient=="n"?-H:H:0),S+(ie.isVertical(this.orient)?0:H));e.fillStyle=A;let q=75;Qt.drawStoredValueFrame(e,...F,q,50,!1);let te=f.rotatePoint(k,S+(ie.isVertical(this.orient)?0:this.orient=="w"?28:0));if(e.fillStyle=M,e.font=`bold ${H}px monospace`,e.textAlign="center",e.textBaseline="middle",this._pipeline?e.fillText(E,...te):v==b&&e.fillText(E,...te),this._showOpCode){let se=f.rotatePoint(k+(ie.isVertical(this.orient)?this.orient=="n"?-30:30:0),S+(ie.isVertical(this.orient)?0:this.orient=="w"?-2:30)),le=this.getInstructionParts(this._opCodeOperandsInStages[v],"opCode"),X=this._showOperands?this.getInstructionParts(this._opCodeOperandsInStages[v],"operands"):"",J=le==""?"":le+" "+X,Te=15;e.font=`bold ${Te}px monospace`,e.fillStyle=oe,e.textAlign="center",e.textBaseline="middle",this._pipeline?e.fillText(J,...se):v==b&&e.fillText(J,...se)}}if(this._showClockCycle){let _=ie.isVertical(this.orient)?120:90,M=f.rotatePoint(ie.isVertical(this.orient)?this.inputs.RunStop.posXInParentTransform:this.inputs.ManStep.posXInParentTransform,this.inputs.RunStop.posYInParentTransform-_);e.fillStyle=yr;let A=100-20/2;Qt.drawStoredValueFrame(e,...M,A,28,!1),e.font="bold 20px sans-serif",e.fillStyle=so,e.textAlign="center",e.textBaseline="middle",e.fillText(D,...M)}if(this._showStack){let _=ie.isVertical(this.orient)?this.orient=="n"?55:-55:0,M=this.orient=="n"?-115:this.orient=="s"?35:this.orient=="e"?-30:-50,A=f.rotatePoint(ie.isVertical(this.orient)?this.inputs.RunStop.posXInParentTransform:this.inputs.ManStep.posXInParentTransform,this.inputs.Instruction.group.posYInParentTransform),E=this._CallStack_InternalRAM.numWords,B=this._CallStack_InternalRAM.numDataBits,I=8*10/B,k=10,S=A[0]+_,H=A[1]+M+(this.orient=="s"||this.orient=="w"?0:8*k-E*k),F=S-B/2*I,q=H,te=q+E*k,se=F+B*I;e.fillStyle=yr,e.fillRect(F,q,se-F,te-q);for(let X=0;X<E;X++)for(let J=0;J<B;J++){let Te=this._CallStack_InternalRAM.value.mem[X][B-J-1];Te!==!1&&(e.fillStyle=Vt(Te),e.fillRect(F+J*I,q+X*k,I,k))}e.strokeStyle=oe,e.lineWidth=.5;for(let X=1;X<E;X++){let J=q+X*k;Ho(e,F,J,se,J)}for(let X=1;X<B;X++){let J=F+X*I;Ho(e,J,q,J,te)}let le=2;if(e.lineWidth=le,e.strokeRect(F-le/2,q-le/2,se-F+le,te-q+le),!G(this._CallStack_InternalRAM.currentAddress())){let X=this._CallStack_InternalRAM.currentAddress();if(X>=0&&X<4){let J=q+X*k+k/2,Te=F-3,Ce=8,_e=3;e.beginPath(),e.moveTo(Te,J),e.lineTo(Te-Ce,J+_e),e.lineTo(Te-Ce+2,J),e.lineTo(Te-Ce,J-_e),e.closePath(),e.fillStyle=oe,e.fill()}}}this.doDrawGenericCaption(e,f)}),this._addProgramRAM}doDrawGenericCaption(e,r){if(this._addressingMode){e.font="bold 11px sans-serif",e.fillStyle=Ei,e.textAlign="center",e.textBaseline="middle";let s=r.rotatePoint(this.outputs.InstructionAddress.group.posXInParentTransform+(ie.isVertical(this.orient)?15:0),this.outputs.InstructionAddress.group.posYInParentTransform+(ie.isVertical(this.orient)?63:35));e.fillText("Adressage direct",...s)}}get opCode(){let e=this._fetchDecodeStage_Instruction_InternalRegister.inputsD.slice(0,4),r=De(e,!0)[1];return G(r)?O:ar[r]}get operands(){return this._fetchDecodeStage_Instruction_InternalRegister.inputsD.slice(4,8)}get cycle(){let e=De(this._Operations_InternalCounter.outputsQ,!1)[1];return G(e)?0:e}get stage(){let e=this.cycle;return sr[(e-1)%sr.length]}};c(ho,"CPU");function K4(o){let n=!1;for(let e=0;e<o.length;e++)n=n||o[e];return n}c(K4,"logicalOROnEveryBits");function Z4(o){let n=!0;for(let e=0;e<o.length;e++)n=n&&o[e];return n}c(Z4,"logicalANDOnEveryBits");lt.impl=ho;var Sn=ge(He());var Xo={Background:0,Normal:1,Overlay:2},Li=class{constructor(){this._componentsByZIndex=kt(()=>[],3);this._componentsById=new Map}*all(){for(let n of this._componentsByZIndex)for(let e of n)yield e}*allInReversedZIndexOrder(){for(let n=this._componentsByZIndex.length-1;n>=0;n--){let e=this._componentsByZIndex[n];for(let r of e)yield r}}*withZIndex(n){for(let e of this._componentsByZIndex[n])yield e}add(n){let e=n.drawZIndex;this._componentsByZIndex[e].push(n);let r=n.ref,i;if(r===void 0)r=this.generateIdFor(n),n.doSetValidatedId(r);else if((i=this._componentsById.get(r))!==void 0){console.error(`Component with id '${r}' already exists and will be renamed`);let s=this.generateIdFor(i);i.doSetValidatedId(s),this._componentsById.set(s,i)}this._componentsById.set(r,n)}contains(n){for(let e of this.all())if(e.def.type===n)return!0;return!1}updateCustomComponents(n){for(let e of[...this.all()])e.def.type===n&&e instanceof Pn&&e.updateFromDef()}changeIdOf(n,e){let r=n.ref;if(r!==void 0&&(this._componentsById.delete(r)||console.warn(`Component with id '${r}' not found`)),this._componentsById.has(e))throw new Error(`Component with id '${e}' already exists`);n.doSetValidatedId(e),this._componentsById.set(e,n)}swapIdsOf(n,e){let r=n.ref,i=e.ref;if(r===void 0||i===void 0)throw new Error("Cannot swap ids of components without ids");n.doSetValidatedId(i),e.doSetValidatedId(r),this._componentsById.set(r,e),this._componentsById.set(i,n)}get(n){return this._componentsById.get(n)}generateIdFor(n){let e=n.def.idPrefix,r=Ae(e)?e:e(n),i=0,s;for(;this._componentsById.has(s=`${r}${i}`);)i++;return s}tryDelete(n){return this.tryDeleteWhere(e=>e===n,!0)>0}tryDeleteWhere(n,e){let r=[];e:for(let i of this._componentsByZIndex)for(let s=0;s<i.length;s++){let a=i[s];if(n(a)&&(a.destroy(),i.splice(s,1),r.push(a),e))break e}for(let i of r){let s=i.ref;s===void 0?console.warn("Removing component without id"):this._componentsById.has(s)?this._componentsById.delete(s):console.warn(`Removing component with id '${s}' but no component with that id exists`)}return r.length}clearAll(){for(let n of this._componentsByZIndex)n.splice(0,n.length);this._componentsById.clear()}};c(Li,"ComponentList");var Vi=class{constructor(){this._lastGivenNodeID=-1;this._usedIDs=new Set;this._allLiveNodes=[];this._currentMapping=void 0}getFreeId(){for(;this._usedIDs.has(++this._lastGivenNodeID););return this._usedIDs.add(this._lastGivenNodeID),this._lastGivenNodeID}getFreeIdFrom(n){if(!this._usedIDs.has(n))return this._usedIDs.add(n),n;if(this._currentMapping!==void 0){let e=this.getFreeId();return this._currentMapping.set(n,e),e}else return console.error(`Loaded node with id ${n}, which is already taken, with no NodeMapping being built`),n}addLiveNode(n){this._usedIDs.has(n.id)||console.error(`Inserting live node with unreserved id ${n.id}`),this._allLiveNodes[n.id]=n}removeLiveNode(n){delete this._allLiveNodes[n.id],this._usedIDs.delete(n.id)}clearAll(){this._allLiveNodes.splice(0,this._allLiveNodes.length),this._usedIDs.clear(),this._lastGivenNodeID=-1,this._currentMapping=void 0}findNode(n,e){var i;let r=(i=e.get(n))!=null?i:n;return this._allLiveNodes[r]}recordMappingWhile(n){this._currentMapping!==void 0&&console.warn("NodeManager.recordMappingWhile called while already recording a mapping"),this._currentMapping=new Map,n();let e=this._currentMapping;return this._currentMapping=void 0,e}tryConnectNodesOf(n){let e=n.parent.wireMgr,r=[];for(let i of n.allNodes())if(i.acceptsMoreConnections){let s=i.posX,a=i.posY,u=i.component;for(let l of this._allLiveNodes)l!==void 0&&l.component!==u&&l.acceptsMoreConnections&&l.posX===s&&l.posY===a&&(e.startDraggingFrom(i),e.stopDraggingOn(l)!==void 0&&r.push([i,l.component,l]))}return r}};c(Vi,"NodeManager");var Va=class{constructor(){this._canvasRedrawReasons={};this._isEmpty=!0}addReason(n,e){let r=e,i=this._canvasRedrawReasons[n];i===void 0?this._canvasRedrawReasons[n]=[r]:i.push(r),this._isEmpty=!1}getReasonsAndClear(){var e,r;if(this._isEmpty)return;let n=[];for(let i of Object.keys(this._canvasRedrawReasons)){n.push(i);let s=this._canvasRedrawReasons[i];n.push(" (",String(s.length),"\xD7)",": ");for(let a of s)if(a!==null){let u=a;n.push((r=(e=u.constructor)==null?void 0:e.name)!=null?r:"Component"),u.type!==void 0&&n.push("_",u.type),u.name!==void 0&&n.push("('",u.name,"')"),n.push("; ")}n.pop(),n.push(`
    `)}return n.pop(),this._canvasRedrawReasons={},this._isEmpty=!0,n.join("")}hasReasons(){return!this._isEmpty}};c(Va,"RedrawManager");var Hi=class{constructor(){this._propagateQueue=[];this._recalcQueue=[];this.debug=!1}enqueueForPropagate(n){this._propagateQueue.push(n),this.log("Enqueued for propagate: "+n)}enqueueForRecalc(n,e){this._recalcQueue.push([n,e]),this.log("Enqueued for recalc: "+n)}queueIsEmpty(){return this._propagateQueue.length===0&&this._recalcQueue.length===0}recalcAndPropagateIfNeeded(){return this.queueIsEmpty()?!1:(this.recalcAndPropagate(),!0)}recalcAndPropagate(){let n=0,e=1e3;do{if(n++,n>=e){console.warn(`ERROR: Circular dependency; suspending updates after ${e} recalc/propagate rounds`);for(let s of[...this._propagateQueue,...this._recalcQueue.map(a=>a[0])])s.setInvalid();this._propagateQueue=[],this._recalcQueue=[];break}this.log(`Recalc/propagate round ${n}: ${this._propagateQueue.length} propagate, ${this._recalcQueue.length} recalc.`);let r=this._propagateQueue;this._propagateQueue=[],this.log(`  PROPAG (${r.length}) \u2013 `+r.map(s=>s.toString()).join("; "));for(let s of r)try{s.propagateCurrentValue()}catch(a){console.error("Error while propagating value of "+s,a),s.setInvalid()}let i=this._recalcQueue;this._recalcQueue=[],this.log(`  RECALC (${i.length}) \u2013 `+i.map(s=>s.toString()).join("; "));for(let[s,a]of i)try{s.recalcValue(a)}catch(u){console.error("Error while recalculating value of "+s,u),s.setInvalid()}}while(!this.queueIsEmpty());this.log(`Recalc/propagate done in ${n} rounds.`)}log(n){this.debug&&console.log(n)}};c(Hi,"RecalcManager");var Hr=class{constructor(n,e){this.strokeStyle="#000000";this.fillStyle="#000000";this.lineCap="butt";this.lineJoin="miter";this.miterLimit=10;this.lineWidth=1;this.globalAlpha=1;this.font="10px sans-serif";this.shadowColor="#000000";this.shadowOffsetX=0;this.shadowOffsetY=0;this.shadowBlur=0;this.textAlign="start";this.textBaseline="alphabetic";this.lineDash=null;this.lineDashOffset=0;this.fontUnderline="";this._groupStack=[];this._transformMatrixStack=[];this._currentPath=new Ui(this);this._transformMatrix=new DOMMatrix;var i,s,a,u;let r;if(e!==void 0?r={width:n,height:e}:n!==void 0?r=n:r={},this.width=(i=r.width)!=null?i:500,this.height=(s=r.height)!=null?s:500,this.enableMirroring=(a=r.enableMirroring)!=null?a:!1,this.canvas=this,this._document=(u=r.document)!=null?u:document,r.ctx?this._g=r.ctx:(this._helperCanvas=this._document.createElement("canvas"),this._g=this._helperCanvas.getContext("2d")),this._styleStack=[this._getStyleState()],this._svg=this._document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("version","1.1"),this._svg.setAttribute("xmlns","http://www.w3.org/2000/svg"),this._svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this._svg.setAttribute("width",String(this.width)),this._svg.setAttribute("height",String(this.height)),this._ids={},r.metadata!==void 0){let l=this._document.createElementNS("http://www.w3.org/2000/svg","metadata"),p=this._document.createTextNode(r.metadata);l.appendChild(p),this._svg.appendChild(l)}this._defs=this._document.createElementNS("http://www.w3.org/2000/svg","defs"),this._svg.appendChild(this._defs),this._currentElement=this._document.createElementNS("http://www.w3.org/2000/svg","g"),this._svg.appendChild(this._currentElement),this.resetTransform()}_createElement(n,e,r=!1){let i=this._document.createElementNS("http://www.w3.org/2000/svg",n);if(r&&(i.setAttribute("fill","none"),i.setAttribute("stroke","none")),e!==void 0)for(let[s,a]of Object.entries(e))i.setAttribute(s,String(a));return i}_closestGroupOrSvg(n){return n=n!=null?n:this._currentElement,n.nodeName==="g"||n.nodeName==="svg"?n:this._closestGroupOrSvg(n.parentNode)}_applyStyleState(n){for(let[e,r]of Object.entries(n))this[e]=r}_getStyleState(){let n={};for(let e of Object.keys(u2))n[e]=this[e];return n}_applyTransformation(n,e){let{a:r,b:i,c:s,d:a,e:u,f:l}=e!=null?e:this.getTransform();r===1&&i===0&&s===0&&a===1&&u===0&&l===0||n.setAttribute("transform",`matrix(${r} ${i} ${s} ${a} ${u} ${l})`)}_applyStyleToElement(n,e){for(let[r,i]of Object.entries(u2)){let s=this[r];if("apply"in i&&i.apply){if(s instanceof Ha){for(let a of s._ctx._defs.children){let u=a.getAttribute("id");this._ids[u]=u,this._defs.appendChild(a)}n.setAttribute(i.apply,`url(#${s.patternElem.getAttribute("id")})`)}else if(s instanceof ks)n.setAttribute(i.apply,`url(#${s.gradientElem.getAttribute("id")})`);else if(i.apply.indexOf(e)!==-1&&i.svg!==s)if((i.svgAttr==="stroke"||i.svgAttr==="fill")&&s.indexOf("rgba")!==-1){let u=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(s);n.setAttribute(i.svgAttr,`rgb(${u[1]},${u[2]},${u[3]})`);let l=parseFloat(u[4])*this.globalAlpha;n.setAttribute(i.svgAttr+"-opacity",String(l))}else{let a=i.svgAttr;if(r==="globalAlpha"){if(a=e+"-"+i.svgAttr,n.getAttribute(a)!==null)continue}else if(r==="lineWidth"){let u=this._getTransformScale();s=s*Math.max(u.x,u.y)}n.setAttribute(a,s)}}}}getSerializedSvg(n=!1){let e=new XMLSerializer().serializeToString(this._svg);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(e)&&(e=e.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),n)for(let[i,s]of Object.entries(nb)){let a=new RegExp(i,"gi");a.test(e)&&(e=e.replace(a,s))}return e}getSvg(){return this._svg}beginGroup(n){let e=this._createElement("g");n!==void 0&&e.setAttribute("class",n);let r=this._closestGroupOrSvg();this._groupStack.push(r),r.appendChild(e),this._currentElement=e}endGroup(){var n;this._currentElement=(n=this._groupStack.pop())!=null?n:this._svg.children[1]}save(){this.beginGroup(void 0),this._styleStack.push(this._getStyleState()),this._transformMatrixStack.push(this.getTransform())}restore(){this.endGroup(),this._applyStyleState(this._styleStack.pop()),this.setTransform(this._transformMatrixStack.pop())}_createPathElement(){let n=this._createElement("path",{},!0);return this._closestGroupOrSvg().appendChild(n),n}beginPath(){this._currentPath=new Ui(this)}closePath(){this._currentPath.closePath()}moveTo(n,e){this._currentPath.moveTo(n,e)}lineTo(n,e){this._currentPath.lineTo(n,e)}rect(n,e,r,i){this._currentPath.rect(n,e,r,i)}bezierCurveTo(n,e,r,i,s,a){this._currentPath.bezierCurveTo(n,e,r,i,s,a)}quadraticCurveTo(n,e,r,i){this._currentPath.quadraticCurveTo(n,e,r,i)}arc(n,e,r,i,s,a=!1){this._currentPath.arc(n,e,r,i,s,a)}arcTo(n,e,r,i,s){this._currentPath.arcTo(n,e,r,i,s)}ellipse(n,e,r,i,s,a,u,l=!1){this._currentPath.ellipse(n,e,r,i,s,a,u,l)}stroke(n){this._strokeOrFill("stroke",n)}fill(n){this._strokeOrFill("fill",n)}_strokeOrFill(n,e){let r;if(e){if(!(e instanceof Ui))throw new Error("Path2D is not a Path2DSVG");r=e}else r=this._currentPath;let i=this._createPathElement();this._applyStyleToElement(i,n),i.setAttribute("paint-order","fill stroke markers"),i.setAttribute("d",r.d)}fillRect(n,e,r,i){let{a:s,b:a,c:u,d:l,e:p,f:d}=this.getTransform();s===1&&a===0&&u===0&&l===1&&p===0&&d===0&&n===0&&e===0&&r===this.width&&i===this.height&&this._clearCanvas();let h=this._createElement("rect",{x:n,y:e,width:r,height:i},!0);this._closestGroupOrSvg().appendChild(h),this._currentElement=h,this._applyTransformation(h),this._applyStyleToElement(this._currentElement,"fill")}strokeRect(n,e,r,i){let s=this._createElement("rect",{x:n,y:e,width:r,height:i},!0);this._closestGroupOrSvg().appendChild(s),this._currentElement=s,this._applyTransformation(s),this._applyStyleToElement(this._currentElement,"stroke")}_clearCanvas(){let n=this._svg.children[1];this._svg.removeChild(n),this._currentElement=this._document.createElementNS("http://www.w3.org/2000/svg","g"),this._svg.appendChild(this._currentElement),this._groupStack.splice(0,this._groupStack.length)}clearRect(n,e,r,i){let{a:s,b:a,c:u,d:l,e:p,f:d}=this.getTransform();if(s===1&&a===0&&u===0&&l===1&&p===0&&d===0&&n===0&&e===0&&r===this.width&&i===this.height){this._clearCanvas();return}let h=this._closestGroupOrSvg(),m=this._createElement("rect",{x:n,y:e,width:r,height:i,fill:"#FFFFFF"},!0);this._applyTransformation(m),h.appendChild(m)}setLineDash(n){n&&n.length>0?this.lineDash=n.join(","):this.lineDash=null}getLineDash(){return this.lineDash===null?[]:this.lineDash.split(",").map(n=>parseFloat(n))}clip(n){let e=this._closestGroupOrSvg(),r=this._createElement("clipPath"),i=Il(this._ids),s=this._createPathElement();s.setAttribute("d",this._currentPath.d),r.setAttribute("id",i),n!==void 0&&r.setAttribute("clip-rule",n),r.appendChild(s),this._defs.appendChild(r),e.setAttribute("clip-path",`url(#${i})`),this._currentElement=e}drawImage(){let n=Array.prototype.slice.call(arguments),e=n[0],r,i,s,a,u=0,l=0,p,d;if(n.length===3)r=n[1],i=n[2],p=e.width,d=e.height,s=p,a=d;else if(n.length===5)r=n[1],i=n[2],s=n[3],a=n[4],p=e.width,d=e.height;else if(n.length===9)u=n[1],l=n[2],p=n[3],d=n[4],r=n[5],i=n[6],s=n[7],a=n[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);let h=this._closestGroupOrSvg(),m=this.getTransform().translate(r,i);if(e instanceof Hr){let f=e.getSvg().cloneNode(!0);if(f.childNodes.length>1){let C=f.childNodes[0];for(;C.childNodes.length;){let b=C.childNodes[0].getAttribute("id");this._ids[b]=b,this._defs.appendChild(C.childNodes[0])}let D=f.children[1];D!==void 0&&(this._applyTransformation(D,m),h.appendChild(D))}}else if(e.nodeName==="CANVAS"||e.nodeName==="IMG"){let f=this._createElement("image");if(f.setAttribute("width",String(s)),f.setAttribute("height",String(a)),f.setAttribute("preserveAspectRatio","none"),u||l||p!==e.width||d!==e.height){let C=this._document.createElement("canvas");C.width=s,C.height=a,C.getContext("2d").drawImage(e,u,l,p,d,0,0,s,a),e=C}this._applyTransformation(f,m),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.nodeName==="CANVAS"?e.toDataURL():e.getAttribute("src")),h.appendChild(f)}}_applyText(n,e,r,i){let s=document.createElement("span");s.setAttribute("style","font:"+this.font);let a=s.style,u=this._closestGroupOrSvg(),l=this._createElement("text",{"font-family":a.fontFamily,"font-size":a.fontSize,"font-style":a.fontStyle,"font-weight":a.fontWeight,"text-decoration":this.fontUnderline,x:e,y:r,"text-anchor":J4(this.textAlign),"dominant-baseline":eb(this.textBaseline)},!0);if(l.appendChild(this._document.createTextNode(n)),this._currentElement=l,this._applyTransformation(l),this._applyStyleToElement(this._currentElement,i),this.fontHref!==void 0){let p=this._createElement("a");p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.fontHref),p.appendChild(l),u.appendChild(p)}else u.appendChild(l)}fillText(n,e,r){this._applyText(n,e,r,"fill")}strokeText(n,e,r){this._applyText(n,e,r,"stroke")}measureText(n){return this._g.font=this.font,this._g.measureText(n)}createPath(n){return new Ui(this,n)}createLinearGradient(n,e,r,i){let s=this._createElement("linearGradient",{id:Il(this._ids),x1:n+"px",x2:r+"px",y1:e+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this._defs.appendChild(s),new ks(s,this)}createRadialGradient(n,e,r,i,s,a){let u=this._createElement("radialGradient",{id:Il(this._ids),cx:i+"px",cy:s+"px",r:a+"px",fx:n+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this._defs.appendChild(u),new ks(u,this)}createPattern(n,e){let r=this._document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=Il(this._ids);if(r.setAttribute("id",i),r.setAttribute("width",String(n.width)),r.setAttribute("height",String(n.height)),r.setAttribute("patternUnits","userSpaceOnUse"),"nodeName"in n&&(n.nodeName==="CANVAS"||n.nodeName==="IMG")){let s=this._document.createElementNS("http://www.w3.org/2000/svg","image");s.setAttribute("width",String(n.width)),s.setAttribute("height",String(n.height)),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n.nodeName==="CANVAS"?n.toDataURL():n.getAttribute("src")),r.appendChild(s),this._defs.appendChild(r)}else n instanceof Hr&&(r.appendChild(n._svg.children[1]),this._defs.appendChild(r));return new Ha(r,this)}setTransform(n,e,r,i,s,a){if(e===void 0){let u=n;this._transformMatrix=new DOMMatrix([u.a,u.b,u.c,u.d,u.e,u.f])}else{let u=n;this._transformMatrix=new DOMMatrix([u,e,r,i,s,a])}}getTransform(){let{a:n,b:e,c:r,d:i,e:s,f:a}=this._transformMatrix;return new DOMMatrix([n,e,r,i,s,a])}resetTransform(){this.setTransform(1,0,0,1,0,0)}transform(n,e,r,i,s,a){let u=this.getTransform().multiply(new DOMMatrix([n,e,r,i,s,a]));this.setTransform(u)}scale(n,e){if(e===void 0&&(e=n),isNaN(n)||isNaN(e)||!isFinite(n)||!isFinite(e))return;let r=this.getTransform().scale(n,e);this.setTransform(r)}rotate(n){let e=this.getTransform().multiply(new DOMMatrix([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]));this.setTransform(e)}translate(n,e){let r=this.getTransform().translate(n,e);this.setTransform(r)}_matrixTransform(n,e){let{a:r,b:i,c:s,d:a,e:u,f:l}=this._transformMatrix,p=r*n+s*e+u,d=i*n+a*e+l;return[p,d]}_getTransformScale(){return{x:Math.hypot(this._transformMatrix.a,this._transformMatrix.b),y:Math.hypot(this._transformMatrix.c,this._transformMatrix.d)}}_getTransformRotation(){return Math.atan2(this._transformMatrix.b,this._transformMatrix.a)}};c(Hr,"SVGRenderingContext");var Ui=class{constructor(n,e){this._posX=void 0;this._posY=void 0;this.g=n,e===void 0?(this._parts=[],this._hasMoved=!1):Ae(e)?(this._parts=[e],this._hasMoved=e.indexOf("M")>=0):(this._parts=[...e._parts],this._hasMoved=this._parts.some(r=>r.indexOf("M")>=0))}get d(){return this._parts.join(" ")}addPath(n,e){e&&console.error("transform argument to addPath is not supported"),this._parts.push(n),this._hasMoved||(this._hasMoved=n.indexOf("M")>=0)}closePath(){this.addPath("Z")}moveTo(n,e){this._posX=n,this._posY=e;let[r,i]=this.g._matrixTransform(n,e);this.addPath(`M ${r} ${i}`)}lineTo(n,e){this._posX=n,this._posY=e;let r=this._hasMoved?"L":"M",[i,s]=this.g._matrixTransform(n,e);this.addPath(`${r} ${i} ${s}`)}bezierCurveTo(n,e,r,i,s,a){this._posX=s,this._posY=a;let u=this.g,[l,p]=u._matrixTransform(n,e),[d,h]=u._matrixTransform(r,i),[m,f]=u._matrixTransform(s,a);this.addPath(`C ${l} ${p} ${d} ${h} ${m} ${f}`)}quadraticCurveTo(n,e,r,i){this._posX=r,this._posY=i;let s=this.g,[a,u]=s._matrixTransform(n,e),[l,p]=s._matrixTransform(r,i);this.addPath(`Q ${a} ${u} ${l} ${p}`)}rect(n,e,r,i){this.moveTo(n,e),this.lineTo(n+r,e),this.lineTo(n+r,e+i),this.lineTo(n,e+i),this.closePath()}arc(n,e,r,i,s,a=!1){if(i===s)return;let u=this.g;i=i%(2*Math.PI),s=s%(2*Math.PI),i===s&&(s=(s+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));let l=n+r*Math.cos(s),p=e+r*Math.sin(s),d=n+r*Math.cos(i),h=e+r*Math.sin(i),m=a?0:1,f=0,C=s-i;C<0&&(C+=2*Math.PI),a?f=C>Math.PI?0:1:f=C>Math.PI?1:0;let D=Math.hypot(u._transformMatrix.a,u._transformMatrix.b),b=Math.hypot(u._transformMatrix.c,u._transformMatrix.d);this.lineTo(d,h);let[v,_]=u._matrixTransform(l,p);this.addPath(`A ${r*D} ${r*b} 0 ${f} ${m} ${v} ${_}`),this._posX=n,this._posY=e}arcTo(n,e,r,i,s){let a=this._posX,u=this._posY;if(a===void 0||u===void 0)return;if(s<0)throw new Error("IndexSizeError: The radius provided ("+s+") is negative.");if(a===n&&u===e||n===r&&e===i||s===0){this.lineTo(n,e);return}let l=[a-n,u-e],p=[r-n,i-e],d=Math.hypot(l[0],l[1]),h=Math.hypot(p[0],p[1]),m=(l[0]*p[0]+l[1]*p[1])/(d*h);if(m===-1){this.lineTo(n,e);return}if(m===1){let te=65535/d,se=[a+te*l[0],u+te*l[1]];this.lineTo(se[0],se[1]);return}let f=s/Math.tan(Math.acos(m)/2),C=f/d,D=[n+C*l[0],e+C*l[1]],b=[l[1],-l[0]],v=Math.hypot(b[0],b[1]),_=s/v;(b[0]*p[0]+b[1]*p[1])/(v*h)<0&&(b=[-b[0],-b[1]]);let A=[D[0]+_*b[0],D[1]+_*b[1]];b=[-b[0],-b[1]];let E=Math.acos(b[0]/v);b[1]<0&&(E=2*Math.PI-E);let B=!1,I=f/h,k=[n+I*p[0],e+I*p[1]],S=[k[0]-A[0],k[1]-A[1]],H=Math.hypot(S[0],S[1]),F=Math.acos(S[0]/H);S[1]<0&&(F=2*Math.PI-F),E>F&&E-F<Math.PI&&(B=!0),E<F&&F-E>Math.PI&&(B=!0),this.lineTo(D[0],D[1]),this.arc(A[0],A[1],s,E,F,B)}ellipse(n,e,r,i,s,a,u,l=!1){if(a===u)return;let p=this.g;[n,e]=p._matrixTransform(n,e);let d=p._getTransformScale();r=r*d.x,i=i*d.y,s=s+p._getTransformRotation(),a=a%(2*Math.PI),u=u%(2*Math.PI),a===u&&(u=(u+2*Math.PI-.001*(l?-1:1))%(2*Math.PI));let h=n+Math.cos(-s)*r*Math.cos(u)+Math.sin(-s)*i*Math.sin(u),m=e-Math.sin(-s)*r*Math.cos(u)+Math.cos(-s)*i*Math.sin(u),f=n+Math.cos(-s)*r*Math.cos(a)+Math.sin(-s)*i*Math.sin(a),C=e-Math.sin(-s)*r*Math.cos(a)+Math.cos(-s)*i*Math.sin(a),D=l?0:1,b=0,v=u-a;v<0&&(v+=2*Math.PI),l?b=v>Math.PI?0:1:b=v>Math.PI?1:0;let _=p._transformMatrix;p.resetTransform(),this.lineTo(f,C),p._transformMatrix=_,this.addPath(`A ${r} ${i} ${s*(180/Math.PI)} ${b} ${D} ${h} ${m}`),this._posX=h,this._posY=m}};c(Ui,"Path2DSVG");var ks=class{constructor(n,e){this.gradientElem=n;this._ctx=e}addColorStop(n,e){let r=this._ctx._createElement("stop");if(r.setAttribute("offset",String(n)),e.indexOf("rgba")!==-1){let s=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(e);s?(r.setAttribute("stop-color",`rgb(${s[1]},${s[2]},${s[3]})`),r.setAttribute("stop-opacity",s[4])):r.setAttribute("stop-color",e)}else r.setAttribute("stop-color",e);this.gradientElem.appendChild(r)}};c(ks,"CanvasGradientSVG");var Ha=class{constructor(n,e){this.patternElem=n;this._ctx=e}};c(Ha,"CanvasPatternSVG");function Il(o){if(!o)throw new Error("cannot create a random attribute name for an undefined object");let n="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="";do{e="";for(let r=0;r<12;r++)e+=n[Math.floor(Math.random()*n.length)]}while(o[e]!==void 0);return e}c(Il,"randomString");var u2={strokeStyle:{svgAttr:"stroke",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",svg:1,apply:"fill stroke"},lineDash:{svgAttr:"stroke-dasharray",svg:null,apply:"stroke"}},l2={left:"start",right:"end",center:"middle",start:"start",end:"end"};function J4(o){var n;return(n=l2[o])!=null?n:l2.start}c(J4,"getTextAnchor");var c2={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};function eb(o){var n;return(n=c2[o])!=null?n:c2.alphabetic}c(eb,"getDominantBaseline");function tb(o,n){let e={},r=o.split(",");n=n!=null?n:10;for(let i=0;i<r.length;i+=2){let s="&"+r[i+1]+";",a=parseInt(r[i],n);e[s]="&#"+a+";"}return e["\\xa0"]="&#160;",e}c(tb,"createNamedToNumberedLookup");var nb=tb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var p2=ge(He());var fo=Oe("out",!0,!1,{variantName:({bits:o})=>`out-${o}`,idPrefix:"out",button:{imgWidth:32},repr:{bits:P(p2.number),name:qt},valueDefaults:{},params:Jt.paramDefs,validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>{if(o===1){let n=$n/z;return{gridWidth:n,gridHeight:n}}return{gridWidth:2,gridHeight:at(o)?o:2*o}},makeNodes:({numBits:o})=>({ins:{In:fe("w",o===1?-3:-2,0,o)}}),initialValue:(o,{numBits:n})=>U(!1,n)}),jo=class extends Fe{constructor(e,r,i){var s;super(e,fo.with(r),i);this.numBits=r.numBits,this._name=(s=i==null?void 0:i.name)!=null?s:void 0}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits===fo.aults.bits?void 0:this.numBits,name:this._name})}isOver(e,r){return this.numBits===1?this.parent.mode>=2&&xr(e,r,this.posX,this.posY)<$n/2:super.isOver(e,r)}get name(){return this._name}makeTooltip(){let e=w.Components.Output.tooltip;return ee(void 0,Q(e.title.expand({numBits:this.numBits})))}doRecalcValue(){return this.inputValues(this.inputs.In)}doDraw(e,r){this.numBits===1?this.doDrawSingle(e,r,this.inputs.In[0]):this.doDrawMulti(e,r,this.inputs.In)}doDrawSingle(e,r,i){de(e,i,this.posX,this.posY),e.strokeStyle=r.borderColor,e.fillStyle=r.borderColor,e.beginPath(),Lo(e,this.posX-$n/2-5,this.posY-5,this.posX-$n/2-5,this.posY+5,this.posX-$n/2-1,this.posY),e.fill(),e.stroke();let s=this.parent.editor.options.hideOutputColors?O:i.value;e.fillStyle=Vt(s),e.lineWidth=4,e.beginPath(),On(e,this.posX,this.posY,$n),e.fill(),e.stroke(),r.inNonTransformedFrame(a=>{this._name!==void 0&&Fo(e,a,this._name,pt(s),this,!0),il(e,s,this)})}doDrawMulti(e,r,i){let s=this.bounds(),{left:a,top:u,width:l}=s,p=s.outline(e);e.fillStyle=Je,e.fill(p);for(let f of i)de(e,f,a-2,f.posYInParentTransform,!0);let d=this.parent.editor.options.hideOutputColors?U(O,this.numBits):this.value,h=r.isMouseOver&&this.parent.mode!==0;e.strokeStyle=h?r.borderColor:oe,e.lineWidth=1;let m=at(this.numBits)?z:2*z;for(let f=0;f<this.numBits;f++){let C=u+f*m;e.fillStyle=Vt(d[f]),e.beginPath(),e.rect(a,C,l,m),e.fill(),e.stroke()}e.lineWidth=3,e.stroke(p),r.inNonTransformedFrame(f=>{if(this._name!==void 0){let C=d.map(pt).reverse().join("");Fo(e,f,this._name,C,this,!0)}for(let C=0;C<this.numBits;C++){let D=u+m/2+C*m;Mi(e,d[C],...f.rotatePoint(this.posX,D),{small:at(this.numBits)})}})}autoConnected(e){if(e.length!==1)return;let[r,i,s]=e[0];if(s instanceof ro){let a;(a=s.group)!==void 0&&a.nodes.length===1&&!Po(a.name)?this.doSetName(a.name):this._name===void 0&&!Po(s.shortName)&&this.doSetName(s.shortName)}if(s.orient==="w")switch(ie.add(i.orient,r.orient)){case"e":return;case"w":this.doSetOrient("w"),this.setPosition(this.posX-z*6,this.posY,!1);return;case"s":this.doSetOrient("s"),this.setPosition(this.posX-z*3,this.posY+z*3,!1);return;case"n":this.doSetOrient("n"),this.setPosition(this.posX-z*3,this.posY-z*3,!1);return}}doSetName(e){this._name=e,this.setNeedsRedraw("name changed")}makeComponentSpecificContextMenuItems(){return[["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))],["mid",T.sep()],this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits")]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};c(jo,"Output");fo.impl=jo;var mo="custom-",jp=50,Yp=34,d2=Sn.type({id:Sn.string,caption:Sn.string,circuit:Sn.type({components:P(Sn.record(Sn.string,Sn.record(Sn.string,Sn.unknown))),wires:P(Sn.array(Lr.Repr))})}),Wi=class{constructor(n){this.numBySide={n:0,e:0,s:0,w:0};var s,a,u;this.customId=n.id,this._caption=n.caption,this.circuit=n.circuit,this.insOuts=[];let e=0,r=0,i=(s=this.circuit.components)!=null?s:{};for(let[l,p]of Object.entries(i)){let d=p,h=d.type==="in"&&!((a=d.isConstant)!=null&&a),m=d.type==="out";if(h||m){let f=d,C=Ae(f.name)?f.name:h?"In":"Out",D=mp.includes(f.orient)?f.orient:ie.default;D=h?ie.invert(D):D;let b=Number((u=f.bits)!=null?u:1);this.numBySide[D]+=b;let v=me(f.pos)&&f.pos.length===2?f.pos.map(Number):[0,0];this.insOuts.push({isIn:h,id:l,name:C,orient:D,numBits:b,sourcePos:v,sourceRepr:f}),delete i[l],h?e+=b:r+=b}}ob(this.insOuts);for(let l of this.insOuts)i[l.id]=l.sourceRepr;this.numInputs=e,this.numOutputs=r,this.recalcSize()}toJSON(){return{id:this.customId,caption:this._caption,circuit:this.circuit}}get caption(){return this._caption}doSetCaption(n){this._caption=n,this.recalcSize()}recalcSize(){let r=1*this._caption.length+2;this.gridWidth=Math.ceil(Math.max(r,(Math.max(this.numBySide.s,this.numBySide.n)-1)*2+2*1.5)),this.gridHeight=Math.ceil(Math.max(r,(Math.max(this.numBySide.e,this.numBySide.w)-1)*2+2*1.5))}isValid(){return!0}get type(){return mo+this.customId}uses(n,e){var s,a;let r=this.circuit.components;if(r===void 0)return!1;let i=[];for(let u of Object.values(r)){let l=String(u.type);if(l===n)return!0;if(e!==!1&&l.startsWith(mo)&&!i.includes(l)){let p=e[1],d=l.substring(mo.length);if((a=(s=p.getCustomDef(d))==null?void 0:s.uses(n,e))!=null&&a)return!0;i.push(l)}}return!1}make(n){let e=new Pn(n,this);return n.components.add(e),e}makeFromJSON(n,e){let r=Zr(e,rb,"CustomComponent");if(r===void 0)return;let i=new Pn(n,this,r);return n.components.add(i),i}makeButtonSVG(){let n=jp,e=Yp,r=new Hr(n,e);r.rect(10,2,30,30),r.strokeStyle="currentColor",r.lineWidth=2,r.stroke();let i=24,s=6,a=c((d,h,m)=>{let f=(d-1)*s<=i?s:i/(d-1),C=e/2-(d-1)*f/2;for(let D=0;D<d;D++){let b=C+D*f;r.moveTo(h,b),r.lineTo(m,b)}},"drawInsOuts");r.lineWidth=1;let u=10;a(Math.min(u,this.numInputs),2,10),a(Math.min(u,this.numOutputs),40,48),r.stroke();let l=this._caption,p=!1;for(;;){let d=15;r.font=`${d}px sans-serif`;let h=r.measureText(l).width,m=(n-24)/h;if(m<1&&(d=Math.floor(m*d),r.font=`${d}px sans-serif`),d>=8){r.textAlign="center",r.textBaseline="middle",r.fillStyle="currentColor",r.fillText(l+(p?".":""),n/2,e/2);break}l=l.slice(0,-1),p=!0}return r.getSvg()}toStandardDef(){return ke(mo+this.customId,{idPrefix:this.customId,button:{imgWidth:50},valueDefaults:{},size:{gridWidth:this.gridWidth,gridHeight:this.gridHeight},makeNodes:({gridWidth:n,gridHeight:e})=>{let r=n/2+1,i=-r,s=e/2+1,a=-s,u={n:this.numBySide.n-1,e:-(this.numBySide.e-1),s:this.numBySide.s-1,w:-(this.numBySide.w-1)},l={n:0,e:0,s:0,w:0},p=c(m=>{let{orient:f,numBits:C}=m,[D,b]=(()=>{let v=ie.isVertical(f)?-1:1,_=u[f]+v*(l[f]+(C-1)/2)*2;switch(f){case"e":return[r,_];case"w":return[i,_];case"n":return[_,a];case"s":return[_,s]}})();return l[f]+=C,C===1?[D,b,f]:ie.isVertical(f)?Mn(f,D,b,C):fe(f,D,b,C)},"make"),d={},h={};for(let m of this.insOuts)(m.isIn?d:h)[m.name]=p(m);return{ins:d,outs:h}},initialValue:()=>U(!1,this.numOutputs)})}};c(Wi,"CustomComponentDef");var rb=bp(!0,!0),Pn=class extends Re{constructor(e,r,i){super(e,r.toStandardDef(),i);this.components=new Li;this.nodeMgr=new Vi;this.wireMgr=new Ii(this);this.recalcMgr=new Hi;this._ifEditing=void 0;this._subcircuitInputs=[];this._subcircuitOutputs=[];this._customDef=r,this.numInputs=this.inputs._all.length,this.numOutputs=this.outputs._all.length;let s=ut.loadCircuit(this,r.circuit,{immediateWirePropagation:!0,skipMigration:!0});s!==void 0&&(console.error("Failed to load custom component:",s),this.setInvalid());let a=0;for(let u of this.components.all())if(u instanceof uo&&!u.isConstant){let l=u.outputs._all;this._subcircuitInputs.push(...l);let p=l.length;p===1&&u.isLinkedToSomeClock&&(this.inputs._all[a].isClock=!0);for(let d=0;d<p;d++)this.inputs._all[a+d].prefersSpike=u.isPushButton;a+=p}else u instanceof jo&&this._subcircuitOutputs.push(...u.inputs._all)}get customDef(){return this._customDef}isMainEditor(){return!1}get editor(){return this.parent.editor}get mode(){return this.parent.mode}get ifEditing(){return this._ifEditing}stopEditingThis(){this._ifEditing=void 0}startEditingThis(e){this._ifEditing=e}toStringDetails(){var e,r;return(r=(e=this.customDef)==null?void 0:e.customId)!=null?r:""}toJSON(){return this.toJSONBase()}jsonType(){return mo+this.customDef.customId}makeClone(e){let r=this.toNodelessJSON(),i=new Pn(this.parent,this.customDef,r);return this.parent.components.add(i),e&&i.setSpawning(),i}updateFromDef(){let e=this.editor.factory.getCustomDef(this._customDef.customId);e===void 0?console.warn("New custom component definition not found, using old one, but trouble is ahead"):this._customDef=e,this.replaceWithComponent(this.makeClone(!1))}doRecalcValue(){for(let r=0;r<this.numInputs;r++)this._subcircuitInputs[r].value=this.inputs._all[r].value;return this.recalcMgr.recalcAndPropagateIfNeeded(),kt(r=>this._subcircuitOutputs[r].value,this.numOutputs)}propagateValue(e){this.outputValues(this.outputs._all,e)}makeTooltip(){let e=w.Components.Custom.tooltip;return ee(Q(zn(this.customDef.caption),Rt(e.titleSuffix)),Q(W(e.desc)))}doDraw(e,r){super.doDrawDefault(e,r,()=>{e.font="bold 18px sans-serif",e.fillStyle=oe,e.textAlign="center",e.textBaseline="middle",e.fillText(this.customDef.caption,this.posX,this.posY)})}makeComponentSpecificContextMenuItems(){let e=w.Components.Custom.contextMenu;return[...this.makeForceOutputsContextMenuItem(),["mid",T.item("connect",e.ChangeCircuit,()=>{this.tryOpenEditor()},"\u21A9\uFE0E")]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.tryOpenEditor():super.keyDown(e)}mouseDoubleClicked(e){let r=super.mouseDoubleClicked(e);return r.isChange?r:(this.tryOpenEditor(),ae.SimpleChange)}tryOpenEditor(){if(!(this.editor.editorRoot instanceof Bn)){alert(w.Components.Custom.messages.NotInMainEditor);return}this.editor.setEditorRoot(this),this.editor.editTools.undoMgr.takeSnapshot()}};c(Pn,"CustomComponent");function ob(o){let n={e:0,w:1,n:2,s:3},e=c(r=>ie.isVertical(r.orient)?-r.sourcePos[0]:r.sourcePos[1],"criterion");o.sort((r,i)=>n[r.orient]-n[i.orient]||e(r)-e(i))}c(ob,"sortInputsOutputs");var h2=ge(He());var Gi=Oe("dec",!0,!0,{variantName:({bits:o})=>`dec-${o}`,idPrefix:"dec",button:{imgWidth:50},repr:{bits:P(h2.number)},valueDefaults:{},params:{bits:Ee(2,[2,3,4,5])},validateParams:({bits:o})=>({numFrom:o,numTo:Cn(2,o)}),size:({numTo:o})=>({gridWidth:4,gridHeight:Math.max(8,1+o)}),makeNodes:({numFrom:o,numTo:n})=>({ins:{In:fe("w",-3,0,o)},outs:{Out:fe("e",3,0,n)}}),initialValue:(o,{numTo:n})=>U(!1,n)}),Ol=class extends Fe{constructor(e,r,i){super(e,Gi.with(r),i);this.numFrom=r.numFrom,this.numTo=r.numTo}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numFrom===Gi.aults.bits?void 0:this.numFrom})}makeTooltip(){let e=w.Components.Decoder.tooltip;return ee(e.title,Q(W(e.desc.expand({numFrom:this.numFrom,numTo:this.numTo,n:this.currentAddr()}))))}currentAddr(){let e=this.inputValues(this.inputs.In);return De(e,!1)[1]}doRecalcValue(){let e=this.currentAddr();if(G(e))return U(O,this.numTo);let r=U(!1,this.numTo);return r[e]=!0,r}doDraw(e,r){this.doDrawDefault(e,r,{skipLabels:!0,drawLabels:()=>{e.font="bold 14px sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillStyle=oe,e.fillText("Dec.",this.posX,this.posY)}})}propagateValue(e){this.outputValues(this.outputs.Out,e)}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};c(Ol,"Decoder");Gi.impl=Ol;var Fs=ke("dec-16seg",{idPrefix:"dec",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:4,gridHeight:10},makeNodes:()=>({ins:{In:yn("w",[[-3,-3],[-3,-2],[-3,-1],[-3,0],[-3,1],[-3,2],[-3,3]])},outs:{Out:yn("e",[[4,-4,"a1"],[3,-3.5,"a2"],[4,-3,"b"],[3,-2.5,"c"],[4,-2,"d2"],[3,-1.5,"d1"],[4,-1,"e"],[3,-.5,"f"],[4,0,"g1"],[3,.5,"g2"],[4,1,"h"],[3,1.5,"i"],[4,2,"j"],[3,2.5,"k"],[4,3,"l"],[3,3.5,"m"],[4,4,"p"]])}}),initialValue:()=>Gn(!1,17)}),Bl=class extends Re{constructor(n,e){super(n,Fs,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return ee(void 0,Q(W(w.Components.Decoder16Seg.tooltip)))}doRecalcValue(){let n=this.inputValues(this.inputs.In),[e,r]=De(n,!1),i;if(G(r))i=Gn(O,17);else if(r<32)i=Gn(!1,17);else{let s=ib[r-32];i=Gn(!1,17);for(let a=0;a<s.length;a++)i[a]=s.charAt(a)==="1"}return i}propagateValue(n){this.outputValues(this.outputs.Out,n)}doDraw(n,e){this.doDrawDefault(n,e,{skipLabels:!0,drawInside:r=>{this.drawGroupBox(n,this.inputs.In.group,r)},drawLabels:(r,{left:i,right:s})=>{n.fillStyle=In,n.font="bold 11px sans-serif",Ie(r,this.orient,"C","w",i,this.inputs.In),n.font="7px sans-serif",this.outputs._all.forEach(a=>{Ie(r,this.orient,a.shortName,"e",s,a)})}})}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};c(Bl,"Decoder16Seg");Fs.impl=Bl;var ib=["00000000000000000","00110000000000001","00100000000100000","00111100110100100","11011101110100100","10011001110111100","10001110101100010","00000000000100000","00000000000010010","00000000001001000","00000000111111110","00000000110100100","00000000000001000","00000000110000000","00000000000000001","00000000000011000","11111111000011000","00110000000010000","11101110110000000","11111100010000000","00110001110000000","11001101100000010","11011111110000000","11110000000000000","11111111110000000","11111101110000000","00000000000100100","00000000000101000","00000000100010010","00001100110000000","00000000011001000","11100000010000101","11101111010100000","11110011110000000","11111100010100100","11001111000000000","11111100000100100","11001111100000000","11000011100000000","11011111010000000","00110011110000000","11001100000100100","00111110000000000","00000011100010010","00001111000000000","00110011001010000","00110011001000010","11111111000000000","11100011110000000","11111111000000010","11100011110000010","11011101110000000","11000000000100100","00111111000000000","00000011000011000","00110011000001010","00000000001011010","00111101110000000","11001100000011000","01001000000100100","00000000001000010","10000100000100100","00000000000001010","00001100000000000","00000000001000000","00001110100000100","00000111100000100","00000110100000000","00000110100100100","00000110100001000","10000011100000000","10000101100100100","00000011100000100","00000000000000100","00000100000100100","00000000000110110","00000000000100100","00010010110000100","00000010100000100","00000110100000100","10000011100100000","10000001100100100","00000010100000000","10000101100000100","00000111100000000","00000110000000100","00000010000001000","00010010000001010","00000000001011010","00000101100100100","00000100100001000","01001000100100100","00000000000100100","10000100010100100","00000000110011000","00000000000000000"];var Ns=ke("dec-7seg",{idPrefix:"dec",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:4,gridHeight:8},makeNodes:()=>({ins:{In:yn("w",[[-3,-3,"A"],[-3,-1,"B"],[-3,1,"C"],[-3,3,"D"]])},outs:{Out:yn("e",[[3,-3,"a"],[3,-2,"b"],[3,-1,"c"],[3,0,"d"],[3,1,"e"],[3,2,"f"],[3,3,"g"]])}}),initialValue:()=>Gn(!1,7)}),Pl=class extends Re{constructor(n,e){super(n,Ns,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return ee(void 0,Q(W(w.Components.Decoder7Seg.tooltip)))}doRecalcValue(){let n=this.inputValues(this.inputs.In),[e,r]=De(n,!1),i;return G(r)?i=Gn(O,7):i=(()=>{switch(r){case 0:return[!0,!0,!0,!0,!0,!0,!1];case 1:return[!1,!0,!0,!1,!1,!1,!1];case 2:return[!0,!0,!1,!0,!0,!1,!0];case 3:return[!0,!0,!0,!0,!1,!1,!0];case 4:return[!1,!0,!0,!1,!1,!0,!0];case 5:return[!0,!1,!0,!0,!1,!0,!0];case 6:return[!0,!1,!0,!0,!0,!0,!0];case 7:return[!0,!0,!0,!1,!1,!1,!1];case 8:return[!0,!0,!0,!0,!0,!0,!0];case 9:return[!0,!0,!0,!0,!1,!0,!0];case 10:return[!0,!0,!0,!1,!0,!0,!0];case 11:return[!1,!1,!0,!0,!0,!0,!0];case 12:return[!0,!1,!1,!0,!0,!0,!1];case 13:return[!1,!0,!0,!0,!0,!1,!0];case 14:return[!0,!1,!1,!0,!0,!0,!0];case 15:return[!0,!1,!1,!1,!0,!0,!0];default:return Gn(O,7)}})(),i}propagateValue(n){this.outputValues(this.outputs.Out,n)}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};c(Pl,"Decoder7Seg");Ns.impl=Pl;var Ls=ke("dec-bcd4",{idPrefix:"bcd",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:5,gridHeight:10},makeNodes:()=>({ins:{In:yn("w",[[-4,-3,"A"],[-4,-1,"B"],[-4,1,"C"],[-4,3,"D"]])},outs:{Out:fe("e",4,0,5,2)}}),initialValue:()=>Gn(!1,5)}),kl=class extends Re{constructor(n,e){super(n,Ls,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return ee(void 0,Q(W(w.Components.DecoderBCD4.tooltip)))}doRecalcValue(){let n=this.inputValues(this.inputs.In),[e,r]=De(n,!1),i;return G(r)?i=Gn(O,5):i=(()=>{switch(r){case 0:return[!1,!1,!1,!1,!1];case 1:return[!1,!1,!1,!1,!0];case 2:return[!1,!1,!1,!0,!1];case 3:return[!1,!1,!1,!0,!0];case 4:return[!1,!1,!0,!1,!1];case 5:return[!1,!1,!0,!1,!0];case 6:return[!1,!1,!0,!0,!1];case 7:return[!1,!1,!0,!0,!0];case 8:return[!1,!0,!1,!1,!1];case 9:return[!1,!0,!1,!1,!0];case 10:return[!0,!1,!1,!1,!1];case 11:return[!0,!1,!1,!1,!0];case 12:return[!0,!1,!1,!0,!1];case 13:return[!0,!1,!1,!0,!0];case 14:return[!0,!1,!0,!1,!1];case 15:return[!0,!1,!0,!1,!0];default:return Gn(O,5)}})(),i}propagateValue(n){this.outputValues(this.outputs.Out,n,!0)}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};c(kl,"DecoderBCD4");Ls.impl=kl;var zi=ge(He());var Er=Oe("demux",!0,!0,{variantName:({from:o,to:n,bottom:e})=>`demux-${o}to${n}${e?"b":""}`,idPrefix:"demux",button:{imgWidth:50},repr:{from:P(zi.number),to:P(zi.number),bottom:P(zi.boolean),showWiring:P(zi.boolean),disconnectedAsHighZ:P(zi.boolean)},valueDefaults:{showWiring:!0,disconnectedAsHighZ:!1},params:{from:Ee(2,[1,2,4,8,16]),to:Ee(4),bottom:ko()},validateParams:({from:o,to:n,bottom:e})=>{let r=Math.min(16*o,Math.max(2*o,n)),i=Math.ceil(r/o),s=Math.ceil(Math.log2(i));return{numFrom:o,numTo:r,numGroups:i,numSel:s,controlPinsAtBottom:e}},size:({numFrom:o,numTo:n,numGroups:e,numSel:r})=>{let i=2*r,s=at(o===1?n:o)?1:2,a=o>1?1:0,u=n+(e-1)*a,l=s*u;return{gridWidth:i,gridHeight:l}},makeNodes:({numFrom:o,numGroups:n,numSel:e,controlPinsAtBottom:r})=>{let i=1+e,s=-i,a=$u("e",i,0,n,o),u=a[0][0][1],l=a[a.length-1],p=l[l.length-1][1],d=r?p+2:u-2;return{ins:{In:fe("w",s,0,o),S:Mn(r?"s":"n",0,d,e)},outs:{Z:a}}},initialValue:(o,{numTo:n})=>U(!1,n)}),Fl=class extends Fe{constructor(e,r,i){var s,a;super(e,Er.with(r),i);this.numFrom=r.numFrom,this.numTo=r.numTo,this.numGroups=r.numGroups,this.numSel=r.numSel,this.controlPinsAtBottom=r.controlPinsAtBottom,this._showWiring=(s=i==null?void 0:i.showWiring)!=null?s:Er.aults.showWiring,this._disconnectedAsHighZ=(a=i==null?void 0:i.disconnectedAsHighZ)!=null?a:Er.aults.disconnectedAsHighZ}toJSON(){return j(L({},super.toJSONBase()),{from:this.numFrom,to:this.numTo,bottom:this.controlPinsAtBottom===Er.aults.bottom?void 0:this.controlPinsAtBottom,showWiring:this._showWiring!==Er.aults.showWiring?this._showWiring:void 0,disconnectedAsHighZ:this._disconnectedAsHighZ!==Er.aults.disconnectedAsHighZ?this._disconnectedAsHighZ:void 0})}makeTooltip(){return ee(void 0,Q(W(w.Components.Demux.tooltip.expand({from:this.numFrom,to:this.numTo}))))}doRecalcValue(){let e=this.inputValues(this.inputs.S),r=De(e,!1)[1];if(G(r))return U(O,this.numTo);let i=[],s=this._disconnectedAsHighZ?Qe:!1;for(let a=0;a<this.numGroups;a++)if(a===r){let u=this.inputValues(this.inputs.In);for(let l of u)i.push(l)}else for(let u=0;u<this.numFrom;u++)i.push(s);return i}propagateValue(e){this.outputValues(this.outputs._all,e)}doDraw(e,r){let{top:i,left:s,bottom:a,right:u}=this.bounds(),l=(u-s)/3;for(let d of this.inputs.In)de(e,d,s,d.posYInParentTransform);for(let d of this.inputs.S)de(e,d,d.posXInParentTransform,i+l);for(let d of this.outputs.Z)for(let h of d)de(e,h,u,h.posYInParentTransform);let p=e.createPath();if(p.moveTo(s,i+l),p.lineTo(u,i),p.lineTo(u,a),p.lineTo(s,a-l),p.closePath(),e.fillStyle=Je,e.fill(p),this._showWiring){let d=this.parent.editor.options.hideWireColors,h=this.inputValues(this.inputs.S),m=De(h,!1)[1];if(!G(m)){let f=this.outputs.Z[m],C=(u-s)/3,D=this.parent.editor.options.wireStyle===ln.straight,b=r.drawParams.drawTimeAnimationFraction;for(let v=0;v<this.inputs.In.length;v++){e.beginPath();let _=this.inputs.In[v],M=_.posYInParentTransform,A=f[v].posYInParentTransform;e.moveTo(s+1,M),D?(e.lineTo(s+3,M),e.lineTo(u-3,A),e.lineTo(u-1,A)):e.bezierCurveTo(s+C,M,u-C,A,u-1,A),Uo(e,this.inputs.In[v].value,_.color,!1,d,b)}}}e.lineWidth=3,e.strokeStyle=r.borderColor,e.stroke(p)}doSetShowWiring(e){this._showWiring=e,this.setNeedsRedraw("show wiring changed")}doSetDisconnectedAsHighZ(e){this._disconnectedAsHighZ=e,this.setNeedsRecalc()}makeComponentSpecificContextMenuItems(){let e=w.Components.MuxDemux.contextMenu,r=this._showWiring?"check":"none",i=T.item(r,e.ShowWiring,()=>{this.doSetShowWiring(!this._showWiring)});r=this._disconnectedAsHighZ?"check":"none";let s=T.item(r,e.UseZForDisconnected,()=>{this.doSetDisconnectedAsHighZ(!this._disconnectedAsHighZ)});return[this.makeChangeParamsContextMenuItem("inputs",e.ParamNumFrom,this.numFrom,"from"),this.makeChangeParamsContextMenuItem("outputs",e.ParamNumTo,this.numTo,"to",[2,4,8,16].map(a=>a*this.numFrom)),["mid",T.sep()],this.makeChangeBooleanParamsContextMenuItem(e.ParamControlAtBottom,this.controlPinsAtBottom,"bottom"),["mid",i],["mid",s],...this.makeForceOutputsContextMenuItem(!0)]}};c(Fl,"Demux");Er.impl=Fl;var Ua=ge(He());var ur=Oe("display",!0,!1,{variantName:({bits:o})=>`display-${o}`,idPrefix:"disp",button:{imgWidth:32},repr:{bits:P(Ua.number),name:qt,radix:P(Ua.number),showAsUnknown:P(Ua.boolean)},valueDefaults:{radix:10,showAsUnknown:!1},params:{bits:Ee(4,[3,4,8,16])},validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>({gridWidth:2+Math.ceil(o/2),gridHeight:at(o)?o:2*o}),makeNodes:({numBits:o,gridWidth:n})=>{let e=-n/2-1;return{ins:{In:fe("w",e,0,o)}}},initialValue:(o,{numBits:n})=>[sb("0",n),0]}),Nl=class extends Fe{constructor(e,r,i){var s,a,u;super(e,ur.with(r),i);this.numBits=r.numBits,this._name=(s=i==null?void 0:i.name)!=null?s:void 0,this._radix=(a=i==null?void 0:i.radix)!=null?a:ur.aults.radix,this._showAsUnknown=(u=i==null?void 0:i.showAsUnknown)!=null?u:ur.aults.showAsUnknown}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits===ur.aults.bits?void 0:this.numBits,name:this._name,radix:this._radix===ur.aults.radix?void 0:this._radix,showAsUnknown:this._showAsUnknown===ur.aults.showAsUnknown?void 0:this._showAsUnknown})}get showAsUnknown(){return this._showAsUnknown||this.parent.editor.options.hideOutputColors}makeTooltip(){let e=w.Components.Display.tooltip,r=(()=>{switch(this._radix){case 2:return e.RadixBinary;case 10:return e.RadixDecimal;case-10:return e.RadixSignedDecimal;case 16:return e.RadixHexadecimal;default:return e.RadixGeneric.expand({radix:this._radix})}})(),[i,s]=this.value,a={numBits:this.numBits,radixStr:r};return ee(e.title.expand(a),Q(W(e.desc[0].expand(a)+" ",zn(i),e.desc[1]),!G(s)||this.showAsUnknown?Lt:W(e.CurrentlyUndefined)))}doRecalcValue(){return De(this.inputValues(this.inputs.In),!1)}doDraw(e,r){let[i,s]=this.value,a=(1<<this.inputs.In.length)-1,u=G(s)||this.showAsUnknown?mt:xm(s/a);this.doDrawDefault(e,r,{background:u,skipLabels:!0,componentName:[this._name,!0,s],drawLabels:(l,{width:p,height:d})=>{let h=ie.isVertical(this.orient),m=Ip(u),f=K(m[0]+m[1]+m[2]>3*127?0:255);if(e.fillStyle=f,e.textAlign="center",!this.showAsUnknown){let[b,v]=ab(i,this._radix);e.font=`${b?9:10}px sans-serif`,e.fillText(v,this.posX,this.posY+(h?-p/2+7:-d/2+8))}let C=this.numBits===4&&this._radix===8?16:18;e.font=`bold ${C}px sans-serif`;let D=this.showAsUnknown?O:wr(s,this._radix,this.numBits);e.fillText(D,this.posX,this.posY+(h?6:0))}})}mouseDoubleClicked(e){let r=super.mouseDoubleClicked(e);if(r.isChange)return r;let i=this.parent.mode;return i>=4&&e.altKey?(this.doSetShowAsUnknown(!this._showAsUnknown),ae.SimpleChange):i>=3?(this.doSetRadix(this._radix===10?16:10),ae.SimpleChange):ae.NoChange}doSetName(e){this._name=e,this.setNeedsRedraw("name changed")}doSetShowAsUnknown(e){this._showAsUnknown=e,this.setNeedsRedraw("display as unknown changed")}doSetRadix(e){this._radix=e,this.setNeedsRedraw("radix changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.Display.contextMenu,r=c((s,a,u)=>{let l=u?"check":"none",p=e.DisplayAs+" "+s,d=u?()=>{}:a;return T.item(l,p,d)},"makeItemShowAs"),i=c((s,a)=>r(a,()=>{this._showAsUnknown&&this.doSetShowAsUnknown(!1),this.doSetRadix(s)},!this._showAsUnknown&&this._radix===s),"makeItemShowRadix");return[["mid",i(10,e.DisplayAsDecimal)],["mid",i(-10,e.DisplayAsSignedDecimal)],["mid",i(8,e.DisplayAsOctal)],["mid",i(16,e.DisplayAsHexadecimal)],["mid",r(e.DisplayAsUnknown,()=>this.doSetShowAsUnknown(!this._showAsUnknown),this._showAsUnknown)],["mid",T.sep()],this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),["mid",T.sep()],["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};c(Nl,"Display");ur.impl=Nl;function sb(o,n){let e="";for(let r=0;r<n;r++)e+=o;return e}c(sb,"repeatString");function ab(o,n){let e=-1;if(n===16?e=4:n===8&&(e=3),e<0)return[!1,o];let r=new RegExp(`(.{${e}})`,"g");return[!0,f2(f2(o).replace(r,"$1 "))]}c(ab,"insertSpaces");function f2(o){return o.split("").reverse().join("")}c(f2,"reverseString");var Hl=ge(He());var Wa=ge(He());var Ga={green:null,red:null,yellow:null},ub={v:null,h:null,px:null,PX:null};function za(o,n){return G(o)?mt:ye(o)?Ti:o?Pa[n]:Ai}c(za,"ledColorForLogicValue");var Yo=class extends Re{constructor(e,r,i,s){var a,u,l;super(e,r,s);this.transparentDefault=i,this._color=(a=s==null?void 0:s.color)!=null?a:go.aults.color,this._transparent=(u=s==null?void 0:s.transparent)!=null?u:i,this._name=(l=s==null?void 0:s.name)!=null?l:void 0}toJSONBase(){return j(L({},super.toJSONBase()),{color:this._color===go.aults.color?void 0:this._color,transparent:this._transparent===this.transparentDefault?void 0:this._transparent,name:this._name})}doSetName(e){this._name=e,this.setNeedsRedraw("name changed")}doSetColor(e){this._color=e,this.setNeedsRedraw("color changed")}doSetTransparent(e){this._transparent=e,this.setNeedsRedraw("transparent changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.DisplayBar.contextMenu,r=c((s,a)=>{let u=this._color===a,l=u?"check":"none",p=u?()=>{}:()=>this.doSetColor(a),d=Pa[a];return T.item(l,Rt(Zt(s),Y(`display: inline-block; width: 140px; height: 16px; background-color: ${d}; margin-right: 8px`)),p)},"makeItemUseColor"),i=T.item(this._transparent?"check":"none",e.TransparentWhenOff,()=>this.doSetTransparent(!this._transparent));return[["mid",T.submenu("palette",e.Color,[r(e.ColorGreen,"green"),r(e.ColorRed,"red"),r(e.ColorYellow,"yellow"),T.sep(),i])],["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};c(Yo,"DisplayBarBase");var go=ke("bar",{idPrefix:"bar",button:{imgWidth:32},repr:{display:Wa.keyof(ub,"OutputBarType"),color:P(Wa.keyof(Ga,"LedColor")),transparent:P(Wa.boolean),name:qt},valueDefaults:{display:"h",color:"green",transparent:!0},size:{gridWidth:1,gridHeight:1},makeNodes:()=>({ins:{I:[0,0,"w"]}}),initialValue:()=>!1}),Ll=class extends Yo{constructor(e,r){var i;super(e,go,!1,r);this.doSetDisplay((i=r==null?void 0:r.display)!=null?i:go.aults.display)}toJSON(){return j(L({},super.toJSONBase()),{display:this._display})}get unrotatedWidth(){return this.getWidthAndHeight()[0]}get unrotatedHeight(){return this.getWidthAndHeight()[1]}makeTooltip(){let e=w.Components.DisplayBar.tooltip,r=(()=>{switch(this.value){case O:return e.ValueUnknown;case Qe:return e.ValueUnknown;case!0:return Q(e.Value1[0],_i(this.value),e.Value1[1]);case!1:return Q(e.Value0[0],_i(this.value),e.Value0[1])}})();return ee(e.title,r)}get display(){return this._display}doRecalcValue(){return this.inputs.I.value}doDraw(e,r){let i=this.parent.editor.options.hideOutputColors?O:this.value,s=this._transparent&&i===!1?Dm:za(i,this._color);this.doDrawDefault(e,r,{background:s,skipLabels:!0,componentName:[this._name,!0,pt(i)]})}getWidthAndHeight(){switch(this._display){case"h":return[10*z,2*z];case"v":return[2*z,10*z];case"px":return[2*z,2*z];case"PX":return[10*z,10*z]}}mouseDoubleClicked(e){let r=super.mouseDoubleClicked(e);return r.isChange?r:(this.doSetDisplay((()=>{switch(this.display){case"h":return"v";case"v":return"px";case"px":return"PX";case"PX":return"h"}})()),ae.SimpleChange)}doSetDisplay(e){this._display=e,this.updateInputOffsetX(),this.setNeedsRedraw("display mode changed")}updateInputOffsetX(){let e=this.getWidthAndHeight()[0];this.inputs.I.gridOffsetX=-gm(e/2)-2}makeComponentSpecificContextMenuItems(){let e=w.Components.DisplayBar.contextMenu,r=c((i,s)=>{let a=this._display===s,u=a?"check":"none",l=a?()=>{}:()=>{this.doSetDisplay(s)};return T.item(u,i,l)},"makeItemShowAs");return[["mid",T.submenu("eye",e.Display,[r(e.DisplayVerticalBar,"v"),r(e.DisplayHorizontalBar,"h"),r(e.DisplaySmallSquare,"px"),r(e.DisplayLargeSquare,"PX"),T.sep(),T.text(e.DisplayChangeDesc)])],...super.makeComponentSpecificContextMenuItems()]}};c(Ll,"DisplayBar");go.impl=Ll;var Vs=ke("16seg",{idPrefix:"16seg",button:{imgWidth:32},repr:{color:P(Hl.keyof(Ga,"LedColor")),transparent:P(Hl.boolean),name:qt},valueDefaults:{},size:{gridWidth:8,gridHeight:10},makeNodes:()=>({ins:{In:yn("w",[[-5,-4,"a1"],[-6,-3.5,"a2"],[-5,-3,"b"],[-6,-2.5,"c"],[-5,-2,"d2"],[-6,-1.5,"d1"],[-5,-1,"e"],[-6,-.5,"f"],[-5,0,"g1"],[-6,.5,"g2"],[-5,1,"h"],[-6,1.5,"i"],[-5,2,"j"],[-6,2.5,"k"],[-5,3,"l"],[-6,3.5,"m"],[-5,4,"p"]])}}),initialValue:()=>U(!1,17)}),Vl=class extends Yo{constructor(n,e){super(n,Vs,!0,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return ee(void 0,Q(W(w.Components.Display16Seg.tooltip)))}doRecalcValue(){return this.inputValues(this.inputs.In)}doDraw(n,e){this.doDrawDefault(n,e,{labelSize:7,componentName:[this._name,!0,()=>this.value.map(pt).reverse().join("")],drawInside:({left:r,right:i,top:s,bottom:a})=>{let[u,l,p,d,h,m,f,C,D,b,v,_,M,A,E,B,I]=this.value,k=10,S=3,H=r+18,F=i-10,q=(H+F)/2,te=s+k,se=a-k,le=c(Ct=>{(!this._transparent||Ct!==!1)&&(n.fillStyle=za(Ct,this._color),n.fill())},"doFill"),X=c((Ct,$e,Ke,ze)=>{n.beginPath(),n.moveTo($e,ze),n.lineTo($e+S,ze-S),n.lineTo(Ke-S,ze-S),n.lineTo(Ke,ze),n.lineTo(Ke-S,ze+S),n.lineTo($e+S,ze+S),n.closePath(),n.stroke(),le(Ct)},"drawH"),J=c((Ct,$e,Ke,ze)=>{n.beginPath(),n.moveTo($e,Ke),n.lineTo($e+S,Ke+S),n.lineTo($e+S,ze-S),n.lineTo($e,ze),n.lineTo($e-S,ze-S),n.lineTo($e-S,Ke+S),n.closePath(),n.stroke(),le(Ct)},"drawV"),Te=S*1.41,Ce=S*1.41,_e=c((Ct,$e,Ke,ze,Wt)=>{n.beginPath(),n.moveTo($e,Ke),n.lineTo($e+Te,Ke),n.lineTo(ze,Wt-Ce),n.lineTo(ze,Wt),n.lineTo(ze-Te,Wt),n.lineTo($e,Ke+Ce),n.closePath(),n.stroke(),le(Ct)},"drawBackslash"),it=c((Ct,$e,Ke,ze,Wt)=>{n.beginPath(),n.moveTo($e,Ke),n.lineTo($e,Ke-Ce),n.lineTo(ze-Te,Wt),n.lineTo(ze,Wt),n.lineTo(ze,Wt+Ce),n.lineTo($e+Te,Ke),n.closePath(),n.stroke(),le(Ct)},"drawSlash");n.strokeStyle=ys,n.lineWidth=1,X(u,H+S,q,te+S),X(l,q,F-S,te+S),J(p,F-S,te+S,this.posY),J(d,F-S,this.posY,se-S),X(m,H+S,q,se-S),X(h,q,F-S,se-S),J(f,H+S,this.posY,se-S),J(C,H+S,te+S,this.posY),X(D,H+S,q,this.posY),X(b,q,F-S,this.posY),J(_,q,te+S,this.posY),J(E,q,this.posY,se-S);let hn=te+S+S,jt=se-S-S;_e(v,H+S+S,hn,q-S,this.posY-S),it(M,q+S,this.posY-S,F-S-S,hn),it(A,H+S+S,jt,q-S,this.posY+S),_e(B,q+S,this.posY+S,F-S-S,jt),n.beginPath();let Yt=1.3*S;n.arc(i-8,a-7-Yt/2,Yt,0,2*Math.PI),n.stroke(),le(I)}})}};c(Vl,"Display16Seg");Vs.impl=Vl;var Wl=ge(He());var Hs=ke("7seg",{idPrefix:"7seg",button:{imgWidth:32},repr:{color:P(Wl.keyof(Ga,"LedColor")),transparent:P(Wl.boolean),name:qt},valueDefaults:{},size:{gridWidth:8,gridHeight:10},makeNodes:()=>({ins:{In:yn("w",[[-5,-4,"a"],[-5,-3,"b"],[-5,-2,"c"],[-5,-1,"d"],[-5,0,"e"],[-5,1,"f"],[-5,2,"g"],[-5,4,"p"]])}}),initialValue:()=>U(!1,8)}),Ul=class extends Yo{constructor(n,e){super(n,Hs,!0,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return ee(void 0,Q(W(w.Components.Display7Seg.tooltip)))}doRecalcValue(){return this.inputValues(this.inputs.In)}doDraw(n,e){this.doDrawDefault(n,e,{labelSize:9,componentName:[this._name,!0,()=>this.value.map(pt).reverse().join("")],drawInside:({left:r,right:i,top:s,bottom:a})=>{let[u,l,p,d,h,m,f,C]=this.value,D=20,b=10,v=4,_=r+D,M=i-D,A=s+b,E=a-b,B=c(H=>{(!this._transparent||H!==!1)&&(n.fillStyle=za(H,this._color),n.fill())},"doFill"),I=c((H,F)=>{n.beginPath(),n.moveTo(_+v,F),n.lineTo(_+v+v,F-v),n.lineTo(M-v-v,F-v),n.lineTo(M-v,F),n.lineTo(M-v-v,F+v),n.lineTo(_+v+v,F+v),n.closePath(),n.stroke(),B(H)},"drawH"),k=c((H,F,q,te)=>{n.beginPath(),n.moveTo(F,q),n.lineTo(F+v,q+v),n.lineTo(F+v,te-v),n.lineTo(F,te),n.lineTo(F-v,te-v),n.lineTo(F-v,q+v),n.closePath(),n.stroke(),B(H)},"drawV");n.strokeStyle=ys,n.lineWidth=1,I(u,A+v),k(l,M-v,A+v,this.posY),k(p,M-v,this.posY,E-v),I(d,E-v),k(h,_+v,this.posY,E-v),k(m,_+v,A+v,this.posY),I(f,this.posY),n.beginPath();let S=1.3*v;n.arc(i-D/2,a-b-S/2,S,0,2*Math.PI),n.stroke(),B(C)}})}};c(Ul,"Display7Seg");Hs.impl=Ul;var Gl=ge(He());var Us=ke("ascii",{idPrefix:"disp",button:{imgWidth:32},repr:{name:qt,additionalReprRadix:P(Gl.number),showAsUnknown:P(Gl.boolean)},valueDefaults:{},size:{gridWidth:4,gridHeight:8},makeNodes:()=>({ins:{Z:fe("w",-3,0,7)}}),initialValue:()=>["0000000",0]}),Do=class extends Re{constructor(e,r){var i,s,a;super(e,Us,r);this._name=(i=r==null?void 0:r.name)!=null?i:void 0,this._additionalReprRadix=(s=r==null?void 0:r.additionalReprRadix)!=null?s:void 0,this._showAsUnknown=(a=r==null?void 0:r.showAsUnknown)!=null?a:!1}toJSON(){return j(L({},this.toJSONBase()),{name:this._name,additionalReprRadix:this._additionalReprRadix,showAsUnknown:this._showAsUnknown?!0:void 0})}get showAsUnknown(){return this._showAsUnknown||this.parent.editor.options.hideOutputColors}makeTooltip(){let e=w.Components.DisplayAscii.tooltip,[r,i]=this.value;return ee(e.title,Q(W(e.desc[0],zn(r),e.desc[1]),this.showAsUnknown?Lt:G(i)?W(e.CurrentlyUndefined):Q(e.CurrentlyThisCharacter+" ",zn(""+i),i<32?e.WhichIsNotPrintable:Q(", \u2018",zn(String.fromCharCode(i)),"\u2019."))))}doRecalcValue(){let e=this.inputValues(this.inputs.Z);return De(e,!1)}doDraw(e,r){let[i,s]=this.value,a,u,l=oe;G(s)||this.showAsUnknown?(u="bold 18px sans-serif",this.showAsUnknown&&(l=mt),a="?"):(a=Do.numberToAscii(s),s<32?u="16px sans-serif":u="bold 18px sans-serif"),this.doDrawDefault(e,r,{skipLabels:!0,componentName:[this._name,!0,a],drawLabels:(p,{width:d,height:h})=>{var D;let m=ie.isVertical(this.orient),f=this._additionalReprRadix!==void 0,C=this.posY+(m?4:0);if(e.font="9px sans-serif",e.fillStyle=oe,!this.showAsUnknown&&(m&&f?(e.textAlign="start",e.fillText(i,this.posX-h/2+3,this.posY-d/2+8),e.textAlign="center"):(e.textAlign="center",e.fillText(i,this.posX,this.posY+(m?-d/2+8:-h/2+10))),f)){let b=wr(s,(D=this._additionalReprRadix)!=null?D:10,7);e.font="bold 11px sans-serif",m?(e.textAlign="end",e.fillText(b,this.posX+h/2-3,this.posY-d/2+9),e.textAlign="center"):(e.fillText(b,this.posX,this.posY-h/2+22),C+=8)}e.font=u,e.fillStyle=l,e.fillText(a,this.posX,C)}})}static numberToAscii(e){return e<32?"\\"+e:String.fromCharCode(e)}mouseDoubleClicked(e){let r=super.mouseDoubleClicked(e);if(r.isChange)return r;let i=this.parent.mode;return i>=4&&e.altKey?(this.doSetShowAsUnknown(!this._showAsUnknown),ae.SimpleChange):i>=3?(this.doSetAdditionalDisplayRadix((()=>{switch(this._additionalReprRadix){case void 0:return 10;case 10:return 16;case 16:return;default:return}})()),ae.SimpleChange):ae.NoChange}doSetName(e){this._name=e,this.setNeedsRedraw("name changed")}doSetShowAsUnknown(e){this._showAsUnknown=e,this.setNeedsRedraw("display as unknown changed")}doSetAdditionalDisplayRadix(e){this._additionalReprRadix=e,this.setNeedsRedraw("additional display radix changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.DisplayAscii.contextMenu,r=c((s,a,u)=>{let l=u?"check":"none";return T.item(l,s,a)},"makeItemShowAs"),i=c((s,a)=>r(a,()=>this.doSetAdditionalDisplayRadix(s),this._additionalReprRadix===s),"makeItemShowRadix");return[["mid",T.submenu("eye",e.AdditionalDisplay,[i(void 0,e.DisplayNone),i(10,e.DisplayDecimal),i(16,e.DisplayHex),T.sep(),T.text(e.ChangeDisplayDesc)])],["mid",r(w.Components.Generic.contextMenu.ShowAsUnknown,()=>this.doSetShowAsUnknown(!this._showAsUnknown),this._showAsUnknown)],["mid",T.sep()],["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};c(Do,"DisplayAscii");Us.impl=Do;var Ws=ke("ff-d",j(L({idPrefix:"ff"},Sr),{makeNodes:()=>{let o=Sr.makeNodes(2),n=w.Components.Generic;return{ins:j(L({},o.ins),{D:[-4,-2,"w",n.InputDataDesc]}),outs:o.outs}}})),zl=class extends gt{constructor(n,e){super(n,Ws,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=w.Components.FlipflopD.tooltip;return ee(n.title,Q(W(n.desc)))}doRecalcValueAfterClock(){return xe.filterHighZ(this.inputs.D.value)}};c(zl,"FlipflopD");Ws.impl=zl;var Gs=ke("ff-jk",j(L({idPrefix:"ff"},Sr),{makeNodes:()=>{let o=Sr.makeNodes(0),n=w.Components.FlipflopJK;return{ins:j(L({},o.ins),{J:[-4,-2,"w",n.InputJDesc],K:[-4,2,"w",n.InputKDesc]}),outs:o.outs}}})),ql=class extends gt{constructor(n,e){super(n,Gs,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=w.Components.FlipflopJK.tooltip;return ee(n.title,Q(W(n.desc)))}doRecalcValueAfterClock(){let n=this.inputs.J.value,e=this.inputs.K.value,r=this.outputs.Q.value;return n===!0?e===!0?xe.invert(r):!0:e===!0?!1:r}};c(ql,"FlipflopJK");Gs.impl=ql;var zs=ke("ff-t",j(L({idPrefix:"ff"},Sr),{makeNodes:()=>{let o=Sr.makeNodes(2),n=w.Components.FlipflopT;return{ins:j(L({},o.ins),{T:[-4,-2,"w",n.InputTDesc]}),outs:o.outs}}})),Ql=class extends gt{constructor(n,e){super(n,zs,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=w.Components.FlipflopT.tooltip;return ee(n.title,Q(W(n.desc)))}doRecalcValueAfterClock(){let n=this.inputs.T.value;if(G(n)||ye(n))return O;let e=this.outputs.Q.value;return n?xe.invert(e):e}};c(Ql,"FlipflopT");zs.impl=Ql;var Kp=ge(He());var qa=class extends Fe{constructor(e,r,i,s){var a,u;super(e,r,s);this._type=i,this._poseAs=(a=s==null?void 0:s.poseAs)!=null?a:void 0,this._showAsUnknown=(u=s==null?void 0:s.showAsUnknown)!=null?u:!1}toJSONBase(){return j(L({},super.toJSONBase()),{showAsUnknown:this._showAsUnknown?!0:void 0,poseAs:this._poseAs})}jsonType(){return this._type}get type(){return this._type}doSetType(e){this._type=e,this.setNeedsRecalc(),this.setNeedsRedraw("gate type changed")}get poseAs(){return this._poseAs}set poseAs(e){e!==this._poseAs&&(this._poseAs=e,this.setNeedsRedraw("gate display changed"))}get showAsUnknown(){return this._showAsUnknown}doSetShowAsUnknown(e){this._showAsUnknown=e,this.setNeedsRedraw("display as unknown changed")}toStringDetails(){return this.type}doRecalcValue(){let e=this.inputValues(this.inputs.In),r=this.gateTypes(this.numBits).props[this.type].out;return r(e)}propagateValue(e){this.outputs.Out.value=e}makeTooltip(){let e=w.Components.Gate.tooltip;if(this.showAsUnknown)return W(e.UnknownGate);let r=this.inputValues(this.inputs.In),i=this.value,s=this.gateTypes(this.numBits).props[this.type],a=c(()=>{let C=this.numBits===1?[e.Input]:kt(b=>e.Input+" "+(b+1),this.numBits);C.push(e.Output);let D=[];for(let b of lb(this.numBits)){let v=Dr(r,b),_=s.out(b);b.push(_),D.push({matchesCurrent:v,cells:b})}return[C,D]},"genTruthTableData"),l=this.outputs.Out.value===i?e.CurrentlyDelivers:e.ShouldCurrentlyDeliver,d=r.includes(O)?Q(l+" "+e.UndeterminedOutputBecauseInputUnknown):Q(l+" "+e.ThisOutput+" ",_i(i)," "+e.BecauseInputIs+" ",...r.map(_i)),h=s.fullShortDesc(),m=(()=>{switch(this.type){case"not":return Q(e.Inverter[0],zn(w.Components.Gate.not[0]),e.Inverter[1]);case"buf":return Q(e.Buffer[0],zn(w.Components.Gate.buf[0]),e.Buffer[1]);default:return e.GateTitle(zn(h[0]))}})(),f=this.numBits<=4?Q(d,", "+e.AccordingToTruthTable,W(cb(a()))):Q(d,".");return pb(this.numBits,m,h[2],f)}doDraw(e,r){var s;let i=this._showAsUnknown?O:(s=this.poseAs)!=null?s:this.type;this.drawGate(e,i,i!==this.type&&!this._showAsUnknown,r)}drawGate(e,r,i,s){let a=this.numBits,u=this.outputs.Out,l=this.unrotatedWidth,p=this.unrotatedHeight,d=this.posY-p/2,h=d+p,m=this.posX-l/2,f=Math.PI/2;s.isMouseOver&&(e.lineWidth=2,e.strokeStyle=s.borderColor,e.beginPath(),e.rect(m-2-2,d-2-2,l+2*(2+2),p+2*(2+2)),e.stroke());let C=2*Math.max(2,this.numBits)*z,D=this.posX-C/2,b=this.posX+C/2,v=0,_=c(()=>{b+=5,e.beginPath(),On(e,b,this.posY,8),e.fillStyle=Je,e.fill(),e.stroke(),b+=4},"drawRightCircle"),M=c(S=>{e.beginPath(),On(e,D-5,this.posY-(S?1:-1)*z,8),e.fillStyle=Je,e.fill(),e.stroke()},"drawLeftCircle"),A=c((S=!1,H=!1,F=!1)=>{for(let q=0;q<a;q++){let te=this.inputs.In[q],se=q===0?S:H,le=D+(F?r.includes("x")?-1:5:0);se&&(le-=9),F&&(a===3?(le+=1,q===1&&(le+=4)):a===4?(le+=2,(q===1||q===2)&&(le+=8)):a>4&&(le+=76)),de(e,te,le,te.posYInParentTransform)}de(e,u,b-1,this.posY)},"drawWireEnds"),E=i&&this.parent.mode>=4,B=E?Ei:oe,I=E?el:Je,k=c(()=>{e.lineWidth=3,e.strokeStyle=B,e.fillStyle=I},"prepareMainFill");switch(r){case"not":case"buf":{A(),k(),e.beginPath(),e.moveTo(D,d),e.lineTo(b,this.posY),e.lineTo(D,h),e.closePath(),e.fill(),e.stroke(),r==="not"&&_(),v-=6;break}case"and":case"nand":case"nimply":case"rnimply":{let S=r==="nimply",H=r==="rnimply";A(H,S),k(),e.beginPath(),e.moveTo(this.posX,h),e.lineTo(D,h),e.lineTo(D,d),e.lineTo(this.posX,d),e.arc(this.posX,this.posY,p/2,-f,f),e.closePath(),e.fill(),e.lineWidth=1,e.stroke(),e.strokeStyle=B,e.lineWidth=3,e.stroke(),e.beginPath(),r.startsWith("nand")&&_(),S?M(!1):H&&M(!0),v-=1;break}case"or":case"nor":case"xor":case"xnor":case"imply":case"rimply":{let S=r==="imply",H=r==="rimply";A(S,H,!0),k(),e.beginPath(),e.moveTo(D,d),e.lineTo(this.posX-15,d),e.bezierCurveTo(this.posX+10,d,b-5,this.posY-8,b,this.posY),e.bezierCurveTo(b-5,this.posY+8,this.posX+10,h,this.posX-15,h),e.lineTo(D,h),e.quadraticCurveTo(this.posX-8,this.posY,D,d),e.closePath(),e.fill(),e.stroke();let F=D;D+=4,(r.startsWith("nor")||r.startsWith("xnor"))&&_(),S?M(!0):H&&M(!1),r.startsWith("x")&&(D=F-2,e.beginPath(),e.moveTo(F-6,h),e.quadraticCurveTo(this.posX-14,this.posY,F-6,d),e.lineWidth=3,e.strokeStyle=B,e.stroke()),v-=1;break}case"txa":case"txna":{let S=r==="txna";A(S,!1),k(),e.beginPath(),e.moveTo(D,h),e.lineTo(D,d),e.lineTo(b,this.posY+.5),e.lineTo(D+2,this.posY+.5),e.fill(),e.stroke(),S&&M(!0);break}case"txb":case"txnb":{let S=r==="txnb";A(!1,S),k(),e.beginPath(),e.moveTo(D,d),e.lineTo(D,h),e.lineTo(b,this.posY-.5),e.lineTo(D+2,this.posY-.5),e.fill(),e.stroke(),S&&M(!1);break}case"?":{A(),k(),e.strokeStyle=mt,e.beginPath(),e.moveTo(D,d),e.lineTo(b,d),e.lineTo(b,h),e.lineTo(D,h),e.closePath(),e.fill(),e.stroke(),e.lineWidth=0,s.inNonTransformedFrame(()=>{e.fillStyle=mt,e.textAlign="center",e.font="bold 20px sans-serif",e.fillText("?",this.posX,this.posY)});break}}if(this.parent.editor.options.showGateTypes&&!G(r)){let S=this.gateTypes(this.numBits).props[r].fullShortDesc()[1];if(S!==void 0){e.fillStyle=Ju,e.textAlign="center",e.font="bold 13px sans-serif";let H=e.getTransform();e.translate(this.posX+v,this.posY),e.scale(.65,1),e.fillText(S,0,0),e.setTransform(H)}}}mouseDoubleClicked(e){return this.parent.mode>=4&&e.altKey?(this.doSetShowAsUnknown(!this._showAsUnknown),ae.SimpleChange):super.mouseDoubleClicked(e)}makeComponentSpecificContextMenuItems(){let e=[],r=this.parent.mode>=4;return(!this._showAsUnknown||r)&&e.push(["start",this.makeReplaceByMenuItem()]),r&&e.push(["mid",this.makePoseAsMenuItem()],...this.makeForceOutputsContextMenuItem()),e}makeReplaceByMenuItem(){let e=this.gateTypes(this.numBits),r=w.Components.Gate.contextMenu,i=e.values.filter(s=>s!==this._type&&e.props[s].includeInContextMenu);return T.submenu("replace",r.ReplaceBy,[...i.map(s=>{let a=e.props[s];return T.item(void 0,r.GateTempl.expand({type:a.fullShortDesc()[0]}),()=>{this.doSetType(s)})}),T.sep(),T.text(r.VariantChangeDesc)])}makePoseAsMenuItem(){let e=this.gateTypes(this.numBits),r=w.Components.Gate.contextMenu,i=e.values.filter(u=>u!==this._type&&e.props[u].includeInPoseAs),s=this._showAsUnknown,a=this.poseAs;return T.submenu("questioncircled",r.ShowAs,[T.item(!s&&a===void 0?"check":"none",r.NormalGateTempl.expand({type:e.props[this._type].fullShortDesc()[0]}),()=>{this.poseAs=void 0,this.doSetShowAsUnknown(!1)}),T.item(s?"check":"none",r.UnknownGate,()=>{this.poseAs=void 0,this.doSetShowAsUnknown(!0)}),T.sep(),...i.map(u=>{let l=e.props[u];return T.item(!s&&u===a?"check":"none",r.GateTempl.expand({type:l.fullShortDesc()[0]}),()=>{this.doSetShowAsUnknown(!1),this.poseAs=u})})])}};c(qa,"GateBase");function jl(o,n,e,r,i){let s;return e===void 0?s=n:i!==void 0&&e.endsWith(i)?s=e.slice(0,-i.length):s=e,o.includes(s)?s:(console.error(`Invalid gate type: '${s}'`),r)}c(jl,"validateGateType");var Ko=Oe("gate1",!0,!0,{variantName:({type:o})=>[o],button:{imgWidth:50},repr:{poseAs:P(Am),showAsUnknown:P(Kp.boolean)},valueDefaults:{},params:{type:Ee("not")},validateParams:({type:o},n,e)=>({type:jl(zo,o,n,e.type.defaultValue)}),idPrefix:({type:o})=>o,size:()=>({gridWidth:7,gridHeight:4}),makeNodes:()=>({ins:{In:[[-4,0,"w"]]},outs:{Out:[4,0,"e"]}}),initialValue:()=>!1}),$l=class extends qa{get numBits(){return 1}constructor(n,e,r){super(n,Ko.with(e),e.type,r)}gateTypes(){return zo}toJSON(){return super.toJSONBase()}mouseDoubleClicked(n){let e=super.mouseDoubleClicked(n);return e.isChange?e:this.parent.mode>=3?(this.doSetType(this.type==="buf"?"not":"buf"),ae.SimpleChange):ae.NoChange}};c($l,"Gate1");Ko.impl=$l;var et=Oe("gate",!0,!0,{variantName:({type:o,bits:n})=>[o,`${o}-${n}`],button:{imgWidth:50},repr:{poseAs:P(Em),showAsUnknown:P(Kp.boolean)},valueDefaults:{},params:{bits:Ee(2,[2,3,4,7,8,16]),type:Ee("and")},validateParams:({type:o,bits:n},e,r)=>({type:jl(n>2?Oi:Vr,o,e,r.type.defaultValue),numBits:n}),idPrefix:({type:o})=>o,size:({numBits:o})=>({gridWidth:7+Math.max(0,o-2)*2,gridHeight:4+Math.max(0,o-2)*2}),makeNodes:({numBits:o})=>{let n=4+(o-2),e=-n;return{ins:{In:fe("w",e,0,o)},outs:{Out:[n,0,"e"]}}},initialValue:()=>!1}),Xl=class extends qa{constructor(e,r,i){super(e,et.with(r),r.type,i);this.numBits=r.numBits}gateTypes(e){return e>2?Oi:Vr}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits!==et.aults.bits?this.numBits:void 0})}mouseDoubleClicked(e){let r=super.mouseDoubleClicked(e);if(r.isChange)return r;if(this.parent.mode>=3){let i=(()=>{switch(this.type){case"imply":return"rimply";case"rimply":return"imply";case"nimply":return"rnimply";case"rnimply":return"nimply";case"txa":return"txb";case"txb":return"txna";case"txna":return"txnb";case"txnb":return"txa";default:return}})();if(i!==void 0)return this.doSetType(i),ae.SimpleChange}return ae.NoChange}makeComponentSpecificContextMenuItems(){let e=w.Components.Generic.contextMenu;return[...dl.includes(this.type)?[]:[this.makeChangeParamsContextMenuItem("inputs",e.ParamNumInputs,this.numBits,"bits"),["mid",T.sep()]],...super.makeComponentSpecificContextMenuItems()]}};c(Xl,"GateN");et.impl=Xl;function*lb(o){let n=0,e=1<<o;for(;n<e;)yield n.toString(2).padStart(o,"0").split("").reverse().map(s=>s==="1"),n++}c(lb,"valueCombinations");function cb([o,n]){let e=n.map(({matchesCurrent:r,cells:i})=>ap(r?ne("current"):Lt,...i.map(s=>Jf(_i(s)))));return jf(ne("truth-table"),Yf(ap(...o.map(r=>Zf(r)))),Kf(...e))}c(cb,"makeTruthTable");function pb(o,n,e,r){let i=Math.min(4,o),s=200+Math.max(0,i-2)*50;return ee(n,Q(W(e),W(r)),s)}c(pb,"makeGateTooltip");var Kl=ge(He());var Ur=Oe("gate-array",!0,!0,{variantName:({type:o,bits:n})=>["gate-array",`${o}-array`,`${o}-array-${n}`],idPrefix:"array",button:{imgWidth:50},repr:{bits:P(Kl.number),showAsUnknown:P(Kl.boolean)},valueDefaults:{showAsUnknown:!1},params:{bits:Ee(4,[2,4,8,16]),type:Ee("and",Vr.values)},validateParams:({type:o,bits:n},e,r)=>({type:jl(Vr,o,e,r.type.defaultValue,"-array"),numBits:n}),size:ao.size,makeNodes:({numBits:o})=>{let n=5+Math.max(0,(o-8)/2);return{ins:{A:fe("w",-3,-n,o),B:fe("w",-3,n,o)},outs:{S:fe("e",3,0,o)}}},initialValue:(o,{numBits:n})=>U(!1,n)}),Yl=class extends Fe{constructor(e,r,i){var s;super(e,Ur.with(r),i);this.numBits=r.numBits,this._type=r.type,this._showAsUnknown=(s=i==null?void 0:i.showAsUnknown)!=null?s:Ur.aults.showAsUnknown}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits===Ur.aults.bits?void 0:this.numBits,showAsUnknown:this._showAsUnknown===Ur.aults.showAsUnknown?void 0:this._showAsUnknown})}jsonType(){return`${this._type}-array`}get type(){return this._type}makeTooltip(){let e=w.Components.GateArray.tooltip,r=w.Components.Gate[this._type][0];return ee(e.title,Q(W(e.desc.expand({op:r}))))}doRecalcValue(){let e=Vr.props[this._type].out,r=this.inputValues(this.inputs.A),i=this.inputValues(this.inputs.B);return kt(s=>e([r[s],i[s]]),this.numBits)}propagateValue(e){this.outputValues(this.outputs.S,e)}doDraw(e,r){this.doDrawDefault(e,r,{skipLabels:!0,drawInside:({left:i,right:s})=>{if(this._showAsUnknown)r.inNonTransformedFrame(()=>{e.fillStyle=mt,e.textAlign="center",e.font="bold 20px sans-serif",e.fillText("?",this.posX,this.posY)});else{e.lineWidth=2,e.strokeStyle=oe,e.beginPath();let a=this.posY-z,u=this.posY+z,l=i+10,p=s-10,d=Math.PI/2,h=this._type,m=c(()=>{e.beginPath(),On(e,p+3,this.posY,5),e.stroke()},"drawRightCircle"),f=c(C=>{e.beginPath(),On(e,l-3,this.posY-(C?1:-1)*4,5),e.stroke()},"drawLeftCircle");switch(h){case"and":case"nand":case"nimply":case"rnimply":{e.moveTo(this.posX,u),e.lineTo(l,u),e.lineTo(l,a),e.lineTo(this.posX,a),e.arc(this.posX,this.posY,z,-d,d),e.closePath(),e.stroke(),e.beginPath(),h.startsWith("nand")&&m(),h==="nimply"?f(!1):h==="rnimply"&&f(!0);break}case"or":case"nor":case"xor":case"xnor":case"imply":case"rimply":{e.beginPath(),e.moveTo(l,a),e.lineTo(this.posX-5,a),e.bezierCurveTo(this.posX+2,a,p-5,this.posY-8,p,this.posY),e.bezierCurveTo(p-5,this.posY+8,this.posX+2,u,this.posX-5,u),e.lineTo(l,u),e.quadraticCurveTo(this.posX-4,this.posY,l,a),e.closePath(),e.stroke();let C=l;l+=2,(h.startsWith("nor")||h.startsWith("xnor"))&&m(),h==="imply"?f(!0):h==="rimply"&&f(!1),h.startsWith("x")&&(e.beginPath(),e.moveTo(C-4,u),e.quadraticCurveTo(this.posX-8,this.posY,C-4,a),e.stroke());break}case"txa":case"txna":{e.beginPath(),e.moveTo(l,u),e.lineTo(l,a),e.lineTo(p,this.posY),e.lineTo(l+2,this.posY),e.stroke(),h==="txna"&&f(!0);break}case"txb":case"txnb":{e.beginPath(),e.moveTo(l,a),e.lineTo(l,u),e.lineTo(p,this.posY),e.lineTo(l+2,this.posY),e.stroke(),h==="txnb"&&f(!1);break}}}}})}doSetType(e){this._type=e,this.setNeedsRecalc(),this.setNeedsRedraw("quad gate type changed")}doSetShowAsUnknown(e){this._showAsUnknown=e,this.setNeedsRedraw("display as unknown changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.GateArray.contextMenu,r=[];for(let s of["and","or","xor","nand","nor","xnor","-","imply","rimply","nimply","rnimply"])if(s==="-")r.push(T.sep());else{let a=this._type===s?"check":"none";r.push(T.item(a,s.toUpperCase(),()=>{this.doSetType(s)}))}let i=[["mid",T.submenu("settings",e.Type,r)]];if(this.parent.mode>=4){let s=T.item(this._showAsUnknown?"check":"none",e.ShowAsUnknown,()=>{this.doSetShowAsUnknown(!this._showAsUnknown)});i.push(["mid",s])}return i.push(["mid",T.sep()],this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)),i}};c(Yl,"GateArray");Ur.impl=Yl;var qs=ke("halfadder",{idPrefix:"hadder",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:4,gridHeight:6},makeNodes:()=>{let o=w.Components.Generic;return{ins:{A:[-4,-2,"w","A",{hasTriangle:!0}],B:[-4,2,"w","B",{hasTriangle:!0}]},outs:{S:[4,-2,"e",o.OutputSumDesc,{hasTriangle:!0}],C:[4,2,"e",o.OutputCarryDesc,{hasTriangle:!0}]}}},initialValue:()=>({s:!1,c:!1})}),Zl=class extends Re{constructor(n,e){super(n,qs,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=w.Components.HalfAdder.tooltip;return ee(n.title,Q(W(n.desc)))}doRecalcValue(){let n=this.inputs.A.value,e=this.inputs.B.value;if(G(n)||G(e)||ye(n)||ye(e))return{s:O,c:O};switch(+n+ +e){case 0:return{s:!1,c:!1};case 1:return{s:!0,c:!1};case 2:return{s:!1,c:!0};default:return console.log("ERROR: sum of halfadder is > 2"),{s:!1,c:!1}}}propagateValue(n){this.outputs.S.value=n.s,this.outputs.C.value=n.c}doDraw(n,e){this.doDrawDefault(n,e,()=>{n.fillStyle=oe,n.font="26px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText("+",this.posX,this.posY-2)})}makeComponentSpecificContextMenuItems(){return this.makeForceOutputsContextMenuItem()}};c(Zl,"HalfAdder");qs.impl=Zl;var Zp=ge(He());var Tr=ke("label",{idPrefix:"label",button:{imgWidth:32},repr:{text:Zp.string,font:P(Zp.string)},valueDefaults:{text:"Label",font:ol},size:{gridWidth:4,gridHeight:2},makeNodes:()=>({})}),Qs=class extends Re{constructor(e,r){var i,s;super(e,Tr,r);this._cachedTextMetrics=void 0;this._text=(i=r==null?void 0:r.text)!=null?i:Tr.aults.text,this._font=(s=r==null?void 0:r.font)!=null?s:Tr.aults.font}toJSON(){return j(L({},this.toJSONBase()),{text:this._text,font:this._font===Tr.aults.font?void 0:this._font})}get unrotatedWidth(){var e,r;return(r=(e=this._cachedTextMetrics)==null?void 0:e.width)!=null?r:z*this._text.length}get unrotatedHeight(){let e=this._cachedTextMetrics;return e===void 0?2*z:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent}get text(){return this._text}doRecalcValue(){}get drawZIndex(){return 2}doDraw(e,r){if(e.font=this._font,e.lineWidth=3,r.isMouseOver){this._cachedTextMetrics===void 0&&(this._cachedTextMetrics=e.measureText(this._text));let i=this.unrotatedWidth,s=this.unrotatedHeight;e.strokeStyle=r.borderColor,e.beginPath(),e.rect(this.posX-i/2,this.posY-s/2,i,s),e.stroke()}e.fillStyle=oe,e.textAlign="center",e.textBaseline="middle",e.fillText(this._text,this.posX,this.posY)}doSetText(e){this._text=e,this._cachedTextMetrics=void 0,this.setNeedsRedraw("text changed")}doSetFont(e){this._font=e,this._cachedTextMetrics=void 0,this.setNeedsRedraw("font changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.Label.contextMenu,r=T.item("pen",e.ChangeText,this.runSetTextDialog.bind(this),"\u21A9\uFE0E"),i=T.item("font",e.Font,()=>{this.runSetFontDialog(this._font,Tr.aults.font,this.doSetFont.bind(this))});return[["mid",r],["mid",i]]}runSetTextDialog(){let e=window.prompt(w.Components.Label.contextMenu.ChangeTextPrompt,this._text);if(e!==null){let r=e.length===0?Tr.aults.text:e;return this.doSetText(r),ae.SimpleChange}return ae.NoChange}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetTextDialog():super.keyDown(e)}mouseDoubleClicked(e){let r=super.mouseDoubleClicked(e);return r.isChange?r:this.runSetTextDialog()}};c(Qs,"Label");Tr.impl=Qs;var $s=ke("latch-sr",j(L({idPrefix:"latch"},rr),{makeNodes:()=>{let o=rr.makeNodes(),n=w.Components.Generic;return{ins:{S:[-4,-2,"w",n.InputSetDesc,{prefersSpike:!0}],R:[-4,2,"w",n.InputResetDesc,{prefersSpike:!0}]},outs:o.outs}}})),Jl=class extends Qt{constructor(n,e){super(n,$s,e)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=w.Components.LatchSR.tooltip;return ee(n.title,Q(W(n.desc)))}doRecalcValue(){let n=this.inputs.S.value,e=this.inputs.R.value;if(this._isInInvalidState=!1,n===!0)return e===!0?(this._isInInvalidState=!0,[!1,!1]):[!0,!1];if(e===!0)return[!1,!0];let r=this.outputs.Q.value;return[r,xe.invert(r)]}makeComponentSpecificContextMenuItems(){let n=this._showContent?"check":"none";return[["mid",T.item(n,w.Components.Generic.contextMenu.ShowContent,()=>{this.doSetShowContent(!this._showContent)})],...this.makeForceOutputsContextMenuItem(!0)]}};c(Jl,"LatchSR");$s.impl=Jl;var Xs=ge(He());var Wr=Oe("mux",!0,!0,{variantName:({from:o,to:n,bottom:e})=>`mux-${o}to${n}${e?"b":""}`,idPrefix:"mux",button:{imgWidth:50},repr:{from:P(Xs.number),to:P(Xs.number),bottom:P(Xs.boolean),showWiring:P(Xs.boolean)},valueDefaults:{showWiring:!0},params:{to:Ee(2,[1,2,4,8,16]),from:Ee(4),bottom:ko()},validateParams:({from:o,to:n,bottom:e})=>{let r=Math.min(16*n,Math.max(2*n,o)),i=Math.ceil(r/n),s=Math.ceil(Math.log2(i));return{numFrom:r,numTo:n,numGroups:i,numSel:s,controlPinsAtBottom:e}},size:({numFrom:o,numTo:n,numGroups:e,numSel:r})=>{let i=2*r,s=at(n===1?o:n)?1:2,a=n>1?1:0,u=o+(e-1)*a,l=1+s*u;return{gridWidth:i,gridHeight:l}},makeNodes:({numTo:o,numGroups:n,numSel:e,controlPinsAtBottom:r})=>{let i=1+e,s=-i,a=$u("w",s,0,n,o),u=a[0][0][1],l=a[a.length-1],p=l[l.length-1][1],d=r?p+2:u-2;return{ins:{I:a,S:Mn(r?"s":"n",0,d,e)},outs:{Z:fe("e",i,0,o)}}},initialValue:(o,{numTo:n})=>U(!1,n)}),ec=class extends Fe{constructor(e,r,i){var s;super(e,Wr.with(r),i);this.numFrom=r.numFrom,this.numTo=r.numTo,this.numGroups=r.numGroups,this.numSel=r.numSel,this.controlPinsAtBottom=r.controlPinsAtBottom,this._showWiring=(s=i==null?void 0:i.showWiring)!=null?s:Wr.aults.showWiring}toJSON(){return j(L({},super.toJSONBase()),{from:this.numFrom,to:this.numTo,bottom:this.controlPinsAtBottom===Wr.aults.bottom?void 0:this.controlPinsAtBottom,showWiring:this._showWiring!==Wr.aults.showWiring?this._showWiring:void 0})}makeTooltip(){return ee(void 0,Q(W(w.Components.Mux.tooltip.expand({from:this.numFrom,to:this.numTo}))))}doRecalcValue(){let e=this.inputValues(this.inputs.S),r=De(e,!1)[1];return G(r)?U(O,this.numTo):this.inputValues(this.inputs.I[r])}propagateValue(e){this.outputValues(this.outputs.Z,e)}doDraw(e,r){let{top:i,left:s,bottom:a,right:u}=this.bounds(),l=(u-s)/3;for(let d of this.inputs.I)for(let h of d)de(e,h,s,h.posYInParentTransform);for(let d of this.inputs.S)de(e,d,d.posXInParentTransform,i+l);for(let d of this.outputs.Z)de(e,d,u,d.posYInParentTransform);e.fillStyle=Je;let p=e.createPath();if(p.moveTo(s,i),p.lineTo(u,i+l),p.lineTo(u,a-l),p.lineTo(s,a),p.closePath(),e.fill(p),this._showWiring){let d=this.inputValues(this.inputs.S),h=De(d,!1)[1];if(!G(h)){let m=this.parent.editor.options.hideWireColors,f=this.inputs.I[h],C=(u-s)/3,D=this.parent.editor.options.wireStyle===ln.straight,b=r.drawParams.drawTimeAnimationFraction;for(let v=0;v<f.length;v++){this.parent.editor.options.wireStyle,e.beginPath();let _=f[v].posYInParentTransform,M=this.outputs.Z[v],A=M.posYInParentTransform;e.moveTo(s+1,_),D?(e.lineTo(s+3,_),e.lineTo(u-3,A),e.lineTo(u-1,A)):e.bezierCurveTo(s+C,_,u-C,A,u-1,A),Uo(e,f[v].value,M.color,!1,m,b)}}}e.lineWidth=3,e.strokeStyle=r.borderColor,e.stroke(p)}doSetShowWiring(e){this._showWiring=e,this.setNeedsRedraw("show wiring changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.MuxDemux.contextMenu,r=this._showWiring?"check":"none",i=T.item(r,e.ShowWiring,()=>{this.doSetShowWiring(!this._showWiring)});return[this.makeChangeParamsContextMenuItem("outputs",e.ParamNumTo,this.numTo,"to"),this.makeChangeParamsContextMenuItem("inputs",e.ParamNumFrom,this.numFrom,"from",[2,4,8,16].map(s=>s*this.numTo)),["mid",T.sep()],this.makeChangeBooleanParamsContextMenuItem(e.ParamControlAtBottom,this.controlPinsAtBottom,"bottom"),["mid",i],...this.makeForceOutputsContextMenuItem(!0)]}};c(ec,"Mux");Wr.impl=ec;var g2=ge(He());var m2=ge(sa()),Xn=ge(He());var js={button:{imgWidth:50},repr:{bits:P(Xn.number),lines:P(Xn.number),showContent:P(Xn.boolean),displayRadix:P(Xn.number),content:P(Xn.union([Xn.string,Xn.array(Xn.string)]))},valueDefaults:{showContent:!0,displayRadix:void 0},params:{bits:Ee(4,[4,8,12,16,32]),lines:Ee(16,[4,8,16,32,64,128,256,512,1024,2048])},validateParams:({bits:o,lines:n})=>{let e=Math.ceil(Math.log2(n)),r=Math.pow(2,e);return{numDataBits:o,numAddressBits:e,numWords:r}},size:({numWords:o,numDataBits:n})=>({gridWidth:11,gridHeight:Math.max(o<=16?16:22,n+4)}),makeNodes:({numDataBits:o,numAddressBits:n,gridHeight:e})=>{let r=-Math.ceil((e+1)/2);return{ins:{Addr:Mn("n",0,r,n)},outs:{Q:fe("e",7,0,o)}}},initialValue:(o,{numDataBits:n,numWords:e})=>{if(o===void 0||o.content===void 0)return Gr.defaultValue(e,n);let r=Gr.contentsFromString(o.content,n,e),i=[...r[0]];return{mem:r,out:i}}},Gr=class extends Fe{constructor(e,r,i,s){var a,u;super(e,r.with(i),s);this.numDataBits=i.numDataBits,this.numAddressBits=i.numAddressBits,this.numWords=i.numWords,this._showContent=(a=s==null?void 0:s.showContent)!=null?a:this.canShowContent()?en.aults.showContent:!1,this._displayRadix=(u=s==null?void 0:s.displayRadix)!=null?u:en.aults.displayRadix}static defaultValue(e,r){return Gr.valueFilledWith(!1,e,r)}static valueFilledWith(e,r,i){let s=new Array(r);for(let u=0;u<r;u++)s[u]=U(e,i);let a=U(e,i);return{mem:s,out:a}}static contentsFromString(e,r,i){let s=me(e)?e:e.split(/\s+/),a=new Array(i);for(let u=0;u<i;u++){let l=u>=s.length?U(!1,r):fs(s[u],r);a[u]=l}return a}toJSONBase(){return j(L({},super.toJSONBase()),{bits:this.numDataBits===en.aults.bits?void 0:this.numDataBits,lines:this.numWords===en.aults.lines?void 0:this.numWords,showContent:this.canShowContent()&&this._showContent!==en.aults.showContent?this._showContent:void 0,displayRadix:this._displayRadix!==en.aults.displayRadix?this._displayRadix:void 0,content:this.contentRepr(" ",!0)})}contentRepr(e,r){let i=[],s=this.numDataBits>=8,a=Math.ceil(this.numDataBits/4);for(let l=0;l<this.numWords;l++){let p=this.value.mem[l],d=s&&Mu(p)?Iu(p,a):Jr(p);i.push(d)}if(r){let l=0;for(let p=this.numWords-1;p>=0&&hs(i[p]);p--)l++;l>0&&i.splice(this.numWords-l,l)}return i.length===0?void 0:i.join(e)}currentAddress(){let e=this.inputValues(this.inputs.Addr),[r,i]=De(e,!1);return i}propagateValue(e){this.outputValues(this.outputs.Q,e.out)}canShowContent(){return this.numWords<=64&&this.numDataBits<=16}doSetShowContent(e){this._showContent=e,this.setNeedsRedraw("show content changed")}doDraw(e,r){this.doDrawDefault(e,r,(i,{width:s,height:a})=>{let u=this.value.mem,l=this.currentAddress(),p,d;if(!this._showContent||!this.canShowContent()||this.parent.editor.options.hideMemoryContent){e.font="bold 18px sans-serif",e.fillStyle=oe,e.textAlign="center",e.textBaseline="middle",e.fillText(this.moduleName,this.posX,this.posY-6),e.font="11px sans-serif";let h=this.numWords>=1024?`${this.numWords/1024}k`:this.numWords.toString();e.fillText(`${h} \xD7 ${this.numDataBits} bits`,this.posX,this.posY+12),d=this.posX,p=this.posY+25}else{let h=ie.isVertical(this.orient),m=h,f=this._displayRadix!==void 0?12:0,C=this.posY-f/2,[D,b]=h?[a-66,s-30-f]:[s-42,a-30-f],v=10,_=!1,M=Math.floor((b-f)*2/this.numWords)/2;if(M<=2&&m&&(_=!0,M=Math.floor((b-f)*4/this.numWords)/2),_){let A=Math.floor((D/2-2*v)*2/this.numDataBits)/2;d=this.posX,p=Jp(e,u,this.numDataBits,l,0,this.numWords/2,this.posX+2-38,C,A,M),Jp(e,u,this.numDataBits,l,this.numWords/2,this.numWords,this.posX+2+38,C,A,M)}else{let A=Math.floor((D-v)*2/this.numDataBits)/2;d=this.posX+3,p=Jp(e,u,this.numDataBits,l,0,this.numWords,d,C,A,M)}}if(this._displayRadix!==void 0){e.textAlign="center",e.textBaseline="top";let h=G(l)?O:De(u[l],!1)[1],m=wr(h,this._displayRadix,this.numDataBits,!0);e.fillStyle=oe,e.fillText(`${m}`,d,p+3)}})}doSetDisplayRadix(e){this._displayRadix=e,this.setNeedsRedraw("additional display radix changed")}doSetMem(e){let r=this.currentAddress(),i=G(r)?U(O,this.numDataBits):e[r];this.doSetValue({mem:e,out:i},!0)}makeComponentSpecificContextMenuItems(){let e=w.Components.RAM.contextMenu,r=w.Components.Generic.contextMenu,i=w.Components.Display.contextMenu,s=c((f,C)=>{let D=this._displayRadix===f?"check":"none";return T.item(D,C,()=>this.doSetDisplayRadix(f))},"makeItemShowRadix"),a=["mid",T.item("memcontent",e.EditContent,()=>{let f=this.contentRepr(" ",!1),C=window.prompt(e.EditContentPrompt,f);C!==null&&this.doSetMem(jn.contentsFromString(C,this.numDataBits,this.numWords))})],u=["mid",T.item("download",e.SaveContent,()=>{var D;let f=new Blob([this.contentRepr(`
`,!1)],{type:"text/plain"}),C=this.parent.editor.documentDisplayName+"."+((D=this.ref)!=null?D:this.moduleName.toLowerCase())+"-content.txt";(0,m2.saveAs)(f,C)})],l=["mid",T.item("open",e.LoadContent,()=>{this.parent.editor.runFileChooser("text/plain",f=>di(this,null,function*(){let C=yield f.text();this.doSetMem(jn.contentsFromString(C,this.numDataBits,this.numWords))}))})],p=["mid",T.item("replace",e.SwapROMRAM,()=>{let f=this instanceof qi,C=this.toNodelessJSON();C.type=f?"ram":"rom";let b=(f?en:Qi).makeFromJSON(this.parent,C);return b===void 0?(console.warn("Could not swap ROM/RAM from repr:",C),ae.NoChange):(this.replaceWithComponent(b),ae.SimpleChange)})],d=["mid",T.submenu("eye",e.SelectedDataDisplay,[s(void 0,i.DisplayNone),T.sep(),s(2,i.DisplayAsBinary),s(16,i.DisplayAsHexadecimal),s(10,i.DisplayAsDecimal),s(-10,i.DisplayAsSignedDecimal),s(8,i.DisplayAsOctal)])],h=this._showContent?"check":"none",m=this.canShowContent()?[["mid",T.item(h,r.ShowContent,()=>this.doSetShowContent(!this._showContent))]]:[];return[...this.makeSpecificROMRAMItems(),d,...m,["mid",T.sep()],a,u,l,["mid",T.sep()],p,["mid",T.sep()],this.makeChangeParamsContextMenuItem("memlines",r.ParamNumWords,this.numWords,"lines"),this.makeChangeParamsContextMenuItem("outputs",w.Components.Generic.contextMenu.ParamNumBits,this.numDataBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)]}makeSpecificROMRAMItems(){return[]}};c(Gr,"ROMRAMBase");function Jp(o,n,e,r,i,s,a,u,l,p){let d=s-i,h=u-d/2*p,m=a-e/2*l,f=m+e*l,C=h+d*p;o.fillStyle=yr,o.fillRect(m,h,f-m,C-h);for(let b=i;b<s;b++)for(let v=0;v<e;v++){let _=n[b][e-v-1];_!==!1&&(o.fillStyle=Vt(_),o.fillRect(m+v*l,h+b*p,l,p))}o.strokeStyle=oe,o.lineWidth=.5;for(let b=1;b<d;b++){let v=h+b*p;Ho(o,m,v,f,v)}for(let b=1;b<e;b++){let v=m+b*l;Ho(o,v,h,v,C)}let D=2;if(o.lineWidth=D,o.strokeRect(m-D/2,h-D/2,f-m+D,C-h+D),!G(r)&&r>=i&&r<s){let b=h+(r-i)*p+p/2,v=m-3,_=8,M=3;o.beginPath(),o.moveTo(v,b),o.lineTo(v-_,b+M),o.lineTo(v-_+2,b),o.lineTo(v-_,b-M),o.closePath(),o.fillStyle=oe,o.fill()}return C}c(Jp,"drawMemoryCells");var Qi=Oe("rom",!0,!0,L({variantName:({bits:o,lines:n})=>`rom-${n}x${o}`,idPrefix:"rom"},js)),qi=class extends Gr{constructor(n,e,r){super(n,Qi,e,r)}toJSON(){return super.toJSONBase()}get moduleName(){return"ROM"}doRecalcValue(){let{mem:n}=this.value,e=this.currentAddress(),r=G(e)?U(O,this.numDataBits):n[e];return{mem:n,out:r}}makeTooltip(){let n=w.Components.ROM.tooltip;return ee(n.title,Q(W(n.desc.expand({numWords:this.numWords,numDataBits:this.numDataBits}))))}};c(qi,"ROM");Qi.impl=qi;var en=Oe("ram",!0,!0,j(L({variantName:({bits:o,lines:n})=>`ram-${n}x${o}`,idPrefix:"ram"},js),{repr:j(L({},js.repr),{trigger:P(g2.keyof(Z))}),valueDefaults:j(L({},js.valueDefaults),{trigger:Z.rising}),makeNodes:(o,n)=>{let e=js.makeNodes(o,n),{numDataBits:r,gridHeight:i}=o,s=Math.ceil((i+1)/2),a=s-2,u=w.Components.Generic;return{ins:{Clock:[-7,a,"w",u.InputClockDesc,{isClock:!0}],WE:[-2,s,"s",u.InputWriteEnableDesc],Clr:[2,s,"s",u.InputClearDesc,{prefersSpike:!0}],D:fe("w",-7,0,r),Addr:e.ins.Addr},outs:e.outs}}})),jn=class extends Gr{constructor(e,r,i){var s;super(e,en,r,i);this._trigger=en.aults.trigger;this._lastClock=O;this._trigger=(s=i==null?void 0:i.trigger)!=null?s:en.aults.trigger}toJSON(){return j(L({},super.toJSONBase()),{trigger:this._trigger!==en.aults.trigger?this._trigger:void 0})}get moduleName(){return"RAM"}get trigger(){return this._trigger}doSetTrigger(e){this._trigger=e,this.setNeedsRedraw("trigger changed")}doRecalcValue(){let e=this.inputs.Clr.value,r=this.numWords;if(e===!0)return jn.valueFilledWith(!1,r,this.numDataBits);let i=this.currentAddress(),s=this._lastClock,a=this._lastClock=this.inputs.Clock.value,u=this.value;if(this.inputs.WE.value!==!0||!gt.isClockTrigger(this.trigger,s,a)){let h=G(i)?U(O,this.numDataBits):u.mem[i];return{mem:u.mem,out:h}}if(G(i))return jn.valueFilledWith(O,r,this.numDataBits);let p=this.inputValues(this.inputs.D).map(xe.filterHighZ),d=new Array(r);for(let h=0;h<r;h++)h===i?d[h]=p:d[h]=u.mem[h];return{mem:d,out:p}}makeTooltip(){let e=w.Components.RAM.tooltip;return ee(e.title,Q(W(e.desc.expand({numWords:this.numWords,numDataBits:this.numDataBits}))))}override(){return[...co(this._trigger,this.doSetTrigger.bind(this)),["mid",T.sep()]]}};c(jn,"RAM");en.impl=jn;var $i=ge(He());var qr=ge(He());var Zo={button:{imgWidth:50},repr:{bits:P(qr.number),showContent:P(qr.boolean),trigger:P(qr.keyof(Z)),content:P(qr.string)},valueDefaults:{showContent:!0,trigger:Z.rising},params:{bits:Ee(4,[2,4,8,16])},validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>({gridWidth:7,gridHeight:o===2?11:Math.max(15,5+o)}),makeNodes:({numBits:o,gridHeight:n})=>{let e=(n+1)/2,r=e-2,i=-e,s=w.Components.Generic;return{ins:{Clock:[-5,r,"w",s.InputClockDesc,{isClock:!0}],Pre:[0,i,"n",s.InputPresetDesc,{prefersSpike:!0}],Clr:[0,e,"s",s.InputClearDesc,{prefersSpike:!0}]},outs:{Q:fe("e",5,0,o)}}},initialValue:(o,{numBits:n})=>{let e;return o===void 0||(e=o.content)===void 0?U(!1,n):fs(e,n)}},zr=class extends Fe{constructor(e,r,i,s){var a,u;super(e,r.with(i),s);this._isInInvalidState=!1;this._lastClock=O;this.numBits=i.numBits,this._showContent=(a=s==null?void 0:s.showContent)!=null?a:kn.aults.showContent,this._trigger=(u=s==null?void 0:s.trigger)!=null?u:kn.aults.trigger}toJSONBase(){return j(L({bits:this.numBits===kn.aults.bits?void 0:this.numBits},super.toJSONBase()),{showContent:this._showContent!==kn.aults.showContent?this._showContent:void 0,trigger:this._trigger!==kn.aults.trigger?this._trigger:void 0,content:this.contentRepr()})}contentRepr(){let e=this.value,r=Math.ceil(this.numBits/4),i=Mu(e)?Iu(e,r):Jr(e);return hs(i)?void 0:i}get trigger(){return this._trigger}doRecalcValue(){let e=this._lastClock,r=this._lastClock=this.inputs.Clock.value,{isInInvalidState:i,newState:s}=gt.doRecalcValueForSyncComponent(this,e,r,this.inputs.Pre.value,this.inputs.Clr.value);return this._isInInvalidState=i,s}makeInvalidState(){return U(!1,this.numBits)}makeStateFromMainValue(e){return U(e,this.numBits)}propagateValue(e){this.outputValues(this.outputs.Q,e)}doSetShowContent(e){this._showContent=e,this.setNeedsRedraw("show content changed")}doSetTrigger(e){this._trigger=e,this.setNeedsRedraw("trigger changed")}doDraw(e,r){this.doDrawDefault(e,r,i=>{this._showContent&&!this.parent.editor.options.hideMemoryContent?zr.drawStoredValues(e,i,this.outputs.Q,this.posX,ie.isVertical(this.orient)):this.doDrawGenericCaption(e)})}static drawStoredValues(e,r,i,s,a){let u=at(i.length)?z:2*z;for(let l of i)Qt.drawStoredValue(e,l.value,...r.rotatePoint(s,l.posYInParentTransform),u,a)}makeComponentSpecificContextMenuItems(){let e=w.Components.Generic.contextMenu,r=this._showContent?"check":"none",i=T.item(r,e.ShowContent,()=>this.doSetShowContent(!this._showContent));return[this.makeChangeParamsContextMenuItem("outputs",e.ParamNumBits,this.numBits,"bits"),...this.makeRegisterSpecificContextMenuItems(),["mid",T.sep()],...co(this._trigger,this.doSetTrigger.bind(this)),["mid",T.sep()],["mid",i],...this.makeForceOutputsContextMenuItem(!0)]}makeRegisterSpecificContextMenuItems(){return[]}};c(zr,"RegisterBase");var kn=Oe("reg",!0,!0,j(L({variantName:({bits:o})=>`reg-${o}`,idPrefix:"reg"},Zo),{repr:j(L({},Zo.repr),{inc:P(qr.boolean),saturating:P(qr.boolean)}),valueDefaults:j(L({},Zo.valueDefaults),{saturating:!1}),params:{bits:Zo.params.bits,inc:ko()},validateParams:({bits:o,inc:n})=>({numBits:o,hasIncDec:n}),makeNodes:(o,n)=>{let e=Zo.makeNodes(o,n),r=e.ins.Clr,i=e.ins.Clr[1];return{ins:L(j(L({},e.ins),{D:fe("w",-5,0,o.numBits)}),o.hasIncDec?{Clr:[2,i,"s",r[3],r[4]],Inc:[-2,i,"s"],Dec:[0,i,"s"]}:{}),outs:e.outs}}})),tc=class extends zr{constructor(e,r,i){var s;super(e,kn,r,i);this.hasIncDec=r.hasIncDec,this._saturating=this.hasIncDec&&((s=i==null?void 0:i.saturating)!=null?s:kn.aults.saturating)}toJSON(){return j(L({},this.toJSONBase()),{inc:this.hasIncDec===kn.aults.inc?void 0:this.hasIncDec,saturating:this._saturating===kn.aults.saturating?void 0:this._saturating})}makeTooltip(){let e=w.Components.Register.tooltip;return ee(e.title,Q(W(e.desc.expand({numBits:this.numBits}))))}makeStateAfterClock(){var i,s,a,u;let e=(s=(i=this.inputs.Inc)==null?void 0:i.value)!=null?s:!1,r=(u=(a=this.inputs.Dec)==null?void 0:a.value)!=null?u:!1;if(G(e)||G(r)||ye(e)||ye(r))return U(!1,this.numBits);if(e||r){if(e&&r)return this.value;let[l,p]=De(this.value,!1);if(G(p))return U(O,this.numBits);let d;if(e){if(d=p+1,d>=Cn(2,this.numBits))return this._saturating?U(!0,this.numBits):U(!1,this.numBits)}else if(d=p-1,d<0)return this._saturating?U(!1,this.numBits):U(!0,this.numBits);return wn.decimalToNBits(d,this.numBits)}return this.inputValues(this.inputs.D).map(xe.filterHighZ)}doDrawGenericCaption(e){e.font="bold 15px sans-serif",e.fillStyle=oe,e.textAlign="center",e.textBaseline="middle",e.fillText("Reg.",this.posX,this.posY-8),e.font="11px sans-serif",e.fillText(`${this.numBits} bits`,this.posX,this.posY+10)}doSetSaturating(e){this._saturating=e,this.setNeedsRedraw("saturating changed")}makeRegisterSpecificContextMenuItems(){let e=w.Components.Register.contextMenu,r=this.hasIncDec?[["mid",T.item(this._saturating?"check":"none",e.Saturating,()=>this.doSetSaturating(!this._saturating))]]:[];return[this.makeChangeBooleanParamsContextMenuItem(e.ParamHasIncDec,this.hasIncDec,"inc"),...r]}};c(tc,"Register");kn.impl=tc;var Yn=Oe("rand",!0,!0,{variantName:({bits:o})=>`rand-${o}`,idPrefix:"rand",button:{imgWidth:32},repr:{bits:P($i.number),prob1:P($i.number),showProb:P($i.boolean),trigger:P($i.keyof(Z)),name:qt},valueDefaults:{prob1:.5,showProb:!1,trigger:Z.rising},params:{bits:Ee(1,[1,2,3,4,7,8,16])},validateParams:({bits:o})=>({numBits:o}),size:({numBits:o})=>({gridWidth:4,gridHeight:4+(at(o)?o/2:o)*2}),makeNodes:({numBits:o,gridHeight:n})=>{let e=w.Components.Generic;return{ins:{Clock:[-3,n/2-1,"w",e.InputClockDesc,{isClock:!0}]},outs:{Out:fe("e",3,0,o)}}},initialValue:(o,{numBits:n})=>U(!1,n)}),nc=class extends Fe{constructor(e,r,i){var s,a,u;super(e,Yn.with(r),i);this._lastClock=O;this.numBits=r.numBits,this._prob1=(i==null?void 0:i.prob1)!==void 0?Math.max(0,Math.min(1,i.prob1)):Yn.aults.prob1,this._showProb=(s=i==null?void 0:i.showProb)!=null?s:Yn.aults.showProb,this._trigger=(a=i==null?void 0:i.trigger)!=null?a:Yn.aults.trigger,this._name=(u=i==null?void 0:i.name)!=null?u:void 0}toJSON(){return j(L({},super.toJSONBase()),{bits:this.numBits===Yn.aults.bits?void 0:this.numBits,name:this._name,prob1:this._prob1!==Yn.aults.prob1?this._prob1:void 0,showProb:this._showProb!==Yn.aults.showProb?this._showProb:void 0,trigger:this._trigger!==Yn.aults.trigger?this._trigger:void 0})}get allowsForcedOutputs(){return!1}makeTooltip(){let e=w.Components.Random.tooltip;return ee(e.title,e.desc[0]+this._prob1+e.desc[1])}doRecalcValue(){let e=this._lastClock,r=this._lastClock=this.inputs.Clock.value;return gt.isClockTrigger(this._trigger,e,r)?kt(c(()=>Math.random()<this._prob1,"randBool"),this.numBits):this.value}propagateValue(e){this.outputValues(this.outputs.Out,e)}doDraw(e,r){let i=this.value;this.doDrawDefault(e,r,{componentName:[this._name,!1,()=>De(i,!1)[1]],skipLabels:!0,drawLabels:(s,{top:a})=>{if(this.numBits===1){let u=this.outputs.Out[0];Qt.drawStoredValue(e,u.value,...s.rotatePoint(this.posX,u.posYInParentTransform),26,!1)}else zr.drawStoredValues(e,s,this.outputs.Out,this.posX,ie.isVertical(this.orient));if(this._showProb){let u=ie.isVertical(this.orient);e.fillStyle=In,e.font="9px sans-serif",e.textAlign="center",e.textBaseline="middle";let p=["P(1)","=",String(Math.round(this._prob1*100)/100).substring(1)];if(u){let d=-10,h=Math.abs(d);this.orient==="s"&&(d=-d,h=-h);for(let m of p)Ie(s,this.orient,m,"n",this.posX-d,a-1,void 0),d+=h}else{let d=p.join("\u202F");Ie(s,this.orient,d,"n",this.posX,a,void 0)}}}})}doSetName(e){this._name=e,this.setNeedsRedraw("name changed")}doSetShowProb(e){this._showProb=e,this.setNeedsRedraw("show probability changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.Random.contextMenu,r=this._showProb?"check":"none";return[["mid",T.item(r,e.ShowProb,()=>this.doSetShowProb(!this._showProb))],["mid",T.sep()],this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),["mid",T.sep()],["mid",this.makeSetNameContextMenuItem(this._name,this.doSetName.bind(this))]]}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetNameDialog(this._name,this.doSetName.bind(this)):super.keyDown(e)}};c(nc,"Random");Yn.impl=nc;var Fn=ge(He());var Jo={grey:"grey",red:"red",blue:"blue",yellow:"yellow",green:"green",turquoise:"turquoise"},Rr={n:"n",ne:"ne",e:"e",se:"se",s:"s",sw:"sw",w:"w",nw:"nw",c:"c"},ht=ke("rect",{idPrefix:"rect",button:{imgWidth:32},repr:{w:Fn.number,h:Fn.number,color:P(Fn.keyof(Jo)),strokeWidth:P(Fn.number),noFill:P(Fn.boolean),rounded:P(Fn.boolean),caption:P(Fn.string),captionPos:P(Fn.keyof(Rr)),captionInside:P(Fn.boolean),font:P(Fn.string)},valueDefaults:{width:10*z,height:10*z,color:Jo.yellow,strokeWidth:2,noFill:!1,rounded:!1,caption:void 0,captionPos:Rr.n,captionInside:!1,font:ol},size:{gridWidth:10,gridHeight:10},makeNodes:()=>({})}),Ys=class extends Re{constructor(e,r){var i,s,a,u,l,p,d,h,m,f;super(e,ht,r);this._w=(i=r==null?void 0:r.w)!=null?i:ht.aults.width,this._h=(s=r==null?void 0:r.h)!=null?s:ht.aults.height,this._color=(a=r==null?void 0:r.color)!=null?a:ht.aults.color,this._strokeWidth=(u=r==null?void 0:r.strokeWidth)!=null?u:ht.aults.strokeWidth,this._noFill=(l=r==null?void 0:r.noFill)!=null?l:ht.aults.noFill,this._rounded=(p=r==null?void 0:r.rounded)!=null?p:ht.aults.rounded,this._caption=(d=r==null?void 0:r.caption)!=null?d:ht.aults.caption,this._captionPos=(h=r==null?void 0:r.captionPos)!=null?h:ht.aults.captionPos,this._captionInside=(m=r==null?void 0:r.captionInside)!=null?m:ht.aults.captionInside,this._font=(f=r==null?void 0:r.font)!=null?f:ht.aults.font}toJSON(){return j(L({},this.toJSONBase()),{w:this._w,h:this._h,color:this._color,strokeWidth:this._strokeWidth,noFill:this._noFill===ht.aults.noFill?void 0:this._noFill,rounded:this._rounded===ht.aults.rounded?void 0:this._rounded,caption:this._caption===ht.aults.caption?void 0:this._caption,captionPos:this._captionPos===ht.aults.captionPos?void 0:this._captionPos,captionInside:this._captionInside===ht.aults.captionInside?void 0:this._captionInside,font:this._font===ht.aults.font?void 0:this._font})}canRotate(){return!1}get unrotatedWidth(){return this._w}get unrotatedHeight(){return this._h}doRecalcValue(){}get drawZIndex(){return 0}doDraw(e,r){let i=this._w,s=this._h,a=this.posX-i/2,u=this.posY-s/2;if(e.beginPath(),this._rounded){let l=3*this._strokeWidth;e.moveTo(a+l,u),e.lineTo(a+i-l,u),e.quadraticCurveTo(a+i,u,a+i,u+l),e.lineTo(a+i,u+s-l),e.quadraticCurveTo(a+i,u+s,a+i-l,u+s),e.lineTo(a+l,u+s),e.quadraticCurveTo(a,u+s,a,u+s-l),e.lineTo(a,u+l),e.quadraticCurveTo(a,u,a+l,u)}else e.rect(a,u,i,s);if(e.closePath(),this._noFill||(e.fillStyle=tl[this._color],e.fill()),this._caption!==void 0){e.fillStyle=oe,e.font=this._font,e.textAlign="center",e.textBaseline="middle";let l=e.measureText(this._caption),p=(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent+this._strokeWidth)/2+2,d=2,h=(l.width+this._strokeWidth)/2+d,m=(()=>{switch(this._captionPos){case"c":case"w":case"e":return this.posY;case"n":case"nw":case"ne":return this.posY-this.height/2+(this._captionInside?1:-1)*p;case"s":case"se":case"sw":return this.posY+this.height/2+(this._captionInside?-1:1)*p}})(),f=(()=>{switch(this._captionPos){case"c":case"n":case"s":return this.posX;case"w":return this.posX-this.width/2+(this._captionInside?1:-1)*h;case"nw":case"sw":return this.posX-this.width/2+h-(this._captionInside?0:1)*(d+this._strokeWidth);case"e":return this.posX+this.width/2+(this._captionInside?-1:1)*h;case"ne":case"se":return this.posX+this.width/2-h+(this._captionInside?0:1)*(d+this._strokeWidth)}})();e.fillText(this._caption,f,m)}r.isMouseOver?(e.lineWidth=Math.max(3,this._strokeWidth),e.strokeStyle=r.borderColor,e.stroke()):this._strokeWidth>0&&(e.lineWidth=this._strokeWidth,e.strokeStyle=nl[this._color],e.stroke())}doSetColor(e){this._color=e,this.setNeedsRedraw("color changed")}doSetStrokeWidth(e){this._strokeWidth=e,this.setNeedsRedraw("stroke width changed")}doSetCaption(e){this._caption=e,this.setNeedsRedraw("caption changed")}doSetCaptionPos(e){this._captionPos=e,this.setNeedsRedraw("caption position changed")}doSetFont(e){this._font=e,this.setNeedsRedraw("font changed")}makeCurrentSizeString(){return`${this._w} \xD7 ${this._h}`}makeComponentSpecificContextMenuItems(){let e=w.Components.Rectangle.contextMenu,r=this.makeCurrentSizeString(),i=T.item("dimensions",e.Size+` (${r})\u2026`,()=>this.runSetSizeDialog(r)),s=c((C,D)=>{let v=this._strokeWidth===C?"check":"none";return T.item(v,D,()=>this.doSetStrokeWidth(C))},"makeSetStrokeWidthItem"),a=c((C,D)=>{let b=this._color===D,v=b?"check":"none",_=b?()=>{}:()=>this.doSetColor(D);if(D!==void 0){let M=this._noFill?"":`background-color: ${tl[D]}; `,A=this._rounded?"border-radius: 4px; ":"",E=nl[D];return T.item(v,Rt(Zt(C),Y(`display: inline-block; width: 140px; height: 18px; ${M}${A}margin-right: 8px; border: 2px solid ${E}`)),_)}else return T.item(v,C,_)},"makeItemUseColor"),u=T.item(this._rounded?"check":"none",e.Rounded,()=>{this._rounded=!this._rounded,this.setNeedsRedraw("rounded changed")}),l=T.item(this._noFill?"none":"check",e.WithBackgroundColor,()=>{this._noFill=!this._noFill,this.setNeedsRedraw("nofill changed")}),p=this._caption!==void 0?e.ChangeTitle:e.SetTitle,d=T.item("pen",p,()=>this.runSetCaptionDialog(),"\u21A9\uFE0E"),h=c((C,D)=>{let b=this._captionPos===D,v=b?"check":"none",_=b?()=>{}:()=>this.doSetCaptionPos(D);return T.item(v,C,_)},"makeItemSetPlacement"),m=this._captionPos==="c"?[]:[T.item(this._captionInside?"check":"none",e.InsideFrame,()=>{this._captionInside=!this._captionInside,this.setNeedsRedraw("caption inside changed")}),T.sep()],f=T.item("font",e.Font,()=>{this.runSetFontDialog(this._font,ht.aults.font,this.doSetFont.bind(this))});return[["mid",i],["mid",T.submenu("palette",e.Color,[l,T.sep(),a(e.ColorYellow,Jo.yellow),a(e.ColorRed,Jo.red),a(e.ColorGreen,Jo.green),a(e.ColorBlue,Jo.blue),a(e.ColorTurquoise,Jo.turquoise),a(e.ColorGrey,Jo.grey)])],["mid",T.submenu("strokewidth",e.Border,[s(0,e.BorderNone),T.sep(),s(1,e.Border1px),s(2,e.Border2px),s(3,e.Border3px),s(5,e.Border5px),s(10,e.Border10px)])],["mid",u],["mid",T.sep()],["mid",d],["mid",f],["mid",T.submenu("placement",e.TitlePlacement,[...m,h(e.PlacementTop,Rr.n),h(e.PlacementTopLeft,Rr.nw),h(e.PlacementTopRight,Rr.ne),h(e.PlacementBottom,Rr.s),h(e.PlacementBottomLeft,Rr.sw),h(e.PlacementBottomRight,Rr.se),h(e.PlacementLeft,Rr.w),h(e.PlacementRight,Rr.e),h(e.PlacementCenter,Rr.c)])]]}runSetSizeDialog(e){var i,s;let r=window.prompt(w.Components.Rectangle.contextMenu.SizePrompt,e);if(r!==null){let a;if((a=new RegExp("^(?<w>\\d*)((\\s+|( *[\xD7x,;] *))(?<h>\\d*))?$").exec(r))!==null){let u=c((d,h)=>{if(d===void 0)return h;let m=parseInt(d);return isNaN(m)||m<=0?h:m},"parse"),l=u((i=a.groups)==null?void 0:i.w,this._w),p=u((s=a.groups)==null?void 0:s.h,this._h);this.doSetDimensions(l,p)}}}doSetDimensions(e,r){this._w=e,this._h=r,this.setNeedsRedraw("size changed")}wrapContents(e){var f;if(e.size===0)return;let r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let C of e)C instanceof Nr&&(r=Math.min(r,C.posX-C.width/2),i=Math.min(i,C.posY-C.height/2),s=Math.max(s,C.posX+C.width/2),a=Math.max(a,C.posY+C.height/2));let u=(r+s)/2,l=(i+a)/2,[p,d]=(f=this.trySetPosition(u,l,!0))!=null?f:[u,l];r=Math.floor((r+Math.max(0,u-p))/z)*z,i=Math.floor((i+Math.max(0,l-d))/z)*z,s=Math.ceil((s+Math.max(0,p-u))/z)*z,a=Math.ceil((a+Math.max(0,d-l))/z)*z;let h=s-r+4*z,m=a-i+4*z;this.doSetDimensions(h,m)}runSetCaptionDialog(){let e=window.prompt(w.Components.Rectangle.contextMenu.SetTitlePrompt,this._caption);if(e!==null){let r=e.length===0?void 0:e;this.doSetCaption(r)}}mouseDoubleClicked(e){return this.runSetSizeDialog(this.makeCurrentSizeString()),ae.SimpleChange}keyDown(e){e.key==="Enter"&&!e.altKey?this.runSetCaptionDialog():super.keyDown(e)}};c(Ys,"Rectangle");ht.impl=Ys;var ei=ge(He()),C2=ge(wo());var v2={raw:{decodeWidth:1,maxDisplayWidth:16,decode:o=>o.toString()},octal:{decodeWidth:3,maxDisplayWidth:16,decode:o=>o.toString()},hex:{decodeWidth:4,maxDisplayWidth:16,decode:o=>o.toString(16).toUpperCase()},ascii:{decodeWidth:7,maxDisplayWidth:12,decode:o=>Do.numberToAscii(o)},ascii8:{decodeWidth:8,maxDisplayWidth:12,decode:o=>Do.numberToAscii(o&127)},uint4:{decodeWidth:4,maxDisplayWidth:8,decode:o=>o.toString()},int4:{decodeWidth:4,maxDisplayWidth:8,decode:o=>(o>7?o-16:o).toString()},uint8:{decodeWidth:8,maxDisplayWidth:4,decode:o=>o.toString()},int8:{decodeWidth:8,maxDisplayWidth:4,decode:o=>(o>127?o-256:o).toString()},uint16:{decodeWidth:16,maxDisplayWidth:1,decode:o=>o.toString()},int16:{decodeWidth:16,maxDisplayWidth:1,decode:o=>(o>32767?o-65536:o).toString()}},ed=Pt.withProps()(v2),Qr=ke("shift-display",{idPrefix:"shiftdisp",button:{imgWidth:50},repr:{state:P(ei.string),decodeAs:P(ei.keyof(v2)),groupEvery:P(ei.number),maxItems:P(ei.number),trigger:P(ei.keyof(Z))},valueDefaults:{decodeAs:"raw",trigger:Z.rising},size:{gridWidth:25,gridHeight:5},makeNodes:()=>{let o=w.Components.Generic;return{ins:{Clock:[-14,1,"w",o.InputClockDesc,{isClock:!0}],Clr:[-10,3,"s",o.InputClearDesc,{prefersSpike:!0}],D:[-14,-1,"w",o.InputDataDesc]}}},initialValue:o=>{if(o===void 0||o.state===void 0)return{incoming:[],decoded:[]};let n=[];for(let e=0;e<o.state.length;e++){let r=o.state.charAt(e);r==="1"?n.push(!0):r==="0"?n.push(!1):n.push(O)}return{incoming:n,decoded:[]}}}),Xi=class extends Re{constructor(e,r){var i,s,a,u;super(e,Qr,r);this._lastClock=O;this._decodeAs=(i=r==null?void 0:r.decodeAs)!=null?i:Qr.aults.decodeAs,this._groupEvery=(s=r==null?void 0:r.groupEvery)!=null?s:void 0,this._maxItems=(a=r==null?void 0:r.maxItems)!=null?a:void 0,this._trigger=(u=r==null?void 0:r.trigger)!=null?u:Qr.aults.trigger,this.redecodeAll()}toJSON(){let e=D2(this.value).map(r=>pt(r));return j(L({},this.toJSONBase()),{state:e.length===0?void 0:e.join(""),decodeAs:this._decodeAs!==Qr.aults.decodeAs?this._decodeAs:void 0,groupEvery:this._groupEvery,maxItems:this._maxItems,trigger:this._trigger!==Qr.aults.trigger?this._trigger:void 0})}get trigger(){return this._trigger}makeTooltip(){return ee(w.Components.ShiftDisplay.tooltip,Q(W(C2.default.stringify(this.value))))}doRecalcValue(){var s;if(this.inputs.Clr.value===!0)return{incoming:[],decoded:[]};let e=this._lastClock,r=this._lastClock=this.inputs.Clock.value,i=this.value;if(gt.isClockTrigger(this._trigger,e,r)){let a=this.inputs.D.value,u=ed.props[this._decodeAs],l=(s=this._maxItems)!=null?s:u.maxDisplayWidth;return Xi.valueByAddingNewBit(a,i,u,l)}return i}static valueByAddingNewBit(e,r,i,s){let a=[e,...r.incoming];if(a.length<i.decodeWidth)return{incoming:a,decoded:r.decoded};let u=De(a,!0)[1],p=[[G(u)?O:i.decode(u),a],...r.decoded];return p.length>s&&p.splice(s,p.length-s),{incoming:[],decoded:p}}doSetTrigger(e){this._trigger=e,this.setNeedsRedraw("trigger changed")}doDraw(e,r){this.doDrawDefault(e,r,{drawInside:()=>{let i=c(()=>{let s=this.makeRepresentationString(),a;s===void 0?(e.fillStyle=In,e.font="15px sans-serif",a=w.Components.ShiftDisplay.EmptyCaption):(e.fillStyle=oe,e.font="bold 16px sans-serif",a=s),e.fillText(a,this.posX,this.posY)},"drawContents");e.textAlign="center",e.textBaseline="middle",this.orient==="w"?r.inNonTransformedFrame(i):i()}})}makeRepresentationString(){var h;let{incoming:e,decoded:r}=this.value;if(e.length===0&&r.length===0)return;let i=this._decodeAs,a=ed.props[i].decodeWidth-e.length,l=Ah("_\u202F",a)+De(e,!0)[0],p=i.includes("int")?" ":"",d;if(r.length===0)d="\u2026";else{let m=(h=this._groupEvery)!=null?h:0;if(m<2)d=r.map(f=>f[0]).join(p);else{let f=m-r.length%m,C=[];for(let D=0;D<r.length;D++)D!==0&&((D+f)%m===0?C.push(p+" "):C.push(p)),C.push(r[D][0]);d=C.join("")}i==="hex"?d="0x"+(m<2?"":" ")+d:i==="octal"&&(d="0o"+(m<2?"":" ")+d)}return i==="raw"?d:l+" \u279F "+d}redecodeAll(){var a;let e=ed.props[this._decodeAs],r=D2(this.value),i=(a=this._maxItems)!=null?a:e.maxDisplayWidth,s={incoming:[],decoded:[]};for(let u of r.reverse())s=Xi.valueByAddingNewBit(u,s,e,i);this.doSetValue(s)}doSetDecodeAs(e){this._decodeAs=e,this.redecodeAll()}doSetGroupEvery(e){this._groupEvery=e,this.setNeedsRedraw("grouping changed")}makeComponentSpecificContextMenuItems(){let e=w.Components.ShiftDisplay.contextMenu,r=c((s,a)=>{let l=this._decodeAs===s?"check":"none";return T.item(l,a,()=>this.doSetDecodeAs(s))},"makeItemDecodeAs"),i=c((s,a)=>{let l=this._groupEvery===s?"check":"none";return T.item(l,a,()=>this.doSetGroupEvery(s))},"makeItemGroupEvery");return[...co(this._trigger,this.doSetTrigger.bind(this)),["mid",T.sep()],["mid",T.submenu("eye",e.Decoding,[r("raw",e.DecodingNone),r("octal",e.DecodingOctal),r("hex",e.DecodingHex),r("ascii",e.DecodingAscii7),r("ascii8",e.DecodingAscii8),r("uint4",e.DecodingUint4),r("int4",e.DecodingInt4),r("uint8",e.DecodingUint8),r("int8",e.DecodingInt8),r("uint16",e.DecodingUint16),r("int16",e.DecodingInt16),T.sep(),T.text(e.DecodingChangeWarning)])],["mid",T.submenu("regroup",e.Grouping,[i(void 0,e.GroupingNone),T.sep(),i(2,e.GroupBy.expand({n:2})),i(3,e.GroupBy.expand({n:3})),i(4,e.GroupBy.expand({n:4})),i(7,e.GroupBy.expand({n:7})),i(8,e.GroupBy.expand({n:8})),i(16,e.GroupBy.expand({n:16}))])]]}};c(Xi,"ShiftDisplay");Qr.impl=Xi;function D2({incoming:o,decoded:n}){let e=[...o];for(let[r,i]of n)e.push(...i);return e}c(D2,"allBitsOf");var Ks=Oe("shift-reg",!0,!0,j(L({variantName:({bits:o})=>`shift-reg-${o}`,idPrefix:"reg"},Zo),{makeNodes:(o,n)=>{let e=Zo.makeNodes(o,n),r=e.ins.Clock[1]-2;return{ins:j(L({},e.ins),{D:[-5,0,"w"],L\u0305R:[-5,r,"w"]}),outs:e.outs}}})),rc=class extends zr{constructor(n,e,r){super(n,Ks,e,r)}toJSON(){return this.toJSONBase()}makeTooltip(){let n=w.Components.ShiftRegister.tooltip;return ee(n.title,Q(W(n.desc.expand({numBits:this.numBits}))))}makeStateAfterClock(){let n=this.inputs.L\u0305R.value;if(G(n)||ye(n))return this.makeStateFromMainValue(O);let e=xe.filterHighZ(this.inputs.D.value),r=this.value;return n?[...r.slice(1),e]:[e,...r.slice(0,-1)]}doDrawGenericCaption(n){n.font="bold 13px sans-serif",n.fillStyle=oe,n.textAlign="center",n.textBaseline="middle",n.fillText("Shift R.",this.posX,this.posY-8),n.font="11px sans-serif",n.fillText(`${this.numBits} bits`,this.posX,this.posY+10)}};c(rc,"ShiftRegister");Ks.impl=rc;var Zs=ke("tristate",{idPrefix:"tristate",button:{imgWidth:50},valueDefaults:{},size:{gridWidth:7,gridHeight:4},makeNodes:()=>({ins:{In:[-4,0,"w"],E:[0,-3,"n","E (Enable)"]},outs:{Out:[4,0,"e"]}}),initialValue:()=>Qe}),oc=class extends Re{constructor(n,e){super(n,Zs,e)}toJSON(){return this.toJSONBase()}makeTooltip(){return ee(void 0,Q(W(w.Components.TristateBuffer.tooltip)))}doRecalcValue(){let n=this.inputs.E.value;if(G(n)||ye(n))return O;if(!n)return Qe;let e=this.inputs.In.value;return ye(e)?O:e}propagateValue(n){this.outputs.Out.value=n}doDraw(n,e){let r=this.unrotatedWidth,i=this.unrotatedHeight,s=this.posX-r/2,a=this.posY-i/2,u=a+i;e.isMouseOver&&(n.lineWidth=2,n.strokeStyle=e.borderColor,n.beginPath(),n.rect(s-2-2,a-2-2,r+2*(2+2),i+2*(2+2)),n.stroke()),n.fillStyle=Je,n.strokeStyle=oe,n.lineWidth=3;let l=2*Math.max(2,this.inputs._all.length)*z,p=this.posX-l/2,d=this.posX+l/2;n.beginPath(),n.moveTo(p,a),n.lineTo(d,this.posY),n.lineTo(p,u),n.closePath(),n.stroke(),de(n,this.inputs.In,p-1,this.inputs.In.posYInParentTransform),de(n,this.inputs.E,this.inputs.E.posXInParentTransform,this.posY-i/4-1),de(n,this.outputs.Out,d+1,this.posY)}};c(oc,"TristateBuffer");Zs.impl=oc;var b2=ge(He());var ji=Oe("tristate-array",!0,!0,{variantName:({bits:o})=>`tristate-array-${o}`,idPrefix:"tristate",button:{imgWidth:50},repr:{bits:P(b2.number)},valueDefaults:{},params:{bits:Ee(4,[2,4,8,16])},validateParams:({bits:o})=>({numBits:o}),size:lo.size,makeNodes:({numBits:o,gridHeight:n})=>({ins:{In:fe("w",-3,0,o),E:[0,-(n/2+1),"n","E (Enable)"]},outs:{Out:fe("e",3,0,o)}}),initialValue:(o,{numBits:n})=>U(Qe,n)}),ic=class extends Fe{constructor(e,r,i){super(e,ji.with(r),i);this.numBits=r.numBits}toJSON(){return j(L({},this.toJSONBase()),{bits:this.numBits===ji.aults.bits?void 0:this.numBits})}makeTooltip(){let e=w.Components.TristateBufferArray.tooltip;return ee(e.title,Q(W(e.desc)))}doRecalcValue(){let e=this.inputs.E.value;return G(e)||ye(e)?U(O,this.numBits):e?this.inputValues(this.inputs.In):U(Qe,this.numBits)}propagateValue(e){this.outputValues(this.outputs.Out,e)}doDraw(e,r){this.doDrawDefault(e,r,{skipLabels:!0,drawInside:({top:i,left:s,right:a})=>{let u=this.inputs.E.value;e.lineWidth=2,e.strokeStyle=Vt(u),e.beginPath(),e.moveTo(this.posX,i),e.lineTo(this.posX,this.posY-4),e.stroke(),e.strokeStyle=oe,e.beginPath(),e.moveTo(s+12,this.posY-8),e.lineTo(a-13,this.posY),e.lineTo(s+12,this.posY+8),e.closePath(),e.stroke()}})}makeComponentSpecificContextMenuItems(){return[this.makeChangeParamsContextMenuItem("inputs",w.Components.Generic.contextMenu.ParamNumBits,this.numBits,"bits"),...this.makeForceOutputsContextMenuItem(!0)]}};c(ic,"TristateBufferArray");ji.impl=ic;var db=[Jt,xn,Yn,fo,ur,Hs,Vs,Us,go,Qr,Ko,et,Ur,Zs,ji,lo,Tr,ht,er,qs,Ts,Os,ao,nr,lt,Wr,Er,$s,Gs,zs,Ws,kn,Ks,Qi,en,Ar,Gi,Ns,Fs,Ls],Qa=class{constructor(n){this._predefinedComponents=new Map;this._customComponents=new Map;this.editor=n;for(let e of db){let r=e.type;if(!e.isValid())throw new Error(`Implementation missing for components of type '${r}'`);if(this._predefinedComponents.has(r))throw new Error(`Duplicate component for components of type '${r}'`);this._predefinedComponents.set(r,e)}}makeFromJSON(n,e,r){if(!Wn(e)){console.warn(`Skipping invalid non-object component: ${nd.default.stringify(e,null,2)}`);return}let i=e;r!==void 0&&me(i.pos)&&(i.pos=[i.pos[0]+r[0],i.pos[1]+r[1]]);let s=Ae(i.type)?i.type:"<unknown>",a=this.getMaker(s);return a==null?void 0:a.makeFromJSON(n,i)}makeFromButton(n,e){let r=e.dataset,i=r.params,s=this.getMaker(r.type),a=i===void 0?void 0:nd.default.parse(i);return s==null?void 0:s.make(n,a)}getMaker(n){let e;if((e=this._predefinedComponents.get(n))!==void 0)return e;if(zo.includes(n))return Ko;if(Vr.includes(n))return et;let r=n.indexOf("-");if(r!==-1){let i=n.substring(0,r);if(n.substring(r+1)==="array"&&Vr.includes(i))return Ur;if(n.startsWith(mo)){let a=n.substring(mo.length);if((e=this._customComponents.get(a))!==void 0)return e}}console.warn(`Unknown component for '${n}'`)}getCustomDef(n){return this._customComponents.get(n)}customDefs(){if(this._customComponents.size!==0)return[...this._customComponents.values()]}customDefReprs(){let n=this.customDefs();if(n!==void 0)return n.map(e=>e.toJSON())}clearCustomDefs(){this._customComponents.clear()}getCustomComponentTypesWhichUse(n){let e=[n];for(let r of this._customComponents.values())r.uses(n,[!0,this])&&e.push(r.type);return e}tryAddCustomDef(n,e){let r=n.customId;if(!e&&this._customComponents.has(r)){console.warn(`Could not add custom component with duplicate id '${r}'`);return}return this._customComponents.set(r,n),n}tryLoadCustomDefsFrom(n){if(n===void 0)return 0;let e=Zr(n,y2.array(d2),"defs");if(e===void 0)return 0;let r=0;for(let i of e)this.tryAddCustomDef(new Wi(i),!1)!==void 0&&r++;return r}hasCustomComponents(){return this._customComponents.size>0}makeContextMenu(n){let e=n.substring(mo.length),r=this._customComponents.get(e);if(r===void 0)return;let i=w.Components.Custom.contextMenu;return[T.item("pen",i.ChangeName,()=>this.runChangeCustomComponentCaptionDialog(r)),T.item("connect",i.ChangeCircuit,()=>{window.alert(i.EditFromComponentMessage)}),T.sep(),T.item("trash",i.Delete,()=>{if(this.editor.components.contains(n)){window.alert(i.CannotDeleteInUse);return}for(let s of this._customComponents.values())if(s.uses(r.type,!1)){window.alert(i.CannotDeleteInUseBy.expand({caption:s.caption}));return}window.confirm(i.ConfirmDelete)&&(this._customComponents.delete(e),this.editor.updateCustomComponentButtons())},void 0,!0)]}runChangeCustomComponentCaptionDialog(n){var s;let e=w.Components.Custom.contextMenu,r=n.caption,i=n.type;for(;;){let a=window.prompt(e.ChangeNamePrompt,r);if(a===null||a===r)return;if(a.length===0){window.alert(e.ChangeNameEmpty);continue}n.doSetCaption(a);let u=td(r);if(n.customId===u){let l=td(a);if(!this._customComponents.has(l)){this._customComponents.delete(u),n.customId=l;let p=n.type;for(let d of this._customComponents.values())for(let h of Object.values((s=d.circuit.components)!=null?s:{}))h.type===i&&(h.type=p);this._customComponents.set(l,n)}}break}this.editor.updateCustomComponentButtons(),this.editor.components.updateCustomComponents(i),this.editor.focus()}tryMakeNewCustomComponent(n){var C;let e=w.Components.Custom.messages,r=(C=n.eventMgr.currentSelection)==null?void 0:C.previouslySelectedElements;if(r===void 0)return e.EmptySelection;let i=[...r].filter(D=>D instanceof Re);if(i.length===0)return e.EmptySelection;let s=this.checkComponentsForCustomDef(i);if(Ae(s))return s;let a=s.components,u,l=a.filter(D=>D instanceof Qs);if(l.length!==1){if(u=window.prompt(e.EnterCaptionPrompt),u===null)return""}else u=l[0].text;let p=td(u);if(this._customComponents.has(p))return e.ComponentAlreadyExists.expand({id:p});let{components:d,wires:h}=ut.buildComponentsAndWireObject(a,void 0);if(d===void 0||h===void 0)return e.NoWires;let m=this.tryAddCustomDef(new Wi({id:p,caption:u,circuit:{components:d,wires:h}}),!1);if(m===void 0)return"";let f=m.make(n);f.setSpawned(),f.setPosition(n.mouseX+f.unrotatedWidth/2-5,n.mouseY,!0),n.eventMgr.currentSelection=void 0,n.eventMgr.setCurrentMouseOverComp(f);for(let D of a)n.components.tryDelete(D)}tryModifyCustomComponent(n,e){let r=w.Components.Custom.messages,i=[...e.components.all()],s=this.checkComponentsForCustomDef(i);if(Ae(s))return s;let a=s.components,u=ut.buildComponentsAndWireObject(a,void 0);if(u.components===void 0||u.wires===void 0)return"";let l=new Wi({id:n.customId,caption:n.caption,circuit:{components:u.components,wires:u.wires}});if((l.numInputs!==n.numInputs||l.numOutputs!==n.numOutputs)&&!window.confirm(r.InputsOutputsChanged))return"";this.tryAddCustomDef(l,!0)}checkComponentsForCustomDef(n){let e=w.Components.Custom.messages,r=n.filter(m=>m instanceof uo);if(r.length===0)return e.NoInput;let i=n.filter(m=>m instanceof jo);if(i.length===0)return e.NoOutput;function s(m){let f=new Set,C=[];for(let D of m){let b=D.name;if(b===void 0)C.push(D);else{if(!Ae(b)||f.has(b))return!1;f.add(b)}}for(let D of C){let b=D instanceof uo?"In":"Out",v=0,_;do _=`${b}${v++}`;while(f.has(_));D.doSetName(_),f.add(_)}return!0}if(c(s,"checkNames"),!(s(r)&&s(i)))return e.InputsOutputsMustHaveNames;let u=[...r,...i],l=[],p;for(l.push(...r);(p=l.shift())!==void 0;)for(let m of p.outputs._all)for(let f of m.outgoingWires){let C=f.endNode.component;n.includes(C)&&!u.includes(C)&&(u.push(C),l.push(C))}l.push(...i);let d=[];for(;(p=l.shift())!==void 0;)for(let m of p.inputs._all){let f=m.incomingWire;if(f!==null){let C=f.startNode.component;n.includes(C)?u.includes(C)||(u.push(C),l.push(C)):d.includes(C)||d.push(C)}}if(d.length>0){let m=d.map(f=>f.toString()).join(", ");return e.MissingComponents.expand({list:m})}let h=n.filter(m=>!u.includes(m)&&(m.inputs._all.length!==0||m.outputs._all.length!==0));if(h.length>0){let m=h.map(f=>f.toString()).join(", ");return e.UselessComponents.expand({list:m})}return u.some(m=>m instanceof Is)?e.CannotIncludeClock:{components:u,inputs:r,outputs:i}}};c(Qa,"ComponentFactory");function td(o){return o.trim().normalize("NFKD").toLowerCase().replace(/[^a-z0-9]+/g,"")}c(td,"makeCustomIdFromCaption");var x2=ge(wo());var wt="withButton",pn="ifShowOnly",hb=[{nameKey:"InputOutput",items:[Jt.button({bits:1},"Input1"),fo.button({bits:1},"Output1"),go.button("DisplayBar",{compat:"out.bar",visible:wt}),xn.button("Clock"),Jt.button({bits:4},["InputN","Input4"],{compat:"in.nibble"}),fo.button({bits:4},["OutputN","Output4"],{compat:"out.nibble"}),ur.button({bits:4},["DisplayN","Display4"],{compat:"out.nibble-display"}),Jt.button({bits:8},"Input8",{compat:"in.byte",visible:pn}),fo.button({bits:8},"Output8",{compat:"out.byte",visible:pn}),ur.button({bits:8},"Display8",{compat:"out.byte-display",visible:pn}),Hs.button("Display7Seg",{compat:"out.7seg",visible:wt}),Vs.button("Display16Seg",{compat:"out.16seg",visible:wt}),Us.button("DisplayAscii",{compat:"out.ascii",visible:wt}),Yn.button({bits:1},"Random",{compat:"random",visible:wt}),Qr.button("ShiftDisplay",{compat:"out.shift-buffer",visible:wt})]},{nameKey:"Gates",items:[Ko.button({type:"not"},"not"),Ko.button({type:"buf"},"buf",{visible:wt}),Zs.button("tri",{compat:"tri",visible:wt}),et.button({type:"and",bits:2},"and"),et.button({type:"or",bits:2},"or"),et.button({type:"xor",bits:2},"xor"),et.button({type:"nand",bits:2},"nand"),et.button({type:"nor",bits:2},"nor"),et.button({type:"xnor",bits:2},"xnor",{visible:wt}),et.button({type:"imply",bits:2},"imply",{visible:wt}),et.button({type:"nimply",bits:2},"nimply",{visible:wt}),et.button({type:"txa",bits:2},["transfer","txa"],{visible:wt}),et.button({type:"and",bits:3},"and3",{compat:"and3",visible:pn}),et.button({type:"or",bits:3},"or3",{compat:"or3",visible:pn}),et.button({type:"xor",bits:3},"xor3",{compat:"xor3",visible:pn}),et.button({type:"nand",bits:3},"nand3",{compat:"nand3",visible:pn}),et.button({type:"nor",bits:3},"nor3",{compat:"nor3",visible:pn}),et.button({type:"xnor",bits:3},"xnor3",{compat:"xnor3",visible:pn}),et.button({type:"and",bits:4},"and4",{compat:"and4",visible:pn}),et.button({type:"or",bits:4},"or4",{compat:"or4",visible:pn}),et.button({type:"xor",bits:4},"xor4",{compat:"xor4",visible:pn}),et.button({type:"nand",bits:4},"nand4",{compat:"nand4",visible:pn}),et.button({type:"nor",bits:4},"nor4",{compat:"nor4",visible:pn}),et.button({type:"xnor",bits:4},"xnor4",{compat:"xnor4",visible:pn}),lo.button({bits:4},"ControlledInverter",{compat:"switched-inverter",visible:wt}),Ur.button({type:"and",bits:4},"GateArray",{compat:"quad-gate",visible:wt}),ji.button({bits:4},"TristateBufferArray",{visible:wt})]},{nameKey:"Layout",items:[Tr.button("Label"),ht.button("Rectangle",{compat:"label.rect"}),er.button({bits:1},"Passthrough1"),er.button({bits:4},"PassthroughN")]},{nameKey:"Components",items:[qs.button("HalfAdder"),Ts.button("Adder"),Os.button("Comparator",{compat:"comparator",visible:wt}),ao.button({bits:4},"AdderArray"),nr.button({bits:4,ext:!1},"ALU"),Wr.button({from:4,to:2,bottom:!1},"Mux"),Wr.button({from:8,to:4,bottom:!1},"Mux",{visible:pn}),Er.button({from:2,to:4,bottom:!1},"Demux"),$s.button("LatchSR"),Gs.button("FlipflopJK",{compat:"flipflop-jk",visible:wt}),zs.button("FlipflopT",{compat:"flipflop-t",visible:wt}),Ws.button("FlipflopD",{compat:"flipflop-d"}),kn.button({bits:4,inc:!1},"Register",{compat:"register"}),Ks.button({bits:4},"ShiftRegister",{compat:"shift-register"}),Ar.button({bits:4},"Counter"),en.button({lines:16,bits:4},"RAM"),Qi.button({lines:16,bits:4},"ROM",{visible:wt}),Gi.button({bits:2},"Decoder",{compat:"decoder"}),Ns.button("Decoder7Seg",{compat:"decoder-7seg"}),Fs.button("Decoder16Seg",{compat:"decoder-16seg",visible:wt}),Ls.button("DecoderBCD4",{compat:"decoder-bcd4",visible:wt}),lt.button({instructionAddressBits:8,dataBits:4,dataAddressBits:4,stackBits:2,instructionBits:8},"CPU",{compat:"cpu",visible:wt})]}],$a=class{constructor(n,e){this.parent=n;this.showOnly=e;this._htmlSections=[];let r=e===void 0?void 0:[...e],i=!1;for(let s of hb){let{allButtons:a,buttonsShowWithMore:u,buttonsShowWithURLParam:l}=fb(s,r),p=this.makeSection(s.nameKey,a,u,l,r,i);p!==void 0&&(this._htmlSections.push(p),i=!0)}r!==void 0&&r.filter(s=>!s.endsWith("*")).length>0&&console.log(`ERROR Supposed to show unknown elems: ${r.join("; ")}`)}allFixedButtons(){return this._htmlSections.flatMap(n=>n.buttons)}allCustomButtons(){return this._customComponentSection===void 0?[]:this._customComponentSection.buttons}updateCustomComponentButtons(n){let e=this._customComponentSection;if(e!==void 0){e.header!==void 0&&e.header.remove(),e.separator!==void 0&&e.separator.remove();for(let r of e.buttons)r.remove();e.showMoreLink!==void 0&&e.showMoreLink.remove()}this._customComponentSection=n===void 0?void 0:this.makeCustomComponentSection(n)}setCustomComponentsHidden(n){let e=this._customComponentSection;if(e===void 0)return;let r=!1;for(let i of e.buttons){let s=!n.includes(i.dataset.type);r||(r=s),Ge(i,s)}Ge(e.header,r),e.separator!==void 0&&Ge(e.separator,r)}makeCustomComponentSection(n){let e=this.showOnly===void 0?void 0:[...this.showOnly],r=[],i=[];for(let a of n){let u=a.type,l=Pu("svgimg",a.makeButtonSVG(),jp,Yp),p=a.caption,[d,h]=w2(u,!1,[u],e,l,p,p+w.Components.Custom.MenuButtonSuffix,void 0,!0);h&&i.push(d),r.push(d)}let s=this._htmlSections.length>0;return this.makeSection("Custom",r,i,[],e,s)}makeSection(n,e,r,i,s,a){let u=r.length;if(e.length-u-i.length===0)return;let d;a&&(d=W(Y("height: 20px"),Ft("&nbsp;")).render(),this.parent.appendChild(d));let h=W(ne("leftToolbarHeader"),w.ComponentBar.SectionNames[n]).render();this.parent.appendChild(h);for(let f of e)this.parent.appendChild(f);let m;if(u!==0&&s===void 0){let f=!1,C=[w.ComponentBar.Labels.More+" \u2193",w.ComponentBar.Labels.Less+" \u2191"];m=bi(ne("leftToolbarMore"),C[0]).render(),m.addEventListener("click",()=>{f=!f;for(let D of r)f?(D.style.removeProperty("padding"),D.style.removeProperty("border"),D.style.removeProperty("margin-bottom"),D.style.removeProperty("max-height"),D.style.removeProperty("overflow")):(D.style.padding="0",D.style.border="0",D.style.marginBottom="0",D.style.maxHeight="0",D.style.overflow="hidden");m.innerHTML=C[Number(f)]}),this.parent.appendChild(m)}return{separator:d,header:h,buttons:e,showMoreLink:m}}};c($a,"ComponentMenu");function fb(o,n){var s;let e=[],r=[],i=[];for(let a of o.items){let u=a.visible!==void 0&&a.visible!=="always",[l,p]=Ae(a.visual)?[a.visual,a.visual]:a.visual,d=w.ComponentBar.Components.props[l],[h,m]=Ae(d)?[d,void 0]:d,[f,C]=w2(a.type,u,gb(a),n,qf(p,a.width),m,h,(s=a.params)==null?void 0:s.params,!1);C&&(a.visible==="withButton"?r:i).push(f),e.push(f)}return{allButtons:e,buttonsShowWithMore:r,buttonsShowWithURLParam:i}}c(fb,"makeButtons");function w2(o,n,e,r,i,s,a,u,l){let p=r!==void 0?!mb(e,r):n,d=p?"max-height: 0; transition: all 0.25s ease-out; overflow: hidden; padding: 0; border: 0; margin-bottom: 0;":"",h=p?" sim-component-button-extra":"",m=l?" sim-component-button-custom":"",f=s===void 0?Lt:Rt(ne("barLabel"),s),C=Zt(a===void 0?"":a+` 
(\u201C${e[0]}\u201D)`),D=un(no("button"),Y(d),ne(`list-group-item list-group-item-action sim-component-button${h}${m}`),i,f,C).render(),b=D.dataset;return b.type=o,b.componentId=e[0],u!==void 0&&(b.params=x2.default.stringify(u)),[D,p]}c(w2,"makeButton");function mb(o,n){let e=!1;for(let i of o)for(let s of n){let[a,u]=r(s,i);if(a){if(e=!0,!u){let l=n.indexOf(i);n.splice(l,1)}break}}return e;function r(i,s){return i===s?[!0,!1]:i.endsWith("*")&&s.startsWith(i.slice(0,-1))?[!0,!0]:[!1,!1]}}c(mb,"shouldShow");function gb(o){let n=[],e=o.params,r=o.type;if(e===void 0)n.push(r);else{let i=e.def,s=i.variantName(e.params);me(s)?n.push(...s):(Th(e.params,i.defaultParams)&&n.push(r),n.push(s))}return o.compat!==void 0&&n.push(o.compat),n}c(gb,"componentIdsFor");var Xa=class{constructor(n){this.currentTimeout=void 0;this.msgBox=W(ne("msgBar")).render(),this.root=W(ne("msgZone"),this.msgBox).render(),n.html.mainCanvas.insertAdjacentElement("afterend",this.root)}showMessage(n,e){this.currentTimeout!==void 0&&clearTimeout(this.currentTimeout),this.msgBox.innerHTML="",we(this.msgBox,n),this.root.classList.add("visible"),this.currentTimeout=setTimeout(()=>{this.currentTimeout=void 0,this.root.classList.remove("visible")},e)}};c(Xa,"MessageBar");var ja=class{constructor(n){this._movingDrawables=new Set;this.editor=n}areDrawablesMoving(){return this._movingDrawables.size>0}getSingleMovingWaypoint(){if(this._movingDrawables.size===1){let n=this._movingDrawables.values().next().value;if(n instanceof tr)return n}}setDrawableMoving(n,e){this.changeMovingDrawables(()=>{this._movingDrawables.add(n)},e)}setDrawableStoppedMoving(n,e){this.changeMovingDrawables(()=>{this._movingDrawables.delete(n)},e)}changeMovingDrawables(n,e){let r=this._movingDrawables.size===0;n();let i=this._movingDrawables.size===0;r!==i&&(this.editor.updateCursor(e),this.editor.editTools.redrawMgr.addReason("started or stopped moving drawables",null))}clear(){this._movingDrawables.clear()}dump(){var e;let n=this._movingDrawables.size;if(n===0)console.log("No moving drawables");else{console.log(`There are ${n} moving drawables:`);for(let r of this._movingDrawables){let i=r.constructor.name;r instanceof Re?console.log(i+" - "+((e=r.outputs._all[0])==null?void 0:e.id)):console.log(i)}}}};c(ja,"MoveManager");var Ya=class{aluOps(){function*n(){for(let a of[!1,!0])for(let u of[!1,!0])for(let l of[!1,!0])for(let p of[!1,!0])yield[a,u,l,p]}c(n,"nibbles");function e(a){let[u,l]=De(a,!0),p=l,d=p<8?p:p-16;return[u,p,d]}c(e,"representationsOf");let r=0,i=0,s=!1;for(let a of n())for(let u of n())for(let l of[!1,!0]){let[p,d,h]=e(a),[m,f,C]=e(u);a.reverse(),u.reverse();let{s:D,v:b,cout:v}=Pi(a,u,l),{s:_,v:M,cout:A}=Bi(a,u,l);a.reverse(),u.reverse(),D.reverse(),_.reverse();let[E,B,I]=e(D),[k,S,H]=e(_),F=d+f+Number(l),q=F>15,te=!1;q?te=B===F||v!==!0:te=B!==F||v!==!1,te?(console.log(`ERROR carry - ${d} (${p}) + ${f} (${m}) + ${Number(l)} = ${B} (${E}) (c=${v})`),i++):s&&console.log(`carry - ${d} (${p}) + ${f} (${m}) + ${Number(l)} = ${B} (${E}) (c=${v})`),r++;let se=d-f-Number(l),le=!1;d-Number(l)<f?le=S===se||A!==!0:le=S!==se||A!==!1,le?(console.log(`ERROR borrow - ${d} (${p}) - ${f} (${m}) - ${Number(l)} = ${S} (${k}) (c=${A})`),i++):s&&console.log(`borrow - ${d} (${p}) - ${f} (${m}) - ${Number(l)} = ${S} (${k}) (c=${A})`),r++;let X=h+C+Number(l),J=X>7||X<-8,Te=!1;J?Te=I===X||b!==!0:Te=I!==X||b!==!1,Te?(console.log(`ERROR overflow - ${h} (${p}) + ${C} (${m}) + ${Number(l)} = ${I} (${E}) (v=${b})`),i++):s&&console.log(`overflow - ${h} (${p}) + ${C} (${m}) + ${Number(l)} = ${I} (${E}) (v=${b})`),r++;let Ce=h-C-Number(l),_e=Ce>7||Ce<-8,it=!1;_e?it=H===Ce||M!==!0:it=H!==Ce||M!==!1,it?(console.log(`ERROR overflow - ${h} (${p}) - ${C} (${m}) - ${Number(l)} = ${H} (${k}) (v=${M})`),i++):s&&console.log(`overflow - ${h} (${p}) - ${C} (${m}) - ${Number(l)} = ${H} (${k}) (v=${M})`),r++}console.log(`Tests: ${r} total, ${i} failed, ${r-i} passed`)}};c(Ya,"Tests");function Db(o,n){return o.hasCallbacks===n.hasCallbacks&&o.enablesPause===n.enablesPause&&o.isPaused===n.isPaused&&o.enablesPause===n.enablesPause&&o.nextStepDesc===n.nextStepDesc}c(Db,"areStatesEqual");var Ka=class{constructor(n){this.onStateChanged=c(n=>null,"onStateChanged");this.editor=n,this.reset()}reset(){this._epochStart=this.unadjustedTime(),this._sortedNextCallbackTimes=[],this._schedule={},this._numCallbacksEnablingPause=0,this._nextTimeout!==void 0&&(clearTimeout(this._nextTimeout.handle),this._nextTimeout=void 0),this._fixedLogicalTime=void 0,this._pausedSince=void 0}get isPaused(){return this._pausedSince!==void 0}get nextTickDesc(){var i;if(this._sortedNextCallbackTimes.length===0)return;let n=this._sortedNextCallbackTimes[0],e=this._schedule[n];if(e.length===1)return e[0].desc;let r=new Map;for(let s of e)r.set(s.desc,((i=r.get(s.desc))!=null?i:0)+1);return[...r.entries()].map(([s,a])=>`${a} \xD7 ${s}`).join(`
`)}get state(){let n=this._sortedNextCallbackTimes.length>0,e=this._numCallbacksEnablingPause>0,r=this.isPaused,s=r&&n?this.nextTickDesc:void 0;return{hasCallbacks:n,enablesPause:e,isPaused:r,nextStepDesc:s}}unadjustedTime(){return new Date().getTime()}logicalTime(){return this._fixedLogicalTime!==void 0?this._fixedLogicalTime:this._pausedSince!==void 0?this._pausedSince-this._epochStart:this.unadjustedTime()-this._epochStart}scheduleAt(n,e,r,i){let s={callback:e,desc:r,enablesPause:i};if(this._numCallbacksEnablingPause+=i?1:0,n in this._schedule)this._schedule[n].push(s);else{n<this.logicalTime()&&console.log(`WARNING Scheduling this in the past (${n-this.logicalTime()} ms), may behave strangely: `+r);let a=0;do{if(a>=this._sortedNextCallbackTimes.length){this._sortedNextCallbackTimes.push(n);break}if(n<this._sortedNextCallbackTimes[a]){this._sortedNextCallbackTimes.splice(a,0,n);break}a++}while(!0);this._schedule[n]=[s],a===0&&this.rescheduleNextIfNeeded()}this.fireStateChangedIfNeeded()}rescheduleNextIfNeeded(){if(this._sortedNextCallbackTimes.length===0)this._nextTimeout!==void 0&&(clearTimeout(this._nextTimeout.handle),this._nextTimeout=void 0);else{let n=this._sortedNextCallbackTimes[0];if(this._nextTimeout!==void 0){if(this._nextTimeout.tickTime<=n)return;clearTimeout(this._nextTimeout.handle),this._nextTimeout=void 0}let e=this.logicalTime(),r=n-e,i=setTimeout(()=>this.nextTickCallback(),r);this._nextTimeout={handle:i,tickTime:n}}}nextTickCallback(){this._nextTimeout=void 0,this._pausedSince===void 0&&this.handleNextTick()}handleNextTick(){let n=this._sortedNextCallbackTimes.shift();if(n===void 0)return;let e=this.logicalTime(),r=this._schedule[n],i=e-n;i>100&&(this._epochStart+=i);let s=c(()=>{let a;for(this._fixedLogicalTime=n;(a=r.shift())!==void 0;){let{callback:u,desc:l,enablesPause:p}=a;this._numCallbacksEnablingPause-=p?1:0;try{u()}catch(d){console.log(`ERROR running callback '${l}': `+d)}}this._fixedLogicalTime=void 0},"runAllCallbacks");this.editor.wrapHandler(s)(),delete this._schedule[n],this.rescheduleNextIfNeeded(),this.fireStateChangedIfNeeded()}pause(){this._pausedSince===void 0&&(this._nextTimeout!==void 0&&(clearTimeout(this._nextTimeout.handle),this._nextTimeout=void 0),this._pausedSince=this.unadjustedTime(),this.fireStateChangedIfNeeded())}play(){this._pausedSince!==void 0&&(this._epochStart+=this.unadjustedTime()-this._pausedSince,this._pausedSince=void 0,this.editor.editTools.redrawMgr.addReason("timeline-play",null),this.rescheduleNextIfNeeded(),this.fireStateChangedIfNeeded())}step(){if(this._pausedSince===void 0||this._sortedNextCallbackTimes.length===0)return;let n=this._sortedNextCallbackTimes[0],e=this.logicalTime();this._epochStart-=n-e,this.handleNextTick(),this.fireStateChangedIfNeeded()}fireStateChangedIfNeeded(){let n=this.state;(this._lastSentState===void 0||!Db(this._lastSentState,n))&&(this.onStateChanged(n),this._lastSentState=n)}};c(Ka,"Timeline");var Za=class{constructor(n){this.editor=n;this._showingCompactUI=!1;this._showingCircuitName=!1;this._customComponentShown=void 0;this._showingTimelineUI=!1;let e=w.TopBar;this.alwaysShowCircuitName=n.isSingleton,this.dirtyIndicator=Sa(Q(Y("margin: 3px 3px 0 -2px; font-size: 20pt"),"\u2022",Zt(e.DirtyTooltip))),this.circuitNameLabel=hp(Q("",Zt(e.CircuitNameTooltip)),this.runSetCircuitNameDialog.bind(this),this.editor),this.mainCircuitTab=dp(this.circuitNameLabel),this.customComponentChevron=Sa("\u276F"),this.customComponentChevron.style.fontSize="14pt",this.customComponentNameLabel=hp(Q("",Zt(e.CustomComponentCaptionTooltip)),this.runSetCustomComponentCaptionDialog.bind(this),this.editor),this.customComponentNameLabel.style.fontWeight="bolder",this.closeCustomComponentButton=Nu("close",e.CloseCircuit,()=>n.tryCloseCustomComponentEditor(),this.editor),this.closeCustomComponentButton.style.padding="0",this.customComponentTab=dp(this.closeCustomComponentButton,this.customComponentNameLabel),this.circuitNameGroup=W(ne("path"),Y("flex: none; display: flex; align-items: stretch; margin: -3px 0 -3px -5px; padding: 3px 5px"),this.dirtyIndicator,this.mainCircuitTab,this.customComponentChevron,this.customComponentTab).render(),this.undoButton=vn("undo",e.Undo,()=>this.editor.editTools.undoMgr.undo(),this.editor),this.redoButton=vn("redo",e.Redo,()=>this.editor.editTools.undoMgr.redoOrRepeat(),this.editor),this.resetButton=vn("reset",e.Reset,()=>this.editor.resetCircuit(),this.editor),this.openButton=vn("open",e.Open,this.openHandler.bind(this),this.editor),this.downloadButton=vn("download",e.Download,this.saveHandler.bind(this),this.editor),this.screenshotButton=vn("screenshot",e.Screenshot,this.screenshotHandler.bind(this),this.editor),this.timelineButtonSep=Aa(),this.pauseButton=vn("pause",e.TimelinePause,()=>this.editor.timeline.pause(),this.editor),this.playButton=vn("play",e.TimelinePlay,()=>this.editor.timeline.play(),this.editor),this.stepButton=vn("step",e.TimelineStep,()=>this.editor.timeline.step(),this.editor),this.timeLabel=Sa(e.TimeLabel+"0"),this.timeLabel.style.fontSize="8pt",this.designButton=vn("mouse",e.Design,()=>this.editor.setCurrentMouseAction("edit"),this.editor),this.deleteButton=vn("trash",e.Delete,()=>this.editor.setCurrentMouseAction("delete"),this.editor),this.moveButton=Nu("move",e.Move[1],()=>this.editor.setCurrentMouseAction("move"),this.editor),this.flexibleSep=W(Y("flex: auto")).render(),this.zoomLevelInput=Oo(no("number"),Y("margin: 0 2px 0 0; width: 4em; background-color: inherit;"),Rn("min","0"),Rn("step","10"),Rn("value",String(n.options.zoom)),Rn("title",w.Settings.zoomLevel)).render(),this.zoomLevelInput.addEventListener("change",n.wrapHandler(this.zoomLevelHandler.bind(this)));let r=Sa(Q(this.zoomLevelInput,w.Settings.zoomLevelField[1]));this.root=W(ne("topBar"),Y("flex:none; height: 30px; padding: 3px 5px; display: flex; align-items: stretch;"),this.circuitNameGroup,this.undoButton,this.redoButton,Aa(),this.resetButton,Aa(),this.openButton,this.downloadButton,this.screenshotButton,this.timelineButtonSep,this.pauseButton,this.playButton,this.stepButton,this.timeLabel,Aa(!0),this.designButton,this.deleteButton,this.flexibleSep,this.moveButton,r).render(),n.html.centerCol.insertAdjacentElement("afterbegin",this.root);let i=n.editTools.undoMgr;i.onStateChanged=s=>this.setUndoButtonsEnabled(s),this.setUndoButtonsEnabled(i.state),n.timeline.onStateChanged=s=>this.setTimelineButtonsVisible(s),this.setTimelineButtonsVisible(n.timeline.state),this.setDirty(!1),window.addEventListener("resize",this.updateCompactMode.bind(this)),this.setEditingCustomComponent(void 0),this.setCircuitName(n.documentDisplayName),this.updateCompactMode()}runSetCircuitNameDialog(){var r;let n=(r=this.editor.options.name)!=null?r:"",e=window.prompt(w.TopBar.SetCircuitName,n);e===null||e===n||(this.editor.setCircuitName(e),this.editor.editTools.undoMgr.takeSnapshot())}runSetCustomComponentCaptionDialog(){this._customComponentShown!==void 0&&this.editor.factory.runChangeCustomComponentCaptionDialog(this._customComponentShown)}openHandler(){this.editor.runFileChooser("text/plain|image/png|application/json",n=>{this.editor.tryLoadFrom(n)})}saveHandler(n){n.altKey&&this.editor.factory.hasCustomComponents()?ut.saveLibraryToFile(this.editor):ut.saveCircuitToFile(this.editor)}screenshotHandler(n){let e=this.editor;n.altKey?e.download(e.toSVG(!0),".svg"):e.download(e.toPNG(!0),".png")}zoomLevelHandler(){let n=this.zoomLevelInput.valueAsNumber;this.editor.setZoomLevel(n)}updateCompactMode(){let n=c(()=>this.flexibleSep.getBoundingClientRect().width,"getSepWidth"),e=5,r=n();this._showingCompactUI?r>e&&(this.root.classList.remove("compact"),n()<=e?this.root.classList.add("compact"):this._showingCompactUI=!1):r<=e&&(this._showingCompactUI=!0,this.root.classList.add("compact"))}getActiveTabCoords(){let e=(this._customComponentShown!==void 0?this.customComponentTab:this.mainCircuitTab).getBoundingClientRect();return[e.left,e.right]}setButtonStateFromMode(n,e){Ru(this.root,n.showComponentsAndEditControls),Ge(this.resetButton,n.showReset);let r=e>=2;Ge(this.undoButton,r),Ge(this.redoButton,r);let i=n.showComponentsAndEditControls==="show";Ge(this.designButton,i),Ge(this.deleteButton,i),Ge(this.moveButton,i),this.updateCompactMode()}setCircuitName(n){let e=!0;n!==void 0?this.circuitNameLabel.textContent=n:this.alwaysShowCircuitName?this.circuitNameLabel.textContent=this.editor.documentDisplayName:(e=!1,this.circuitNameLabel.textContent=""),this._showingCircuitName=e,Ge(this.circuitNameLabel,e),Ge(this.dirtyIndicator,e),this.updateCircuitNameUI()}updateCircuitNameUI(){Ge(this.circuitNameGroup,this._showingCircuitName||this._customComponentShown!==void 0),this.updateCompactMode()}setZoomLevel(n){this.zoomLevelInput.value=String(n)}setDirty(n){this.dirtyIndicator.style.visibility=n?"inherit":"hidden",Tu(this.resetButton,n)}setEditingCustomComponent(n){let e=n!==void 0;Ge(this.customComponentChevron,e),Ge(this.customComponentTab,e),ds(this.mainCircuitTab,!e),ds(this.customComponentTab,e),e?(this.circuitNameLabel.style.removeProperty("font-weight"),this.customComponentNameLabel.textContent=n.caption):(this.circuitNameLabel.style.fontWeight="bolder",this.customComponentNameLabel.textContent=""),this._customComponentShown=n,this.updateCircuitNameUI()}updateCustomComponentCaption(){this._customComponentShown!==void 0&&(this.customComponentNameLabel.textContent=this._customComponentShown.caption,this.updateCompactMode())}setTimelineButtonsVisible({enablesPause:n,hasCallbacks:e,isPaused:r,nextStepDesc:i}){let s=n||this.editor.options.allowPausePropagation&&e;this._showingTimelineUI=s,s?(Ge(this.timelineButtonSep,!0),Ge(this.playButton,r),Ge(this.pauseButton,!r),Ge(this.stepButton,i!==void 0),this.stepButton.title=w.TopBar.TimelineStep[1]+`
`+(i!=null?i:""),Ge(this.timeLabel,r),this.updateTimeLabelIfNeeded()):(Ge(this.timelineButtonSep,!1),Ge(this.playButton,!1),Ge(this.pauseButton,!1),Ge(this.stepButton,!1),Ge(this.timeLabel,!1)),this.updateCompactMode()}setUndoButtonsEnabled({canUndo:n,canRedoOrRepeat:e}){Tu(this.undoButton,n),Tu(this.redoButton,e)}updateTimeLabelIfNeeded(){if(!this._showingTimelineUI)return;let n=this.editor.timeline.logicalTime(),e=n%1e3,r=Math.floor(n/1e3)%60,i=Math.floor(n/6e4)%60,s=Math.floor(n/36e5);this.timeLabel.textContent=w.TopBar.TimeLabel+(s===0?"":s+":")+(i<10?"0"+i:i)+":"+(r<10?"0"+r:r)+"."+(e<100?e<10?"00":"0":"")+e}setActiveTool(n){ds(this.designButton,n==="edit"),ds(this.deleteButton,n==="delete"),ds(this.moveButton,n==="move")}};c(Za,"TopBar");var _t="top",Ht="bottom",It="right",St="left",sc="auto",ti=[_t,Ht,It,St],Co="start",Yi="end",_2="clippingParents",ac="viewport",Js="popper",S2="reference",rd=ti.reduce(function(o,n){return o.concat([n+"-"+Co,n+"-"+Yi])},[]),uc=[].concat(ti,[sc]).reduce(function(o,n){return o.concat([n,n+"-"+Co,n+"-"+Yi])},[]),Cb="beforeRead",vb="read",bb="afterRead",yb="beforeMain",xb="main",wb="afterMain",_b="beforeWrite",Sb="write",Ab="afterWrite",A2=[Cb,vb,bb,yb,xb,wb,_b,Sb,Ab];function $t(o){return o?(o.nodeName||"").toLowerCase():null}c($t,"getNodeName");function Dt(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var n=o.ownerDocument;return n&&n.defaultView||window}return o}c(Dt,"getWindow");function lr(o){var n=Dt(o).Element;return o instanceof n||o instanceof Element}c(lr,"isElement");function Ut(o){var n=Dt(o).HTMLElement;return o instanceof n||o instanceof HTMLElement}c(Ut,"isHTMLElement");function ea(o){if(typeof ShadowRoot>"u")return!1;var n=Dt(o).ShadowRoot;return o instanceof n||o instanceof ShadowRoot}c(ea,"isShadowRoot");function Eb(o){var n=o.state;Object.keys(n.elements).forEach(function(e){var r=n.styles[e]||{},i=n.attributes[e]||{},s=n.elements[e];!Ut(s)||!$t(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var u=i[a];u===!1?s.removeAttribute(a):s.setAttribute(a,u===!0?"":u)}))})}c(Eb,"applyStyles");function Tb(o){var n=o.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(r){var i=n.elements[r],s=n.attributes[r]||{},a=Object.keys(n.styles.hasOwnProperty(r)?n.styles[r]:e[r]),u=a.reduce(function(l,p){return l[p]="",l},{});!Ut(i)||!$t(i)||(Object.assign(i.style,u),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}c(Tb,"effect");var E2={name:"applyStyles",enabled:!0,phase:"write",fn:Eb,effect:Tb,requires:["computeStyles"]};function Xt(o){return o.split("-")[0]}c(Xt,"getBasePlacement");var Mr=Math.max,Ki=Math.min,vo=Math.round;function ta(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}c(ta,"getUAString");function Ja(){return!/^((?!chrome|android).)*safari/i.test(ta())}c(Ja,"isLayoutViewport");function cr(o,n,e){n===void 0&&(n=!1),e===void 0&&(e=!1);var r=o.getBoundingClientRect(),i=1,s=1;n&&Ut(o)&&(i=o.offsetWidth>0&&vo(r.width)/o.offsetWidth||1,s=o.offsetHeight>0&&vo(r.height)/o.offsetHeight||1);var a=lr(o)?Dt(o):window,u=a.visualViewport,l=!Ja()&&e,p=(r.left+(l&&u?u.offsetLeft:0))/i,d=(r.top+(l&&u?u.offsetTop:0))/s,h=r.width/i,m=r.height/s;return{width:h,height:m,top:d,right:p+h,bottom:d+m,left:p,x:p,y:d}}c(cr,"getBoundingClientRect");function Zi(o){var n=cr(o),e=o.offsetWidth,r=o.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-r)<=1&&(r=n.height),{x:o.offsetLeft,y:o.offsetTop,width:e,height:r}}c(Zi,"getLayoutRect");function eu(o,n){var e=n.getRootNode&&n.getRootNode();if(o.contains(n))return!0;if(e&&ea(e)){var r=n;do{if(r&&o.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}c(eu,"contains");function An(o){return Dt(o).getComputedStyle(o)}c(An,"getComputedStyle");function od(o){return["table","td","th"].indexOf($t(o))>=0}c(od,"isTableElement");function tn(o){return((lr(o)?o.ownerDocument:o.document)||window.document).documentElement}c(tn,"getDocumentElement");function bo(o){return $t(o)==="html"?o:o.assignedSlot||o.parentNode||(ea(o)?o.host:null)||tn(o)}c(bo,"getParentNode");function T2(o){return!Ut(o)||An(o).position==="fixed"?null:o.offsetParent}c(T2,"getTrueOffsetParent");function Rb(o){var n=/firefox/i.test(ta()),e=/Trident/i.test(ta());if(e&&Ut(o)){var r=An(o);if(r.position==="fixed")return null}var i=bo(o);for(ea(i)&&(i=i.host);Ut(i)&&["html","body"].indexOf($t(i))<0;){var s=An(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||n&&s.willChange==="filter"||n&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}c(Rb,"getContainingBlock");function Ir(o){for(var n=Dt(o),e=T2(o);e&&od(e)&&An(e).position==="static";)e=T2(e);return e&&($t(e)==="html"||$t(e)==="body"&&An(e).position==="static")?n:e||Rb(o)||n}c(Ir,"getOffsetParent");function Ji(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}c(Ji,"getMainAxisFromPlacement");function es(o,n,e){return Mr(o,Ki(n,e))}c(es,"within");function R2(o,n,e){var r=es(o,n,e);return r>e?e:r}c(R2,"withinMaxClamp");function tu(){return{top:0,right:0,bottom:0,left:0}}c(tu,"getFreshSideObject");function nu(o){return Object.assign({},tu(),o)}c(nu,"mergePaddingObject");function ru(o,n){return n.reduce(function(e,r){return e[r]=o,e},{})}c(ru,"expandToHashMap");var Mb=c(function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,nu(typeof n!="number"?n:ru(n,ti))},"toPaddingObject");function Ib(o){var n,e=o.state,r=o.name,i=o.options,s=e.elements.arrow,a=e.modifiersData.popperOffsets,u=Xt(e.placement),l=Ji(u),p=[St,It].indexOf(u)>=0,d=p?"height":"width";if(!(!s||!a)){var h=Mb(i.padding,e),m=Zi(s),f=l==="y"?_t:St,C=l==="y"?Ht:It,D=e.rects.reference[d]+e.rects.reference[l]-a[l]-e.rects.popper[d],b=a[l]-e.rects.reference[l],v=Ir(s),_=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,M=D/2-b/2,A=h[f],E=_-m[d]-h[C],B=_/2-m[d]/2+M,I=es(A,B,E),k=l;e.modifiersData[r]=(n={},n[k]=I,n.centerOffset=I-B,n)}}c(Ib,"arrow");function Ob(o){var n=o.state,e=o.options,r=e.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=n.elements.popper.querySelector(i),!i)||eu(n.elements.popper,i)&&(n.elements.arrow=i))}c(Ob,"effect");var M2={name:"arrow",enabled:!0,phase:"main",fn:Ib,effect:Ob,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pr(o){return o.split("-")[1]}c(pr,"getVariation");var Bb={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pb(o,n){var e=o.x,r=o.y,i=n.devicePixelRatio||1;return{x:vo(e*i)/i||0,y:vo(r*i)/i||0}}c(Pb,"roundOffsetsByDPR");function I2(o){var n,e=o.popper,r=o.popperRect,i=o.placement,s=o.variation,a=o.offsets,u=o.position,l=o.gpuAcceleration,p=o.adaptive,d=o.roundOffsets,h=o.isFixed,m=a.x,f=m===void 0?0:m,C=a.y,D=C===void 0?0:C,b=typeof d=="function"?d({x:f,y:D}):{x:f,y:D};f=b.x,D=b.y;var v=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),M=St,A=_t,E=window;if(p){var B=Ir(e),I="clientHeight",k="clientWidth";if(B===Dt(e)&&(B=tn(e),An(B).position!=="static"&&u==="absolute"&&(I="scrollHeight",k="scrollWidth")),B=B,i===_t||(i===St||i===It)&&s===Yi){A=Ht;var S=h&&B===E&&E.visualViewport?E.visualViewport.height:B[I];D-=S-r.height,D*=l?1:-1}if(i===St||(i===_t||i===Ht)&&s===Yi){M=It;var H=h&&B===E&&E.visualViewport?E.visualViewport.width:B[k];f-=H-r.width,f*=l?1:-1}}var F=Object.assign({position:u},p&&Bb),q=d===!0?Pb({x:f,y:D},Dt(e)):{x:f,y:D};if(f=q.x,D=q.y,l){var te;return Object.assign({},F,(te={},te[A]=_?"0":"",te[M]=v?"0":"",te.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+D+"px)":"translate3d("+f+"px, "+D+"px, 0)",te))}return Object.assign({},F,(n={},n[A]=_?D+"px":"",n[M]=v?f+"px":"",n.transform="",n))}c(I2,"mapToStyles");function kb(o){var n=o.state,e=o.options,r=e.gpuAcceleration,i=r===void 0?!0:r,s=e.adaptive,a=s===void 0?!0:s,u=e.roundOffsets,l=u===void 0?!0:u,p={placement:Xt(n.placement),variation:pr(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:i,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,I2(Object.assign({},p,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:a,roundOffsets:l})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,I2(Object.assign({},p,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}c(kb,"computeStyles");var O2={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kb,data:{}};var lc={passive:!0};function Fb(o){var n=o.state,e=o.instance,r=o.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,u=a===void 0?!0:a,l=Dt(n.elements.popper),p=[].concat(n.scrollParents.reference,n.scrollParents.popper);return s&&p.forEach(function(d){d.addEventListener("scroll",e.update,lc)}),u&&l.addEventListener("resize",e.update,lc),function(){s&&p.forEach(function(d){d.removeEventListener("scroll",e.update,lc)}),u&&l.removeEventListener("resize",e.update,lc)}}c(Fb,"effect");var B2={name:"eventListeners",enabled:!0,phase:"write",fn:c(function(){},"fn"),effect:Fb,data:{}};var Nb={left:"right",right:"left",bottom:"top",top:"bottom"};function na(o){return o.replace(/left|right|bottom|top/g,function(n){return Nb[n]})}c(na,"getOppositePlacement");var Lb={start:"end",end:"start"};function cc(o){return o.replace(/start|end/g,function(n){return Lb[n]})}c(cc,"getOppositeVariationPlacement");function ts(o){var n=Dt(o),e=n.pageXOffset,r=n.pageYOffset;return{scrollLeft:e,scrollTop:r}}c(ts,"getWindowScroll");function ns(o){return cr(tn(o)).left+ts(o).scrollLeft}c(ns,"getWindowScrollBarX");function id(o,n){var e=Dt(o),r=tn(o),i=e.visualViewport,s=r.clientWidth,a=r.clientHeight,u=0,l=0;if(i){s=i.width,a=i.height;var p=Ja();(p||!p&&n==="fixed")&&(u=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:u+ns(o),y:l}}c(id,"getViewportRect");function sd(o){var n,e=tn(o),r=ts(o),i=(n=o.ownerDocument)==null?void 0:n.body,s=Mr(e.scrollWidth,e.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Mr(e.scrollHeight,e.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-r.scrollLeft+ns(o),l=-r.scrollTop;return An(i||e).direction==="rtl"&&(u+=Mr(e.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:u,y:l}}c(sd,"getDocumentRect");function rs(o){var n=An(o),e=n.overflow,r=n.overflowX,i=n.overflowY;return/auto|scroll|overlay|hidden/.test(e+i+r)}c(rs,"isScrollParent");function pc(o){return["html","body","#document"].indexOf($t(o))>=0?o.ownerDocument.body:Ut(o)&&rs(o)?o:pc(bo(o))}c(pc,"getScrollParent");function ni(o,n){var e;n===void 0&&(n=[]);var r=pc(o),i=r===((e=o.ownerDocument)==null?void 0:e.body),s=Dt(r),a=i?[s].concat(s.visualViewport||[],rs(r)?r:[]):r,u=n.concat(a);return i?u:u.concat(ni(bo(a)))}c(ni,"listScrollParents");function ra(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}c(ra,"rectToClientRect");function Vb(o,n){var e=cr(o,!1,n==="fixed");return e.top=e.top+o.clientTop,e.left=e.left+o.clientLeft,e.bottom=e.top+o.clientHeight,e.right=e.left+o.clientWidth,e.width=o.clientWidth,e.height=o.clientHeight,e.x=e.left,e.y=e.top,e}c(Vb,"getInnerBoundingClientRect");function P2(o,n,e){return n===ac?ra(id(o,e)):lr(n)?Vb(n,e):ra(sd(tn(o)))}c(P2,"getClientRectFromMixedType");function Hb(o){var n=ni(bo(o)),e=["absolute","fixed"].indexOf(An(o).position)>=0,r=e&&Ut(o)?Ir(o):o;return lr(r)?n.filter(function(i){return lr(i)&&eu(i,r)&&$t(i)!=="body"}):[]}c(Hb,"getClippingParents");function ad(o,n,e,r){var i=n==="clippingParents"?Hb(o):[].concat(n),s=[].concat(i,[e]),a=s[0],u=s.reduce(function(l,p){var d=P2(o,p,r);return l.top=Mr(d.top,l.top),l.right=Ki(d.right,l.right),l.bottom=Ki(d.bottom,l.bottom),l.left=Mr(d.left,l.left),l},P2(o,a,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}c(ad,"getClippingRect");function ou(o){var n=o.reference,e=o.element,r=o.placement,i=r?Xt(r):null,s=r?pr(r):null,a=n.x+n.width/2-e.width/2,u=n.y+n.height/2-e.height/2,l;switch(i){case _t:l={x:a,y:n.y-e.height};break;case Ht:l={x:a,y:n.y+n.height};break;case It:l={x:n.x+n.width,y:u};break;case St:l={x:n.x-e.width,y:u};break;default:l={x:n.x,y:n.y}}var p=i?Ji(i):null;if(p!=null){var d=p==="y"?"height":"width";switch(s){case Co:l[p]=l[p]-(n[d]/2-e[d]/2);break;case Yi:l[p]=l[p]+(n[d]/2-e[d]/2);break;default:}}return l}c(ou,"computeOffsets");function Or(o,n){n===void 0&&(n={});var e=n,r=e.placement,i=r===void 0?o.placement:r,s=e.strategy,a=s===void 0?o.strategy:s,u=e.boundary,l=u===void 0?_2:u,p=e.rootBoundary,d=p===void 0?ac:p,h=e.elementContext,m=h===void 0?Js:h,f=e.altBoundary,C=f===void 0?!1:f,D=e.padding,b=D===void 0?0:D,v=nu(typeof b!="number"?b:ru(b,ti)),_=m===Js?S2:Js,M=o.rects.popper,A=o.elements[C?_:m],E=ad(lr(A)?A:A.contextElement||tn(o.elements.popper),l,d,a),B=cr(o.elements.reference),I=ou({reference:B,element:M,strategy:"absolute",placement:i}),k=ra(Object.assign({},M,I)),S=m===Js?k:B,H={top:E.top-S.top+v.top,bottom:S.bottom-E.bottom+v.bottom,left:E.left-S.left+v.left,right:S.right-E.right+v.right},F=o.modifiersData.offset;if(m===Js&&F){var q=F[i];Object.keys(H).forEach(function(te){var se=[It,Ht].indexOf(te)>=0?1:-1,le=[_t,Ht].indexOf(te)>=0?"y":"x";H[te]+=q[le]*se})}return H}c(Or,"detectOverflow");function ud(o,n){n===void 0&&(n={});var e=n,r=e.placement,i=e.boundary,s=e.rootBoundary,a=e.padding,u=e.flipVariations,l=e.allowedAutoPlacements,p=l===void 0?uc:l,d=pr(r),h=d?u?rd:rd.filter(function(C){return pr(C)===d}):ti,m=h.filter(function(C){return p.indexOf(C)>=0});m.length===0&&(m=h);var f=m.reduce(function(C,D){return C[D]=Or(o,{placement:D,boundary:i,rootBoundary:s,padding:a})[Xt(D)],C},{});return Object.keys(f).sort(function(C,D){return f[C]-f[D]})}c(ud,"computeAutoPlacement");function Ub(o){if(Xt(o)===sc)return[];var n=na(o);return[cc(o),n,cc(n)]}c(Ub,"getExpandedFallbackPlacements");function Wb(o){var n=o.state,e=o.options,r=o.name;if(!n.modifiersData[r]._skip){for(var i=e.mainAxis,s=i===void 0?!0:i,a=e.altAxis,u=a===void 0?!0:a,l=e.fallbackPlacements,p=e.padding,d=e.boundary,h=e.rootBoundary,m=e.altBoundary,f=e.flipVariations,C=f===void 0?!0:f,D=e.allowedAutoPlacements,b=n.options.placement,v=Xt(b),_=v===b,M=l||(_||!C?[na(b)]:Ub(b)),A=[b].concat(M).reduce(function(Yt,Ct){return Yt.concat(Xt(Ct)===sc?ud(n,{placement:Ct,boundary:d,rootBoundary:h,padding:p,flipVariations:C,allowedAutoPlacements:D}):Ct)},[]),E=n.rects.reference,B=n.rects.popper,I=new Map,k=!0,S=A[0],H=0;H<A.length;H++){var F=A[H],q=Xt(F),te=pr(F)===Co,se=[_t,Ht].indexOf(q)>=0,le=se?"width":"height",X=Or(n,{placement:F,boundary:d,rootBoundary:h,altBoundary:m,padding:p}),J=se?te?It:St:te?Ht:_t;E[le]>B[le]&&(J=na(J));var Te=na(J),Ce=[];if(s&&Ce.push(X[q]<=0),u&&Ce.push(X[J]<=0,X[Te]<=0),Ce.every(function(Yt){return Yt})){S=F,k=!1;break}I.set(F,Ce)}if(k)for(var _e=C?3:1,it=c(function(Ct){var $e=A.find(function(Ke){var ze=I.get(Ke);if(ze)return ze.slice(0,Ct).every(function(Wt){return Wt})});if($e)return S=$e,"break"},"_loop"),hn=_e;hn>0;hn--){var jt=it(hn);if(jt==="break")break}n.placement!==S&&(n.modifiersData[r]._skip=!0,n.placement=S,n.reset=!0)}}c(Wb,"flip");var k2={name:"flip",enabled:!0,phase:"main",fn:Wb,requiresIfExists:["offset"],data:{_skip:!1}};function F2(o,n,e){return e===void 0&&(e={x:0,y:0}),{top:o.top-n.height-e.y,right:o.right-n.width+e.x,bottom:o.bottom-n.height+e.y,left:o.left-n.width-e.x}}c(F2,"getSideOffsets");function N2(o){return[_t,It,Ht,St].some(function(n){return o[n]>=0})}c(N2,"isAnySideFullyClipped");function Gb(o){var n=o.state,e=o.name,r=n.rects.reference,i=n.rects.popper,s=n.modifiersData.preventOverflow,a=Or(n,{elementContext:"reference"}),u=Or(n,{altBoundary:!0}),l=F2(a,r),p=F2(u,i,s),d=N2(l),h=N2(p);n.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:p,isReferenceHidden:d,hasPopperEscaped:h},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}c(Gb,"hide");var L2={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Gb};function zb(o,n,e){var r=Xt(o),i=[St,_t].indexOf(r)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},n,{placement:o})):e,a=s[0],u=s[1];return a=a||0,u=(u||0)*i,[St,It].indexOf(r)>=0?{x:u,y:a}:{x:a,y:u}}c(zb,"distanceAndSkiddingToXY");function qb(o){var n=o.state,e=o.options,r=o.name,i=e.offset,s=i===void 0?[0,0]:i,a=uc.reduce(function(d,h){return d[h]=zb(h,n.rects,s),d},{}),u=a[n.placement],l=u.x,p=u.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=l,n.modifiersData.popperOffsets.y+=p),n.modifiersData[r]=a}c(qb,"offset");var V2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qb};function Qb(o){var n=o.state,e=o.name;n.modifiersData[e]=ou({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}c(Qb,"popperOffsets");var H2={name:"popperOffsets",enabled:!0,phase:"read",fn:Qb,data:{}};function ld(o){return o==="x"?"y":"x"}c(ld,"getAltAxis");function $b(o){var n=o.state,e=o.options,r=o.name,i=e.mainAxis,s=i===void 0?!0:i,a=e.altAxis,u=a===void 0?!1:a,l=e.boundary,p=e.rootBoundary,d=e.altBoundary,h=e.padding,m=e.tether,f=m===void 0?!0:m,C=e.tetherOffset,D=C===void 0?0:C,b=Or(n,{boundary:l,rootBoundary:p,padding:h,altBoundary:d}),v=Xt(n.placement),_=pr(n.placement),M=!_,A=Ji(v),E=ld(A),B=n.modifiersData.popperOffsets,I=n.rects.reference,k=n.rects.popper,S=typeof D=="function"?D(Object.assign({},n.rects,{placement:n.placement})):D,H=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),F=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,q={x:0,y:0};if(B){if(s){var te,se=A==="y"?_t:St,le=A==="y"?Ht:It,X=A==="y"?"height":"width",J=B[A],Te=J+b[se],Ce=J-b[le],_e=f?-k[X]/2:0,it=_===Co?I[X]:k[X],hn=_===Co?-k[X]:-I[X],jt=n.elements.arrow,Yt=f&&jt?Zi(jt):{width:0,height:0},Ct=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:tu(),$e=Ct[se],Ke=Ct[le],ze=es(0,I[X],Yt[X]),Wt=M?I[X]/2-_e-ze-$e-H.mainAxis:it-ze-$e-H.mainAxis,si=M?-I[X]/2+_e+ze+Ke+H.mainAxis:hn+ze+Ke+H.mainAxis,Br=n.elements.arrow&&Ir(n.elements.arrow),yo=Br?A==="y"?Br.clientTop||0:Br.clientLeft||0:0,tt=(te=F?.[A])!=null?te:0,os=J+Wt-tt-yo,Ot=J+si-tt,Gt=es(f?Ki(Te,os):Te,J,f?Mr(Ce,Ot):Ce);B[A]=Gt,q[A]=Gt-J}if(u){var hr,Nn=A==="x"?_t:St,fn=A==="x"?Ht:It,Ze=B[E],Kn=E==="y"?"height":"width",Ln=Ze+b[Nn],Xr=Ze-b[fn],jr=[_t,St].indexOf(v)!==-1,Se=(hr=F?.[E])!=null?hr:0,ve=jr?Ln:Ze-I[Kn]-k[Kn]-Se+H.altAxis,fr=jr?Ze+I[Kn]+k[Kn]-Se-H.altAxis:Xr,mn=f&&jr?R2(ve,Ze,fr):es(f?ve:Ln,Ze,f?fr:Xr);B[E]=mn,q[E]=mn-Ze}n.modifiersData[r]=q}}c($b,"preventOverflow");var U2={name:"preventOverflow",enabled:!0,phase:"main",fn:$b,requiresIfExists:["offset"]};function cd(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}c(cd,"getHTMLElementScroll");function pd(o){return o===Dt(o)||!Ut(o)?ts(o):cd(o)}c(pd,"getNodeScroll");function Xb(o){var n=o.getBoundingClientRect(),e=vo(n.width)/o.offsetWidth||1,r=vo(n.height)/o.offsetHeight||1;return e!==1||r!==1}c(Xb,"isElementScaled");function dd(o,n,e){e===void 0&&(e=!1);var r=Ut(n),i=Ut(n)&&Xb(n),s=tn(n),a=cr(o,i,e),u={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!e)&&(($t(n)!=="body"||rs(s))&&(u=pd(n)),Ut(n)?(l=cr(n,!0),l.x+=n.clientLeft,l.y+=n.clientTop):s&&(l.x=ns(s))),{x:a.left+u.scrollLeft-l.x,y:a.top+u.scrollTop-l.y,width:a.width,height:a.height}}c(dd,"getCompositeRect");function jb(o){var n=new Map,e=new Set,r=[];o.forEach(function(s){n.set(s.name,s)});function i(s){e.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(u){if(!e.has(u)){var l=n.get(u);l&&i(l)}}),r.push(s)}return c(i,"sort"),o.forEach(function(s){e.has(s.name)||i(s)}),r}c(jb,"order");function hd(o){var n=jb(o);return A2.reduce(function(e,r){return e.concat(n.filter(function(i){return i.phase===r}))},[])}c(hd,"orderModifiers");function fd(o){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(o())})})),n}}c(fd,"debounce");function md(o){var n=o.reduce(function(e,r){var i=e[r.name];return e[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,e},{});return Object.keys(n).map(function(e){return n[e]})}c(md,"mergeByName");var W2={placement:"bottom",modifiers:[],strategy:"absolute"};function G2(){for(var o=arguments.length,n=new Array(o),e=0;e<o;e++)n[e]=arguments[e];return!n.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}c(G2,"areValidElements");function z2(o){o===void 0&&(o={});var n=o,e=n.defaultModifiers,r=e===void 0?[]:e,i=n.defaultOptions,s=i===void 0?W2:i;return c(function(u,l,p){p===void 0&&(p=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},W2,s),modifiersData:{},elements:{reference:u,popper:l},attributes:{},styles:{}},h=[],m=!1,f={state:d,setOptions:c(function(v){var _=typeof v=="function"?v(d.options):v;D(),d.options=Object.assign({},s,d.options,_),d.scrollParents={reference:lr(u)?ni(u):u.contextElement?ni(u.contextElement):[],popper:ni(l)};var M=hd(md([].concat(r,d.options.modifiers)));return d.orderedModifiers=M.filter(function(A){return A.enabled}),C(),f.update()},"setOptions"),forceUpdate:c(function(){if(!m){var v=d.elements,_=v.reference,M=v.popper;if(G2(_,M)){d.rects={reference:dd(_,Ir(M),d.options.strategy==="fixed"),popper:Zi(M)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(H){return d.modifiersData[H.name]=Object.assign({},H.data)});for(var A=0;A<d.orderedModifiers.length;A++){if(d.reset===!0){d.reset=!1,A=-1;continue}var E=d.orderedModifiers[A],B=E.fn,I=E.options,k=I===void 0?{}:I,S=E.name;typeof B=="function"&&(d=B({state:d,options:k,name:S,instance:f})||d)}}}},"forceUpdate"),update:fd(function(){return new Promise(function(b){f.forceUpdate(),b(d)})}),destroy:c(function(){D(),m=!0},"destroy")};if(!G2(u,l))return f;f.setOptions(p).then(function(b){!m&&p.onFirstUpdate&&p.onFirstUpdate(b)});function C(){d.orderedModifiers.forEach(function(b){var v=b.name,_=b.options,M=_===void 0?{}:_,A=b.effect;if(typeof A=="function"){var E=A({state:d,name:v,instance:f,options:M}),B=c(function(){},"noopFn");h.push(E||B)}})}c(C,"runModifierEffects");function D(){h.forEach(function(b){return b()}),h=[]}return c(D,"cleanupModifierEffects"),f},"createPopper")}c(z2,"popperGenerator");var Yb=[B2,H2,O2,E2,V2,k2,U2,M2,L2],gd=z2({defaultModifiers:Yb});var ri=class{constructor(n){this.currentlyDrawnRect=n;this.previouslySelectedElements=new Set}toggle(n){this.previouslySelectedElements.has(n)?this.previouslySelectedElements.delete(n):this.previouslySelectedElements.add(n)}finishCurrentRect(n){let e;if((e=this.currentlyDrawnRect)!==void 0){for(let r of n.components.all())r.isInRect(e)&&this.toggle(r);for(let r of n.wireMgr.wires)for(let i of r.waypoints)i.isInRect(e)&&this.toggle(i);this.currentlyDrawnRect=void 0}}isSelected(n){let e=this.previouslySelectedElements.has(n),r=this.currentlyDrawnRect;return r===void 0?e:n.isInRect(r)?!e:e}};c(ri,"EditorSelection");var iu=class{constructor(n){this._currentMouseOverComp=null;this._currentMouseOverPopper=null;this._currentMouseDownData=null;this._startHoverTimeoutHandle=null;this._startDragTimeoutHandle=null;this._lastTouchEnd=void 0;this.currentSelection=void 0;this.editor=n,this._currentHandlers=new su(n)}get currentMouseOverComp(){return this._currentMouseOverComp}get currentMouseDownData(){return this._currentMouseDownData}setHandlersFor(n){this._currentHandlers=(()=>{switch(n){case"edit":return new su(this.editor);case"delete":return new dc(this.editor);case"move":return new hc(this.editor)}})(),Mp(n==="delete")}setStartDragTimeout(n,e){let r=e;r._savedOffsetX=r.offsetX,r._savedOffsetY=r.offsetY,r._savedTarget=r.target,this._startDragTimeoutHandle=setTimeout(this.editor.wrapHandler(()=>{let i=!0,s=this._currentMouseDownData;if(s!==null&&(s.fireMouseClickedOnFinish=!1,s.triggeredContextMenu&&(i=!1)),i){n.mainComp instanceof vr&&this._currentHandlers.mouseDraggedOn(n.mainComp,e);for(let a of n.selectionComps)this._currentHandlers.mouseDraggedOn(a,e)}}),300)}clearStartDragTimeout(){this._startDragTimeoutHandle!==null&&(clearTimeout(this._startDragTimeoutHandle),this._startDragTimeoutHandle=null)}clearHoverTimeoutHandle(){this._startHoverTimeoutHandle!==null&&(clearTimeout(this._startHoverTimeoutHandle),this._startHoverTimeoutHandle=null)}setCurrentMouseOverComp(n){n!==this._currentMouseOverComp&&(this.clearPopperIfNecessary(),this.clearHoverTimeoutHandle(),this._currentMouseOverComp=n,n!==null&&(this._startHoverTimeoutHandle=setTimeout(()=>{this._currentHandlers.mouseHoverOn(n),this._startHoverTimeoutHandle=null},1200)),this.editor.editTools.redrawMgr.addReason("mouseover changed",null))}currentSelectionEmpty(){return this.currentSelection===void 0||this.currentSelection.previouslySelectedElements.size===0}updateMouseOver([n,e],r){let i=c(()=>{if(this._currentMouseOverComp!==null&&this._currentMouseOverComp.drawZIndex!==0&&this._currentMouseOverComp.isOver(n,e))return this._currentMouseOverComp;let s=this.editor.editorRoot;if(!r){for(let a of s.components.withZIndex(Xo.Overlay))if(a.isOver(n,e))return a}for(let a of s.components.withZIndex(Xo.Normal)){let u=null;for(let l of a.allNodes())if(l.isOver(n,e)){u=l;break}if(u!==null&&(!r||s.wireMgr.isValidMouseUp(u)))return u;if(!r&&a.isOver(n,e))return a}if(!r){for(let a of s.wireMgr.wires){for(let u of a.waypoints)if(u.isOver(n,e))return u;if(a.isOver(n,e))return a}for(let a of s.components.withZIndex(Xo.Background))if(a.isOver(n,e))return a}return null},"findMouseOver");this.setCurrentMouseOverComp(i())}selectAll(){let n=new ri(void 0);this.currentSelection=n;let e=this.editor.editorRoot;for(let r of e.components.all())n.previouslySelectedElements.add(r);for(let r of e.wireMgr.wires)for(let i of r.waypoints)n.previouslySelectedElements.add(i);this.editor.editTools.redrawMgr.addReason("selected all",null)}toggleSelect(n){let e;(e=this.currentSelection)===void 0&&(e=new ri(void 0),this.currentSelection=e),e.toggle(n),this.editor.editTools.redrawMgr.addReason("toggled selection",null)}clearPopperIfNecessary(){if(this._currentMouseOverPopper!==null){let[n,e]=this._currentMouseOverPopper;e(),n.destroy(),this._currentMouseOverPopper=null,this.editor.html.tooltipElem.style.display="none"}}makePopper(n,e){let{tooltipContents:r,tooltipElem:i,mainCanvas:s}=this.editor.html;r.innerHTML="",n.applyTo(r),i.style.removeProperty("display");let a=gd({getBoundingClientRect:e,contextElement:s},i,{placement:"right",modifiers:[{name:"offset",options:{offset:[4,8]}}]}),u=Ih(s),l=c(()=>a.update(),"scrollListener");u.addEventListener("scroll",l);let p=c(()=>u.removeEventListener("scroll",l),"removeListener");this._currentMouseOverPopper=[a,p],i.setAttribute("data-show",""),a.update()}registerCanvasListenersOn(n){let e=this.editor,r=c(()=>!1,"returnFalse");n.ondragenter=r,n.ondragover=r,n.ondragend=r,n.ondrop=i=>{var a;if(i.dataTransfer===null)return!1;i.preventDefault();let s=(a=i.dataTransfer.files)==null?void 0:a[0];if(s!==void 0)e.tryLoadFrom(s);else{let u=i.dataTransfer.items;if(u!==void 0){for(let l of u)if(l.kind==="string"&&(l.type==="application/json"||l.type==="text/plain")){l.getAsString(p=>{i.dataTransfer.dropEffect="copy",e.loadCircuitOrLibrary(p)});break}}}return!1},n.addEventListener("touchstart",e.wrapHandler(i=>{this.editor.mode>=2&&i.preventDefault(),this._mouseDownTouchStart(i)})),n.addEventListener("touchmove",e.wrapHandler(i=>{this.editor.mode>=2&&i.preventDefault(),this._mouseMoveTouchMove(i)})),n.addEventListener("touchend",e.wrapHandler(i=>{i.preventDefault(),this._mouseUpTouchEnd(i),this.setCurrentMouseOverComp(null),this.editor.focus()})),n.addEventListener("mousedown",e.wrapHandler(i=>{this._mouseDownTouchStart(i)})),n.addEventListener("mousemove",e.wrapHandler(i=>{this._mouseMoveTouchMove(i),this.editor.updateCursor(i)})),n.addEventListener("mouseleave",e.wrapHandler(()=>{this.clearPopperIfNecessary()})),n.addEventListener("mouseup",e.wrapHandler(i=>{this._mouseUpTouchEnd(i),this.updateMouseOver(this.editor.offsetXY(i),!1),this.editor.updateCursor(i),this.editor.focus()})),n.addEventListener("contextmenu",e.wrapHandler(i=>{i.preventDefault(),this.editor.mode>=2&&this._currentMouseOverComp!==null&&this._currentHandlers.contextMenuOn(this._currentMouseOverComp,i)})),n.addEventListener("keyup",e.wrapHandler(i=>{var s;if(!Ro(i))switch(i.key){case"Escape":{let a;a=e.eventMgr.tryDeleteComponentsWhere(u=>u.state===0,!1)>0,a||(a=e.wireMgr.tryCancelWire()),!a&&this.editor.editorRoot instanceof Pn&&(a=this.editor.tryCloseCustomComponentEditor()),a&&i.preventDefault();return}case"Backspace":case"Delete":{let a;if((a=(s=this.currentSelection)==null?void 0:s.previouslySelectedElements)!==void 0&&a.size!==0){let u=!1;for(let l of a)u=e.eventMgr.tryDeleteDrawable(l).isChange||u;u&&e.editTools.undoMgr.takeSnapshot()}else if((a=this.currentMouseOverComp)!==null){let u=e.eventMgr.tryDeleteDrawable(a);e.editTools.undoMgr.takeSnapshot(u)}i.preventDefault();return}case"e":e.setCurrentMouseAction("edit"),i.preventDefault();return;case"d":e.setCurrentMouseAction("delete"),i.preventDefault();return;case"m":e.setCurrentMouseAction("move"),i.preventDefault();return}})),n.addEventListener("keydown",e.wrapHandler(i=>{let s=i.ctrlKey||i.metaKey,a=i.key.toLowerCase(),u=i.shiftKey||a!==i.key;switch(a){case"a":s&&e.mode>=2&&!Ro(i)&&(this.selectAll(),i.preventDefault());return;case"s":s&&e.isSingleton&&(e.saveCurrentStateToUrl(),i.preventDefault());return;case"z":s&&!Ro(i)&&(u?e.editTools.undoMgr.redoOrRepeat():e.editTools.undoMgr.undo(),i.preventDefault());return;case"y":s&&!Ro(i)&&(e.editTools.undoMgr.redoOrRepeat(),i.preventDefault());return;case"x":s&&!Ro(i)&&(e.cut(),i.preventDefault());return;case"c":s&&!Ro(i)&&e.copy()&&i.preventDefault();return;case"v":s&&!Ro(i)&&(e.paste(),i.preventDefault());return}this._currentMouseOverComp!==null&&this._currentMouseOverComp.keyDown(i)}))}_mouseDownTouchStart(n){if(this.clearHoverTimeoutHandle(),this.clearPopperIfNecessary(),this._currentMouseDownData===null){let e=this.editor.offsetXY(n);if(this.updateMouseOver(e,!1),this._currentMouseOverComp!==null){let{wantsDragEvents:r}=this._currentHandlers.mouseDownOn(this._currentMouseOverComp,n);if(r){let i=this.currentSelection===void 0?[]:[...this.currentSelection.previouslySelectedElements];for(let a of i)a!==this._currentMouseOverComp&&this._currentHandlers.mouseDownOn(a,n);let s={mainComp:this._currentMouseOverComp,selectionComps:i,fireMouseClickedOnFinish:!0,initialXY:e,triggeredContextMenu:!1};this._currentMouseDownData=s,this.setStartDragTimeout(s,n)}this.editor.editTools.redrawMgr.addReason("mousedown",null)}else this._currentMouseDownData={mainComp:this.editor.html.canvasContainer,selectionComps:[],fireMouseClickedOnFinish:!0,initialXY:e,triggeredContextMenu:!1},this._currentHandlers.mouseDownOnBackground(n);this.editor.updateCursor(n)}}_mouseMoveTouchMove(n){if(this._currentMouseDownData!==null)if(this._currentMouseDownData.triggeredContextMenu)this._currentMouseDownData=null;else if(this._currentMouseDownData.mainComp instanceof vr){let e=xr(...this.editor.offsetXY(n),...this._currentMouseDownData.initialXY);if(isNaN(e)||e>=5){this.clearStartDragTimeout(),this._currentMouseDownData.fireMouseClickedOnFinish=!1,this._currentHandlers.mouseDraggedOn(this._currentMouseDownData.mainComp,n);for(let r of this._currentMouseDownData.selectionComps)r!==this._currentMouseDownData.mainComp&&this._currentHandlers.mouseDraggedOn(r,n)}}else this._currentHandlers.mouseDraggedOnBackground(n);else this.updateMouseOver(this.editor.offsetXY(n),this.editor.editorRoot.wireMgr.isAddingWire)}_mouseUpTouchEnd(n){var r,i,s,a,u,l;let e=(i=(r=this._currentMouseDownData)==null?void 0:r.mainComp)!=null?i:this._currentMouseOverComp;if(e instanceof vr){this._startDragTimeoutHandle!==null&&(clearTimeout(this._startDragTimeoutHandle),this._startDragTimeoutHandle=null);let p=this._currentHandlers.mouseUpOn(e,n);for(let d of(a=(s=this._currentMouseDownData)==null?void 0:s.selectionComps)!=null?a:[])if(d!==e){let h=this._currentHandlers.mouseUpOn(d,n);p=ae.merge(p,h)}if((l=(u=this._currentMouseDownData)==null?void 0:u.fireMouseClickedOnFinish)!=null&&l){let d;this.isDoubleClick(e,n)?(d=this._currentHandlers.mouseDoubleClickedOn(e,n),d.isChange||(d=this._currentHandlers.mouseClickedOn(e,n))):d=this._currentHandlers.mouseClickedOn(e,n),p=ae.merge(p,d)}p.isChange&&this.editor.editTools.undoMgr.takeSnapshot(p)}else this._currentHandlers.mouseUpOnBackground(n);this._currentMouseDownData=null,this.editor.editTools.redrawMgr.addReason("mouseup",null)}isDoubleClick(n,e){if("offsetX"in e)return e.detail===2;{let r=this._lastTouchEnd,i=new Date().getTime();if(this._lastTouchEnd=[n,i],r===void 0)return!1;let[s,a]=r,u=i-a,l=s===n&&u>0&&u<300;return l&&(this._lastTouchEnd=void 0),l}}registerButtonListenersOn(n,e){let r=this.editor;for(let i of n){let s=c(a=>{this.editor.setCurrentMouseAction("edit"),a.preventDefault(),this.editor.eventMgr.currentSelection=void 0;let u=r.factory.makeFromButton(r.editorRoot,i);if(u===void 0)return;this._currentMouseOverComp=u;let{wantsDragEvents:l}=this._currentHandlers.mouseDownOn(u,a);l&&(this._currentMouseDownData={mainComp:this._currentMouseOverComp,selectionComps:[],fireMouseClickedOnFinish:!1,initialXY:[NaN,NaN],triggeredContextMenu:!1}),this._currentHandlers.mouseDraggedOn(u,a)},"buttonMouseDownTouchStart");i.addEventListener("mousedown",r.wrapHandler(a=>{a.button===2||a.button===0&&a.ctrlKey||s(a)})),i.addEventListener("touchstart",r.wrapHandler(a=>{s(a)})),i.addEventListener("touchmove",r.wrapHandler(a=>{a.preventDefault(),this._mouseMoveTouchMove(a)})),i.addEventListener("touchend",r.wrapHandler(a=>{a.preventDefault(),this._mouseUpTouchEnd(a),this.setCurrentMouseOverComp(null)})),i.addEventListener("contextmenu",r.wrapHandler(a=>{a.preventDefault(),a.stopPropagation(),e&&this.editor.mode>=3&&this._currentHandlers.contextMenuOnButton(i.dataset,a)}))}}tryDeleteDrawable(n){if(n instanceof Re){let e=this.tryDeleteComponentsWhere(r=>r===n,!0);return ae.fromBoolean(e!==0)}else{if(n instanceof Lr)return this.editor.editorRoot.wireMgr.deleteWire(n);if(n instanceof tr)return n.removeFromParent(),ae.SimpleChange}return ae.NoChange}tryDeleteComponentsWhere(n,e){let r=this.editor.editorRoot.components.tryDeleteWhere(n,e);return r>0&&(this.clearPopperIfNecessary(),this.editor.editTools.redrawMgr.addReason("component(s) deleted",null)),r}};c(iu,"UIEventManager");var oa=class{constructor(n){this.editor=n}mouseHoverOn(n){}mouseDownOn(n,e){return{wantsDragEvents:!0}}mouseDraggedOn(n,e){}mouseUpOn(n,e){return ae.NoChange}mouseClickedOn(n,e){return ae.NoChange}mouseDoubleClickedOn(n,e){return ae.NoChange}contextMenuOn(n,e){return!1}contextMenuOnButton(n,e){}mouseDownOnBackground(n){}mouseDraggedOnBackground(n){}mouseUpOnBackground(n){}};c(oa,"ToolHandlers");var su=class extends oa{constructor(e){super(e);this._openedContextMenu=null}mouseHoverOn(e){let r=this.editor;if(r.eventMgr.clearPopperIfNecessary(),r.options.hideTooltips||e instanceof Re&&e.state===2)return;let i=e.makeTooltip();if(i!==void 0){let s=c(()=>{let a=r.html.canvasContainer.getBoundingClientRect(),u=r.actualZoomFactor,[l,p,d,h]=e instanceof Nr?[e.posX*u,e.posY*u,e.width*u,e.height*u]:[r.mouseX,r.mouseY,4,4];return new DOMRect(a.x+l-d/2,a.y+p-h/2,d,h)},"rect");r.eventMgr.makePopper(i,s)}}mouseDownOn(e,r){return e.mouseDown(r)}mouseDraggedOn(e,r){e.mouseDragged(r)}mouseUpOn(e,r){let i=e.mouseUp(r);return this.editor.editorRoot.wireMgr.tryCancelWire(),i}mouseClickedOn(e,r){return e.mouseClicked(r)}mouseDoubleClickedOn(e,r){return e.mouseDoubleClicked(r)}contextMenuOn(e,r){return this.showContextMenu(e.makeContextMenu(),r)}contextMenuOnButton(e,r){return this.showContextMenu(this.editor.factory.makeContextMenu(e.type),r)}mouseDownOnBackground(e){let r=this.editor,i=r.eventMgr,s=i.currentSelection;if(s!==void 0){let a=r.mode>=2;if(e.shiftKey&&a){s.currentlyDrawnRect!==void 0&&console.log("unexpected defined current rect when about to begin a new one");let[u,l]=r.offsetXY(e),p=new DOMRect(u,l,1,1);s.currentlyDrawnRect=p}else i.currentSelection=void 0;r.editTools.redrawMgr.addReason("selection rect changed",null)}}mouseDraggedOnBackground(e){let r=this.editor;if(r.mode>=2){let s=r.eventMgr,a=s.currentSelection,[u,l]=r.offsetXY(e);if(a===void 0){let p=new DOMRect(u,l,1,1);s.currentSelection=new ri(p)}else{let p=a.currentlyDrawnRect;p===void 0?console.log("trying to update a selection rect that is not defined"):(p.width=u-p.x,p.height=l-p.y,r.editTools.redrawMgr.addReason("selection rect changed",null))}}}mouseUpOnBackground(e){let r=this.editor;r.wireMgr.tryCancelWire();let s=r.eventMgr.currentSelection;s!==void 0&&(s.finishCurrentRect(this.editor),r.editTools.redrawMgr.addReason("selection rect changed",null))}showContextMenu(e,r){let i=c(()=>{this._openedContextMenu!==null&&(this._openedContextMenu.classList.remove("show-menu"),this._openedContextMenu.innerHTML="",this._openedContextMenu=null)},"hideMenu");if(i(),e!==void 0){let s=this.editor.eventMgr.currentMouseDownData;s!==null&&(s.triggeredContextMenu=!0);let a=c(D=>{var v;function b(_,M,A){return un(no("button"),ne(`menu-btn${A?" danger":""}`),_.icon===void 0?_.caption:Q(wa(_.icon),Rt(ne("menu-text"),_.caption)),M===void 0?Lt:Rt(ne("menu-shortcut"),M))}switch(c(b,"mkButton"),D._tag){case"sep":return yi(ne("menu-separator")).render();case"text":return yi(ne("menu-item-static"),D.caption).render();case"item":{let _=b(D,D.shortcut,(v=D.danger)!=null?v:!1).render();return _.addEventListener("click",this.editor.wrapHandler(M=>{let A=D.action(M,r);this.editor.editTools.undoMgr.takeSnapshot(A),this.editor.focus()})),yi(ne("menu-item"),_).render()}case"submenu":return yi(ne("menu-item submenu"),b(D,void 0,!1),$f(ne("menu"),...D.items.map(a))).render()}},"defToElem"),u=e.map(a),l=this.editor.html.mainContextMenu;ku(l,u);let p=r;l.classList.add("show-menu");let d=p.pageY;l.style.top=d+"px",l.style.left=p.pageX+"px";let h=!1,m=l.getBoundingClientRect(),f=window.innerHeight-m.bottom;f<0&&(d+=Math.min(0,f),d<5&&(d=5,h=!0),l.style.top=d+"px"),h?(l.style.setProperty("max-height",window.innerHeight-10+"px"),l.style.setProperty("overflow-y","scroll")):(l.style.removeProperty("max-height"),l.style.removeProperty("overflow-y")),this._openedContextMenu=l;let C=c(()=>{i(),document.removeEventListener("click",C)},"clickHandler");return setTimeout(()=>{document.addEventListener("click",C,!1)},200),!0}return!1}};c(su,"EditHandlers");var dc=class extends oa{constructor(n){super(n)}mouseClickedOn(n,e){return this.editor.eventMgr.tryDeleteDrawable(n)}};c(dc,"DeleteHandlers");var hc=class extends oa{constructor(n){super(n)}mouseDownOnBackground(n){for(let e of this.editor.components.all())e.mouseDown(n);for(let e of this.editor.wireMgr.wires)for(let r of e.waypoints)r.mouseDown(n)}mouseDraggedOnBackground(n){for(let e of this.editor.components.all())e.mouseDragged(n);for(let e of this.editor.wireMgr.wires)for(let r of e.waypoints)r.mouseDragged(n)}mouseUpOnBackground(n){for(let e of this.editor.components.all())e.mouseUp(n);for(let e of this.editor.wireMgr.wires)for(let r of e.waypoints)r.mouseUp(n)}};c(hc,"MoveHandlers");var Kb=100,au=class{constructor(n){this._undoSnapshots=[];this._redoSnapshots=[];this.onStateChanged=c(n=>null,"onStateChanged");this.editor=n}get state(){return{canUndo:this.canUndo(),canRedoOrRepeat:this.canRedoOrRepeat()}}canUndo(){return this._undoSnapshots.length>1}canRedoOrRepeat(){return this._redoSnapshots.length>0||this._undoSnapshots.length>0&&this._undoSnapshots[this._undoSnapshots.length-1].repeatAction!==void 0}takeSnapshot(n){var i;if(!((i=n==null?void 0:n.isChange)!=null?i:!0))return;let r=n===void 0?void 0:n._tag==="RepeatableChange"?n.repeat:void 0;this.doTakeSnapshot(r)}doTakeSnapshot(n){let e=Date.now(),r=this.editor.save(),i=ut.stringifyObject(r,!0);for(this._undoSnapshots.push({time:e,circuitStr:i,repeatAction:n});this._undoSnapshots.length>Kb;)this._undoSnapshots.shift();this._redoSnapshots.length>0&&(this._redoSnapshots=[]),this.fireStateChangedIfNeeded()}undo(){if(!this.canUndo()){console.log("Nothing to undo");return}let n=this._undoSnapshots.pop(),e=this._undoSnapshots[this._undoSnapshots.length-1];this._redoSnapshots.push(n),this.loadSnapshot(e),this.fireStateChangedIfNeeded()}redoOrRepeat(){if(!this.canRedoOrRepeat()){console.log("Nothing to redo or repeat");return}let n=this._redoSnapshots.pop();if(n!==void 0)this._undoSnapshots.push(n),this.loadSnapshot(n);else{let e=this._undoSnapshots[this._undoSnapshots.length-1].repeatAction;if(e!==void 0){let r=e(),i=r===!1?void 0:r===!0?e:r;this.doTakeSnapshot(i)}}this.fireStateChangedIfNeeded()}dump(){function n(e,r){let i=e+(r.length===0?" (empty)":"");console.group(i);for(let s=r.length-1;s>=0;s--){let a=r[s],u=new Date(a.time).toISOString();console.log(u)}console.groupEnd()}c(n,"printStack"),n("Undo stack",this._undoSnapshots),n("Redo stack",this._redoSnapshots)}loadSnapshot(n){ut.loadCircuitOrLibrary(this.editor,n.circuitStr,{isUndoRedoAction:!0})}fireStateChangedIfNeeded(){let n=this.state;(this._lastSentState===void 0||!Zb(this._lastSentState,n))&&(this.onStateChanged(n),this._lastSentState=n)}};c(au,"UndoManager");function Zb(o,n){return o.canUndo===n.canUndo&&o.canRedoOrRepeat===n.canRedoOrRepeat}c(Zb,"areStatesEqual");var q2={CharacterComparator:{v:5,in:[{pos:[50,130],id:0,val:1},{pos:[50,160],id:1,val:1},{pos:[50,190],id:2,val:1},{pos:[50,220],id:3,val:0},{pos:[50,250],id:4,val:1},{pos:[50,280],id:13,val:0},{pos:[50,310],id:14,val:1},{pos:[50,360],id:15,val:1},{pos:[50,390],id:16,val:0},{pos:[50,420],id:17,val:1},{pos:[50,450],id:18,val:0},{pos:[50,480],id:19,val:1},{pos:[50,510],id:20,val:0},{pos:[50,540],id:21,val:1}],out:[{pos:[870,310],id:5},{type:"ascii",pos:[180,60],id:[6,7,8,9,10,11,12]},{type:"ascii",pos:[180,620],id:[22,23,24,25,26,27,28]}],gates:[{type:"XOR",pos:[360,140],in:[29,30],out:31},{type:"XOR",pos:[360,200],in:[32,33],out:34},{type:"XOR",pos:[360,260],in:[35,36],out:37},{type:"XOR",pos:[360,320],in:[38,39],out:40},{type:"XOR",pos:[360,380],in:[41,42],out:43},{type:"XOR",pos:[360,440],in:[44,45],out:46},{type:"XOR",pos:[360,500],in:[47,48],out:49},{type:"OR",pos:[470,170],in:[68,69],out:70},{type:"OR",pos:[500,280],in:[71,72],out:73},{type:"OR",pos:[490,410],in:[74,75],out:76},{type:"OR",pos:[630,250],in:[77,78],out:79},{type:"OR",pos:[630,410],in:[80,81],out:82},{type:"OR",pos:[730,310],in:[83,84],out:85},{type:"NOT",pos:[800,310],in:50,out:51}],wires:[[0,6],[1,7],[2,8],[3,9],[4,10],[13,11],[14,12],[15,22],[16,23],[17,24],[18,25],[19,26],[20,27],[21,28],[0,29],[15,30],[79,83],[82,84],[31,68],[34,69],[37,71],[40,72],[43,74],[46,75],[49,81],[76,80],[73,78],[70,77],[85,50],[51,5],[1,32],[16,33],[2,35],[17,36],[18,39],[3,38],[4,41],[19,42],[13,44],[20,45],[21,48],[14,47]]},Counters:{v:5,in:[{type:"clock",pos:[70,40],id:0,name:"bit 0",period:2e3,phase:1e3,showLabel:!1},{type:"clock",pos:[70,80],id:10,name:"bit 1",period:4e3,phase:2e3,showLabel:!1},{type:"clock",pos:[70,120],id:23,name:"bit 2",period:8e3,phase:4e3,showLabel:!1},{type:"clock",pos:[70,160],id:24,name:"bit 3",period:16e3,phase:8e3,showLabel:!1},{type:"clock",pos:[430,30],id:5,period:500,phase:250,showLabel:!1},{type:"clock",pos:[430,70],id:6,period:1e3,phase:500,showLabel:!1},{type:"clock",pos:[430,110],id:7,period:2e3,phase:1e3,showLabel:!1},{type:"clock",pos:[430,150],id:8,period:4e3,phase:2e3,showLabel:!1},{type:"clock",pos:[430,190],id:9,period:8e3,phase:4e3,showLabel:!1},{type:"clock",pos:[430,230],id:11,period:16e3,phase:8e3,showLabel:!1},{type:"clock",pos:[430,270],id:12,period:32e3,phase:16e3,showLabel:!1}],out:[{type:"display",bits:4,pos:[240,90],id:[1,2,3,4]},{type:"ascii",pos:[580,150],id:[13,14,15,16,17,18,19]}],wires:[[0,1],[24,4],[23,3],[10,2],[5,13],[6,14],[7,15],[8,16],[9,17],[11,18],[12,19]]},AllGates:{v:5,in:[{pos:[40,320],id:0,val:0},{pos:[40,490],id:1,val:0}],out:[{pos:[400,30],id:48},{pos:[400,80],id:49},{pos:[400,140],id:50},{pos:[400,260],id:51},{pos:[400,380],id:52},{pos:[400,200],id:53},{pos:[400,320],id:54},{pos:[400,440],id:55},{pos:[400,560],id:56},{pos:[400,680],id:57},{pos:[400,500],id:58},{pos:[400,620],id:59},{pos:[400,740],id:60},{pos:[400,860],id:61},{pos:[400,800],id:62},{pos:[400,920],id:63}],gates:[{type:"NOT",pos:[290,80],in:2,out:3},{type:"BUF",pos:[290,30],in:4,out:5},{type:"AND",pos:[290,140],in:[6,7],out:8},{type:"OR",pos:[290,260],in:[9,10],out:11},{type:"XOR",pos:[290,380],in:[12,13],out:14},{type:"NAND",pos:[290,200],in:[15,16],out:17},{type:"NOR",pos:[290,320],in:[18,19],out:20},{type:"XNOR",pos:[290,440],in:[21,22],out:23},{type:"IMPLY",pos:[290,560],in:[24,25],out:26},{type:"RIMPLY",pos:[290,680],in:[27,28],out:29},{type:"NIMPLY",pos:[290,500],in:[30,31],out:32},{type:"RNIMPLY",pos:[290,620],in:[33,34],out:35},{type:"TXA",pos:[290,740],in:[36,37],out:38},{type:"TXB",pos:[290,860],in:[39,40],out:41},{type:"TXNA",pos:[290,800],in:[42,43],out:44},{type:"TXNB",pos:[290,920],in:[45,46],out:47}],wires:[[0,4],[0,2],[0,6],[0,9],[0,12],[0,15],[0,18],[0,21],[0,24],[0,27],[0,30],[0,33],[0,36],[0,39],[0,42],[0,45],[1,7],[1,10],[1,13],[1,16],[1,19],[1,22],[1,25],[1,28],[1,31],[1,34],[1,37],[1,40],[1,43],[1,46],[5,48],[3,49],[8,50],[11,51],[14,52],[17,53],[20,54],[23,55],[26,56],[29,57],[32,58],[35,59],[38,60],[41,61],[44,62],[47,63]]},SevenSegmentDisplay:{v:5,opts:{propagationDelay:20},in:[{type:"clock",pos:[90,60],orient:"s",id:21,period:16e3,phase:8e3},{type:"clock",pos:[130,60],orient:"s",id:22,period:8e3,phase:4e3},{type:"clock",pos:[170,60],orient:"s",id:23,period:4e3,phase:2e3},{type:"clock",pos:[210,60],orient:"s",id:24,period:2e3,phase:1e3}],out:[{type:"display",bits:4,pos:[1320,140],id:[132,133,134,135],radix:16},{type:"bar",pos:[1330,310],id:117,display:"h"},{type:"bar",pos:[1270,490],id:118,display:"v"},{type:"bar",pos:[1390,370],id:119,display:"v"},{type:"bar",pos:[1270,370],id:120,display:"v"},{type:"bar",pos:[1330,430],id:121,display:"h"},{type:"bar",pos:[1390,490],id:122,display:"v"},{type:"bar",pos:[1330,550],id:123,display:"h"}],gates:[{type:"NOT",pos:[1170,310],in:103,out:104},{type:"NOT",pos:[1170,350],in:105,out:106},{type:"NOT",pos:[1170,390],in:107,out:108},{type:"NOT",pos:[1170,430],in:109,out:110},{type:"NOT",pos:[1170,550],in:111,out:112},{type:"NOT",pos:[1170,510],in:113,out:114},{type:"NOT",pos:[1170,470],in:115,out:116},{type:"XOR",pos:[210,180],in:[0,1],out:2},{type:"AND",pos:[220,340],in:[3,4],out:5},{type:"XOR",pos:[200,420],in:[6,7],out:8},{type:"XOR",pos:[330,220],in:[9,10],out:11},{type:"XOR",pos:[340,280],in:[12,13],out:14},{type:"OR",pos:[320,480],in:[15,16],out:17},{type:"NOR",pos:[440,220],in:[18,19],out:20},{type:"XOR",pos:[450,290],in:[25,26],out:27},{type:"NOR",pos:[430,450],in:[31,32],out:33},{type:"NOR",pos:[560,410],in:[34,35],out:36},{type:"NOR",pos:[600,190],in:[37,38],out:39},{type:"NOR",pos:[540,360],in:[40,41],out:42},{type:"XOR",pos:[650,320],in:[43,44],out:45},{type:"OR",pos:[670,430],in:[46,47],out:48},{type:"XOR",pos:[770,490],in:[49,50],out:51},{type:"NOR",pos:[770,540],in:[52,53],out:54},{type:"NOR",pos:[800,390],in:[55,56],out:57},{type:"OR",pos:[960,250],in:[58,59],out:60},{type:"NOR",pos:[940,310],in:[61,62],out:63},{type:"AND",pos:[1050,270],in:[64,65],out:66},{type:"AND",pos:[950,380],in:[67,68],out:69},{type:"AND",pos:[950,440],in:[70,71],out:72},{type:"OR",pos:[1030,410],in:[73,74],out:75},{type:"XOR",pos:[1030,520],in:[76,77],out:78}],wires:[[104,117],[106,119],[108,122],[110,123],[112,121],[114,120],[116,118],[21,135],[22,134],[23,133],[24,132],[21,0],[23,1],[24,3],[22,4],[24,6],[21,7],[2,9],[22,10],[23,12],[5,13],[5,15],[8,16],[11,18],[14,19],[11,25],[8,26],[5,32],[14,31],[33,34],[21,35],[20,37],[2,38],[27,40],[8,41],[42,43],[21,44],[39,46],[17,47],[48,49],[21,50],[48,52],[33,53],[36,56],[45,55],[57,103],[39,58],[24,59],[60,64],[27,65],[66,109],[39,61],[45,62],[63,113],[69,73],[72,74],[75,105],[39,67],[24,68],[45,70],[22,71],[51,115],[20,111],[78,107],[72,76],[54,77]]},SevenSegmentBCDDisplay:{v:5,in:[{bits:4,pos:[50,80],id:[0,1,2,3],val:[0,1,0,1]}],out:[{type:"bar",pos:[560,100],id:4,display:"h"},{type:"bar",pos:[620,280],id:5,display:"v"},{type:"bar",pos:[500,160],id:6,display:"v"},{type:"bar",pos:[560,220],id:7,display:"h"},{type:"bar",pos:[560,340],id:8,display:"h"},{type:"bar",pos:[500,280],id:9,display:"v"},{type:"bar",pos:[620,160],id:10,display:"v"},{type:"bar",pos:[420,160],id:50,display:"v"},{type:"bar",pos:[420,280],id:51,display:"v"},{type:"display",bits:4,pos:[170,250],id:[11,23,24,25]}],ic:[{type:"decoder-7seg",pos:[280,60],in:[12,13,14,15],out:[16,17,18,19,20,21,22]},{type:"decoder-bcd4",pos:[180,80],in:[26,27,28,29],out:[30,31,32,33,34]}],wires:[[16,4],[17,10],[18,5],[19,8],[20,9],[21,6],[22,7],[0,11],[1,23],[2,24],[3,25],[0,26],[1,27],[2,28],[3,29],[30,12],[31,13],[32,14],[33,15],[34,50],[34,51]]},SixteenVsSevenSegmentDisplays:{v:5,in:[{bits:4,pos:[50,90],id:[74,75,76,77],val:[1,0,0,1]},{bits:4,pos:[50,170],id:[78,79,80,81],val:[1,1,0,0]}],out:[{type:"16seg",pos:[440,170],id:[57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]},{type:"ascii",pos:[230,60],id:[82,83,84,85,86,87,88],additionalReprRadix:10},{type:"7seg",pos:[440,330],id:[93,94,95,96,97,98,99,100]}],gates:[{type:"OR",pos:[330,250],in:[90,91],out:92}],ic:[{type:"decoder-16seg",pos:[230,170],in:[34,35,36,37,38,39,40],out:[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,89]},{type:"decoder-7seg",pos:[230,320],in:[101,102,103,104],out:[105,106,107,108,109,110,111]}],wires:[[74,82],[75,83],[76,84],[77,85],[78,86],[79,87],[80,88],[41,57],[42,58],[43,59],[44,60],[45,61],[46,62],[47,63],[48,64],[49,65],[50,66],[51,67],[52,68],[53,69],[54,70],[55,71],[56,72],[74,34],[75,35],[76,36],[77,37],[78,38],[79,39],[80,40],[89,90],[92,73],[81,91],[105,93],[106,94],[107,95],[108,96],[109,97],[110,98],[111,99],[74,101],[75,102],[76,103],[77,104],[81,100,{via:[[200,370]]}]]},NibbleAdder:{v:5,in:[{pos:[100,40],orient:"s",id:3,name:"A3",val:0},{pos:[200,40],orient:"s",id:0,name:"A2",val:0},{pos:[300,40],orient:"s",id:1,name:"A1",val:0},{pos:[400,40],orient:"s",id:2,name:"A0",val:0},{pos:[140,180],orient:"s",id:15,name:"B3",val:0},{pos:[240,180],orient:"s",id:14,name:"B2",val:0},{pos:[340,180],orient:"s",id:13,name:"B1",val:0},{pos:[440,180],orient:"s",id:12,name:"B0",val:0}],out:[{pos:[30,450],orient:"s",id:37,name:"S4"},{pos:[120,450],orient:"s",id:36,name:"S3"},{pos:[220,450],orient:"s",id:38,name:"S2"},{pos:[320,450],orient:"s",id:39,name:"S1"},{pos:[420,450],orient:"s",id:40,name:"S0"},{type:"display",bits:4,pos:[530,100],id:[4,5,6,7]},{type:"display",bits:4,pos:[530,240],id:[8,9,10,11]},{type:"display",bits:4,pos:[530,390],id:[41,42,43,44]}],ic:[{type:"adder",pos:[420,320],in:[16,17,18],out:[19,20]},{type:"adder",pos:[320,320],in:[21,22,23],out:[24,25]},{type:"adder",pos:[220,320],in:[26,27,28],out:[29,30]},{type:"adder",pos:[120,320],in:[31,32,33],out:[34,35]}],wires:[[12,8],[13,9],[14,10],[15,11],[2,4],[1,5],[0,6],[3,7],[20,23],[25,28],[30,33],[2,16],[12,17],[1,21],[13,22],[0,26],[14,27],[3,31],[15,32],[19,41],[24,42],[29,43],[34,44],[35,37],[34,36],[29,38],[24,39],[19,40]]},ALU:{v:5,in:[{pos:[290,60],orient:"s",id:16,name:"Op1",val:0},{pos:[330,60],orient:"s",id:17,name:"Op0",val:0},{pos:[50,140],id:18,val:0},{pos:[50,160],id:19,name:"A",val:0},{pos:[50,180],id:20,val:0},{pos:[50,200],id:21,val:0},{pos:[50,240],id:26,val:0},{pos:[50,260],id:27,name:"B",val:0},{pos:[50,280],id:28,val:0},{pos:[50,300],id:29,val:0}],out:[{pos:[420,320],id:38,name:"Zero"},{pos:[420,350],id:39,name:"oVerflow"},{type:"display",bits:4,pos:[110,60],orient:"n",id:[22,23,24,25],name:"A (non sign\xE9)"},{type:"display",bits:4,pos:[110,350],orient:"s",id:[30,31,32,33],name:"B (non sign\xE9)"},{type:"display",bits:4,pos:[420,250],id:[34,35,36,37],name:"Y (sign\xE9)",radix:-10},{type:"display",bits:4,pos:[420,150],id:[40,41,42,43],name:"Y (non sign\xE9)"},{type:"display",bits:4,pos:[210,60],orient:"n",id:[44,45,46,47],name:"A (sign\xE9)",radix:-10},{type:"display",bits:4,pos:[210,350],orient:"s",id:[48,49,50,51],name:"B (sign\xE9)",radix:-10}],ic:[{type:"alu",pos:[280,220],in:[0,1,2,3,4,5,6,7,8,9],out:[10,11,12,13,14,15]}],wires:[[16,9],[17,8],[21,3],[20,2],[19,1],[18,0],[18,22],[19,23],[20,24],[21,25],[26,4],[27,5],[28,6],[29,7],[26,30],[27,31],[28,32],[29,33],[10,34],[11,35],[12,36],[13,37],[15,38],[14,39],[10,40],[11,41],[12,42],[13,43],[18,44],[19,45],[20,46],[21,47],[26,48],[27,49],[28,50],[29,51]]},MiniAlu:{v:5,in:[{pos:[340,40],orient:"s",id:10,val:1},{pos:[470,40],orient:"s",id:11,val:1},{pos:[370,180],orient:"s",id:12,val:0},{pos:[500,180],orient:"s",id:13,val:1},{pos:[80,40],orient:"s",id:26,val:0},{pos:[210,40],orient:"s",id:27,val:0},{pos:[110,180],orient:"s",id:28,val:0},{pos:[240,180],orient:"s",id:34,val:0},{pos:[600,370],orient:"w",id:98,name:"Add/Sub",val:0}],out:[{pos:[600,690],id:49,name:"V"},{type:"display",bits:4,pos:[600,120],id:[18,19,20,21],name:"A"},{type:"display",bits:4,pos:[600,260],id:[22,23,24,25],name:"B"},{type:"display",bits:4,pos:[600,620],id:[45,46,47,48],name:"S"}],gates:[{type:"XOR",pos:[120,450],orient:"s",in:[86,87],out:88},{type:"XOR",pos:[250,450],orient:"s",in:[89,90],out:91},{type:"XOR",pos:[380,450],orient:"s",in:[92,93],out:94},{type:"XOR",pos:[510,450],orient:"s",in:[95,96],out:97}],ic:[{type:"adder",pos:[490,530],in:[0,1,2],out:[3,4]},{type:"adder",pos:[360,530],in:[5,6,7],out:[8,9]},{type:"adder",pos:[230,530],in:[35,36,37],out:[38,39]},{type:"adder",pos:[100,530],in:[40,41,42],out:[43,44]}],wires:[[4,7],[11,0],[10,5],[11,18],[10,19],[13,22],[12,23],[9,37],[39,42],[3,45],[8,46],[38,47],[43,48],[44,49,{via:[[50,690]]}],[27,35],[26,40],[28,87],[34,90],[34,24],[28,25],[27,20],[26,21],[12,93],[13,96],[97,1],[94,6],[91,36],[88,41],[98,2],[98,95],[98,92],[98,89],[98,86]]},LatchedAdder:{v:5,in:[{pos:[340,570],orient:"n",id:40,name:"Reset",val:0,isPushButton:!0},{pos:[40,220],id:41,val:0},{pos:[40,250],id:42,val:0},{pos:[40,280],id:43,val:0},{pos:[40,310],id:44,val:0},{pos:[280,570],orient:"n",id:45,name:"Horloge",val:0,isPushButton:!0},{pos:[190,400],orient:"n",id:60,name:"Add./soustr.",val:0}],out:[{pos:[550,380],id:61,name:"V"},{type:"display",bits:4,pos:[100,390],orient:"s",id:[50,51,52,53],name:"B"},{type:"display",bits:4,pos:[550,230],id:[46,47,48,49],name:"Acc."}],ic:[{type:"alu",pos:[180,210],in:[0,1,2,3,4,5,6,7,8,9],out:[10,11,12,13,14,15]},{type:"flipflop-d",pos:[390,100],in:[17,18,19,16],out:[20,21],state:0},{type:"flipflop-d",pos:[390,200],in:[23,24,25,22],out:[26,27],state:0},{type:"flipflop-d",pos:[390,300],in:[29,30,31,28],out:[32,33],state:0},{type:"flipflop-d",pos:[390,400],in:[35,36,37,34],out:[38,39],state:0},{type:"flipflop-d",pos:[390,500],in:[55,56,57,54],out:[58,59],state:0}],wires:[[10,16,{via:[[260,80]]}],[11,22,{via:[[260,180]]}],[12,28,{via:[[260,280]]}],[13,34,{via:[[260,380]]}],[40,37,{via:[[340,440]]}],[40,31,{via:[[340,340,"n"]]}],[40,25,{via:[[340,240,"n"]]}],[40,19,{via:[[340,140,"n"]]}],[20,0,{via:[[430,80],[430,50],[130,50],[130,130]]}],[26,1,{via:[[440,180],[440,40],[120,40],[120,150]]}],[32,2,{via:[[450,280],[450,30],[110,30],[110,170]]}],[38,3,{via:[[460,380,"n"],[460,20],[100,20],[100,190]]}],[41,4],[42,5],[43,6],[44,7],[45,35,{via:[[280,420]]}],[45,29,{via:[[280,320,"n"]]}],[45,23,{via:[[280,220,"n"]]}],[45,17,{via:[[280,120,"n"]]}],[41,50],[42,51],[43,52],[44,53],[20,46,{via:[[480,80]]}],[26,47,{via:[[480,180]]}],[32,48,{via:[[480,280]]}],[38,49,{via:[[480,380]]}],[60,8,{via:[[230,320,"n"],[230,110,"n"]]}],[40,57],[45,55,{via:[[280,520]]}],[14,54,{via:[[260,420,"s"],[260,480]]}],[58,61]]},LatchedCounter:{v:5,ic:[{type:"flipflop-d",pos:[170,160],in:[7,8,9,6],out:[10,11],state:0,trigger:"falling",showContent:!0},{type:"flipflop-d",pos:[300,160],in:[15,16,17,14],out:[18,19],state:0,trigger:"falling",showContent:!0},{type:"flipflop-d",pos:[440,160],in:[21,22,23,20],out:[24,25],state:0,trigger:"falling",showContent:!0},{type:"flipflop-d",pos:[580,160],in:[35,36,37,34],out:[38,39],state:0,trigger:"falling",showContent:!0}],in:[{pos:[100,180],id:12,name:"Horloge",val:0,isPushButton:!0},{pos:[100,240],id:41,name:"Reset",val:0,isPushButton:!0}],out:[{type:"display",bits:4,pos:[660,60],id:[26,27,28,29]}],wires:[[12,7],[10,15],[18,21],[19,14],[11,6],[25,20],[10,26,{via:[[400,30]]}],[18,27,{via:[[520,50]]}],[24,28],[39,34],[24,35],[38,29],[41,9],[41,17],[41,23],[41,37]]},Decoder2To4:{v:5,in:[{pos:[60,80],id:0,name:"S0",val:0},{pos:[60,220],id:1,name:"S1",val:0}],gates:[{type:"NOT",pos:[130,50],in:2,out:3},{type:"NOT",pos:[130,190],in:4,out:5},{type:"AND",pos:[280,60],in:[6,7],out:8},{type:"AND",pos:[280,120],in:[9,10],out:11},{type:"AND",pos:[280,180],in:[12,13],out:14},{type:"AND",pos:[280,240],in:[15,16],out:17},{type:"BUF",pos:[130,110],in:22,out:23},{type:"BUF",pos:[130,250],in:24,out:25}],out:[{pos:[370,60],id:18,name:"0"},{pos:[370,120],id:19,name:"1"},{pos:[370,180],id:20,name:"2"},{pos:[370,240],id:21,name:"3"}],wires:[[0,2],[1,4],[11,19],[17,21],[14,20],[8,18],[3,6],[5,7],[5,10],[3,12],[0,22],[1,24],[23,9],[23,15],[25,13],[25,16]]},Decoder3To8:{v:5,in:[{pos:[60,130],id:26,name:"S0",val:1},{pos:[60,290],id:27,name:"S1",val:1},{pos:[60,460],id:28,name:"S2",val:0}],gates:[{type:"NOT",pos:[130,90],in:30,out:31},{type:"NOT",pos:[130,250],in:32,out:33},{type:"NOT",pos:[130,420],in:34,out:35},{type:"AND",bits:3,pos:[340,120],in:[36,37,38],out:39},{type:"AND",bits:3,pos:[340,190],in:[40,41,42],out:43},{type:"AND",bits:3,pos:[340,260],in:[44,45,46],out:47},{type:"AND",bits:3,pos:[340,330],in:[48,49,50],out:51},{type:"AND",bits:3,pos:[340,400],in:[52,53,54],out:55},{type:"AND",bits:3,pos:[340,470],in:[56,57,58],out:59},{type:"AND",bits:3,pos:[340,540],in:[60,61,62],out:63},{type:"AND",bits:3,pos:[340,50],in:[64,65,66],out:67},{type:"BUF",pos:[130,170],in:76,out:77},{type:"BUF",pos:[130,330],in:78,out:79},{type:"BUF",pos:[130,500],in:80,out:81}],out:[{pos:[420,50],id:68,name:"0"},{pos:[420,120],id:69,name:"1"},{pos:[420,190],id:70,name:"2"},{pos:[420,260],id:71,name:"3"},{pos:[420,330],id:72,name:"4"},{pos:[420,400],id:73,name:"5"},{pos:[420,470],id:74,name:"6"},{pos:[420,540],id:75,name:"7"}],wires:[[26,30],[27,32],[28,34],[67,68],[39,69],[43,70],[47,71],[51,72],[55,73],[59,74],[63,75],[31,64],[33,65],[35,66],[26,76],[27,78],[28,80],[77,36],[33,37],[35,38],[31,40],[79,41],[35,42],[35,46],[79,45],[77,44],[31,48],[77,52],[31,56],[77,60],[33,49],[33,53],[79,57],[79,61],[81,50],[81,54],[81,58],[81,62]]},ParityGenerator:{v:5,in:[{pos:[70,180],id:0,name:"D1",val:0},{pos:[70,300],id:1,name:"D2",val:0},{pos:[70,360],id:2,name:"D3",val:0},{pos:[70,420],id:3,name:"D4",val:0}],out:[{pos:[530,60],id:4,name:"P1"},{pos:[530,120],id:5,name:"P2"},{pos:[530,180],id:6,name:"D1"},{pos:[530,240],id:7,name:"P3"},{pos:[530,300],id:8,name:"D2"},{pos:[530,360],id:9,name:"D3"},{pos:[530,420],id:10,name:"D4"}],gates:[{type:"XOR",pos:[460,240],in:[11,12],out:13},{type:"XOR",pos:[380,230],in:[14,15],out:16},{type:"XOR",pos:[340,120],in:[17,18],out:19},{type:"XOR",pos:[260,110],in:[20,21],out:22},{type:"XOR",pos:[300,60],in:[23,24],out:25},{type:"XOR",pos:[220,40],in:[26,27],out:28}],wires:[[3,10],[2,9],[1,8],[0,6],[22,17],[16,11],[28,23],[25,4],[19,5],[13,7],[3,18,{via:[[280,420],[280,130]]}],[3,12,{via:[[420,420]]}],[2,15,{via:[[340,360]]}],[1,14,{via:[[310,300],[310,220]]}],[2,21,{via:[[220,360]]}],[0,20,{via:[[190,180],[190,100]]}],[3,24,{via:[[150,420],[150,70]]}],[1,27,{via:[[120,300],[120,50]]}],[0,26,{via:[[100,30]]}]]},ShiftRegister:{v:5,in:[{pos:[110,130],id:0,name:"D",val:1},{pos:[100,210],id:1,name:"Horloge",val:0,isPushButton:!0},{pos:[100,260],id:38,name:"Reset",val:0,isPushButton:!0}],out:[{type:"display",bits:4,pos:[650,60],id:[39,40,41,42]}],ic:[{type:"flipflop-d",pos:[560,150],in:[21,22,23,20],out:[24,25],state:1,showContent:!0},{type:"flipflop-d",pos:[450,150],in:[15,16,17,14],out:[18,19],state:0,showContent:!0},{type:"flipflop-d",pos:[340,150],in:[9,10,11,8],out:[12,13],state:1,showContent:!0},{type:"flipflop-d",pos:[230,150],in:[3,4,5,2],out:[6,7],state:1,showContent:!0}],wires:[[6,8],[12,14],[18,20],[38,5,{via:[[230,260]]}],[38,11,{via:[[340,260]]}],[38,17,{via:[[450,260]]}],[38,23,{via:[[560,260]]}],[1,21,{via:[[490,210]]}],[1,15,{via:[[380,210]]}],[1,9,{via:[[270,210]]}],[1,3,{via:[[160,210]]}],[0,2],[24,39],[18,40,{via:[[530,50]]}],[12,41,{via:[[410,70]]}],[6,42,{via:[[300,90]]}]]},Muxes:{v:5,in:[{pos:[160,70],orient:"s",id:59,name:"S0",val:0},{pos:[160,340],orient:"s",id:64,name:"S0",val:0},{pos:[450,360],orient:"s",id:69,name:"S0",val:0},{bits:4,pos:[270,60],orient:"s",id:[0,1,2,3],val:[1,1,0,0]},{bits:4,pos:[460,70],orient:"s",id:[60,61,62,63],val:[0,0,0,0]},{bits:4,pos:[270,300],orient:"s",id:[65,66,67,68],val:[0,0,0,0]},{bits:4,pos:[110,180],id:[86,87,88,89],val:[0,0,0,0]},{bits:4,pos:[230,180],id:[90,91,92,93],val:[0,0,0,0]},{bits:4,pos:[400,170],id:[94,95,96,97],val:[0,0,0,0]},{bits:4,pos:[400,250],id:[98,99,100,101],val:[0,0,0,0]},{bits:4,pos:[110,420],id:[102,103,104,105],val:[0,0,0,0]},{bits:4,pos:[110,520],id:[106,107,108,109],val:[0,0,0,0]},{bits:4,pos:[400,540],id:[110,111,112,113],val:[0,0,0,0]},{bits:4,pos:[400,440],id:[114,115,116,117],val:[0,0,0,0]},{bits:4,pos:[230,400],id:[118,119,120,121],val:[0,0,0,0]},{bits:4,pos:[230,460],id:[122,123,124,125],val:[0,0,0,0]},{bits:4,pos:[230,520],id:[126,127,128,129],val:[0,0,0,0]},{bits:4,pos:[230,580],id:[130,131,132,133],val:[0,0,0,0]}],ic:[{type:"mux",from:2,to:1,pos:[160,160],in:[5,6,7],out:8},{type:"mux",from:4,to:1,pos:[290,180],in:[4,9,10,11,12,13],out:14},{type:"mux",from:8,to:1,pos:[470,210],in:[15,16,17,18,19,20,21,22,23,24,25],out:26},{type:"mux",from:4,to:2,pos:[160,470],in:[27,28,29,30,31],out:[32,33]},{type:"mux",from:8,to:2,pos:[290,490],in:[34,35,36,37,38,39,40,41,42,43],out:[44,45]},{type:"mux",from:8,to:4,pos:[450,490],in:[46,47,48,49,50,51,52,53,54],out:[55,56,57,58]},{type:"alu",pos:[630,450],in:[70,71,72,73,74,75,76,77,78,79],out:[80,81,82,83,84,85]}],wires:[[59,7],[0,12],[1,13],[60,23],[61,24],[62,25],[64,31],[65,42],[66,43],[69,54],[86,5],[87,6],[90,4],[91,9],[92,10],[93,11],[94,15],[95,16],[96,17],[97,18],[98,19],[99,20],[100,21],[101,22],[104,27],[105,28],[106,29],[107,30],[110,50],[111,51],[112,52],[113,53],[114,46],[115,47],[116,48],[117,49],[119,34],[120,35],[123,36],[124,37],[127,38],[128,39],[131,40],[132,41]]}};var Q2=ge(sa());var Jb=100,Dd=["JMD","BRZ","BRC","JSR"],$r=["JMU"],oi=Dd.concat($r),fc=["NOP","RET"],uu=class{constructor(n){this._dragSrcEl=null;this._assemblerNumMaxAddressBits=8;this._assemblerWordLength=8;this._assemblerOperandLength=4;this._counterCheck=0;this.onProgramStateChanged=c(n=>null,"onProgramStateChanged");this.editor=n;let e=w.AssemblerEditor;this.editor.html.mainCanvas.addEventListener("mouseup",this.editor.wrapHandler(r=>{this.getRAMROMList(),this.getCPUList()})),this.editor.html.mainContextMenu.addEventListener("focusout",this.editor.wrapHandler(r=>{this.getRAMROMList(),this.getCPUList()})),this._allROMRAMsAsComponentsList=[],this._adequateROMRAMsList=[],this._allCPUsAsComponentsList=[],this._CPUsList=[],this._directAddressingMode=!1,this._opcodes=ar,this._program=[],this._undoProgramSnapshots=[],this._redoProgramSnapshots=[],this.titleName=Qf(Y("font-weight:bold"),"Assembler editor").render(),this.titleDiv=W(Y("position: absolute; left: 0; top: 0; width: 100%; height: 30px;"),this.titleName).render(),this.undoButton=vn("undo",e.Undo,()=>this.undoProgram(),this.editor),this.redoButton=vn("redo",e.Redo,()=>this.redoProgram(),this.editor),this.controlDivRAMROMSelect=xi().render(),this.getRAMROMList(),this.controlDivRAMROMSelect.addEventListener("change",this.editor.wrapHandler(r=>{we(this.controlDivRAMROMSelect.options[this.controlDivRAMROMSelect.options.selectedIndex],Cr(""))})),this.controlDivRAMROMSelect.addEventListener("changeSelected",this.editor.wrapHandler(r=>{we(this.controlDivRAMROMSelect.options[this.controlDivRAMROMSelect.options.selectedIndex],Cr(""))})),this.downloadFromMemRAMROMSelectedButton=un(qn(ne("svgicon"),Ft(an("inputcircle"))),Y("height:25px; width:25px; padding:0; align-items: center; rotate: 180deg")).render(),this.downloadFromMemRAMROMSelectedButton.addEventListener("click",this.editor.wrapHandler(r=>{this.downloadFromMemRAMROM(this.controlDivRAMROMSelect.value)})),this.uploadToMemRAMROMSelectedButton=un(qn(ne("svgicon"),Ft(an("outputcircle"))),Y("height:25px; width:25px; padding:0; align-items: center; rotate: 180deg")).render(),this.uploadToMemRAMROMSelectedButton.addEventListener("click",this.editor.wrapHandler(r=>{this.uploadToMemRAMROM(this.controlDivRAMROMSelect.value)})),this.controlDivCPUSelect=xi().render(),this.getCPUList(),this.controlDivCPUSelect.addEventListener("change",this.editor.wrapHandler(r=>{we(this.controlDivCPUSelect.options[this.controlDivCPUSelect.options.selectedIndex],Cr(""))})),this.controlDivCPUSelect.addEventListener("changeSelected",this.editor.wrapHandler(r=>{we(this.controlDivCPUSelect.options[this.controlDivCPUSelect.options.selectedIndex],Cr(""))})),this.addressModeButton=un(qn(ne("svgicon"),Ft(an("signpost"))),Y("height:25px; width:25px; padding:0; align-items: center; background-color: white")).render(),this.addressModeButton.addEventListener("click",this.editor.wrapHandler(r=>{this.toggleAddressingMode()})),this.openFromFileButton=un(qn(ne("svgicon"),Ft(an("open"))),Y("height:25px; width:25px; padding:0; align-items: center;")).render(),this.openFromFileButton.addEventListener("click",this.editor.wrapHandler(r=>{this.editor.runFileChooser("text/plain|image/png|application/json",i=>{this.tryLoadProgramFrom(i)})})),this.downloadToFileButton=un(qn(ne("svgicon"),Ft(an("download"))),Y("height:25px; width:25px; padding:0; align-items: center;")).render(),this.downloadToFileButton.addEventListener("click",this.editor.wrapHandler(r=>{this.saveProgramToFile()})),this.hideButton=un(qn(ne("svgicon"),Ft(an("close"))),Y("height:25px; width:25px; padding:0; align-items: center;")).render(),this.hideButton.addEventListener("click",this.editor.wrapHandler(r=>{we(n.html.assemblerEditor,Y("width: 125px; height:55px")),we(this.headerDiv,Y("display:none")),we(this.programDiv,Y("display:none"));let i=this.controlDiv.childNodes;for(let s of i)we(s,Y("display:none"));we(this.showButton,Y("height:25px; width:25px; padding:0; align-items: center;"))})),this.showButton=un(qn(ne("svgicon"),Ft(an("eye"))),Y("display:none")).render(),this.showButton.addEventListener("click",this.editor.wrapHandler(r=>{we(n.html.assemblerEditor,Y("width: 680px")),we(this.headerDiv,Y("position: absolute; left: 0; top: 60px; width: 100%; height: 30px;")),we(this.programDiv,Y("position: absolute; top: 90px; width: 670px; left:0; padding: 3px 5px; display: block; align-items: stretch;"));let i=this.controlDiv.childNodes;for(let s of i)we(s,Y("height:25px; width:25px; padding:0; align-items: center;"));we(this.controlDivRAMROMSelect,Y("height:20px; width:50px; padding:0; align-items: center;")),we(this.hideButton,Y("height:25px; width:25px; padding:0; align-items: center;")),we(this.showButton,Y("display:none"))})),this.controlDiv=W(ne("controlprogram"),Y("position: absolute; left: 0; top: 30px; width: 100%; height: 30px;"),this.undoButton,this.redoButton,this.controlDivRAMROMSelect,this.downloadFromMemRAMROMSelectedButton,this.uploadToMemRAMROMSelectedButton,this.controlDivCPUSelect,this.addressModeButton,this.openFromFileButton,this.downloadToFileButton,this.hideButton,this.showButton).render(),this.lineNumberHeaderDiv=W(Y("width: 50px; border-right: 1px black; text-align: center"),"#").render(),this.labelHeaderDiv=W(Y("width: 75px; border-right: 1px black;"),"# label").render(),this.labelOpCodeDiv=W(Y("width: 55px"),"OpCode").render(),this.labelOperandDiv=W(Y("width: 80px"),"Operand").render(),this.commentHeaderDiv=W(Y("width: 300px; border-right: 1px black;"),"# comment").render(),this.headerDiv=W(ne("headerprogram"),Y("position: absolute; left: 0; top: 60px; width: 100%; height: 30px;"),this.lineNumberHeaderDiv,this.labelHeaderDiv,this.labelOpCodeDiv,this.labelOperandDiv,this.commentHeaderDiv).render(),this.programOl=Xf(ne(""),rm("0"),nm("instructionList"),Y("position: relative; left: 0; top: 0px; width: 655px; height: 700px")).render(),this.programDiv=W(ne("program"),Y("position: absolute; top: 90px; width: 670px; left:0; padding: 3px 5px; display: block; align-items: stretch;"),this.programOl).render(),n.html.assemblerEditor.appendChild(this.titleDiv),n.html.assemblerEditor.appendChild(this.controlDiv),n.html.assemblerEditor.appendChild(this.headerDiv),n.html.assemblerEditor.appendChild(this.programDiv),n.html.assemblerEditor.addEventListener("instrAddr",this.editor.wrapHandler(r=>{console.log(r)})),this._dragSrcEl=this.editor.root.getElementById("instructionList"),this._program.push({label:"",opCode:0,operand:0,comment:""}),this.reDrawProgram()}toggleAddressingMode(){this._directAddressingMode=!this._directAddressingMode,this._directAddressingMode?we(this.addressModeButton,Y("height:25px; width:25px; padding:0; align-items: center; background-color: red")):we(this.addressModeButton,Y("height:25px; width:25px; padding:0; align-items: center; background-color: white"))}get undoRedoProgramState(){return{canUndoProgram:this.canUndoProgram(),canRedoProgram:this.canRedoProgram()}}canUndoProgram(){return this._undoProgramSnapshots.length>1}canRedoProgram(){return this._redoProgramSnapshots.length>0}doTakeProgramSnapshot(){for(this._undoProgramSnapshots.push(this._program);this._undoProgramSnapshots.length>Jb;)this._undoProgramSnapshots.shift();this._redoProgramSnapshots.length>0&&(this._redoProgramSnapshots=[]),this.fireUndoProgramStateChangedIfNeeded()}undoProgram(){if(!this.canUndoProgram()){console.log("Nothing to undo");return}let n=this._undoProgramSnapshots.pop(),e=this._undoProgramSnapshots[this._undoProgramSnapshots.length-1];this._redoProgramSnapshots.push(n),this._program=e,this.reDrawProgram(),this.fireUndoProgramStateChangedIfNeeded()}redoProgram(){if(!this.canRedoProgram()){console.log("Nothing to redo");return}let n=this._redoProgramSnapshots.pop();n!==void 0&&(this._undoProgramSnapshots.push(n),this._program=n,this.reDrawProgram()),this.fireUndoProgramStateChangedIfNeeded()}fireUndoProgramStateChangedIfNeeded(){let n=this.undoRedoProgramState;(this._lastSentProgramState===void 0||!ey(this._lastSentProgramState,n))&&(this.onProgramStateChanged(n),this._lastSentProgramState=n)}showMessage(n){var e;(e=this.editor._messageBar)==null||e.showMessage(n,2e3)}loadProgram(n){let e;if(!Ae(n))e=n;else try{e=Da(n)}catch(r){return console.error(r),"can't load this JSON - error \u201C"+r+`\u201D, length = ${n.length}, JSON:
`+n}return e}tryLoadProgramFrom(n){if(n.type==="text/plain"){let e=new FileReader;e.onload=()=>{var i;let r=(i=e.result)==null?void 0:i.toString();if(console.log(r),r!==void 0){let s=this.loadProgram(r),a=[];for(let u in s)a.push(s[u]);this._program=a,this.doTakeProgramSnapshot(),this.reDrawProgram()}},e.readAsText(n,"utf-8")}else this.showMessage(w.Messages.UnsupportedFileType.expand({type:n.type}))}saveProgramToFile(){this.generateBrutSourceCode();let n=JSON.stringify(this._program),e=new Blob([n],{type:"text/plain"}),r="programFrom_"+this.controlDivRAMROMSelect.value+"_.txt";(0,Q2.saveAs)(e,r)}getRAMROMList(){let n=0,e=this.controlDivRAMROMSelect.selectedIndex,r=this.controlDivRAMROMSelect.value;if(this.controlDivRAMROMSelect!=null&&(this.removeAllChildren(this.controlDivRAMROMSelect),this._allROMRAMsAsComponentsList=[],this._adequateROMRAMsList=[]),this._allROMRAMsAsComponentsList=[...this.editor.components.all()].filter(i=>i instanceof jn||i instanceof qi),this._allROMRAMsAsComponentsList.length>0){for(let i of this._allROMRAMsAsComponentsList)i.ref!=null&&i.value.mem[0].length==this._assemblerWordLength&&i.value.mem.length<=Cn(2,this._assemblerNumMaxAddressBits)&&(xt(i.ref,Mt(i.ref)).applyTo(this.controlDivRAMROMSelect),n+=1);n==0?xt("none",Mt("none"),wi).applyTo(this.controlDivRAMROMSelect):(this.controlDivRAMROMSelect.selectedIndex=e,this.controlDivRAMROMSelect.value!=r&&(this.controlDivRAMROMSelect.selectedIndex=-1))}else xt("none",Mt("none"),wi).applyTo(this.controlDivRAMROMSelect)}getCPUList(){let n=0,e=this.controlDivCPUSelect.selectedIndex,r=this.controlDivCPUSelect.value;if(this.controlDivCPUSelect!=null&&(this.removeAllChildren(this.controlDivCPUSelect),this._allCPUsAsComponentsList=[],this._CPUsList=[]),this._allCPUsAsComponentsList=[]=[...this.editor.components.all()].filter(i=>i instanceof ho),console.log(this._allCPUsAsComponentsList),this._allCPUsAsComponentsList.length>0){for(let i of this._allCPUsAsComponentsList)if(i.ref!=null){let s=i;this._CPUsList.push(s),this._CPUsList[this._CPUsList.length-1].CPUevent.subscribe(a=>{if(i.ref==r){let u=parseInt(a.split("+")[0].split(":")[0]),l=a.split("+")[0].split(":")[1],p=parseInt(a.split("+")[1].split(":")[0]),d=a.split("+")[1].split(":")[1],h=parseInt(a.split("+")[2].split(":")[0]),m=a.split("+")[2].split(":")[1],f=parseInt(a.split("+")[2].split(":")[0]),C=a.split("+")[2].split(":")[1],D=this.programOl.getElementsByClassName("line");for(let b=0;b<D.length;b++){let v=D[b];b==u?we(v,Y(`background-color: ${l}`)):b==p?we(v,Y(`background-color: ${d}`)):b==h?we(v,Y(`background-color: ${m}`)):b==f?we(v,Y(`background-color: ${C}`)):we(v,Y("background-color: rgb(221, 221, 221)"))}}}),xt(i.ref,Mt(i.ref)).applyTo(this.controlDivCPUSelect),n+=1}}n==0?xt("none",Mt("none"),wi).applyTo(this.controlDivCPUSelect):(this.controlDivCPUSelect.selectedIndex=e,this.controlDivCPUSelect.value!=r&&(this.controlDivCPUSelect.selectedIndex=-1))}downloadFromMemRAMROM(n){let e=[];if(this._allROMRAMsAsComponentsList!=null){let i=this._allROMRAMsAsComponentsList.find(s=>s.ref==n);if(i!=null){let s=i;e=this.contentRepr(i.value.mem)}else e=["00000000"]}let r=[];for(let i of e){let s="",a=parseInt(i.slice(0,4),2),u=parseInt(i.slice(4,8),2);r.push({label:s,opCode:a,operand:u,comment:""})}for(let i=0;i<r.length;i++){let s=r[i],a="",u=ar[s.opCode];if(oi.includes(u))if(this._directAddressingMode){if(i<16){let l=i;a="line "+l.toString(),r[l].label=a}}else if($r.includes(u)){let l=i-s.operand;l<1&&(l+=r.length),a="line "+l.toString(),r[l].label=a}else{let l=i+s.operand;l>r.length&&(l+=-r.length),a="line "+l.toString(),r[l].label=a}}this._program=Array.from(r),this.doTakeProgramSnapshot(),this.reDrawProgram()}reDrawProgram(){this.removeAllChildren(this.programOl);for(let n=0;n<this._program.length;n++)this.programOl.appendChild(this.makeLine()),this.updateLine(this.programOl.lastChild);this.generateBrutSourceCode(),this.computeLinesOperand(),this.generateBrutSourceCode()}uploadToMemRAMROM(n){if(this._program!=null&&this._allROMRAMsAsComponentsList!=null){let e=this._allROMRAMsAsComponentsList.find(i=>i.ref==n),r=0;if(e!=null&&(r=this.contentRepr(e.value.mem).length),r>=this._program.length){let i=[];for(let u of this._program){let l=this.createBinaryString(u.opCode,4)+this.createBinaryString(u.operand,4);i.push(l)}let s="00000000";for(let u=this._program.length-r;u>0;u--)i.push(s);let a=i.join(" ");e!=null&&e.doSetMem(jn.contentsFromString(a,8,r)),this.editor.recalcPropagateAndDrawIfNeeded()}else console.log("You must take a larger memory module")}}contentRepr(n){let e=[],r=n.length,i=n[0].length;for(let s=0;s<r;s++){let a=n[s],u=Jr(a);e.push(u)}return e}highlightLine(n){if(this._allROMRAMsAsComponentsList!=null){let e=this._allROMRAMsAsComponentsList.find(r=>r.ref==n);e!=null&&console.log(e.value)}}addLine(n,e){if(this.programOl.childElementCount<Cn(2,this._assemblerNumMaxAddressBits)){let r=-1;n!=null&&(r=this.getLineNumber(n));let i=this.makeLine();r<0?this.programOl.appendChild(i):e!=null&&(e?this.programOl.insertBefore(i,this.programOl.childNodes[r]):this.programOl.childNodes[r].nextSibling!=null?this.programOl.insertBefore(i,this.programOl.childNodes[r].nextSibling):this.programOl.appendChild(i)),this.generateBrutSourceCode(),this.computeLinesOperand(),this.generateBrutSourceCode(),this.doTakeProgramSnapshot()}}makeLine(){let n=Oo(ne("label"),Mt(""),pp("8")).render(),e=W(ne("labelDiv"),n).render(),r=xi(ne("opcode")).render();for(let D of this._opcodes)xt(ne("opcodevalue"),D,Mt(D)).applyTo(r);let i=W(ne("opCodeDiv"),r).render(),s=xi(ne("operand")).render();for(let D=0;D<16;D++)xt(ne("operandvalue"),D.toString(),Mt(D.toString())).applyTo(s);let a=W(ne("operandDiv"),s).render(),u=Oo(ne("comment"),Mt(""),pp("32")).render(),l=W(ne("commentDiv"),u).render(),p=un(qn(ne("svgicon"),Ft(an("trash"))),Y("height:25px; width:25px; padding:0; align-items: center;")).render(),d=un(qn(ne("svgicon"),Ft(an("arrowupward"))),Y("height:25px; width:25px; padding:0; align-items: center;")).render(),h=qn(ne("svgicon"),Ft(an("add")),Y("height:25px; width:25px; padding:0; align-items: center;")),m=un(qn(ne("svgicon"),Ft(an("arrowdownward"))),Y("height:25px; width:25px; padding:0; align-items: center;")).render(),f=W(ne("lineDiv"),e,i,a,l,p,d,h,m).render(),C=yi(ne("line"),Y("color: #ffffff;"),tm,f).render();return p.addEventListener("click",this.editor.wrapHandler(D=>{this.removeLine(C)})),d.addEventListener("click",this.editor.wrapHandler(D=>{this.addLine(C,!0)})),m.addEventListener("click",this.editor.wrapHandler(D=>{this.addLine(C,!1)})),n.addEventListener("input",this.editor.wrapHandler(D=>{this.handleLineChanged(C)})),r.addEventListener("change",this.editor.wrapHandler(D=>{this.handleLineChanged(C)})),r.addEventListener("changeSelected",this.editor.wrapHandler(D=>{this.handleLineChanged(C)})),s.addEventListener("change",this.editor.wrapHandler(D=>{this.handleLineChanged(C)})),s.addEventListener("changeSelected",this.editor.wrapHandler(D=>{this.handleLineChanged(C)})),C.addEventListener("click",this.editor.wrapHandler(D=>{we(C,Cr(""))})),C.addEventListener("dragstart",this.editor.wrapHandler(D=>{this.handleDragStart(D,C)})),C.addEventListener("dragend",this.editor.wrapHandler(D=>{this.handleDragEnd(D,C)})),C.addEventListener("dragover",this.editor.wrapHandler(D=>{this.handleDragOver(D,C)})),C.addEventListener("dragenter",this.editor.wrapHandler(D=>{this.handleDragEnter(D,C)})),C.addEventListener("dragleave",this.editor.wrapHandler(D=>{this.handleDragLeave(D,C)})),C.addEventListener("drop",this.editor.wrapHandler(D=>{this.handleDrop(D,C,n)})),C}handleLineChanged(n){let e=this.getLineNumber(n),r=n.getElementsByClassName("label")[0],i=n.getElementsByClassName("opcode")[0],s=n.getElementsByClassName("operand")[0],a=n.getElementsByClassName("comment")[0],u={label:r.value,opCode:i.options.selectedIndex,operand:s.options.selectedIndex,comment:a.value};if(u.label!=this._program[e].label){let l=this._program.map(p=>p.label);u.label==""?(this._program[e].label="",we(r,Y("color: #000000;"))):l.includes(u.label)?we(r,Y(`color: ${xs}; background-color : #f7d5d5`)):(we(r,Y("color: #000000;")),this._program[e].label=u.label,we(r,Mt(u.label))),this.generateBrutSourceCode(),this.computeLinesOperand(),this.generateBrutSourceCode(),this.doTakeProgramSnapshot()}if(u.opCode!=this._program[e].opCode){let l=ar[u.opCode],p=ar[this._program[e].opCode];if(oi.includes(l)&&(oi.includes(p)||(this._program[e].operand=0)),Dd.includes(l)&&(Dd.includes(p)||(this._program[e].operand=0)),$r.includes(l)&&($r.includes(p)||(this._program[e].operand=15)),!oi.includes(l)&&oi.includes(p)){this._program[e].operand=0,this.removeAllChildren(s);for(let h=0;h<16;h++)xt(h.toString(),Mt(h.toString())).applyTo(s)}this._program[e].opCode=u.opCode;let d=i.options.selectedIndex;we(i,_a(d.toString())),this.generateBrutSourceCode(),this.computeLinesOperand(),this.generateBrutSourceCode(),this.doTakeProgramSnapshot()}if(u.operand!=this._program[e].operand){this._program[e].operand=u.operand;let l=s.options.selectedIndex,p=ar[this._program[e].opCode];$r.includes(p)&&(this._directAddressingMode||(l=Cn(this._assemblerOperandLength,2)-1-l)),we(s,_a(l.toString())),this.generateBrutSourceCode(),this.computeLinesOperand(),this.generateBrutSourceCode(),this.doTakeProgramSnapshot()}}updateLine(n){let e=this.getLineNumber(n),r=this._program[e].label,i=n.getElementsByClassName("label")[0];we(i,Mt(r));let s=this._program[e].opCode,a=n.getElementsByClassName("opcode")[0],u=a.getElementsByClassName("opcodevalue");for(let D of u)D.removeAttribute("selected");let l=u[s];we(a,_a(s.toString())),we(l,Cr(""));let p=ar[s],d=this._program[e].operand,h="";oi.includes(p)&&(this._directAddressingMode?h=this._program[d].label:$r.includes(p)?h=this._program[e-d].label:h=this._program[e+d].label),$r.includes(p)&&(this._directAddressingMode?d=d:d=Cn(this._assemblerOperandLength,2)-1-d);let m=n.getElementsByClassName("operand")[0],f=m.getElementsByClassName("operandvalue");for(let D of f)D.removeAttribute("selected");let C=f[d];we(m,_a(d.toString())),we(C,Mt(h)),we(C,Cr(""))}removeLine(n){n.parentNode!=null&&n.parentNode.childElementCount>1&&n.parentNode.removeChild(n),this.generateBrutSourceCode(),this.computeLinesOperand(),this.generateBrutSourceCode(),this.doTakeProgramSnapshot()}getLineNumber(n){let e=-1;return n!=null&&n.parentElement!=null&&(e=[...n.parentElement.children].indexOf(n)),e}handleLabelInputChange(n){}handleOpCodeSelectChange(n){}handleOperandSelectChange(n){}handleDragStart(n,e){setTimeout(()=>e.classList.add("dragging"),50),e.style.opacity="0.2",this._dragSrcEl=e,n.stopPropagation()}handleDragEnd(n,e){e.style.opacity="1",this.programOl.querySelectorAll(".line").forEach(r=>{let i=r;i.classList.remove("active"),i.classList.remove("dragging")})}handleDragOver(n,e){return n.preventDefault(),!1}handleDragEnter(n,e){e.classList.add("active")}handleDragLeave(n,e){e.classList.remove("active")}handleDrop(n,e,r){if(n.stopPropagation(),e!=this._dragSrcEl){let i=0,s=0;this.programOl.querySelectorAll(".line").forEach(a=>{let u=a;e==u?i=e.value:s=u.value}),e.parentNode!=null&&this._dragSrcEl!=null&&(i<s?e.parentNode.insertBefore(this._dragSrcEl,e.nextSibling):e.parentNode.insertBefore(this._dragSrcEl,e))}return this.generateBrutSourceCode(),this.computeLinesOperand(),this.generateBrutSourceCode(),this.doTakeProgramSnapshot(),!1}generateBrutSourceCode(){if(this._program=[],this.programOl.querySelectorAll(".line")!=null){let n=this.programOl.querySelectorAll(".line");for(let e=0;e<n.length;e++){let r=n[e],i=r.querySelector(".label"),s=r.querySelector(".opcode"),a=r.querySelector(".operand"),u=r.querySelector(".comment"),l=ar[s.options.selectedIndex],p={label:i.value,opCode:s.options.selectedIndex,operand:$r.includes(l)?Cn(this._assemblerOperandLength,2)-1-a.options.selectedIndex:fc.includes(l)?0:a.options.selectedIndex,comment:u.value};this._directAddressingMode&&(p.operand=$r.includes(l)?a.options.selectedIndex:fc.includes(l)?0:a.options.selectedIndex),this._program.push(p)}}}removeAllChildren(n){if(n.firstChild!=null)for(;n.firstChild&&n.lastChild!=null;)n.removeChild(n.lastChild)}computeLinesOperand(){if(this.programOl.getElementsByClassName("line")!=null){let n=this.programOl.getElementsByClassName("line");for(let e=0;e<n.length;e++){let r=n[e];this.computeLineOperand(r)}}}computeLineOperand(n){let e=this.getLineNumber(n),r=this._program[e].label,i=n.getElementsByClassName("label")[0],s=this._program[e].opCode,a=n.getElementsByClassName("opcode")[0],u=ar[s],l=this._program[e].operand,p=n.getElementsByClassName("operand")[0];if(we(p,Y("visibility: visible")),this._directAddressingMode)if(oi.includes(u)){let d="";p.selectedOptions.length==1&&(d=p.selectedOptions[0].value),this.removeAllChildren(p);let h=this._program.length<16?this._program.length:16;for(let C=0;C<h;C++)if(e>=0&&e<h||e>15)if(this._program[C].label==""){let D="label "+C.toString();xt(ne("operandvalue"),D,Mt(D),wi).applyTo(p)}else{let D=this._program[C].label;xt(ne("operandvalue"),D,Mt(D),D==d?Cr(""):"").applyTo(p)}else xt(ne("operandvalue"),Fu).applyTo(p);let m=p.querySelectorAll('[hidden = "hidden"]').length,f=p.querySelectorAll('[disabled = "true"]').length;16-m-f==0||p.selectedIndex==0?we(p,Y("background-color : #f7d5d5")):we(p,Y("background-color : #ffffff"))}else fc.includes(u)&&we(p,Y("visibility: hidden"));else if(oi.includes(u)){let d="";if(p.selectedOptions.length==1&&(d=p.selectedOptions[0].value),this.removeAllChildren(p),$r.includes(u)){if(d=="")for(let f=Cn(this._assemblerOperandLength,2)-1;f>-1;f--)e-f>=0&&this._program[e-f].label!=""&&(d=this._program[e-f].label);for(let f=Cn(this._assemblerOperandLength,2)-1;f>-1;f--)if(e-f>=0)if(this._program[e-f].label==""){let C="label "+(e-f).toString();xt(ne("operandvalue"),C,Mt(C),wi).applyTo(p)}else{let C=this._program[e-f].label;xt(ne("operandvalue"),C,Mt(C),C==d?Cr(""):"").applyTo(p)}else xt(ne("operandvalue"),Fu).applyTo(p)}else for(let f=0;f<Cn(this._assemblerOperandLength,2);f++)if(e+f<this._program.length)if(this._program[e+f].label==""){let C="label "+(e+f).toString();xt(ne("operandvalue"),C,Mt(C),wi).applyTo(p)}else{let C=this._program[e+f].label;xt(ne("operandvalue"),C,Mt(C),C==d?Cr(""):"").applyTo(p)}else xt(ne("operandvalue"),Fu).applyTo(p);let h=p.querySelectorAll('[hidden = "hidden"]').length,m=p.querySelectorAll('[disabled = "true"]').length;16-h-m==0||p.selectedIndex==0?we(p,Y("background-color : #f7d5d5")):we(p,Y("background-color : #ffffff"))}else fc.includes(u)&&we(p,Y("visibility: hidden"))}createBinaryString(n,e){let r=[],i=n;for(let a=0;a<e;a++)r.push(i%2),i>>=1;return r.reverse().join("")}};c(uu,"AssemblerEditor");var lu=class{constructor(n){this._currentMouseOverLine=null;this._currentMouseOverPopper=null;this._startHoverTimeoutHandle=null;this._startDragTimeoutHandle=null;this.currentLineSelection=void 0;this.registerAssemblerEditorListenersOn=c(n=>{let e=this.editor},"registerAssemblerEditorListenersOn");this.editor=n}get currentMouseOverLine(){return this._currentMouseOverLine}setCurrentMouseOverLine(n){n!==this._currentMouseOverLine&&(this._currentMouseOverLine=n,n!==null&&(this._startHoverTimeoutHandle=setTimeout(()=>{this._startHoverTimeoutHandle=null},1200)))}handleDragStart(n,e){e.style.opacity="0.4",e.style.setProperty("backgroundColor","red")}handleDragEnd(n,e){e.style.opacity="1"}testMouseOver(n,e){e.style.setProperty("backgroundColor","red"),e.style.opacity="0",e.style.backgroundColor="red"}};c(lu,"AssemblerEditorEventManager");function ey(o,n){return o.canUndoProgram===n.canUndoProgram&&o.canRedoProgram===n.canRedoProgram}c(ey,"areProgramStatesEqual");var dr=(s=>(s[s.STATIC=0]="STATIC",s[s.TRYOUT=1]="TRYOUT",s[s.CONNECT=2]="CONNECT",s[s.DESIGN=3]="DESIGN",s[s.FULL=4]="FULL",s))(dr||{}),mc=4,cu=3,ty=3,ot={lang:"lang",singleton:"singleton",mode:"mode",hidereset:"hidereset",name:"name",showonly:"showonly",showgatetypes:"showgatetypes",showdisconnectedpins:"showdisconnectedpins",showtooltips:"tooltips",src:"src",data:"data"},Cd={name:void 0,showOnly:void 0,initParams:void 0,showGateTypes:!1,showDisconnectedPins:!1,wireStyle:ln.auto,animateWires:!1,hideWireColors:!1,hideInputColors:!1,hideOutputColors:!1,hideMemoryContent:!1,hideTooltips:!1,groupParallelWires:!1,propagationDelay:100,allowPausePropagation:!1,zoom:100},ny=Pt.withProps()({edit:{cursor:null},move:{cursor:"move"},delete:{cursor:"not-allowed"}}),dn=class extends HTMLElement{constructor(){super();this.factory=new Qa(this);this.eventMgr=new iu(this);this.timeline=new Ka(this);this.assemblerEventMgr=new lu(this);this.editTools={moveMgr:new ja(this),undoMgr:new au(this),redrawMgr:new Va,setDirty:this.setDirty.bind(this),setToolCursor:this.setToolCursor.bind(this)};this.components=new Li;this.nodeMgr=new Vi;this.wireMgr=new Ii(this);this.recalcMgr=new Hi;this._ifEditing=this.editTools;this._isEmbedded=!1;this._isSingleton=!1;this._maxInstanceMode=cu;this._isDirty=!1;this._mode=ty;this._initialData=void 0;this._options=L({},Cd);this._hideResetButton=!1;this._menu=void 0;this._topBar=void 0;this._messageBar=void 0;this._toolCursor=null;this._highlightedItems=void 0;this._nextAnimationFrameHandle=null;this._assemblerEditor=void 0;this._editorRoot=this;this.optionsHtml=void 0;this.userdata=void 0;this._baseDrawingScale=1;this._actualZoomFactor=1;this.mouseX=-1e3;this.mouseY=-1e3;this.root=this.attachShadow({mode:"open"}),this.root.appendChild(window.Logic.template.content.cloneNode(!0));let e={rootDiv:this.elemWithId("logicEditorRoot"),centerCol:this.elemWithId("centerCol"),canvasContainer:this.elemWithId("canvas-sim"),mainCanvas:this.elemWithId("mainCanvas"),leftToolbar:this.elemWithId("leftToolbar"),rightToolbarContainer:this.elemWithId("rightToolbarContainer"),rightResetButton:this.elemWithId("rightResetButton"),tooltipElem:this.elemWithId("tooltip"),tooltipContents:this.elemWithId("tooltipContents"),mainContextMenu:this.elemWithId("mainContextMenu"),optionsZone:this.elemWithId("optionsZone"),fileChooser:this.elemWithId("fileChooser"),embedDialog:this.elemWithId("embedDialog"),embedUrl:this.elemWithId("embedUrl"),embedIframe:this.elemWithId("embedIframe"),embedWebcomp:this.elemWithId("embedWebcomp"),embedMarkdown:this.elemWithId("embedMarkdown"),assemblerEditor:this.elemWithId("assemblerEditor")};this.html=e,Hd.registerDialog(e.embedDialog)}static get allConnectedEditors(){return dn._allConnectedEditors}isMainEditor(){return!0}get editor(){return this}get ifEditing(){return this._ifEditing}stopEditingThis(){this._ifEditing=void 0}startEditingThis(e){this._ifEditing=e}get editorRoot(){return this._editorRoot}elemWithId(e){let r=this.root.querySelector(`#${e}`);if(r===null&&(r=document.querySelector(`#${e}`),r!==null&&console.log(`WARNING found elem with id ${e} in document rather than in shadow root`)),r===null)throw console.log("root",this.root),new Error(`Could not find element with id '${e}'`);return r}static get observedAttributes(){return[]}get mode(){return this._mode}get actualZoomFactor(){return this._actualZoomFactor}get isSingleton(){return this._isSingleton}get options(){return this._options}get documentDisplayName(){var e;return(e=this._options.name)!=null?e:w.Settings.DefaultFileName}setPartialOptions(e){var s,a;let r=L(L({},Cd),e);this._isSingleton&&(r.showOnly=this._options.showOnly),this._options=r;let i;(i=this.optionsHtml)!==void 0&&(i.animateWiresCheckbox.checked=r.animateWires,i.hideWireColorsCheckbox.checked=r.hideWireColors,i.hideInputColorsCheckbox.checked=r.hideInputColors,i.hideOutputColorsCheckbox.checked=r.hideOutputColors,i.hideMemoryContentCheckbox.checked=r.hideMemoryContent,i.showGateTypesCheckbox.checked=r.showGateTypes,i.wireStylePopup.value=r.wireStyle,i.showDisconnectedPinsCheckbox.checked=r.showDisconnectedPins,i.hideTooltipsCheckbox.checked=r.hideTooltips,i.groupParallelWiresCheckbox.checked=r.groupParallelWires,i.propagationDelayField.valueAsNumber=r.propagationDelay,this.setWindowTitleFrom(r.name),(s=this._topBar)==null||s.setCircuitName(this.editor.options.name),(a=this._topBar)==null||a.setZoomLevel(r.zoom),i.showUserDataLinkContainer.style.display=this.userdata!==void 0?"initial":"none"),this._actualZoomFactor=Ep(r.zoom),this.editTools.redrawMgr.addReason("options changed",null)}setWindowTitleFrom(e){if(!this._isSingleton)return;let r="Logic";e===void 0?document.title=r:document.title=`${e} \u2013 ${r}`}nonDefaultOptions(){let e={},r=!1;for(let[i,s]of Object.entries(this._options)){let a=i;s!==Cd[a]&&(e[a]=s,r=!0)}return r?e:void 0}runFileChooser(e,r){let i=this.html.fileChooser;i.setAttribute("accept",e),i.addEventListener("change",()=>{let s=this.html.fileChooser.files;s!==null&&s.length>0&&r(s[0])},{once:!0}),i.click()}setToolCursor(e){this._toolCursor=e}setCanvasSize(){var u;let{canvasContainer:e,mainCanvas:r}=this.html;r.style.setProperty("width","0"),r.style.setProperty("height","0");let i=e.clientWidth,s=e.clientHeight,a=(u=window.devicePixelRatio)!=null?u:1;r.setAttribute("width",String(i*a)),r.setAttribute("height",String(s*a)),r.style.setProperty("width",i+"px"),r.style.setProperty("height",s+"px"),this._baseDrawingScale=a}connectedCallback(){dn._allConnectedEditors.length===0&&this.setupLang(),dn._allConnectedEditors.push(this),this.setup()}disconnectedCallback(){let e=dn._allConnectedEditors;e.splice(e.indexOf(this),1)}setupLang(){var a,u,l,p;let e=c(()=>{var h,m;let d=(m=(h=navigator.languages)==null?void 0:h[0])!=null?m:navigator.language;if(d.length>2)return d.substring(0,2);if(d.length===2)return d},"getNavigatorLanguage"),r=c(()=>localStorage.getItem(ot.lang),"getSavedLang"),i=((p=(l=(u=(a=Jc(ot.lang))!=null?a:this.getAttribute(ot.lang))!=null?u:r())!=null?l:e())!=null?p:Ea).toLowerCase(),s=om(i)?i:Ea;im(s)}setup(){var le;let e=this.html.rootDiv,r=this.getAttribute("style");r!==null&&e.setAttribute("style",e.getAttribute("style")+r),this._isEmbedded=xh();let i=this.getAttribute(ot.singleton);if(this._isSingleton=!this._isEmbedded&&i!==null&&!Eu(i),this._maxInstanceMode=this._isSingleton&&!this._isEmbedded?mc:cu,this._isSingleton||this._isEmbedded){let X=c(Ce=>{let _e=Jc(Ce);_e!==void 0&&this.setAttribute(Ce,_e)},"transferUrlParamToAttribute");for(let Ce of[ot.mode,ot.showonly,ot.showgatetypes,ot.showdisconnectedpins,ot.showtooltips,ot.data,ot.src,ot.hidereset])X(Ce);let J="user";new URL(window.location.href).searchParams.forEach((Ce,_e)=>{if(_e.startsWith(J))if(_e=_e.substring(J.length),_e.startsWith(".")&&(_e=_e.substring(1)),_e.length===0)this.userdata=Ce;else if(_e=_e[0].toLowerCase()+_e.substring(1),typeof this.userdata!="object"&&(this.userdata={}),_e in this.userdata){let it=this.userdata[_e];me(it)?it.push(Ce):this.userdata[_e]=[it,Ce]}else this.userdata[_e]=Ce}),this.userdata!==void 0&&console.log("Custom user data: ",this.userdata)}if(this._isSingleton){let X=window.matchMedia("(prefers-color-scheme: dark)");X.onchange=()=>{Ri(X.matches,!1)},Ri(X.matches,!0),window.JSON5=vd.default,window.Logic.singleton=this,window.load=this.loadCircuitOrLibrary.bind(this),window.save=this.save.bind(this),window.highlight=this.highlight.bind(this),window.logicalTime=()=>this.timeline.logicalTime(),this.html.canvasContainer.appendChild(W(Y("user-select: none; position: absolute; bottom: 0; right: 0; padding: 5px 3px 2px 5px; color: rgba(128,128,128,0.2); border-radius: 10px 0 0 0; font-size: 69%; font-style: italic;"),w.Messages.DevelopedBy+" ",bi(Y("color: inherit"),up("https://github.com/jppellet/Logic-Circuit-Simulator"),lp("_blank"),"Jean-Philippe Pellet"),", ",bi(Y("color: inherit"),up("https://www.hepl.ch/accueil/formation/unites-enseignement-et-recherche/medias-usages-numeriques-et-didactique-de-linformatique.html"),lp("_blank"),"HEP Vaud")).render()),window.onbeforeunload=J=>{this._isSingleton&&this._isDirty&&this.mode>=2&&(J.preventDefault(),J.returnValue=w.Messages.ReallyCloseWindow)},this.focus()}let s=this.getAttribute(ot.mode);s!==null&&(s=s.toUpperCase())in dr&&(this._maxInstanceMode=dr[s]);let a=this.getAttribute(ot.showonly);a!==null&&(this._options.showOnly=a.toLowerCase().split(/[, +]+/).filter(X=>X.trim()));let u=this.getAttribute(ot.showgatetypes);u!==null&&(this._options.showGateTypes=Zc(u));let l=this.getAttribute(ot.showdisconnectedpins);l!==null&&(this._options.showDisconnectedPins=Zc(l));let p=this.getAttribute(ot.showtooltips);p!==null&&(this._options.hideTooltips=!Eu(p)),this._hideResetButton=this.getAttribute(ot.hidereset)!==null&&!Eu(this.getAttribute(ot.hidereset));let d;if((d=this.getAttribute(ot.data))!==null)this._initialData={_type:"compressed",str:d};else if((d=this.getAttribute(ot.src))!==null)this._initialData={_type:"url",url:d};else{let X=c(()=>{let J=this.findLightDOMChild("script");return J!==null?(this._initialData={_type:"json",json:J.innerHTML},J.remove(),this.tryLoadCircuitFromData(),this.doRedraw(),!0):!1},"tryLoadFromLightDOM");setTimeout(()=>{X()||setTimeout(()=>{X()},100)})}let h=c((X,J)=>{let Te=this.elemWithId(X),[Ce,_e]=Ae(J)?[J,void 0]:J;Te.insertAdjacentText("beforeend",Ce),_e!==void 0&&Te.setAttribute("title",_e)},"setCaption"),m=w.Dialogs.Share;h("settingsTitle",w.Settings.Settings),h("shareDialogTitle",m.title),h("shareDialogUrl",m.URL),h("shareDialogIframe",m.EmbedInIframe),h("shareDialogWebComp",m.EmbedWithWebComp),h("shareDialogMarkdown",m.EmbedInMarkdown),h("shareDialogClose",w.Dialogs.Generic.Close),this._topBar=new Za(this),this._menu=new $a(this.html.leftToolbar,this._options.showOnly),this._messageBar=new Xa(this),this._assemblerEditor=new uu(this);let f=this.html.leftToolbar.querySelector("button.sim-component-button[data-type=rect]");if(f===null?(console.log("ERROR: Could not find group button"),this._options.showOnly===void 0&&console.log("ERROR: Could not find group button")):f.addEventListener("mousedown",this.wrapHandler(X=>{var Te;let J=((Te=this.eventMgr.currentSelection)==null?void 0:Te.previouslySelectedElements)||new Set;if(J.size!==0){X.preventDefault(),X.stopImmediatePropagation();let Ce=ht.make(this);Ce.setSpawned(),Ce instanceof Ys?Ce.wrapContents(J):console.log("ERROR: created component is not a LabelRect")}})),this.eventMgr.registerCanvasListenersOn(this.html.mainCanvas),this.eventMgr.registerButtonListenersOn(this._menu.allFixedButtons(),!1),this.html.rightResetButton.addEventListener("click",this.wrapHandler(this.resetCircuit.bind(this))),this._maxInstanceMode>=4){let X=this.elemWithId("modeChangeMenu");W(ne("btn-group-vertical"),W(Y("text-align: center; width: 100%; font-weight: bold; font-size: 80%; color: #666; padding: 2px;"),"Mode"),...[4,3,2,1,0].map(J=>{let[[Te,Ce],_e]=(()=>{switch(J){case 4:{let jt=W(ne("sim-mode-link"),Zt(w.Settings.Settings),wa("settings")).render();return jt.addEventListener("click",()=>{_h(this.html.optionsZone)}),[w.Modes.FULL,jt]}case 3:return[w.Modes.DESIGN,Lt];case 2:return[w.Modes.CONNECT,Lt];case 1:return[w.Modes.TRYOUT,Lt];case 0:return[w.Modes.STATIC,Lt]}})(),it=W(ne("sim-mode-link"),Zt("Copie un lien vers ce contenu dans ce mode"),wa("link")).render();it.addEventListener("click",jt=>{this.shareSheetForMode(J)});let hn=W(ne("btn btn-sm btn-outline-light sim-toolbar-button-right sim-mode-tool"),Y("display: flex; justify-content: space-between; align-items: center"),Nt("mode")(dr[J]),Zt(Ce),Te,_e,it).render();return hn.addEventListener("click",()=>this.setMode(J,!0)),hn})).applyTo(X),Ge(X,!0)}let D=c(X=>{let J=X.target;J.focus(),J.select(),X.preventDefault()},"selectAllListener");for(let X of[this.html.embedUrl,this.html.embedIframe,this.html.embedWebcomp,this.html.embedMarkdown])X.addEventListener("pointerdown",D),X.addEventListener("focus",D);this.setCurrentMouseAction("edit"),this.timeline.reset();let b=this.html.optionsZone;(le=b.querySelector("#closeOptions"))==null||le.addEventListener("click",()=>{Ge(b,!1)});let v=c((X,[J,Te],Ce=!1)=>{let _e=Oo(no("checkbox")).render();this.options[X]===!0&&(_e.checked=!0),_e.addEventListener("change",this.wrapHandler(()=>{this._options[X]=_e.checked,this.editTools.redrawMgr.addReason("option changed: "+X,null)}));let it=W(Y("height: 20px"),em(_e,Rt(Y("margin-left: 4px"),Rn("title",Te),J))).render();return b.appendChild(it),Ce&&Ge(it,!1),_e},"makeCheckbox"),_=v("animateWires",w.Settings.animateWires),M=v("hideWireColors",w.Settings.hideWireColors),A=v("hideInputColors",w.Settings.hideInputColors),E=v("hideOutputColors",w.Settings.hideOutputColors),B=v("hideMemoryContent",w.Settings.hideMemoryContent),I=v("showGateTypes",w.Settings.showGateTypes),k=v("showDisconnectedPins",w.Settings.showDisconnectedPins),S=v("hideTooltips",w.Settings.hideTooltips),H=v("groupParallelWires",w.Settings.groupParallelWires,!0),F=xi(xt(Rn("value",ln.auto),w.Settings.WireStyleAuto),xt(Rn("value",ln.straight),w.Settings.WireStyleLine),xt(Rn("value",ln.bezier),w.Settings.WireStyleCurve)).render();F.addEventListener("change",this.wrapHandler(()=>{this._options.wireStyle=F.value,this.editTools.redrawMgr.addReason("wire style changed",null)})),b.appendChild(W(Y("height: 20px"),w.Settings.wireStyle+" ",F).render());let q=Oo(no("number"),Y("margin: 0 4px; width: 4em"),Rn("min","0"),Rn("step","50"),Rn("value",String(this.options.propagationDelay)),Rn("title",w.Settings.propagationDelay)).render();q.addEventListener("change",()=>{this._options.propagationDelay=q.valueAsNumber}),b.appendChild(W(Y("height: 20px"),w.Settings.propagationDelayField[0],q,w.Settings.propagationDelayField[1]).render());let te=bi(w.Settings.showUserDataLink[1],Y("text-decoration: underline; cursor: pointer")).render();te.addEventListener("click",()=>{alert(w.Settings.userDataHeader+`

`+vd.default.stringify(this.userdata,void 0,4))});let se=W(Y("margin-top: 5px; display: none"),w.Settings.showUserDataLink[0],te).render();b.appendChild(se),this.optionsHtml={animateWiresCheckbox:_,hideWireColorsCheckbox:M,hideInputColorsCheckbox:A,hideOutputColorsCheckbox:E,hideMemoryContentCheckbox:B,wireStylePopup:F,showGateTypesCheckbox:I,showDisconnectedPinsCheckbox:k,hideTooltipsCheckbox:S,groupParallelWiresCheckbox:H,propagationDelayField:q,showUserDataLinkContainer:se},this.setCanvasSize(),wh(this.html.canvasContainer,()=>{this.redraw()}),this.tryLoadCircuitFromData(),this.setModeFromString(this.getAttribute(ot.mode)),this.setCanvasSize(),dn.installGlobalListeners(),this.doRedraw()}findLightDOMChild(e){let r=e.toUpperCase();for(let i of this.children)if(i.tagName===r)return i;return null}static installGlobalListeners(){if(dn._globalListenersInstalled)return;window.decompress=pu.decompressFromEncodedURIComponent,window.decodeOld=dn.decodeFromURLOld,window.formatString=Eh,window.gallery=q2,window.addEventListener("mousemove",i=>{for(let s of dn._allConnectedEditors){let a=s.html.canvasContainer;if(a!==void 0){let u=a.getBoundingClientRect();s.mouseX=i.clientX-u.left,s.mouseY=i.clientY-u.top}}},!0),window.addEventListener("resize",()=>{for(let i of dn._allConnectedEditors)i.html.canvasContainer!==void 0&&i.wrapHandler(()=>{i.setCanvasSize(),i.editTools.redrawMgr.addReason("window resized",null)})();r()});let e,r=c(()=>{e!==void 0&&(e.onchange=null);let i=`(resolution: ${window.devicePixelRatio}dppx)`;e=window.matchMedia(i),e.onchange=()=>{for(let s of dn._allConnectedEditors)s.wrapHandler(()=>{s.setCanvasSize(),s.editTools.redrawMgr.addReason("devicePixelRatio changed",null)})();r()}},"registerPixelRatioListener");r(),document.body.addEventListener("themechanged",i=>{var a;let s=!!((a=i.detail)!=null&&a.is_dark_theme);Ri(s,!1)}),dn._globalListenersInstalled=!0}setMode(e,r){this.wrapHandler(()=>{var d;let i=dr[e];e>this._maxInstanceMode&&(e=this._maxInstanceMode,console.log(`Cannot switch to mode ${i} because we are capped by ${dr[this._maxInstanceMode]}`),i=dr[e]),this._mode=e,this.editTools.redrawMgr.addReason("mode changed",null),this.root.querySelectorAll(".sim-mode-tool").forEach(h=>{h.getAttribute("mode")===i?h.classList.add("active"):h.classList.remove("active")}),e<2&&this.setCurrentMouseAction("edit");let s=e>=3?"show":this._maxInstanceMode===4?"inactive":"hide",a=s==="show",u=e>=1&&!this._hideResetButton,l=u&&!a,p=e<4;(d=this._topBar)==null||d.setButtonStateFromMode({showComponentsAndEditControls:s,showReset:u},e),Ge(this.html.rightToolbarContainer,l),p&&Ge(this.html.optionsZone,!1),Ru(this.html.leftToolbar,s),r&&this.focus()})()}setModeFromString(e){let r=this._maxInstanceMode;e!==null&&(e=e.toUpperCase())in dr&&(r=dr[e]),this.setMode(r,!1)}setCircuitName(e){var r;this._options.name=e===void 0||e.length===0?void 0:e,(r=this._topBar)==null||r.setCircuitName(e),this.setWindowTitleFrom(this._options.name)}setZoomLevel(e){this._options.zoom=e,this._actualZoomFactor=Ep(e),this.editTools.redrawMgr.addReason("zoom level changed",null)}updateCustomComponentButtons(){var e;this._menu!==void 0&&(this._menu.updateCustomComponentButtons(this.factory.customDefs()),this.eventMgr.registerButtonListenersOn(this._menu.allCustomButtons(),!0)),(e=this._topBar)==null||e.updateCustomComponentCaption()}focus(){this.html.mainCanvas.focus()}tryLoadFrom(e){if(e.type==="application/json"||e.type==="text/plain"){let r=new FileReader;r.onload=()=>{var s;let i=(s=r.result)==null?void 0:s.toString();i!==void 0&&this.loadCircuitOrLibrary(i)},r.readAsText(e,"utf-8")}else if(e.type==="image/png"){let r=new FileReader;r.onload=()=>{var s;let i=r.result;if(i instanceof ArrayBuffer){let a=new Uint8Array(i),l=(s=ii.readMetadata(a).tEXt)==null?void 0:s.Description;Ae(l)&&(this._initialData={_type:"compressed",str:l},this.wrapHandler(()=>{this.tryLoadCircuitFromData()})())}},r.readAsArrayBuffer(e)}else if(e.type==="image/svg+xml"){let r=new FileReader;r.onload=i=>{var a,u;let s=(u=(a=i.target)==null?void 0:a.result)==null?void 0:u.toString();if(s!==void 0){let l=document.createElement("div");l.innerHTML=s;let p=l.querySelector("svg metadata"),d=p==null?void 0:p.textContent;l.remove(),d!=null&&this.loadCircuitOrLibrary(d)}},r.readAsText(e,"utf-8")}else this.showMessage(w.Messages.UnsupportedFileType.expand({type:e.type}))}tryLoadCircuitFromData(){var r;if(this._initialData===void 0)return;if(this._initialData._type==="url"){let i=this._initialData.url;fetch(i,{mode:"cors"}).then(s=>s.text()).then(s=>{console.log(`Loaded initial data from URL '${i}'`),this._initialData={_type:"json",json:s},this.tryLoadCircuitFromData()});return}let e;if(this._initialData._type==="json")try{e=ut.loadCircuitOrLibrary(this,this._initialData.json)}catch(i){e=String(i)+" (JSON)"}else{let i;try{if(i=pu.decompressFromEncodedURIComponent(this._initialData.str),this._initialData.str.length!==0&&((r=i==null?void 0:i.length)!=null?r:0)===0)throw new Error("zero decoded length")}catch(s){e=String(s)+" (LZString)";try{i=dn.decodeFromURLOld(this._initialData.str),e=void 0}catch(a){}}e===void 0&&Ae(i)&&(e=ut.loadCircuitOrLibrary(this,i),e===void 0&&(this._initialData={_type:"json",json:i}))}e!==void 0?console.log("ERROR could not not load initial data: "+e):this.clearDirty()}resetCircuit(){this.editor.tryLoadCircuitFromData()}tryCloseCustomComponentEditor(){let e=this.editor.editorRoot;if(!(e instanceof Pn))return!1;let r=e.customDef,i=this.editor.factory.tryModifyCustomComponent(r,e);if(i!==void 0)return i.length!==0&&window.alert(i),!0;for(let s of this.factory.getCustomComponentTypesWhichUse(r.type))this.components.updateCustomComponents(s);return this.setEditorRoot(this.editor),this.editTools.undoMgr.takeSnapshot(),!0}loadCircuitOrLibrary(e){this.wrapHandler(r=>ut.loadCircuitOrLibrary(this,r))(e)}setDirty(e){var r;this.mode>=2&&(this._isDirty=!0,(r=this._topBar)==null||r.setDirty(!0))}clearDirty(){var e;this._isDirty=!1,(e=this._topBar)==null||e.setDirty(!1)}setDark(e){this.html.rootDiv.classList.toggle("dark",e)}setEditorRoot(e){var s,a;if(e===this._editorRoot)return;this._editorRoot!==void 0&&this._editorRoot.stopEditingThis(),this._editorRoot=e,e.startEditingThis(this.editTools);let[r,i]=e instanceof Pn?[e,this.factory.getCustomComponentTypesWhichUse(e.customDef.type)]:[void 0,[]];(s=this._menu)==null||s.setCustomComponentsHidden(i),(a=this._topBar)==null||a.setEditingCustomComponent(r==null?void 0:r.customDef),this._highlightedItems=void 0,this.eventMgr.currentSelection=void 0,this.eventMgr.clearPopperIfNecessary(),this.eventMgr.updateMouseOver([this.mouseX,this.mouseY],!1),this.editTools.moveMgr.clear(),this.editTools.redrawMgr.addReason("editor context changed",null),this.focus()}setCurrentMouseAction(e){var r;this.setToolCursor(ny.props[e].cursor),(r=this._topBar)==null||r.setActiveTool(e),this.eventMgr.setHandlersFor(e),this.editTools.redrawMgr.addReason("mouse action changed",null)}updateCursor(e){var i,s,a;let r=this.editTools.moveMgr.areDrawablesMoving()?"grabbing":(a=(s=this._toolCursor)!=null?s:(i=this.eventMgr.currentMouseOverComp)==null?void 0:i.cursorWhenMouseover(e))!=null?a:"default";this.html.canvasContainer.style.cursor=r}showMessage(e){var r;(r=this._messageBar)==null||r.showMessage(e,2e3)}lengthOfPath(e){let r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttributeNS(null,"d",e),r.getTotalLength()}offsetXYForContextMenu(e,r=!1){let i=this.html.mainCanvas,s,a;if("offsetX"in e&&e.offsetX===0&&e.offsetY===0&&e.target===i){let u=i.getBoundingClientRect();s=e.clientX-u.x,a=e.clientY-u.y}else[s,a]=this.offsetXY(e);return r&&(s=Math.round(s/z)*z,a=Math.round(a/z)*z),[s,a]}offsetXY(e){let[r,i]=(()=>{let a=this.html.mainCanvas,u=e.target;if("offsetX"in e){let l=a.getBoundingClientRect(),p=e.offsetX,d=e.offsetY;if(p===0&&d===0){let h=e;"_savedOffsetX"in h?(p=h._savedOffsetX,d=h._savedOffsetY,u=h._savedTarget):"layerX"in e&&(p=h.layerX+l.x,d=h.layerY+l.y)}if(u===a)return[p,d];{let h=u.getBoundingClientRect();return[Math.max(z*2,p+h.x-l.x),Math.max(z*2,d+h.y-l.y)]}}else{let l=u.getBoundingClientRect(),p=document.body.getBoundingClientRect(),d=e.changedTouches[0],h=d.pageX-(l.left-p.left),m=d.pageY-(l.top-p.top);if(u===a)return[h,m];{let f=a.getBoundingClientRect();return[Math.max(z*2,h+l.x-f.x),Math.max(z*2,m+l.y-f.y)]}}})(),s=this._actualZoomFactor;return[r/s,i/s]}offsetXYForComponent(e,r){let i=this.offsetXY(e);if(r.orient===ie.default)return i;let[s,a]=i,u=s-r.posX,l=a-r.posY;switch(r.orient){case"e":return i;case"w":return[r.posX-u,r.posY-l];case"s":return[r.posX-l,r.posY-u];case"n":return[r.posX+l,r.posY+u]}}guessAdequateCanvasSize(e){let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=[...this.components.all()];for(let h of this.wireMgr.wires)u.push(...h.waypoints);for(let h of u){let m=h.posX,f=h.width,C=m-f/2,D=C+f;D>r&&(r=D),C<i&&(i=C);let b=h.posY,v=h.height,_=b-v/2,M=_+v;M>s&&(s=M),_<a&&(a=_)}i=Math.max(0,i);let l=r+i;isNaN(l)&&(l=300),a=Math.max(0,a);let p=a+s;isNaN(p)&&(p=150);let d=e?this._actualZoomFactor:1;return[d*l,d*p]}shareSheetForMode(e){return di(this,null,function*(){this._mode>cu&&(this._mode=cu);let r=dr[e].toLowerCase(),[i,s]=this.fullJsonStateAndCompressedForUri();console.log(`JSON:
`+i);let a=this.fullUrlForMode(e,s);this.html.embedUrl.value=a;let u=e===cu?"":`:mode: ${r}
`,l=this.guessAdequateCanvasSize(!0)[1],p=`\`\`\`{logic}
:height: ${l}
${u}
${i}
\`\`\``;this.html.embedMarkdown.value=p;let d=`<iframe style="width: 100%; height: ${l}px; border: 0" src="${a}"></iframe>`;this.html.embedIframe.value=d;let h=`<div style="width: 100%; height: ${l}px">
  <logic-editor mode="${dr[e].toLowerCase()}">
    <script type="application/json">
      ${i.replace(/\n/g,`
      `)}
    <\/script>
  </logic-editor>
</div>`;this.html.embedWebcomp.value=h,this.saveToUrl(s),Sh(this.html.embedDialog)||(tp(a)?console.log("  -> Copied!"):console.log("  -> Could not copy!"))})}saveCurrentStateToUrl(){let[e,r]=this.fullJsonStateAndCompressedForUri();console.log(`Saved to URL compressed version of:
`+e),this.saveToUrl(r)}save(){return ut.buildCircuitObject(this)}saveToUrl(e){this._isSingleton&&(history.pushState(null,"",this.fullUrlForMode(mc,e)),this.clearDirty(),this.showMessage(w.Messages.SavedToUrl))}fullJsonStateAndCompressedForUri(){let e=ut.buildCircuitObject(this),r=ut.stringifyObject(e,!1);ut.removeShowOnlyFrom(e);let i=ut.stringifyObject(e,!0),s=pu.compressToEncodedURIComponent(i);return[r,s]}fullUrlForMode(e,r){let i=window.location,s=this._options.showOnly===void 0?"":`&${ot.showonly}=${this._options.showOnly.join(",")}`,a=sm(),l=new URL(i.href).searchParams.get(ot.lang)===a?`&${ot.lang}=${a}`:"";return`${i.protocol}//${i.host}${i.pathname}?${ot.mode}=${dr[e].toLowerCase()}${l}${s}&${ot.data}=${r}`}toBase64(e){return new Promise((r,i)=>{if(e==null){r(void 0);return}let s=new FileReader;s.onloadend=()=>{let a=s.result,u=a.substring(a.indexOf(",")+1);r(u)},s.readAsDataURL(e)})}toPNG(e,r){return di(this,null,function*(){let i=yield new Promise(l=>{let[d,h]=this.guessAdequateCanvasSize(!1);r!==void 0&&(h=r),d*=3,h*=3;let m=new DOMMatrix("scale(3)"),f=document.createElement("canvas");f.width=d,f.height=h;let C=dn.getGraphics(f),D=bm();D&&Ri(!1,!1),this.doDrawWithContext(C,d,h,m,m,!0,!0),D&&Ri(!0,!1),f.toBlob(l,"image/png"),f.remove()});if(i===null)return;if(!e)return i;let s=this.fullJsonStateAndCompressedForUri()[1],a=new Uint8Array(yield i.arrayBuffer()),u=ii.extractChunks(a);return ii.insertMetadata(u,{tEXt:{Description:s}}),new Blob([ii.encodeChunks(u)],{type:"image/png"})})}toSVG(e){return di(this,null,function*(){let r=e?ut.stringifyObject(ut.buildCircuitObject(this),!1):void 0,[i,s]=this.guessAdequateCanvasSize(!1),a=new DOMMatrix,u=new Hr({width:i,height:s,metadata:r});this.doDrawWithContext(u,i,s,a,a,!0,!0);let l=u.getSerializedSvg();return Promise.resolve(new Blob([l],{type:"image/svg+xml"}))})}download(e,r){return di(this,null,function*(){let i=yield e;if(i===void 0)return;let s=this.documentDisplayName+r;(0,$2.saveAs)(i,s)})}recalcPropagateAndDrawIfNeeded(){if(this._nextAnimationFrameHandle!==null)return;let e=this.recalcMgr.recalcAndPropagateIfNeeded(),r=this.editTools.redrawMgr;this._editorRoot.wireMgr.isAddingWire&&r.addReason("adding a wire",null);let i=this._options.animateWires;r.getReasonsAndClear()===void 0&&!i||(this.doRedraw(),(i||r.hasReasons())&&(this._nextAnimationFrameHandle=requestAnimationFrame(()=>{this._nextAnimationFrameHandle=null,this.recalcPropagateAndDrawIfNeeded()})))}highlight(e){if(e===void 0){this._highlightedItems=void 0;return}Ae(e)&&(e=[e]);let r=[];for(let a of this.components.all())a.ref!==void 0&&e.includes(a.ref)&&r.push(a);let i=[];for(let a of this.wireMgr.wires)a.ref!==void 0&&e.includes(a.ref)&&i.push(a);if(r.length===0&&i.length===0){console.log(`Nothing to highlight for ref '${e}'`),this._highlightedItems=void 0;return}let s=this.timeline.unadjustedTime();this._highlightedItems={comps:r,wires:i,start:s},this.editTools.redrawMgr.addReason("highlighting component",null),this.recalcPropagateAndDrawIfNeeded()}redraw(){this.setCanvasSize(),this.editTools.redrawMgr.addReason("explicit redraw call",null),this.recalcPropagateAndDrawIfNeeded()}doRedraw(){var p;(p=this._topBar)==null||p.updateTimeLabelIfNeeded();let e=dn.getGraphics(this.html.mainCanvas),r=this.html.mainCanvas,i=this._baseDrawingScale,s=r.width/i,a=r.height/i,u=new DOMMatrix(`scale(${this._baseDrawingScale})`),l=u.scale(this._actualZoomFactor);this.doDrawWithContext(e,s,a,u,l,!1,!1)}doDrawWithContext(e,r,i,s,a,u,l){var I,k;e.setTransform(s),e.lineCap="square",e.textBaseline="middle",e.fillStyle=Je,l?e.clearRect(0,0,r,i):e.fillRect(0,0,r,i),e.setTransform(a);let p=c(S=>{let F=S.unrotatedWidth+15+15,q=S.unrotatedHeight+15+15;if(ie.isVertical(S.orient)){let te=F;F=q,q=te}return new DOMRect(S.posX-F/2,S.posY-q/2,F,q)},"highlightRectFor"),d=this._highlightedItems,h;if(d!==void 0){let q=this.timeline.unadjustedTime()-d.start,te=q<2e3?.4:.4*(1-(q-2e3)/200);if(te<=0)this._highlightedItems=void 0;else{e.beginPath();for(let se of d.comps){let le=p(se);e.moveTo(le.x,le.y),e.lineTo(le.right,le.y),e.lineTo(le.right,le.bottom),e.lineTo(le.x,le.bottom),e.closePath()}h=`rgba(238,241,0,${te})`,e.shadowColor=h,e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillStyle=h,e.fill(),e.shadowBlur=0,this.editTools.redrawMgr.addReason("highlight animation",null)}}let m=this.editTools.moveMgr;if(m.areDrawablesMoving()){e.beginGroup("grid");let S=r/this._actualZoomFactor,H=i/this._actualZoomFactor,F=z;e.strokeStyle=Yu,e.lineWidth=1,e.beginPath();for(let q=F;q<S;q+=F)e.moveTo(q,0),e.lineTo(q,i);for(let q=F;q<H;q+=F)e.moveTo(0,q),e.lineTo(r,q);e.stroke(),e.endGroup()}let C=m.getSingleMovingWaypoint();if(C!==void 0){e.beginGroup("guides");let S=C.getPrevAndNextAnchors();e.strokeStyle=Ku,e.lineWidth=1.5,e.beginPath();for(let H of S)e.moveTo(H.posX,0),e.lineTo(H.posX,i),e.moveTo(0,H.posY),e.lineTo(r,H.posY);e.stroke(),e.endGroup()}if(!u&&(this._mode>=2||this._maxInstanceMode===mc)){if(e.beginGroup("border"),e.setTransform(s),e.strokeStyle=ju,e.lineWidth=2,this._maxInstanceMode===mc&&this._mode<this._maxInstanceMode){e.strokeRect(0,0,r,i);let S=this.guessAdequateCanvasSize(!0)[1];Ho(e,0,S,r,S),e.fillStyle=Xu,e.fillRect(0,S,r,i-S)}else{let S=this.html.mainCanvas.getBoundingClientRect().x,[H,F]=(k=(I=this._topBar)==null?void 0:I.getActiveTabCoords())!=null?k:[0,0];e.beginPath(),e.moveTo(H-S,0),e.lineTo(0,0),e.lineTo(0,i),e.lineTo(r,i),e.lineTo(r,0),e.lineTo(F-S,0),e.stroke()}e.setTransform(a),e.endGroup()}let D=this.timeline.logicalTime(),b=this._options.animateWires?D/1e3%1:void 0;e.strokeStyle=oe;let v=this.eventMgr.currentMouseOverComp,_={drawTime:D,drawTimeAnimationFraction:b,currentMouseOverComp:v,highlightedItems:d,highlightColor:h,currentSelection:void 0,anythingMoving:m.areDrawablesMoving()},M=this.eventMgr.currentSelection;_.currentSelection=M;let A=c(S=>{e.beginGroup(S.constructor.name);try{S.draw(e,_);for(let H of S.allNodes())H.draw(e,_)}finally{e.endGroup()}},"drawComp"),E=this._editorRoot;e.beginGroup("background");for(let S of E.components.withZIndex(Xo.Background))A(S);e.endGroup(),e.beginGroup("wires"),E.wireMgr.draw(e,_),e.endGroup(),e.beginGroup("components");for(let S of E.components.withZIndex(Xo.Normal))A(S);e.endGroup(),e.beginGroup("overlays");for(let S of E.components.withZIndex(Xo.Overlay))A(S);e.endGroup();let B;M!==void 0&&(B=M.currentlyDrawnRect)!==void 0&&(e.beginGroup("selection"),e.lineWidth=1.5,e.strokeStyle="rgb(100,100,255)",e.fillStyle="rgba(100,100,255,0.2)",e.beginPath(),e.rect(B.x,B.y,B.width,B.height),e.stroke(),e.fill(),e.endGroup())}cut(){console.log("cut")}copy(){var s,a;if(this.eventMgr.currentSelectionEmpty())return!1;let e=[];for(let u of(a=(s=this.eventMgr.currentSelection)==null?void 0:s.previouslySelectedElements)!=null?a:[])u instanceof Re&&e.push(u);let r=ut.buildComponentsAndWireObject(e,[this.mouseX,this.mouseY]);if(r.components===void 0&&r.wires===void 0)return!1;let i=ut.stringifyObject(r,!1);return console.log(`Copied:
`+i),tp(i),this.focus(),!0}paste(){let e=Mh();if(e===void 0)return;let r=ut.pasteComponents(this,e);if(Ae(r))console.log(r);else{let i=new ri(void 0);for(let s of r)i.toggle(s);this.eventMgr.currentSelection=i}this.focus()}wrapHandler(e){return(...r)=>{let i=e(...r);return this.recalcPropagateAndDrawIfNeeded(),i}}static decodeFromURLOld(e){return decodeURIComponent(atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/%3D/g,"=")))}static getGraphics(e){let r=e.getContext("2d");return r.createPath=i=>new Path2D(i),r.beginGroup=()=>{},r.endGroup=()=>{},r}},Bn=dn;c(Bn,"LogicEditor"),Bn._globalListenersInstalled=!1,Bn._allConnectedEditors=[];var gc=class{constructor(n){this.template=n;this.tests=new Ya;this.Serialization=ut}highlight(n,e){Ae(n)&&(n=[n]);for(let r of n){let i=document.getElementById("logic_"+r);if(i===null){console.log(`Cannot find logic diagram with reference '${r}'`);return}if(!(i instanceof Bn)){console.log(`Element with id '${r}' is not a logic editor`);return}i.highlight(e)}}printUndoStack(){var n;(n=this.singleton)==null||n.editTools.undoMgr.dump()}setDarkMode(n){if(n==="auto")n=window.matchMedia("(prefers-color-scheme: dark)").matches;else if(n==="false")n=!1;else if(Ae(n)){let e=wm(n);if(e!==void 0){let r=e[3]===255?`rgb(${e[0]}, ${e[1]}, ${e[2]})`:`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`;console.log(`Will use new background color '${r}'`)}}Ri(!!n,!0)}};c(gc,"LogicStatic");if(Su){let o=(()=>{let n=document.createElement("template");n.innerHTML=Ed;let e=[Td,Rd];return n.content.querySelector("#inlineStyle").innerHTML=e.join(`


`),n.content.querySelectorAll("i.svgicon").forEach(r=>{var a;let i=r,s=(a=i.dataset.icon)!=null?a:"question";zf(s)?i.innerHTML=an(s):console.log(`Unknown icon name '${s}'`)}),n})();window.Logic=new gc(o),window.customElements.define("logic-editor",Bn),document.addEventListener("toggle",n=>{n.target instanceof HTMLDetailsElement&&n.target.open&&n.target.querySelectorAll("logic-editor").forEach(e=>{e instanceof Bn&&e.redraw()})},!0)}else console.log("cli");})();
//# sourceMappingURL=bundle.js.map
